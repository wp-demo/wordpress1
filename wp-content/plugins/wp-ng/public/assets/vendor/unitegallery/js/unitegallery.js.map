{"version":3,"sources":["unitegallery.js"],"names":["debugLine","html","addRandom","addHtml","output","name","value","Math","random","objLine","jQuery","width","height","currentHtml","show","debugSide","obj","trace","str","console","log","UGFunctions","g_browserPrefix","t","this","g_temp","starTime","arrThemes","isTouchDevice","isRgbaSupported","timeCache","dataCache","lastEventType","lastEventTime","lastTouchStartElement","touchThreshold","handle","debugVar","z__________FULL_SCREEN___________","toFullscreen","element","fullscreenID","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","isFullScreen","document","cancelFullScreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","addEvent","evnt","elem","func","addEventListener","attachEvent","addFullScreenChangeEvent","destroyFullScreenChangeEvent","unbind","getFullScreenElement","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","fullscreen","mozFullScreen","webkitIsFullScreen","z__________GET_PROPS___________","getBrowserPrefix","arrayOfPrefixes","div","createElement","index","prefix","style","toLowerCase","getImageInsideParentDataByImage","objImage","scaleMode","objPadding","objParent","parent","objOrgSize","getImageOriginalSize","objData","getImageInsideParentData","originalWidth","originalHeight","maxWidth","maxHeight","objOutput","padding_left","padding_right","padding_top","padding_bottom","imageWidth","imageHeight","imageTop","imageLeft","ratio","round","floor","imageRight","imageBottom","getElementCenterPosition","objSize","getElementSize","objSizeParent","parentWidth","parentHeight","undefined","left","top","getElementCenterPoint","includeParent","x","y","getMousePosition","event","pageX","pageY","clientX","clientY","originalEvent","touches","length","elementPos","offset","mouseX","mouseY","getMouseElementPoint","point","newPoint","elementPoint","getElementLocalPoint","htmlImage","Error","naturalWidth","data","newImg","Image","src","complete","naturalHeight","getimageRatio","originalSize","size","isImageFitParent","sizeImage","sizeParent","position","outerHeight","outerWidth","right","bottom","isElementBiggerThenParent","objSizeElement","isPointInsideElement","isMouseXInside","isMouseYInside","getElementRelativePos","pos","elementSize","parentSize","z_________SET_ELEMENT_PROPS_______","zoomImageInsideParent","zoomIn","step","maxZoomRatio","zoomRatio","objOriginalSize","isMouseInside","newHeight","newWidth","panX","panY","newX","newY","panOrientX","panOrientY","pointImg","imgCenterPoint","objScaleData","scaleImageFitParent","expectedZoomRatio","setElementSize","posCenter","placeElement","offsetLeft","offsetTop","isNumeric","objCss","margin","css","placeElementInParentCenter","setElementSizeAndPosition","cloneElementSizeAndPos","objSource","objTarget","isOuter","offsetX","offsetY","placeImageInsideParent","urlImage","escapeDoubleSlash","children","scaleImageCoverParent","pHeight","fitHeight","fitWidth","posy","posx","updateCss","removeAttr","scaleImageByHeight","scaleImageByWidth","scaleImageExactSizeInParent","exactWidth","exactHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","totalWidth","diff","totalHeight","objReturn","showElement","element2","element3","fadeTo","z_________GALLERY_RELATED_FUNCTIONS_______","disableButton","objButton","className","isButtonDisabled","addClass","convertCustomPrefixOptions","objOptions","base","modifiedOptions","each","key","option","indexOf","newKey","replace","enableButton","removeClass","hasClass","z_________MATH_FUNCTIONS_______","normalizeSetting","realMin","realMax","settingMin","settingMax","fixBounds","getNormalizedValue","realValue","getDistance","x1","y1","x2","y2","distance","sqrt","abs","getMiddlePoint","getNumItemsInSpace","spaceSize","itemsSize","gapSize","numItems","getNumItemsInSpaceRound","getSpaceByNumItems","itemSize","space","getItemSizeInSpace","getColX","col","colWidth","colGap","getColByIndex","numCols","getColRowByIndex","row","getIndexByRowCol","getPrevRowSameColIndex","prevIndex","getNextRowSameColIndex","nextIndex","z_________DATA_FUNCTIONS_______","setGlobalData","body","getGlobalData","z_________EVENT_DATA_FUNCTIONS_______","handleScrollTop","storedEventID","getStoredEventData","horPass","vertPass","scrollDir","diffMouseX","diffMouseY","scrollStartY","lastMouseClientY","scrollOrigin","scrollTop","currentScroll","scrollPos","wasVerticalScroll","storeEventData","id","addData","mousePos","time","now","startTime","lastTime","startMouseX","startMouseY","lastMouseX","lastMouseY","startMouseClientY","extend","updateStoredEventData","isVertical","diffMouseClientY","diffTime","startMousePos","lastMousePos","diffMousePos","isApproveStoredEventClick","passedDistanceAbs","clearStoredEventData","z_________CHECK_SUPPORT_FUNCTIONS_______","isCanvasExists","canvas","getContext","isScrollbarExists","hasScrollbar","window","innerWidth","documentElement","clientWidth","createEvent","e","scriptElement","getElementsByTagName","prevColor","color","result","z_________GENERAL_FUNCTIONS_______","checkMinJqueryVersion","version","arrCurrent","fn","jquery","split","arrMin","i","len","numCurrent","parseInt","numMin","getCssSizeParam","sizeParam","convertHexToRGB","hexInput","opacity","hex","r","substring","g","b","timestampToString","stamp","d","Date","getDate","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","getArrTouches","arrTouches","getArrTouchPositions","arrOutput","push","startTimeDebug","showTimeDebug","endTime","Time Passed","initProgressIndicator","type","options","g_objProgress","UGProgressBar","putHidden","UGProgressPie","type_fill","setButtonMobileReady","on","stopPropagation","stopImmediatePropagation","registerTheme","themeName","getArrThemes","isThemeRegistered","theme","inArray","getFirstRegisteredTheme","isTimePassed","handlerName","timeLimit","currentTime","hasOwnProperty","whenContiniousEventOver","onEventOver","clearTimeout","setTimeout","validateClickTouchstartEvent","eventType","returnVal","addClassOnHover","hover","destroyButton","off","setButtonOnClick","onClickFunction","objThis","setButtonOnTap","objElement","trigger","is","timePassed","loadJs","url","addProtocol","location","protocol","tag","firstScriptTag","parentNode","insertBefore","loadCss","setAttribute","appendChild","checkImagesLoaded","objImages","onComplete","onProgress","arrImages","counter","numImages","checkComplete","image","isError","proxyImage","attr","waitForWidth","setInterval","clearInterval","arrayShuffle","arr","j","getObjectLength","object","num","item","normalizePercent","percent","stripTags","text","htmlentitles","z_________END_GENERAL_FUNCTIONS_______","g_ugFunctions","define","amd","exports","module","s","a","h","call","arguments","u","f","fix","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","c","m","max","l","deltaFactor","unshift","o","n","dispatch","apply","settings","adjustOldDeltas","documentMode","Array","prototype","slice","fixHooks","mouseHooks","special","mousewheel","setup","onmousewheel","getLineHeight","getPageHeight","teardown","removeEventListener","bind","unmousewheel","factory","$","require","easing","pow","sin","cos","PI","c1","c2","c3","c4","c5","bounceOut","n1","d1","def","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","cssHooks","parseFloat","isNaN","mod","_rgba","re","exec","parse","cache","join","transparent","Color","rgba","props","red","idx","green","blue","hsla","hue","saturation","lightness","byte","degrees","p","support","cssText","backgroundColor","alpha","nodeType","_default","to","from","_space","pop","transition","blend","map","toRgbaString","toHslaString","toHexString","toString","min","_hsla","empty","hook","set","fx","colorInit","start","end","borderColor","expand","names","aqua","black","fuchsia","gray","lime","maroon","navy","olive","purple","silver","teal","white","yellow","contents","error","mousemove","mlp","find","ismouseover","eq","UGThumbsGeneral","g_objThis","g_gallery","UniteGalleryMain","g_objGallery","g_objects","g_objWrapper","g_arrItems","g_objStrip","g_objParent","g_functions","g_strip","outer_options","GET_THUMBS_ALL","GET_THUMBS_RATIO","GET_THUMBS_NO_RATIO","GET_THUMBS_NEW","events","SETOVERSTYLE","SETNORMALSTYLE","SETSELECTEDSTYLE","PLACEIMAGE","AFTERPLACEIMAGE","IMAGELOADERROR","THUMB_IMAGE_LOADED","g_options","thumb_width","thumb_height","thumb_fixed_size","thumb_resize_by","thumb_border_effect","thumb_border_width","thumb_border_color","thumb_over_border_width","thumb_over_border_color","thumb_selected_border_width","thumb_selected_border_color","thumb_round_corners_radius","thumb_color_overlay_effect","thumb_overlay_color","thumb_overlay_opacity","thumb_overlay_reverse","thumb_image_overlay_effect","thumb_image_overlay_type","thumb_transition_duration","thumb_transition_easing","thumb_show_loader","thumb_loader_type","thumb_wrapper_as_link","thumb_link_newpage","touchEnabled","num_thumbs_checking","customThumbs","funcSetCustomThumbHtml","isEffectBorder","isEffectOverlay","isEffectImage","colorOverlayOpacity","thumbInnerReduce","allowOnResize","classNewThumb","g_serviceParams","timeout_thumb_check","thumb_max_check_times","eventSizeChange","init","gallery","customOptions","getObjects","_____________EXTERNAL_SETTERS__________","appendHtmlThumbFromItem","itemIndex","imageEffectClass","objItem","classAddition","zIndex","thumbStyle","htmlThumb","urlLink","link","linkTarget","objThumbWrapper","objThumbImage","loaderClass","append","objImageOverlay","clone","appendTo","setHtmlThumbs","isAppend","getImageEffectsClass","getNumItems","objThumbs","getThumbs","arrNewIndexes","getNewAddedItemsIndexes","_______________SETTERS______________","setThumbSize","objThumb","innerOnly","objCssInner","selectorsString","setThumbBorderEffect","borderWidth","noAnimation","isFakeFullscreen","objBorderOverlay","hide","stop","fadeOut","fadeIn","animateThumb","setThumbColorOverlayEffect","isActive","objOverlay","animationDuration","setThumbImageOverlayEffect","setThumbNormalStyle","fromWhere","isSet","setThumbOverStyle","setThumbSelectedStyle","setItemThumbLoadedError","getItemByThumb","isLoaded","isThumbImageLoaded","setThumbsBorderRadius","border-radius","objThumbCss","animate","duration","queue","redrawThumbStyle","isThumbSelected","placeThumbImage","imageSize","copyPositionToThumbOverlayImage","objImageBW","siblings","_______________GETTERS______________","arrEffects","effect","_______________EVENTS______________","onThumbSizeChange","temp","onMouseOver","onMouseOut","onImageLoaded","isForce","parents","triggerImageLoadedEvent","onThumbImageLoaded","thumbWidth","thumbHeight","thumbRatioByWidth","thumbRatioByHeight","setHtmlProperties","colorRGB","setThumbSelected","setThumbUnselected","setOptions","setThumbInnerReduce","innerReduce","setCustomThumbs","funcSetHtml","arrAlowedEffects","allow_onresize","_____________EXTERNAL_GETTERS__________","getOptions","getNumThumbs","numThumbs","getThumbImage","getThumbByIndex","mode","thumbClass","classRatio","not","arrItem","isThumbLoaded","getGlobalThumbSize","_____________EXTERNAL_OTHERS__________","initEvents","selectorThumb","destroy","loadThumbsImages","hideThumbs","UGThumbsStrip","g_objStripInner","g_aviaControl","g_touchThumbsControl","g_isVertical","g_thumbs","strip_vertical_type","strip_thumbs_align","strip_space_between_thumbs","strip_thumb_touch_sensetivity","strip_scroll_to_thumb_duration","strip_scroll_to_thumb_easing","strip_control_avia","strip_control_touch","strip_padding_top","strip_padding_bottom","strip_padding_left","strip_padding_right","isRunOnce","is_placed","isNotFixedThumbs","g_sizes","stripSize","stripActiveSize","stripInnerSize","thumbSize","thumbSecondSize","STRIP_MOVE","INNER_SIZE_CHANGE","g_defaultsVertical","setHtml","parent_container","___________GENERAL___________","initStrip","attachThumbsPanel","onAfterSetOptions","thumbsOptions","runStrip","initSizeParams","fixSize","positionThumbs","UGTouchThumbsControl","UGAviaControl","checkControlsEnableDisable","storeStripSize","arrThumbs","firstThumb","thumbsRealWidth","thumbsRealHeight","thumbs_options","setInnerStripSize","innerSize","innerStripSize","objCssStrip","scrollBy","scrollStep","innerPos","getInnerStripPos","finalPos","fixInnerStripLimits","positionInnerStrip","scrollToThumbMin","objThumbPos","getThumbPos","scrollToThumbMax","scrollToThumb","isStripMovingEnabled","objBounds","getThumbsInsideBounds","minPosThumbs","prevThumb","prev","maxPosThumbs","nextThumb","next","scrollToSelectedThumb","selectedItem","getSelectedItem","checkAndRepositionInnerStrip","posFixed","isMovingEndbled","enable","disable","alignInnerStrip","___________EVENTS___________","onThumbClick","isTouchMotionActive","isSignificantPassed","selectItem","onThumbPlaced","onItemChange","clickedThumb","ITEM_CHANGE","____________GETTERS___________","objPos","________EXTERNAL_GENERAL___________","run","isAnimate","objPosition","triggerStripMoveEvent","progress","always","isTouchActive","isItemThumbVisible","thumbPos","posMin","posMax","thumbPosMin","thumbPosMax","isVisible","getInnerStripLimits","maxPos","minPos","distPos","objLimits","scrollForeward","scrollBack","________EXTERNAL_SETTERS___________","setSizeVertical","setSizeHorizontal","innerLeft","setPosition","resize","newSize","________EXTERNAL_GETTERS___________","commonOpitions","getObjThumbs","getSelectedThumb","selectedIndex","getSelectedItemIndex","getSizeAndPosition","getHeight","stripHeight","getWidth","stripWidth","getSizes","isPlaced","isMoveEnabled","isEnabled","g_parent","touch_portion_time","thumb_touch_slowFactor","minDeltaTime","minPath","limitsBreakAddition","returnAnimateSpeed","animationEasing","returnAnimationEasing","touch_active","loop_active","startPos","buttonReleaseTime","lastPos","lastPortionPos","lastDeltaTime","lastDeltaPos","speed","isControlEnabled","objStrip","setServiceParams","getActionVars","passedTime","lastActiveTime","passedDistance","objVars","getMouseOrientPosition","handleStripDrag","path","storeInitTouchValues","pagePos","currentInnerPos","storeTouchPortionData","deltaTime","continueTouchMotion","slowFactor","deltaPos","dir","innerStripPos","newPos","correctPos","doQueue","returnPos","maxStopPos","correctPath","animateSpeed","animateProps","onAnimateProgress","returnAnimateProps","startStripTouchLoop","endStripTouchLoop","onTouchEnd","preventDefault","onTouchStart","onTouchMove","buttons","add","UGPanelsBase","g_panel","g_objPanel","g_objHandle","g_tempArg","g_panelArg","g_objThisArg","g_objPanelArg","panelType","enable_handle","strippanel_enable_handle","gridpanel_enable_handle","UGPanelHandle","isDisabledAtStart","disabledAtStartTimeout","placeElements","placeHandle","SLIDER_ACTION_START","hideHandle","SLIDER_ACTION_END","showHandle","placePanelAnimation","panelDest","functionOnComplete","orientation","placePanelNoAnimation","onPanelSlideFinish","FINISH_MOVE","openPanel","isClosed","OPEN_PANEL","originalPos","closePanel","getClosedPanelDest","CLOSE_PANEL","setClosedState","setOpenedState","objPanelSize","panelWidth","gallerySize","getSize","panelHeight","isPanelClosed","setDisabledAtStart","timeout","g_objHandleTip","g_panelOptions","panel_handle_align","panel_handle_offset","panel_handle_skin","panel","objPanel","panelOptions","gridpanel_handle_align","gridpanel_handle_offset","gridpanel_handle_skin","strippanel_handle_align","strippanel_handle_offset","strippanel_handle_skin","galleryOptions","globalSkin","gallery_skin","getOrientation","classTip","removeHoverState","removeClosedState","onHandleClick","checkAndFixAlign","handleSize","UGStripPanel","g_panelBase","g_objButtonNext","g_objButtonPrev","strippanel_vertical_type","strippanel_padding_top","strippanel_padding_bottom","strippanel_padding_left","strippanel_padding_right","strippanel_enable_buttons","strippanel_buttons_skin","strippanel_padding_buttons","strippanel_buttons_role","strippanel_background_color","g_defaults_vertical","g_defaults_no_buttons","isEventsInited","isFirstRun","initPanel","repeatCustomOptions","getElement","validatePanelBeforeRun","runPanel","setElementsSize","checkSideButtons","setPanelHtml","parentContainer","arrowPrevClass","arrowNextClass","setElementsSize_hor","prevTip","nextTip","buttonWidth","setElementsSize_vert","buttonHeight","placeElements_hor","stripX","placeElements_vert","stripY","__________EVENTS___________","onNextButtonClick","nextItem","onPrevButtonClick","prevItem","limits","onStripMove","isLastItem","isFirstItem","SIZE_CHANGE","gallery_carousel","setOrientation","setWidth","setHeight","__________Functions_From_Base_____","UGGridPanel","g_objGrid","UGThumbsGrid","g_objArrowNext","g_objArrowPrev","gridpanel_vertical_scroll","gridpanel_grid_align","gridpanel_padding_border_top","gridpanel_padding_border_bottom","gridpanel_padding_border_left","gridpanel_padding_border_right","gridpanel_arrows_skin","gridpanel_arrows_align_vert","gridpanel_arrows_padding_vert","gridpanel_arrows_align_hor","gridpanel_arrows_padding_hor","gridpanel_space_between_arrows","gridpanel_arrows_always_on","gridpanel_background_color","g_defaultsHorType","isHorType","arrowsVisible","originalPosX","initGridPanel","validateOrientation","vertical_scroll","grid_panes_direction","objects","processOptions","setArrows","setPanelSize","setHtmlPanel","panelX","getGridMaxHeight","spaceTaken","maxGridHeight","numPanes","getNumPanesEstimationByHeight","arrowsSize","arrowsHeight","getGridMaxWidth","maxGridWidth","getNumPanesEstimationByWidth","arrowsWidth","showArrows","getNumPanes","gridSize","attachPrevPaneButton","attachNextPaneButton","______PLACE_ELEMENTS___________","getGridPaddingLeft","gridPanelLeft","placeElements_noarrows","gridY","gridPaddingY","gridElement","placeElementsVert_arrows","prevArrowY","nextArrowY","nextArrowPaddingY","objArrowSize","objGridSize","gridpanel_arrows_padding_vert_vert","placeElementsVert","placeElementsHor_arrows","arrowsY","prevArrowPadding","arrowsPaddingY","nextArrowPadding","elementsHeight","remainHeight","placeElementsHor","placeElementsHorType_arrows","gridX","prevArrowX","nextArrowX","placeElementHorType_noarrows","placeElementsHorType","gridMaxHeight","setMaxHeight","gridMaxWidth","setMaxWidth","g_objInner","g_tilesDesign","UGTileDesign","grid_num_cols","grid_min_cols","grid_num_rows","grid_space_between_cols","grid_space_between_rows","grid_space_between_mobile","grid_transition_duration","grid_transition_easing","grid_carousel","grid_padding","grid_vertical_scroll_ondrag","PANE_CHANGE","isHorizontal","isMaxHeight","isMaxWidth","gridHeight","gridWidth","innerHeight","arrPanes","currentPane","numThumbsInPane","isNavigationVertical","touchActive","startScrollPos","isFirstTimeRun","isTilesMode","tileMaxWidth","tileMaxHeight","spaceBetweenCols","spaceBetweenRows","__________GENERAL_________","setFixedMode","setApproveClickFunction","isApproveTileClick","options_td","tile_height","tile_width","validateBeforeRun","initGridDynamicSize","isChanged","objTiles","tile","getThumbsSize","objThumbSize","getGlobalTileSize","isMobile","isMobileMode","spaceOld","lastThumbSize","lastThumbWidth","tileWidth","setTileSizeOptions","initSizeParamsHor","thumbsHeight","initSizeParamsVert","thumbsWidth","thumbIndex","paneIndex","getPaneIndexByThumbIndex","gotoPane","positionThumb_hor","baseX","maxx","maxy","endY","endX","positionThumb_vert","paneStartY","endy","paneMaxY","positionThumb_hortype","baseY","gridMaxY","rowsCounter","validateThumbIndex","validatePaneIndex","validateInnerPos","absPos","setInnerPos","getInnerPosObj","animateInnerTo","animateToCurrentPane","__________GETTERS_________","getInnerSize","getPaneSize","getMousePos","getInnerPos","numPane","getPanePosition","startInnerPos","isMovementValidForChange","diffPos","paneSize","breakSize","isApprove","__________EVENTS_______","isScroll","direction","lastPaneSize","isLastPane","nextPane","isFirstPane","prevPane","__________EXTERNAL_GENERAL_________","__________EXTERNAL_API_________","numRows","ceil","getHeightEstimationByWidth","getPaneInfo","pane","total","getPane","nextPaneIndex","prevPaneIndex","attachBullets","objBullets","setActive","BULLET_CLICK","numBullet","getObjTileDesign","UGTiles","g_objTileDesign","g_vars","g_arrNestedGridRow","g_arrNestedItems","tiles_type","tiles_col_width","tiles_align","tiles_exact_width","tiles_space_between_cols","tiles_space_between_cols_mobile","tiles_include_padding","tiles_min_columns","tiles_max_columns","tiles_keep_order","tiles_set_initial_height","tiles_justified_row_height","tiles_justified_space_between","tiles_nested_optimal_tile_width","tiles_nested_col_width","tiles_nested_debug","tiles_enable_transition","THUMB_SIZE_CHANGE","TILES_FIRST_PLACED","ALL_TILES_LOADED","isTransActive","isTransInited","isFirstPlaced","isAllLoaded","g_nestedWork","nestedOptimalCols","maxColumns","columnsValueToEnableHeightResize","resizeLeftRightToColumn","currentItem","currentGap","optimalTileWidth","maxGridY","modifyOptions","tilesType","setTransition","optionsTile","tile_enable_image_effect","tile_image_effect_reverse","getParentWidth","doBeforeTransition","disableEvents","doAfterTransition_setClasses","doAfterTransition","enableEvents","triggerSizeChangeEventAllTiles","__________COLUMN_TYPE_RELATED_________","fillTilesVars_countWidthByCols","availWidth","fillTilesVars","minCols","maxCols","galleryWidth","addX","arrPosx","colX","initColHeights","maxColHeight","colHeights","getTilesMinCol","numCol","minHeight","placeTile","objTile","toShow","setGalleryHeight","itemHeight","getTileHeightByWidth","realHeight","placeTiles","resizeAllTiles","resizemode","VISIBLE_ELEMENTS","galleryHeight","isOrderedTilePlaceAlowed","getItem","ordered_placed","objPrevItem","placeOrderedTile","isAlowed","resizeTile","nextTile","onSingleImageLoad","runColumnsType","diffWidth","estimateHeight","initNumCols","initWidth","triggerEvent","__________JUSTIFIED_TYPE_RELATED_________","getJustifiedData","rowHeightOpt","arrWidths","gap","numTiles","tileHeight","finalRowWidth","arrRows","eachRowWidth","rowsWidths","rowsTiles","progressWidth","numRow","arrRowWidths","arrRowHeights","rowWidth","gapWidth","rowHeight","ratioHeights","arrRowTileWidths","actualRowWidth","indexInRow","tileIndex","newTotal","placeJustified","parentWidthAfter","runJustifiedType","__________NESTED_TYPE_RELATED_________","runNestedType","placeNestedImages","fillNestedVars","sizes","setNestedSize","placeNestedImagesCycle","drawNestedImages","dimWidth","dimHeight","objImageSize","getTileImageSize","maxDim","getPresettedRandomByWidth","imgWidth","imgHeight","placeNestedImagesDebug","placeOne","placeNestedImage","drawNestedImage","tileID","rowsValue","column","isGridRowExists","isGridCellTaken","totalFree","getTotalFreeFromPosition","calculateOptimalStretchAndPosition","currentWidth","placeForNextImage","optimalWidth","onlyCurrentImage","resizeToNewWidth","isGridImageAligned","columnInfo","getGridColumnHeight","sideHelper","getGridImageVerticalDifference","columnSizes","resizeToNewHeight","columnResizes","redistributeColumnItems","columnCrosshairs","getColumnCrosshairsCount","disableColumnResizes","sideResizes","getSideResizeInfo","idToResize","sideResizesVal","calcResizeRatio","columnResizesVal","applyResizes","putImageToGridRow","tilesAndSizes","crosshairsCountR","crosshairsCountL","topItem","bottomItem","currentTile","tileLeft","tileTop","tileDimTop","tileDimLeft","newSideHeight","sideSizes","resizeTilesAndSizes","columnWidth","columnHeight","cordX","cordY","tempHeight","tempY","curImage","prevImage","imagesIDs","toReturn","newHeightR","newHeightL","leftID","rightID","array","newDimWidth","newDimHeight","objTilesAndSizes","tempResizes","tempNum","resizeVal","addGridRow","setGridCellValue","Object","__________COMMON_AND_EVENTS_______","onResize","runNewItems","g_objParentWrapper","g_items","FULL","WRAPPER_ONLY","sizeby","GLOBAL_RATIO","TILE_RATIO","IMAGE_RATIO","CUSTOM","TILE_CLICK","tile_size_by","tile_visible_before_image","tile_enable_background","tile_background_color","tile_enable_border","tile_border_width","tile_border_color","tile_border_radius","tile_enable_outline","tile_outline_color","tile_enable_shadow","tile_shadow_h","tile_shadow_v","tile_shadow_blur","tile_shadow_spread","tile_shadow_color","tile_enable_action","tile_as_link","tile_link_newpage","tile_enable_overlay","tile_overlay_opacity","tile_overlay_color","tile_enable_icons","tile_show_link_icon","tile_videoplay_icon_always_on","tile_space_between_icons","tile_image_effect_type","tile_enable_textpanel","tile_textpanel_source","tile_textpanel_always_on","tile_textpanel_appear_type","tile_textpanel_position","tile_textpanel_offset","g_defaults","tile_textpanel_enable_description","tile_textpanel_bg_opacity","tile_textpanel_padding_top","tile_textpanel_padding_bottom","ratioByHeight","ratioByWidth","funcCustomTileHtml","funcCustomPositionElements","funcParentApproveClick","isSaparateIcons","tileInnerReduce","isTextpanelOutside","hasImageContainer","isVideoplayIconAlwaysOn","isTextPanelHidden","getArrItems","objCustomOptions","customThumbsAdd","setHtmlThumb","thumbOptions","tile_textpanel_align","tile_textpanel_margin","tile_textpanel_desc_style_as_title","modifyOptionsBeforeRender","classImage","imageAlt","title","urlThumb","htmlShadow","htmlAdd","iconPlayClass","toSaparateIcon","objButtonZoom","objButtonLink","imageEffectClassAdd","imageOverlayHtml","objTextPanel","UGTextPanel","textpanelAddClass","appendHTML","panelTitle","panelDesc","description","setTextPlain","textPanelElement","getTextPanelElement","htmlClone","objCloneWrapper","objTextPanelClone","loadTileImage","getTileImage","onPlaceImage","_________________GETTERS________________","getTileOverlayImage","objOverlayImage","getTileOverlay","getTileImageContainer","objImageContainer","getTileImageEffect","objImageEffect","getTextPanel","getTextPanelClone","getTextPanelCloneElement","getTextPanelHeight","getButtonLink","getTileRatio","getItemByTile","getButtonZoom","isOverStyle","isTileClickable","isItemIconAlwaysOn","_________________SETTERS________________","positionElements_images","visibleOnly","imagePosy","textHeight","dontResize","positionElements_textpanel","refresh","textPanelCloneSizeSet","isPosition","positionPanel","positionElements","sizeTile","overlayWidth","overlayHeight","overlayY","gapVert","objTextPanelElement","texPanelSize","sizeZoom","sizeLink","spaceBetween","buttonsWidth","buttonsX","setImageOverlayEffect","setTextpanelEffect","panelSize","endPos","startClass","endClass","posName","setIconsEffect","g_objIconZoom","g_objIconLink","setOverStyle","setNormalStyle","setAllTilesNormalStyle","objTileExcept","_________________EVENTS________________","onSizeChange","forcePosition","onMobileClick","onTileClick","tagname","prop","isApproved","onZoomButtonClick","onLinkButtonClick","thumb","textPanel","funcApprove","resizeMode","triggerSizeChangeEvent","newOptions","newTileWidth","setCustomFunctions","funcCustomHtml","funcPositionElements","newOnly","getMode","_____________EXTERNAL_GETTERS____________","isMouseInsideStrip","strip_finalPos","handle_timeout","isStripMoving","strip_touch_active","moveStripToMousePosition","stopStripMovingLoop","getInnerPosY","innerOffsetTop","innerOffsetBottom","stripOffset","mlineStart","mlineEnd","mLineSize","innerPosY","getInnerPosX","innerOffsetLeft","innerOffsetRight","innerPosX","moveStripStep","is_strip_moving","dpos","startStripMovingLoop","UGSlider","g_objThumbs","g_objSlider","g_objSlide1","g_objSlide2","g_objSlide3","g_objArrowLeft","g_objArrowRight","g_objTouchSlider","g_objZoomSlider","g_objZoomPanel","g_objButtonPlay","g_objButtonFullscreen","g_objBullets","g_objVideoPlayer","UGVideoPlayer","g_optionsPrefix","g_objTextPanel","ITEM_CHANGED","BEFORE_SWITCH_SLIDES","BEFORE_RETURN","AFTER_RETURN","ZOOM_START","ZOOM_END","ZOOMING","ZOOM_CHANGE","START_DRAG","AFTER_DRAG_CHANGE","ACTION_START","ACTION_END","CLICK","TRANSITION_START","TRANSITION_END","AFTER_PUT_IMAGE","IMAGE_MOUSEENTER","IMAGE_MOUSELEAVE","CURRENTSLIDE_LOAD_START","CURRENTSLIDE_LOAD_END","slider_scale_mode","slider_scale_mode_media","slider_scale_mode_fullscreen","slider_item_padding_top","slider_item_padding_bottom","slider_item_padding_left","slider_item_padding_right","slider_background_color","slider_background_opacity","slider_image_padding_top","slider_image_padding_bottom","slider_image_padding_left","slider_image_padding_right","slider_image_border","slider_image_border_width","slider_image_border_color","slider_image_border_radius","slider_image_border_maxratio","slider_image_shadow","slider_video_constantsize","slider_video_constantsize_scalemode","slider_video_constantsize_width","slider_video_constantsize_height","slider_video_padding_top","slider_video_padding_bottom","slider_video_padding_left","slider_video_padding_right","slider_video_enable_closebutton","slider_transition","slider_transition_speed","slider_transition_easing","slider_control_swipe","slider_control_zoom","slider_zoom_mousewheel","slider_vertical_scroll_ondrag","slider_loader_type","slider_loader_color","slider_enable_links","slider_links_newpage","slider_enable_bullets","slider_bullets_skin","slider_bullets_space_between","slider_bullets_align_hor","slider_bullets_align_vert","slider_bullets_offset_hor","slider_bullets_offset_vert","slider_enable_arrows","slider_arrows_skin","slider_arrow_left_align_hor","slider_arrow_left_align_vert","slider_arrow_left_offset_hor","slider_arrow_left_offset_vert","slider_arrow_right_align_hor","slider_arrow_right_align_vert","slider_arrow_right_offset_hor","slider_arrow_right_offset_vert","slider_enable_progress_indicator","slider_progress_indicator_type","slider_progress_indicator_align_hor","slider_progress_indicator_align_vert","slider_progress_indicator_offset_hor","slider_progress_indicator_offset_vert","slider_enable_play_button","slider_play_button_skin","slider_play_button_align_hor","slider_play_button_align_vert","slider_play_button_offset_hor","slider_play_button_offset_vert","slider_play_button_mobilehide","slider_enable_fullscreen_button","slider_fullscreen_button_skin","slider_fullscreen_button_align_hor","slider_fullscreen_button_align_vert","slider_fullscreen_button_offset_hor","slider_fullscreen_button_offset_vert","slider_fullscreen_button_mobilehide","slider_enable_zoom_panel","slider_zoompanel_skin","slider_zoompanel_align_hor","slider_zoompanel_align_vert","slider_zoompanel_offset_hor","slider_zoompanel_offset_vert","slider_zoompanel_mobilehide","slider_controls_always_on","slider_controls_appear_ontap","slider_controls_appear_duration","slider_enable_text_panel","slider_textpanel_always_on","slider_videoplay_button_type","g_defaultsProgressBar","isTextPanelSaparateHover","numPrev","numNext","isControlsVisible","currentControlsMode","__________GENERAL___________","initSlider","objGallery","optionsPrefix","UGBullets","bulletsOptions","bullets_skin","bullets_space_between","UGZoomButtonsPanel","galleryID","getGalleryID","runSlider","bgColor","UGTouchSliderControl","UGZoomSliderControl","video_enable_closebutton","gallery_mousewheel_role","getHtmlSlide","numSlide","classVideoplay","setHtmlSlider","getLoaderClass","finalType","getType","setProgressIndicator","panelElement","positionSlideElements","objSlide","objPreloader","getSlidePreloader","objVideoPlayButton","getSlideVideoPlayButton","hideControls","objProgressElement","sliderWidth","setSize","placeControlsElements","checkMobileModify","zoomPanelElement","positionSlides","slides","getSlidesReference","posX","posY","posXPrev","posXCurrent","posXNext","nextHasItem","prevHasItem","isSlideHasItem","objNextSlide","objPrevSlide","objCurrentSlide","resizeSlideItem","setItemToSlide","showPreloader","hidePreloader","getImageBorderWidth","imageData","totalSize","borderSize","borderRatio","setImageDesign","slideType","scaleImageConstantSize","constantWidth","constantHeight","setImageToSlide","objItemWrapper","currentImage","getScaleMode","getSlideType","getObjImagePadding","checkFillImageSize","objImageData","isBigImageLoaded","isSlideCurrent","onItemBigImageLoaded","removeData","currentIndex","fileName","showErrorMessageReplaceGallery","message","hideTextPanel","animationTime","showTextPanel","isHidden","validateSlideType","getCurrentSlide","__________VIDEO_PLAYER_______","setVideoPlayerPosition","getSlideImage","slideSize","setVideoPlayerConstantSize","videoWidth","videoHeight","videoElement","getObject","__________TRANSITION_______","doTransition","forceTransition","stopSlideAction","transitionFade","transitionSlide","switchSlideNums","currentNum","animating","isAnimating","itemWaiting","posPrev","destX","posNext","transSpeed","transEasing","animateParams","getSlideDirection","placeNabourItems","animateOpacity","completeFunction","noHidePlayer","objCurrentPos","__________CONTROLS_OBJECT_______","modifyForMobile","modifyForDesctop","getControlsObjects","objControl","objControls","checkAndShowControls","showControls","toggleControls","setControlsMode","arg_objItem","role","setItem","onBulletClick","bulletIndex","onClick","isTapEventOccured","onActualClick","currentSlide","isClickable","getCurrentItem","href","open","isCurrentSlideType","isCurrentSlideImageFit","onZoomChange","onMouseEnter","onMouseLeave","objVideoPlayClick","startSlideAction","onVideoPlayerShow","isPlayMode","pausePlaying","onVideoPlayerHide","continuePlaying","onItemImageUpdate","onSlideImageLoaded","objButtonVideoPlay","initSlideEvents","ITEM_IMAGE_UPDATED","setNextButton","setPrevButton","setPlayButton","setFullScreenToggleButton","SHOW","HIDE","isMouseOver","isMouseInsideSlideImage","__________GETTERS___________","getSlideByNum","getSlideItem","getNumSlide","isInnerInPlace","posCurrent","inPlaceX","objInnerSize","isAnimated","getCurrentItemIndex","getLastMousePos","currentSlideType","isCurrentSlideLoadingImage","isLoading","forseTransition","isFirstSlide","itemPrev","getPrevItem","itemNext","getNextItem","________EXTERNAL_API___________","isPause","pause","playYoutube","videoid","playVimeo","playHtml5Video","videoogv","videowebm","videomp4","playSoundCloud","trackid","playWistia","getObjZoom","getVideoObject","isFit","isCurrentImageInPlace","objFitSize","isSlideActionActive","isSwiping","isPreloading","objCssSlider","objCssSlide","itemWidth","objCssItemWrapper","setSizeByParent","refreshSlideItems","zoomOut","zoomBack","g_objTitle","g_objDesc","g_objBG","g_objTextWrapper","textpanel_align","textpanel_margin","textpanel_text_valign","textpanel_padding_top","textpanel_padding_bottom","textpanel_height","textpanel_padding_title_description","textpanel_padding_right","textpanel_padding_left","textpanel_fade_duration","textpanel_enable_title","textpanel_enable_description","textpanel_enable_bg","textpanel_bg_color","textpanel_bg_opacity","textpanel_title_color","textpanel_title_font_family","textpanel_title_text_align","textpanel_title_font_size","textpanel_title_bold","textpanel_css_title","textpanel_desc_color","textpanel_desc_font_family","textpanel_desc_text_align","textpanel_desc_font_size","textpanel_desc_bold","textpanel_css_description","textpanel_desc_style_as_title","textpanel_bg_css","isFirstTime","setInternalHeight","lastTitleBottom","lastDescHeight","positionElementsTop","animateHeight","startY","titleY","isTitleVisible","objTitleSize","textDesc","trim","descY","objDescSize","descHeight","getTotalTextHeight","positionElementsMiddle","totalTextHeight","positionElementBottom","currentHeight","setCss","objCssBG","background-color","objCssTitle","objCssDesc","setText","textWrapperWidth","textWrapperLeft","customTop","customLeft","noPosition","getOption","optionName","g_objButtonPlus","g_objButtonMinus","g_objButtonReturn","g_slider","objSlider","setObjects","objButtonPlus","objButtonMinus","objButtonReturn","g_numBullets","g_activeIndex","g_bulletWidth","isInited","bullets_addclass","numBullets","setHtmlBullets","objBullet","getBulletsWidth","validateInited","updateNumBullets","validateIndex","bullet","getNumBullets","g_isInited","g_percent","g_objBar","slider_progressbar_color","slider_progressbar_opacity","slider_progressbar_line_width","put","userOptions","objInnerHTML","filter","draw","setProgress","g_objPie","slider_progresspie_type_fill","slider_progresspie_color1","slider_progresspie_color2","slider_progresspie_stroke_width","slider_progresspie_width","slider_progresspie_height","radius","ctx","rotate","translate","clearRect","centerX","centerY","startPoint","endPoint","beginPath","moveTo","arc","lineTo","fillStyle","fill","closePath","globalCompositeOperation","radius2","slider_transition_continuedrag_speed","slider_transition_continuedrag_easing","slider_transition_return_speed","slider_transition_return_easing","startPosx","isInitDataValid","lastNumTouches","isDragging","videoStartX","isDragVideo","videoObject","getDiffPosFromCurrentItem","diffX","diffY","numTouches","returnToPlace","animation","number","remainingMS","innerX","posDiff","videoPosX","changeItem","continueSlideDragChange","isReturn","handleSliderDrag","objZoomSlider","isPanEnabled","storeInitTouchData","currentPosx","innerEnd","startArrTouches","disableTouchActive","who","enableTouchActive","isParentInPlace","isValid","slider_zoom_step","slider_zoom_max_ratio","slider_zoom_return_pan_duration","slider_zoom_return_pan_easing","isPanActive","startImageX","startImageY","panXActive","panYActive","objParentSize","storeImageLastTime","isZoomActive","startDistance","startMiddlePoint","imageOrientPoint","objFitImageSize","isZoomedOnce","initObject","getFitScaleMode","storeCurrentImage","zoomCurrentImage","isZoomed","____________PAN_____________","isPanPosible","stictTouchesCheck","storePanInitValues","startPan","panImage","diffLastX","diffLastY","directionX","directionY","posImage","imageX","imageY","checkReturnAfterPan","isReturnX","isReturnY","objImagePadding","objCenterPos","isImageAnimating","____________END_PAN_____________","________TOUCH_ZOOM_____________","startTouchZoom","isInsideImage","checkTouchZoomEnd","checkTouchZoomStart","doTouchZoom","middlePoint","diffMiddleX","diffMiddleY","checkReturnFromZoom","________END_TOUCH_ZOOM_____________","isStored","target","panWasActive","zoomWasActive","panPosible","onSliderMouseWheel","delta","________EXTERNAL_____________","UGWistiaAPI","isAPILoaded","g_intHandle","g_player","g_isPlayerReady","START_PLAYING","STOP_PLAYING","VIDEO_ENDED","isWistiaActive","Wistia","loadAPI","g_ugWistiaAPI","putVideoActually","divID","videoID","isAutoplay","htmlID","embed","container","autoPlay","doCommand","command","play","putVideo","isPlayerReady","UGSoundCloudAPI","g_lastContainerID","isSCActive","SC","g_ugSoundCloudAPI","putSoundActually","trackID","iframeID","Widget","Events","READY","PLAY","PAUSE","FINISH","putSound","UGHtml5MediaAPI","g_ugHtml5MediaAPI","isMediaElementActive","mejs","urlFlash","urlSilverlight","htmlAutoplay","htmlPoster","posterImage","mp4","webm","ogv","MediaElement","enablePluginDebug","flashName","silverlightName","success","mediaElement","domObject","objError","UGVimeoAPI","g_lastCotnainerID","g_cueChangeAutoplay","g_ugVimeoAPI","isFroogaloopActive","Froogaloop","iframe","api","changeVideo","getVideoImages","onSuccessFunction","get","preview","thumbnail_large","thumbnail_medium","UGYoutubeAPI","g_prevState","video_youtube_showinfo","playerVars","controls","showinfo","rel","autoplay","YT","Player","videoId","onReady","onPlayerReady","onStateChange","onPlayerStateChange","isYTActive","getPlayerState","state","PlayerState","PLAYING","ENDED","g_ugYoutubeAPI","opt1","playVideo","pauseVideo","seekTo","PAUSED","clearVideo","stopToBeginning","loadVideoById","cueVideoById","g_galleryID","g_youtubeAPI","g_vimeoAPI","g_html5API","g_soundCloudAPI","g_wistiaAPI","g_objPlayer","g_objYoutube","g_objVimeo","g_objHtml5","g_objButtonClose","g_objSoundCloud","g_objWistia","g_activePlayerType","PLAY_START","PLAY_STOP","standAloneMode","youtubeInnerID","vimeoPlayerID","html5PlayerID","wistiaPlayerID","soundCloudPlayerID","optOptions","isStandAloneMode","onCloseButtonClick","onPlayStart","onPlayStop","onVideoEnded","stopAndHidePlayers","getActiveAPI","activeAPI","except","arrPlayers","player","objYoutubeInner","unitegallery","UG_API","ugCheckForMinJQueryVersion","isMinJQuery","ugCheckForErrors","checkForJqueryPresents","checkForDoubleJQuery","errorMessage","getElementById","innerHTML","display","g_objTabs","g_objLoadMore","g_numItems","g_selectedItem","g_selectedItemIndex","g_objTheme","g_objCache","ENTER_FULLSCREEN","EXIT_FULLSCREEN","START_PLAY","STOP_PLAY","PAUSE_PLAYING","CONTINUE_PLAYING","GALLERY_KEYPRESS","GALLERY_BEFORE_REQUEST_ITEMS","OPEN_LIGHTBOX","CLOSE_LIGHTBOX","gallery_width","gallery_height","gallery_min_width","gallery_min_height","gallery_theme","gallery_images_preload_type","gallery_autoplay","gallery_play_interval","gallery_pause_on_mouseover","gallery_control_keyboard","gallery_preserve_ratio","gallery_background_color","gallery_debug_errors","gallery_shuffle","gallery_urlajax","gallery_enable_tabs","gallery_enable_loadmore","gallery_enable_cache","gallery_initial_catid","isAllItemsPreloaded","isFreestyleMode","lastWidth","lastHeigh","handleResize","isPlayModePaused","playTimePassed","playTimeLastStep","playHandle","playStepInterval","objProgress","thumbsType","isYoutubePresent","isVimeoPresent","isHtml5VideoPresent","isSoundCloudPresent","isWistiaPresent","resizeDelay","isRunFirstTime","originalOptions","funcCustomHeight","__________INIT_GALLERY_______","getThemeFunction","themeFunction","initTheme","defaultTheme","eval","resetOptions","checkForStartupErrors","throwErrorShowMessage","runGallery","htmlItems","cacheID","isCustomOptions","cacheItems","setSizeClass","objItems","fillItemsArray","loadAPIs","clearInitData","showErrorMessage","UGTabs","UGLoadMore","modifyInitParams","validateParams","shuffleItems","setGalleryHtml","setHtmlObjectsProperties","runGalleryActually","setHeightByOriginalRatio","preloadBigImages","startPlayMode","remove","storeLastSize","lastHeight","orig_ratio","optionWidth","max-width","min-width","fillItemByChild","objChild","itemLink","itemType","lasyLoadSrc","imageSrc","urlThumbMobile","urlImageMobile","isNewAdded","objPreloadImage","isBigImageLoadStarted","isBigImageLoadError","dataWidth","dataHeight","isImageMissing","isThumbMissing","objChildImage","objChildren","arrChildren","numIndex","preloadItemImage","checkPreloadItemImage","imageUrl","checkAllItemsStartedPreloading","preloadNearBigImages","lastItemIndex","nextItemIndex","setFreestyleMode","__________END_INIT_GALLERY_______","__________EVENTS_____________","onGalleryMouseWheel","onSliderMouseEnter","onSliderMouseLeave","isStillLoading","onKeyPress","keyCode","charCode","which","wasAction","onGalleryResized","heightWasSet","onThumbsChange","onFullScreenChange","isFullscreen","onItemImageUpdated","onCurrentSlideImageLoadEnd","sliderIndex","sliderElement","retriggerEvent","keydown","__________GENERAL_______","getObjSlider","orig_width","orig_height","forceCarousel","___________SET_CONTROLS___________","toggleFullscreen","destroyFullscreenButton","togglePlayMode","destroyPlayButton","setTextContainers","objTitle","objDescription","showDisabledOverlay","hideDisabledOverlay","___________END_SET_CONTROLS___________","htmlItemsArg","removeAllSizeClasses","objWrapper","newEvent","advanceNextStep","timeNow","timeDiff","isGalleryVisible","___________PLAY_MODE___________","resetPlaying","stopPlayMode","unselectSeletedItem","___________GENERAL_EXTERNAL___________","stillLoading","newItemIndex","toFakeFullScreen","exitFakeFullscreen","toFullScreen","divGallery","isSupported","exitFullScreen","noevent","isSmallWindow","windowWidth","changeItems","itemsContent","addItems","objNewItemsWrapper","arrIndexes","setFuncCustomHeight","__________EXTERNAL_EVENTS_______","arrParams","onEvent","destroyEvent","__________AJAX_REQUEST_______","ajaxRequest","action","successFunction","errorFunction","urlAjax","client_action","ajax","dataType","response","jqXHR","textStatus","errorThrown","responseText","requestNewItems","catID","checkCache","catid","objParams","debug_errors","lineNumber","stack","UGLightbox","g_objOverlay","g_objNumbers","g_objTopPanel","lightbox_type","lightbox_show_textpanel","lightbox_textpanel_width","lightbox_hide_arrows_onvideoplay","lightbox_arrows_position","lightbox_arrows_offset","lightbox_arrows_inside_offset","lightbox_arrows_inside_alwayson","lightbox_overlay_color","lightbox_overlay_opacity","lightbox_top_panel_opacity","lightbox_show_numbers","lightbox_numbers_size","lightbox_numbers_color","lightbox_numbers_padding_top","lightbox_numbers_padding_right","lightbox_compact_closebutton_offsetx","lightbox_compact_closebutton_offsety","lightbox_close_on_emptyspace","LIGHTBOX_INIT","topPanelHeight","initTextPanelHeight","isOpened","isRightNowOpened","putSlider","isCompact","fadeDuration","positionFrom","textPanelTop","textPanelLeft","isArrowsInside","isArrowsOnHoverMode","isSliderChangedOnce","isTopPanelEnabled","lightbox_slider_controls_always_on","lightbox_slider_enable_bullets","lightbox_slider_enable_arrows","lightbox_slider_enable_progress_indicator","lightbox_slider_enable_play_button","lightbox_slider_enable_fullscreen_button","lightbox_slider_enable_zoom_panel","lightbox_slider_enable_text_panel","lightbox_slider_scale_mode_media","lightbox_slider_scale_mode","lightbox_slider_loader_type","lightbox_slider_loader_color","lightbox_slider_transition","lightbox_slider_image_padding_top","lightbox_slider_image_padding_bottom","lightbox_slider_video_padding_top","lightbox_slider_video_padding_bottom","lightbox_textpanel_align","lightbox_textpanel_padding_top","lightbox_textpanel_padding_bottom","lightbox_slider_image_border","lightbox_textpanel_enable_title","lightbox_textpanel_enable_description","lightbox_textpanel_desc_style_as_title","lightbox_textpanel_enable_bg","lightbox_slider_video_enable_closebutton","lightbox_slider_enable_links","g_defaultsCompact","lightbox_slider_image_shadow","lightbox_textpanel_title_text_align","lightbox_textpanel_desc_text_align","lightbox_textpanel_padding_left","lightbox_textpanel_padding_right","initLightbox","putLightboxHtml","setProperties","cssNumbers","refreshSliderItem","__________WIDE_ONLY_________","handlePanelHeight","newPanelHeight","objTextPanelSize","textPanelHeight","positionTextPanelWide","textWidth","minPaddingLeft","minPaddingRight","maxTextPanelWidth","hideTopPanel","showTopPanel","__________COMPACT_ONLY_________","handleCompactHeight","wrapperSize","textPanelSize","totalBottom","sliderOptions","imagePaddingBottom","setCompactTextpanelTop","handleCompactTextpanelSizes","showTextpanel","textPanelWidth","objNumbersSize","numbersLeft","showNumbers","isSliderImageInPlace","isImageInPlace","positionArrowsInside","isAnimation","isMouseInsideImage","hideArrows","leftArrowLeft","leftArrowTop","rightArrowLeft","rightArrowTop","objSliderSize","objCssLeft","objCssRight","positionCloseButton","minButtonTop","maxButtonLeft","closeButtonTop","closeButtonLeft","objButtonSize","showCloseButton","hideCompactElements","hideNumbers","actualHideCompactElements","__________COMMON_________","sliderHeight","sliderTop","sliderLeft","isArrowsHidden","noStop","fromHover","updateTextPanelText","updateNumbersText","numCurrentItem","__________EVENTS_________","onSliderDragStart","onSliderAfterReturn","onSliderAfterPutImage","onSliderTransitionEnd","imagePaddingTop","onSliderClick","close","isInside","onPlayVideo","onStopVideo","isScrollKey","onImageMouseEnter","onImageMouseLeave","onMouseMove","onMouseWheel","click","objVideo","switchToWide","putHtml","UGCarousel","g_objCarouselWrapper","arrOrigTiles","carousel_padding","carousel_space_between_tiles","carousel_navigation_numtiles","carousel_scroll_duration","carousel_scroll_easing","carousel_autoplay","carousel_autoplay_timeout","carousel_autoplay_direction","carousel_autoplay_pause_onhover","carousel_vertical_scroll_ondrag","PAUSE_PLAY","carouselMaxWidth","initTileWidth","initTileHeight","sideSpace","spaceActionSize","scrollShortDuration","scrollShortEasing","isPaused","resizeTiles","newTileHeight","optUpdate","positionTiles","realWidth","objTileOriginal","startAutoplay","pauseAutoplay","scrollToTile","__________GETTERS_______","getTiles","getNumTilesInSpace","getNumTiles","getTile","numTile","validateTileNum","getFirstTile","first","getLastTile","last","getTileClones","numClones","arrClonedItems","itemToAdd","clonedTile","getRemainSpaceRight","spaceRemain","getRemainSpaceLeft","getCarouselWidth","getNumTilesInCarousel","__________OTHER_METHODS_______","tileSize","addTiles","anchorTile","clonesType","arrNewTiles","prepend","removeTiles","numTilesToRemove","arrTiles","isShort","posScroll","fillSidesWithTiles","getNeerestTileNum","tile1Pos","tile2Pos","scrollToNeerestTile","tileNum","spaceLeft","spaceRight","numItemsLeft","numItemsRight","numItemsRemoveLeft","numItemsRemoveRight","isPositioned","__________AUTOPLAY_______","autoplayStep","unpauseAutoplay","stopAutoplay","scrollRight","scrollLeft","getEstimatedHeight","tilesToScroll","numTilesInCarousel","setScrollLeftButton","setScrollRightButton","setPlayPauseButton","g_objSelect","tabs_type","tabs_container","tabs_class_selected","initTabs","runTabs","requestGalleryItems","onTabClick","classSelected","objTab","onSelectChange","objSelect","val","change","g_arrEvents","API_INIT_FUNCTIONS","API_ON_EVENT","convertItemDataForOutput","handlerFunction","notCache","togglePlay","enterFullscreen","resetZoom","numItem","reloadGallery","g_objButton","g_objLoader","g_objError","loadmore_container","initObjects","showLoadmore","onLoadmoreClick","numitems","html_items","show_loadmore","blur","errorText"],"mappings":"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","file":"unitegallery.js","sourcesContent":["// Unite Gallery, Version: 1.7.45, released 27 Feb 2017 \n\n\n\n/**\n * write something to debug line\n */\nfunction debugLine(html,addRandom, addHtml){\n\t\n\tif(html === true)\n\t\thtml = \"true\";\n\t\n\tif(html === false)\n\t\thtml = \"false\";\t\t\n\t\n\tvar output = html;\n\t\n\tif(typeof html == \"object\"){\n\t\toutput = \"\";\n\t\tfor(name in html){\n\t\t\tvar value = html[name];\n\t\t\toutput += \" \" + name + \": \" + value;\n\t\t}\n\t}\n\t\n\tif(addRandom == true && !addHtml)\n\t\toutput += \" \" + Math.random();\t\n\t\n\tif(addHtml == true){\n\t\tvar objLine = jQuery(\"#debug_line\");\n\t\tobjLine.width(200);\n\t\t\n\t\tif(objLine.height() >= 500)\n\t\t\tobjLine.html(\"\");\n\t\t\n\t\tvar currentHtml = objLine.html();\n\t\toutput = currentHtml + \"<br> -------------- <br>\" + output;\t\t\n\t}\n\t\n\tjQuery(\"#debug_line\").show().html(output);\t\t\n\t\t\n}\n\n/**\n * \n * debug side some object\n */\nfunction debugSide(obj){\n\t\n\tvar html = \"\";\n\tfor(name in obj){\n\t\tvar value = obj[name];\n\t\thtml += name+\" : \" + value + \"<br>\";\t\t\n\t}\n\t\n\tjQuery(\"#debug_side\").show().html(html);\n\n}\n\n\n/**\n * output some string to console\n */\nfunction trace(str){\n\t\n\tif(typeof console != \"undefined\")\n\t\tconsole.log(str);\n\n}\n\n\n\n\n/** -------------- UgFunctions class ---------------------*/\n\nfunction UGFunctions(){\n\t\n\tvar g_browserPrefix = null;\t\n\tvar t = this;\n\tvar g_temp = {\n\t\tstarTime:0,\n\t\tarrThemes:[],\n\t\tisTouchDevice:-1,\n\t\tisRgbaSupported: -1,\n\t\ttimeCache:{},\n\t\tdataCache:{},\n\t\tlastEventType:\"\",\t\t//for validate touchstart click\n\t\tlastEventTime:0,\n\t\tlastTouchStartElement:null,\n\t\ttouchThreshold:700,\n\t\thandle: null\t\t\t//interval handle\n\t};\n\t\n\tthis.debugVar = \"\";\n\n\tthis.z__________FULL_SCREEN___________ = function(){}\n\t\n\t\n\t\n\t/**\n\t * move to full screen mode\n\t * fullscreen ID - the ID of current fullscreen\n\t */\n\tthis.toFullscreen = function(element, fullscreenID) {\n\t\t  \t  \n\t\t  if(element.requestFullscreen) {\n\t\t    element.requestFullscreen();\n\t\t  } else if(element.mozRequestFullScreen) {\n\t\t    element.mozRequestFullScreen();\n\t\t  } else if(element.webkitRequestFullscreen) {\n\t\t    element.webkitRequestFullscreen(); \n\t\t  } else if(element.msRequestFullscreen) {\n\t\t\t    element.msRequestFullscreen(); \n\t\t  } else{\n\t\t\t  return(false);\n\t\t  }\n\t\t  \n\t\t  return(true);\n\t}\t\n\t\n\t\n\t/**\n\t * exit full screen mode\n\t * return if operation success (or if fullscreen mode supported)\n\t */\n\tthis.exitFullscreen = function() {\n\t\t  if(t.isFullScreen() == false)\n\t\t\t  return(false);\n\t\t\t  \n\t\t  if(document.exitFullscreen) {\n\t\t    document.exitFullscreen();\n\n\t\t  } else if(document.cancelFullScreen) {\n\t\t\t    document.cancelFullScreen();\n\t\t    \n\t\t  } else if(document.mozCancelFullScreen) {\n\t\t    document.mozCancelFullScreen();\n\t\t    \n\t\t  } else if(document.webkitExitFullscreen) {\n\t\t    document.webkitExitFullscreen();\n\t\t    \n\t\t  } else if(document.msExitFullscreen) {\n\t\t\t    document.msExitFullscreen();\n\t\t\t    \n\t\t  }else{\n\t\t\t  return(false);\n\t\t  }\n\t\t  \n\t\t  return(true);\n\t}\t\n\n\t/**\n\t * cross browser attach even function\n\t */\n\tfunction addEvent(evnt, elem, func) {\n\t\t   if (elem.addEventListener)  // W3C DOM\n\t\t      elem.addEventListener(evnt,func,false);\n\t\t   else if (elem.attachEvent) { // IE DOM\n\t\t      elem.attachEvent(\"on\"+evnt, func);\n\t\t   }\n\t\t   else { // No much to do\n\t\t      elem[evnt] = func;\n\t\t   }\n\t}\n\t\n\t\n\t/**\n\t * add fullscreen event to some function\n\t */\n\tthis.addFullScreenChangeEvent = function(func){\n\t\t\n\t\tif(document[\"webkitCancelFullScreen\"])\n\t\t\taddEvent(\"webkitfullscreenchange\",document,func);\n\t\telse if(document[\"msExitFullscreen\"])\n\t\t\taddEvent(\"MSFullscreenChange\",document,func);\n\t\telse if(document[\"mozCancelFullScreen\"])\n\t\t\taddEvent(\"mozfullscreenchange\",document,func);\n\t\telse\n\t\t\taddEvent(\"fullscreenchange\",document,func);\n\t}\n\t\n\t\n\t/**\n\t * destroy the full screen change event\n\t */\n\tthis.destroyFullScreenChangeEvent = function(){\n\t\t\n\t\tjQuery(document).unbind(\"fullscreenChange\");\n\t\tjQuery(document).unbind(\"mozfullscreenchange\");\n\t\tjQuery(document).unbind(\"webkitfullscreenchange\");\n\t\tjQuery(document).unbind(\"MSFullscreenChange\");\n\t}\n\t\n\t\n\t/**\n\t * get the fullscreen element\n\t */\n\tthis.getFullScreenElement = function(){\n\t\t\n\t\tvar fullscreenElement = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement;\n\t\t\n\t\treturn(fullscreenElement);\n\t}\n\n\t/**\n\t * return if fullscreen enabled\n\t */\n\tthis.isFullScreen = function(){\n\t\t\n\t\tvar isFullScreen = document.fullscreen || document.mozFullScreen || document.webkitIsFullScreen || document.msFullscreenElement;\n\t\t\n\t\tif(!isFullScreen)\n\t\t\tisFullScreen = false;\n\t\telse\n\t\t\tisFullScreen = true;\n\t\t\n\t\treturn(isFullScreen);\n\t}\n\t\n\t\n\t\n\tthis.z__________GET_PROPS___________ = function(){}\n\t\n\t/**\n\t * get browser prefix, can be empty if not detected.\n\t */\n\tthis.getBrowserPrefix = function(){\n\t\t\n\t   if(g_browserPrefix !== null)\n\t\t   return g_browserPrefix;\n\t\t\t\t\n\t   var arrayOfPrefixes = ['webkit','Moz','ms','O'];\n\t   \n\t   var div = document.createElement(\"div\");\n\t   \n\t   for(var index in arrayOfPrefixes){\n\t\t   var prefix = arrayOfPrefixes[index];\n\t\t   \n\t\t   if(prefix+\"Transform\" in div.style){\n\t\t\t   prefix = prefix.toLowerCase();\n\t\t\t   g_browserPrefix = prefix;\n\t\t\t   return(prefix);\n\t\t   }\n\t   }\n\t   \n\t   g_browserPrefix = \"\";\n\t   return \"\";\n\t}\n\t\n\t/**\n\t * get image inside parent data by image (find parent and size)\n\t * scaleMode: fit, down, fill, fitvert\n\t */\n\tthis.getImageInsideParentDataByImage = function(objImage, scaleMode, objPadding){\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\t\n\t\tvar objOrgSize = t.getImageOriginalSize(objImage);\n\t\t\n\t\tvar objData = t.getImageInsideParentData(objParent, objOrgSize.width, objOrgSize.height, scaleMode, objPadding);\n\t\t\n\t\treturn(objData);\n\t}\n\t\n\t\n\t/**\n\t * get data of image inside parent\n\t * scaleMode: fit, down, fill, fitvert\n\t */\n\tthis.getImageInsideParentData = function(objParent, originalWidth, originalHeight, scaleMode, objPadding, maxWidth, maxHeight){\n\t\t\n\t\tif(!objPadding)\n\t\t\tvar objPadding = {};\n\t\t\n\t\tvar objOutput = {};\n\t\t\n\t\tif(typeof maxWidth === \"undefined\")\n\t\t\tvar maxWidth = objParent.width();\n\t\t\n\t\tif(typeof maxHeight === \"undefined\")\n\t\t\tvar maxHeight = objParent.height();\n\t\t\n\t\tif(objPadding.padding_left)\n\t\t\tmaxWidth -= objPadding.padding_left;\n\t\t\n\t\tif(objPadding.padding_right)\n\t\t\tmaxWidth -= objPadding.padding_right;\n\t\t\n\t\tif(objPadding.padding_top)\n\t\t\tmaxHeight -= objPadding.padding_top;\n\t\t\n\t\tif(objPadding.padding_bottom)\n\t\t\tmaxHeight -= objPadding.padding_bottom;\n\t\t\n\t\tvar imageWidth = null;\n\t\tvar imageHeight = \"100%\";\n\t\tvar imageTop = null;\n\t\tvar imageLeft = null;\t\t\n\t\tvar style = \"display:block;margin:0px auto;\";\n\t\t\n\t\tif(originalWidth > 0 && originalHeight > 0){\n\t\t\t\n\t\t\t//get image size and position\n\t\t\t\n\t\t\tif(scaleMode == \"down\" && originalWidth < maxWidth && originalHeight < maxHeight){\n\t\t\t\n\t\t\t\timageHeight = originalHeight;\n\t\t\t\timageWidth = originalWidth;\n\t\t\t\timageLeft = (maxWidth - imageWidth) / 2;\n\t\t\t\timageTop = (maxHeight - imageHeight) / 2;\n\t\t\t\t\n\t\t\t}else if(scaleMode == \"fill\"){\n\t\t\t\tvar ratio = originalWidth / originalHeight;\n\t\t\t\t\n\t\t\t\timageHeight = maxHeight;\n\t\t\t\timageWidth = imageHeight * ratio;\n\t\t\t\t\t\t\t\t\n\t\t\t\tif(imageWidth < maxWidth){\n\t\t\t\t\timageWidth = maxWidth;\n\t\t\t\t\timageHeight = imageWidth / ratio;\n\t\t\t\t\t\n\t\t\t\t\t//center y position\n\t\t\t\t\timageLeft = 0;\n\t\t\t\t\timageTop = Math.round((imageHeight - maxHeight) / 2 * -1);\n\t\t\t\t}else{\t//center x position\n\t\t\t\t\timageTop = 0;\n\t\t\t\t\timageLeft = Math.round((imageWidth - maxWidth) / 2 * -1);\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t}\n\t\t\telse{\t\t//fit to borders\n\t\t\t\tvar ratio = originalWidth / originalHeight;\n\t\t\t\timageHeight = maxHeight;\n\t\t\t\timageWidth = imageHeight * ratio;\n\t\t\t\timageTop = 0;\n\t\t\t\timageLeft = (maxWidth - imageWidth) / 2;\n\t\t\t\t\n\t\t\t\tif(scaleMode != \"fitvert\" && imageWidth > maxWidth){\n\t\t\t\t\timageWidth = maxWidth;\n\t\t\t\t\timageHeight = imageWidth / ratio;\n\t\t\t\t\timageLeft = 0;\n\t\t\t\t\timageTop = (maxHeight - imageHeight) / 2;\n\t\t\t\t}\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\timageWidth = Math.floor(imageWidth);\n\t\t\timageHeight = Math.floor(imageHeight);\n\t\t\t\n\t\t\timageTop = Math.floor(imageTop);\n\t\t\timageLeft = Math.floor(imageLeft);\n\t\t\t\n\t\t\tstyle=\"position:absolute;\";\n\t\t}\n\t\t\n\t\t//set padding\n\t\tif(objPadding.padding_top)\n\t\t\timageTop += objPadding.padding_top;\n\t\t\n\t\tif(objPadding.padding_left)\n\t\t\timageLeft += objPadding.padding_left;\n\t\t\n\t\tobjOutput.imageWidth = imageWidth;\n\t\tobjOutput.imageHeight = imageHeight;\n\t\tobjOutput.imageTop = imageTop;\n\t\tobjOutput.imageLeft = imageLeft;\n\t\tobjOutput.imageRight = imageLeft + imageWidth;\n\t\tif(imageTop == 0 || imageHeight == \"100%\")\n\t\t\tobjOutput.imageBottom = null;\n\t\telse\n\t\t\tobjOutput.imageBottom = imageTop + imageHeight;\n\t\t\n\t\tobjOutput.style = style;\n\t\t\n\t\treturn(objOutput);\t\t\n\t}\n\t\n\t\n\t/**\n\t * get element center position inside parent \n\t * even if the object bigger than the parent\n\t */\n\tthis.getElementCenterPosition = function(element, objPadding){\n\t\t\n\t\tvar parent = element.parent();\n\t\tvar objSize = t.getElementSize(element);\n\t\tvar objSizeParent = t.getElementSize(parent);\n\t\t\n\t\tvar parentWidth = objSizeParent.width;\n\t\tvar parentHeight = objSizeParent.height;\n\t\t\n\t\tif(objPadding && objPadding.padding_top !== undefined)\n\t\t\tparentHeight -= objPadding.padding_top;\n\t\t\n\t\tif(objPadding && objPadding.padding_bottom !== undefined)\n\t\t\tparentHeight -= objPadding.padding_bottom;\n\t\t\n\t\tif(objPadding && objPadding.padding_left !== undefined)\n\t\t\tparentWidth -= objPadding.padding_left;\n\t\t\n\t\tif(objPadding && objPadding.padding_right !== undefined)\n\t\t\tparentWidth -= objPadding.padding_right;\n\t\t\n\t\t\n\t\tvar output = {};\n\t\toutput.left = Math.round((parentWidth - objSize.width) / 2);\n\t\toutput.top = Math.round((parentHeight - objSize.height) / 2);\n\t\t\n\t\tif(objPadding && objPadding.padding_top !== undefined)\n\t\t\toutput.top += objPadding.padding_top;\n\t\t\n\t\tif(objPadding && objPadding.padding_left !== undefined)\n\t\t\toutput.left += objPadding.padding_left;\n\t\t\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * get the center of the element \n\t * includeParent - including left / right related to the parent\n\t */\n\tthis.getElementCenterPoint = function(element, includeParent){\n\t\t\n\t\tif(!includeParent)\n\t\t\tvar includeParent = false;\n\t\t\n\t\tvar objSize = t.getElementSize(element);\n\t\tvar output = {};\n\t\t\n\t\toutput.x =  objSize.width / 2;\n\t\toutput.y =  objSize.height / 2;\n\t\t\n\t\tif(includeParent == true){\n\t\t\toutput.x += objSize.left;\n\t\t\toutput.y += objSize.top;\n\t\t}\n\t\t\n\t\toutput.x = Math.round(output.x);\n\t\toutput.y = Math.round(output.y);\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get mouse position from the event\n\t * optimised to every device\n\t */\n\tthis.getMousePosition = function(event, element){\n\t\t\n\t\tvar output = {\n\t\t\tpageX: \tevent.pageX,\n\t\t\tpageY: \tevent.pageY,\n\t\t\tclientX: \tevent.clientX,\n\t\t\tclientY: \tevent.clientY\n\t\t};\n\t\t\n\t\tif(event.originalEvent && event.originalEvent.touches && event.originalEvent.touches.length > 0){\n\t\t\toutput.pageX = event.originalEvent.touches[0].pageX;\n\t\t\toutput.pageY = event.originalEvent.touches[0].pageY;\n\t\t\toutput.clientX = event.originalEvent.touches[0].clientX;\n\t\t\toutput.clientY = event.originalEvent.touches[0].clientY;\n\t\t}\n\t\t\n\t\t/**\n\t\t * get element's mouse position\n\t\t */\n\t\tif(element){\n\t\t\tvar elementPos = element.offset();\n\t\t\toutput.mouseX = output.pageX - elementPos.left;\n\t\t\toutput.mouseY = output.pageY - elementPos.top;\n\t\t}\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t/**\n\t * get mouse element related point from page related point\n\t */\n\tthis.getMouseElementPoint = function(point, element){\n\t\t\n\t\t//rename the input and output\n\t\tvar newPoint = {x: point.pageX, y: point.pageY};\n\t\t\n\t\tvar elementPoint = t.getElementLocalPoint(newPoint, element);\n\t\t\n\t\treturn(elementPoint);\n\t}\n\t\n\t\n\t/**\n\t * get element local point from global point position\n\t */\n\tthis.getElementLocalPoint = function(point, element){\n\t\t\n\t\tvar elementPoint = {};\n\t\tvar elementPos = element.offset();\n\t\t\n\t\telementPoint.x = Math.round(point.x - elementPos.left);\n\t\telementPoint.y = Math.round(point.y - elementPos.top);\n\t\t\n\t\treturn(elementPoint);\n\t}\n\n\t\n\t/**\n\t * get image oritinal size\n\t * if originalWidth, originalHeight is set, just return them.\n\t */\t\t\n\tthis.getImageOriginalSize = function(objImage, originalWidth, originalHeight){\n\t\t\n\t\tif(typeof originalWidth != \"undefined\" && typeof originalHeight != \"undefined\")\n\t\t\treturn({width:originalWidth, height:originalHeight});\n\t\t\n\t\tvar htmlImage = objImage[0];\n\t\t\n\t\tif(typeof htmlImage == \"undefined\")\n\t\t\tthrow new Error(\"getImageOriginalSize error - Image not found\");\n\t\t\n\t\tvar output = {};\n\t\t\n\t\tif(typeof htmlImage.naturalWidth == \"undefined\"){\n\n\t\t\t//check from cache\n\t\t\tif(typeof objImage.data(\"naturalWidth\") == \"number\"){\n\t\t\t\tvar output = {};\n\t\t\t\toutput.width = objImage.data(\"naturalWidth\");\n\t\t\t\toutput.height = objImage.data(\"naturalHeight\");\n\t\t\t\treturn(output);\n\t\t\t}\n\t\t\t\n\t\t   //load new image\n\t\t   var newImg = new Image();\n\t       newImg.src = htmlImage.src;\n\t        \n\t       if (newImg.complete) {\n\t        \toutput.width = newImg.width;\n\t        \toutput.height = newImg.height;\n\n\t        \t//caching\n\t\t\t\tobjImage.data(\"naturalWidth\", output.width);\n\t\t\t\tobjImage.data(\"naturalHeight\", output.height);\n\t        \treturn(output);\n\t        \t\n\t       }\n\t    \n\t       return({width:0,height:0});\n\t\t        \n\t\t}else{\n\t\t\t\n\t\t\toutput.width = htmlImage.naturalWidth;\n\t\t\toutput.height = htmlImage.naturalHeight;\n\t\t\t\n\t\t\treturn(output);\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * get current image ratio from original size\n\t */\n\tthis.getimageRatio = function(objImage){\n\t\t\n\t\tvar originalSize = t.getImageOriginalSize(objImage);\n\t\tvar size = t.getElementSize(objImage);\n\t\tvar ratio = size.width / originalSize.width;\n\t\t\n\t\treturn(ratio);\n\t}\n\t\n\t/**\n\t * tells if the image fit the parent (smaller then the parent)\n\t */\n\tthis.isImageFitParent = function(objImage){\n\t\tvar objParent = objImage.parent();\n\t\tvar sizeImage = t.getElementSize(objImage);\n\t\tvar sizeParent = t.getElementSize(objParent);\n\t\t\n\t\tif(sizeImage.width <= sizeParent.width && sizeImage.height <= sizeParent.height)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * get size and position of some object\n\t */\n\tthis.getElementSize = function(element){\n\n\t\tif(element === undefined){\n\t\t\tthrow new Error(\"Can't get size, empty element\");\n\t\t}\n\t\t\t\t\n\t\tvar obj = element.position();\n\t\t\t\t\n\t\tobj.height = element.outerHeight();\n\t\tobj.width = element.outerWidth();\n\t\t\n\t\tobj.left = Math.round(obj.left);\n\t\tobj.top = Math.round(obj.top);\n\t\t\n\t\tobj.right = obj.left + obj.width;\n\t\tobj.bottom = obj.top + obj.height;\n\t\t\n\t\treturn(obj);\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * return true if the element is bigger then it's parent\n\t */\n\tthis.isElementBiggerThenParent = function(element){\n\t\t\n\t\tvar objParent = element.parent();\n\t\tvar objSizeElement = t.getElementSize(element);\n\t\tvar objSizeParent = t.getElementSize(objParent);\n\t\t\n\t\tif(objSizeElement.width > objSizeParent.width || objSizeElement.height > objSizeParent.height)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * tells if the mouse point inside image\n\t * the mouse point is related to image pos\n\t */\n\tthis.isPointInsideElement = function(point, objSize){\n\t\t\n\t\tvar isMouseXInside = (point.x >= 0 && point.x < objSize.width);\n\t\tif(isMouseXInside == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar isMouseYInside = (point.y >= 0 && point.y < objSize.height);\n\t\tif(isMouseYInside == false)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * get element relative position according the parent\n\t * if the left / top is offset text (left , center, right / top, middle , bottom)\n\t * the element can be number size as well\n\t */\n\tthis.getElementRelativePos = function(element, pos, offset, objParent){\n\t\t\n\t\tif(!objParent)\n\t\t\tvar objParent = element.parent();\n\t\t\n\t\tif(typeof element == \"number\"){\n\t\t\tvar elementSize = {\n\t\t\t\t\twidth: element,\n\t\t\t\t\theight: element\n\t\t\t};\n\t\t}else\n\t\t\tvar elementSize = t.getElementSize(element);\n\t\t\n\t\tvar parentSize = t.getElementSize(objParent);\n\t\t\n\t\t\n\t\tswitch(pos){\n\t\t\tcase \"top\":\n\t\t\tcase \"left\":\n\t\t\t\tpos = 0;\n\t\t\t\tif(offset)\n\t\t\t\t\tpos += offset;\n\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tpos = Math.round((parentSize.width - elementSize.width) / 2);\n\t\t\t\tif(offset)\n\t\t\t\t\tpos += offset;\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tpos = parentSize.width - elementSize.width;\n\t\t\t\tif(offset)\n\t\t\t\t\tpos -= offset;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\t\tpos = Math.round((parentSize.height - elementSize.height) / 2);\n\t\t\t\tif(offset)\n\t\t\t\t\tpos += offset;\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tpos = parentSize.height - elementSize.height;\n\t\t\t\tif(offset)\n\t\t\t\t\tpos -= offset;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn(pos);\n\t}\n\t\n\t\t\n\t\n\tthis.z_________SET_ELEMENT_PROPS_______ = function(){}\n\t\t\n\t\n\t/**\n\t * \n\t * zoom image inside parent\n\t * the mouse point is page offset position, can be null\n\t * return true if zoomed and false if not zoomed\n\t */\n\tthis.zoomImageInsideParent = function(objImage, zoomIn, step, point, scaleMode, maxZoomRatio, objPadding){\n\t\t\n\t\tif(!step)\n\t\t\tvar step = 1.2;\n\t\t\n\t\tif(!scaleMode)\n\t\t\tvar scaleMode = \"fit\";\n\t\t\n\t\tvar zoomRatio = step;\n\t\t\n\t\tvar objParent = objImage.parent();\t\t\n\t\t\n\t\tvar objSize = t.getElementSize(objImage);\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage);\n\t\t\n\t\t\n\t\tvar isMouseInside = false;\n\t\tvar newHeight,newWidth, panX = 0, panY = 0, newX, newY,panOrientX = 0, panOrientY = 0;\n\t\t\n\t\tif(!point){\n\t\t\tisMouseInside = false;\n\t\t}else{\n\t\t\tvar pointImg = t.getMouseElementPoint(point, objImage);\t\t\t\t\n\t\t\tisMouseInside = t.isPointInsideElement(pointImg, objSize);\n\t\t\t\n\t\t\t//if mouse point outside image, set orient to image center\n\t\t\tpanOrientX = pointImg.x;\n\t\t\tpanOrientY = pointImg.y;\n\t\t}\n\t\t\t\t\n\t\tif(isMouseInside == false){\n\t\t\tvar imgCenterPoint = t.getElementCenterPoint(objImage);\n\t\t\tpanOrientX = imgCenterPoint.x;\n\t\t\tpanOrientY = imgCenterPoint.y;\n\t\t}\n\t\t\t\t\t\t\n\t\t//zoom:\n\t\tif(zoomIn == true){\t\t//zoom in\n\t\t\t\n\t\t\tnewHeight = objSize.height * zoomRatio;\n\t\t\tnewWidth =  objSize.width * zoomRatio;\n\t\t\t\n\t\t\tif(panOrientX != 0)\n\t\t\t\tpanX = -(panOrientX * zoomRatio - panOrientX);\n\t\t\t\n\t\t\tif(panOrientY != 0)\n\t\t\t\tpanY = -(panOrientY * zoomRatio - panOrientY);\n\t\t\t\n\t\t\t\n\t\t}else{\t\t//zoom out\n\t\t\t\n\t\t\tnewHeight = objSize.height / zoomRatio;\n\t\t\tnewWidth =  objSize.width / zoomRatio;\n\t\t\t\n\t\t\tvar objScaleData = t.getImageInsideParentData(objParent, objOriginalSize.width, objOriginalSize.height, scaleMode, objPadding);\n\t\t\t\n\t\t\t//go back to original size\n\t\t\tif(newWidth < objScaleData.imageWidth){\n\t\t\t\t\n\t\t\t\tt.scaleImageFitParent(objImage, objOriginalSize.width, objOriginalSize.height, scaleMode, objPadding);\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(isMouseInside == true){\n\t\t\t\tif(panOrientX != 0)\n\t\t\t\t\tpanX = -(panOrientX / zoomRatio - panOrientX);\n\t\t\t\t\n\t\t\t\tif(panOrientY != 0)\t\t\t\n\t\t\t\t\tpanY = -(panOrientY / zoomRatio - panOrientY);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t//check max zoom ratio, ix exeeded, abort\n\t\tif(maxZoomRatio){\n\t\t\tvar expectedZoomRatio = 1;\n\t\t\tif(objOriginalSize.width != 0)\n\t\t\t\texpectedZoomRatio = newWidth / objOriginalSize.width;\n\t\t\t\n\t\t\tif(expectedZoomRatio > maxZoomRatio)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//resize the element\n\t\tt.setElementSize(objImage, newWidth, newHeight);\n\t\t\n\t\t//set position:\n\t\t\n\t\t//if zoom out and mouse point not inside image, \n\t\t//get the image to center\n\t\tif(zoomIn == false && isMouseInside == false){\n\t\t\tvar posCenter = t.getElementCenterPosition(objImage);\n\t\t\tnewX = posCenter.left;\n\t\t\tnewY = posCenter.top;\n\t\t}else{\n\t\t\t\n\t\t\tnewX = objSize.left + panX;\n\t\t\tnewY = objSize.top + panY;\n\t\t}\n\t\t\n\t\tt.placeElement(objImage, newX, newY);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\n\t\n\t/**\n\t * place some element to some position\n\t * if the left / top is offset text (left , center, right / top, middle , bottom)\n\t * then put it in parent by the offset.\n\t */\n\tthis.placeElement = function(element, left, top, offsetLeft, offsetTop, objParent){\n\t\t\n\t\t\n\t\tif(jQuery.isNumeric(left) == false || jQuery.isNumeric(top) == false){\n\t\t\t\n\t\t\tif(!objParent)\n\t\t\t\tvar objParent = element.parent();\n\t\t\t\n\t\t\tvar elementSize = t.getElementSize(element);\n\t\t\tvar parentSize = t.getElementSize(objParent);\n\t\t}\n\t\t\n\t\t//select left position\n\t\tif(jQuery.isNumeric(left) == false){\n\t\t\t\n\t\t\tswitch(left){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tleft = 0;\n\t\t\t\t\tif(offsetLeft)\n\t\t\t\t\t\tleft += offsetLeft;\n\t\t\t\tbreak;\n\t\t\t\tcase \"center\":\n\t\t\t\t\tleft = Math.round((parentSize.width - elementSize.width) / 2);\n\t\t\t\t\tif(offsetLeft)\n\t\t\t\t\t\tleft += offsetLeft;\n\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tleft = parentSize.width - elementSize.width;\n\t\t\t\t\tif(offsetLeft)\n\t\t\t\t\t\tleft -= offsetLeft;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//select top position\n\t\tif(jQuery.isNumeric(top) == false){\n\t\t\t\n\t\t\tswitch(top){\n\t\t\t\tcase \"top\":\n\t\t\t\t\ttop = 0;\n\t\t\t\t\tif(offsetTop)\n\t\t\t\t\t\ttop += offsetTop;\n\t\t\t\tbreak;\n\t\t\t\tcase \"middle\":\n\t\t\t\tcase \"center\":\n\t\t\t\t\ttop = Math.round((parentSize.height - elementSize.height) / 2);\n\t\t\t\t\tif(offsetTop)\n\t\t\t\t\t\ttop += offsetTop;\n\t\t\t\tbreak;\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\ttop = parentSize.height - elementSize.height;\n\t\t\t\t\tif(offsetTop)\n\t\t\t\t\t\ttop -= offsetTop;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tvar objCss = {\n\t\t\t\t\"position\":\"absolute\",\n\t\t\t\t\"margin\":\"0px\"\t\t\t\t\n\t\t};\n\t\t\n\t\tif(left !== null)\n\t\t\tobjCss.left = left;\n\t\t\n\t\tif(top !== null)\n\t\t\tobjCss.top = top;\n\t\t\t\t\n\t\telement.css(objCss);\t\t\n\t}\n\t\n\t\n\t/**\n\t * place element inside parent center.\n\t * the element should be absolute position\n\t */\n\tthis.placeElementInParentCenter = function(element){\n\t\t\t\t\n\t\tt.placeElement(element, \"center\", \"middle\");\n\t}\n\t\n\t\n\t/**\n\t * set element size and position\n\t */\n\tthis.setElementSizeAndPosition = function(element,left,top,width,height){\n\t\t\n\t\tvar objCss = {\n\t\t\t\"width\":width+\"px\",\n\t\t\t\"height\":height+\"px\",\n\t\t\t\"left\":left+\"px\",\n\t\t\t\"top\":top+\"px\",\n\t\t\t\"position\":\"absolute\",\n\t\t\t\"margin\":\"0px\"\n\t\t}\n\t\t\n\t\telement.css(objCss);\n\t}\n\t\n\t/**\n\t * set widht and height of the element\n\t */\n\tthis.setElementSize = function(element, width, height){\n\t\t\n\t    var objCss = {\n\t\t\t\"width\":width+\"px\"\n\t\t}\n\t    \n\t    if(height !== null && typeof height != \"undefined\")\n\t    \tobjCss[\"height\"] = height+\"px\"\n\t    \n\t\telement.css(objCss);\t\n\t}\n\t\n\t\n\t/**\n\t * clone element size and position\n\t */\n\tthis.cloneElementSizeAndPos = function(objSource, objTarget, isOuter, offsetX, offsetY){\n\t\t\n\t\tvar objSize = objSource.position();\n\t\t\n\t\tif(objSize == undefined){\n\t\t\tthrow new Error(\"Can't get size, empty element\");\n\t\t}\n\t\t\n\t\tif(isOuter === true){\n\t\t\tobjSize.height = objSource.outerHeight();\n\t\t\tobjSize.width = objSource.outerWidth();\n\t\t}else{\n\t\t\tobjSize.height = objSource.height();\n\t\t\tobjSize.width = objSource.width();\n\t\t}\n\t\t\n\t\tobjSize.left = Math.round(objSize.left);\n\t\tobjSize.top = Math.round(objSize.top);\n\t\t\n\t\tif(offsetX)\n\t\t\tobjSize.left += offsetX;\n\t\t\n\t\tif(offsetY)\n\t\t\tobjSize.top += offsetY;\n\t\t\n\t\tt.setElementSizeAndPosition(objTarget, objSize.left, objSize.top, objSize.width, objSize.height);\n\t}\n\n\t\n\t/**\n\t * place image inside parent, scale it by the options\n\t * and scale it to fit the parent.\n\t * scaleMode: fit, down, fill\n\t */\n\tthis.placeImageInsideParent = function(urlImage, objParent, originalWidth, originalHeight, scaleMode, objPadding){\n\t\tvar obj = t.getImageInsideParentData(objParent, originalWidth, originalHeight, scaleMode, objPadding);\n\t\t\n\t\t//set html image:\n\t\tvar htmlImage = \"<img\";\n\t\t\n\t\tif(obj.imageWidth !== null){\n\t\t\thtmlImage += \" width = '\" + obj.imageWidth + \"'\";\n\t\t\tobj.style += \"width:\" + obj.imageWidth + \";\";\n\t\t}\n\t\t\n\t\tif(obj.imageHeight != null){\n\t\t\t\n\t\t\tif(obj.imageHeight == \"100%\"){\n\t\t\t\thtmlImage += \" height = '\" + obj.imageHeight+\"'\";\n\t\t\t\tobj.style += \"height:\" + obj.imageHeight+\";\";\t\t\t\t\n\t\t\t}else{\n\t\t\t\thtmlImage += \" height = '\" + obj.imageHeight + \"'\";\n\t\t\t\tobj.style += \"height:\" + obj.imageHeight + \"px;\";\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(obj.imageTop !== null)\n\t\t\tobj.style += \"top:\"+obj.imageTop+\"px;\";\n\t\t\n\t\tif(obj.imageLeft !== null){\n\t\t\tobj.style += \"left:\"+obj.imageLeft+\"px;\";\n\t\t}\n\t\t\n\t\turlImage = t.escapeDoubleSlash(urlImage);\n\t\t\n\t\thtmlImage += \" style='\"+obj.style+\"'\";\n\t\thtmlImage += \" src=\\\"\"+urlImage+\"\\\"\";\n\t\thtmlImage += \">\";\n\t\t\t\t\n\t\tobjParent.html(htmlImage);\n\t\t\n\t\t//return the image just created\n\t\tvar objImage = objParent.children(\"img\");\n\t\t\n\t\treturn(objImage);\n\t}\n\t\n\t\n\t/**\n\t * scale image to fit parent, and place it into parent\n\t * parent can be width , height, or object\n\t */\t\n\tthis.scaleImageCoverParent = function(objImage, objParent, pHeight){\n\t\t\n\t\tif(typeof objParent == \"number\"){\n\t\t\tvar parentWidth = objParent;\n\t\t\tvar parentHeight = pHeight;\n\t\t}else{\n\t\t\tvar parentWidth = objParent.outerWidth();\n\t\t\tvar parentHeight = objParent.outerHeight();\n\t\t}\n\t\t\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage);\n\n\t\tvar imageWidth = objOriginalSize.width;\n\t\tvar imageHeight = objOriginalSize.height;\n\t\t\n\t\tvar ratio = imageWidth / imageHeight;\n\t\t\n\t\tvar fitHeight = parentHeight;\n\t\tvar fitWidth = fitHeight * ratio;\n\t\tvar posy = 0, posx = 0;\n\t\t\n\t\tif(fitWidth < parentWidth){\n\t\t\tfitWidth = parentWidth;\n\t\t\tfitHeight = fitWidth / ratio;\n\t\t\t\n\t\t\t//center y position\n\t\t\tposx = 0;\n\t\t\tposy = Math.round((fitHeight - parentHeight) / 2 * -1);\n\t\t}else{\t//center x position\n\t\t\tposy = 0;\n\t\t\tposx = Math.round((fitWidth - parentWidth) / 2 * -1);\n\t\t}\n\t\t\n\t\tfitWidth = Math.round(fitWidth);\n\t\tfitHeight = Math.round(fitHeight);\n\t\t\n\t\tobjImage.css({\"width\":fitWidth+\"px\",\n\t\t\t\t\t  \"height\":fitHeight+\"px\",\n\t\t\t\t\t  \"left\":posx+\"px\",\n\t\t\t\t\t  \"top\":posy+\"px\"});\t\t\n\t}\n\n\n\t\n\t\n\t/**\n\t * resize image to fit the parent, scale it by the options\n\t * scaleMode: fit, down, fill\n\t */\n\tthis.scaleImageFitParent = function(objImage, originalWidth, originalHeight, scaleMode, objPadding){\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\t\n\t\tvar obj = t.getImageInsideParentData(objParent, originalWidth, originalHeight, scaleMode, objPadding);\n\t\t\n\t\tvar updateCss = false;\n\t\t\n\t\tvar objCss = {};\n\t\t\n\t\tif(obj.imageWidth !== null){\n\t\t\tupdateCss = true\n\t\t\tobjImage.removeAttr(\"width\");\n\t\t\tobjCss[\"width\"] = obj.imageWidth+\"px\";\n\t\t}\n\t\t\n\t\tif(obj.imageHeight != null){\n\t\t\tupdateCss = true\n\t\t\tobjImage.removeAttr(\"height\");\n\t\t\tobjCss[\"height\"] = obj.imageHeight+\"px\";\n\t\t}\n\t\t\n\t\tif(obj.imageTop !== null){\n\t\t\tupdateCss = true;\t\t\t\n\t\t\tobjCss.top = obj.imageTop+\"px\";\n\t\t}\n\t\t\n\t\tif(obj.imageLeft !== null){\n\t\t\tupdateCss = true;\t\t\n\t\t\tobjCss.left = obj.imageLeft+\"px\";\n\t\t}\n\t\t\t\n\t\tif(updateCss == true){\n\t\t\t\n\t\t\tobjCss.position = \"absolute\";\n\t\t\tobjCss.margin = \"0px 0px\";\n\t\t\t\n\t\t\tobjImage.css(objCss);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * scale image by height\n\t */\n\tthis.scaleImageByHeight = function(objImage, height, originalWidth, originalHeight){\n\t\t\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage, originalWidth, originalHeight);\n\t\t\n\t\tvar ratio = objOriginalSize.width / objOriginalSize.height;\n\t\tvar width = Math.round(height * ratio);\n\t\theight = Math.round(height);\n\t\t\n\t\tt.setElementSize(objImage, width, height);\n\t}\n\n\t\n\t/**\n\t * scale image by height\n\t */\n\tthis.scaleImageByWidth = function(objImage, width, originalWidth, originalHeight){\n\t\t\n\t\tvar objOriginalSize = t.getImageOriginalSize(objImage, originalWidth, originalHeight);\n\t\t\n\t\tvar ratio = objOriginalSize.width / objOriginalSize.height;\n\t\t\n\t\tvar height = Math.round(width / ratio);\n\t\twidth = Math.round(width);\n\t\t\n\t\tt.setElementSize(objImage, width, height);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * scale image to exact size in parent, by setting image size and padding\n\t */\n\tthis.scaleImageExactSizeInParent = function(objImage, originalWidth, originalHeight, exactWidth, exactHeight, scaleMode){\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\tvar parentSize = t.getElementSize(objParent);\n\t\t\n\t\tif(parentSize.width < exactWidth)\n\t\t\texactWidth = parentSize.width;\n\t\t\n\t\tif(parentSize.height < exactHeight)\n\t\t\texactHeight = parentSize.height;\n\t\t\n\t\tvar obj = t.getImageInsideParentData(null, originalWidth, originalHeight, scaleMode, null, exactWidth, exactHeight);\n\t\t\n\t\tvar imageWidth = exactWidth;\n\t\tvar imageHeight = exactHeight;\n\t\t\n\t\tvar paddingLeft = obj.imageLeft;\n\t\tvar paddingRight = obj.imageLeft;\n\t\tvar paddingTop = obj.imageTop;\n\t\tvar paddingBottom = obj.imageTop;\n\t\tvar imageLeft = Math.round((parentSize.width - exactWidth) / 2);\n\t\tvar imageTop = Math.round((parentSize.height - exactHeight) / 2);\n\t\t\n\t\tvar totalWidth = obj.imageWidth + paddingLeft + paddingRight;\n\t\tvar diff = exactWidth - totalWidth;\n\t\tif(diff != 0)\n\t\t\tpaddingRight += diff;\n\t\t\n\t\tvar totalHeight = obj.imageHeight + paddingTop + paddingBottom;\n\t\t\n\t\tvar diff = exactHeight - totalHeight;\n\t\tif(diff != 0)\n\t\t\tpaddingBottom += diff;\n\t\t\n\t\t//update css:\n\t\tobjImage.removeAttr(\"width\");\n\t\tobjImage.removeAttr(\"height\");\n\n\t\tvar objCss = {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tmargin: \"0px 0px\"\n\t\t};\n\t\t\n\t\tobjCss[\"width\"] = imageWidth+\"px\";\n\t\tobjCss[\"height\"] = imageHeight+\"px\";\n\t\tobjCss[\"left\"] = imageLeft+\"px\";\n\t\tobjCss[\"top\"] = imageTop+\"px\";\n\t\tobjCss[\"padding-left\"] = paddingLeft+\"px\";\n\t\tobjCss[\"padding-top\"] = paddingTop+\"px\";\n\t\tobjCss[\"padding-right\"] = paddingRight+\"px\";\n\t\tobjCss[\"padding-bottom\"] = paddingBottom+\"px\";\n\t\t\t\t\n\t\tobjImage.css(objCss);\n\t\t\n\t\t//return size object\n\t\t\n\t\tvar objReturn = {};\n\t\tobjReturn[\"imageWidth\"] = imageWidth;\n\t\tobjReturn[\"imageHeight\"] = imageHeight;\n\t\treturn(objReturn);\n\t}\n\t\n\t\n\t/**\n\t * show some element and make opacity:1\n\t */\n\tthis.showElement = function(element, element2, element3){\n\t\t\n\t\telement.show().fadeTo(0,1);\n\t\t\n\t\tif(element2)\n\t\t\telement2.show().fadeTo(0,1);\n\t\t\t\n\t\tif(element3)\n\t\t\t\telement3.show().fadeTo(0,1);\n\t\t\t\n\t}\n\t\n\t\t\n\tthis.z_________GALLERY_RELATED_FUNCTIONS_______ = function(){}\n\t\n\t/**\n\t * disable button\n\t */\n\tthis.disableButton = function(objButton, className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-disabled\";\n\t\t\n\t\tif(t.isButtonDisabled(objButton, className) == false)\t\t\n\t\t\tobjButton.addClass(className);\t\t\n\t}\n\n\t\n\t/**\n\t * convert custom prefix options\n\t * prefix - the prefix.\n\t * base - after the prefix text. example lightbox_slider_option (lightbox - prefix, slider - base)\n\t */\n\tthis.convertCustomPrefixOptions = function(objOptions, prefix, base){\n\t\t\t\n\t\tif(!prefix)\n\t\t\treturn(objOptions);\n\t\t\n\t\tvar modifiedOptions = {};\n\t\t\n\t\tjQuery.each(objOptions, function(key, option){\n\t\t\t\n\t\t\tif(key.indexOf(prefix + \"_\"+base+\"_\") === 0){\n\t\t\t\tvar newKey = key.replace(prefix+\"_\"+base+\"_\", base+\"_\");\n\t\t\t\tmodifiedOptions[newKey] = option;\n\t\t\t}else{\n\t\t\t\tmodifiedOptions[key] = option;\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\treturn(modifiedOptions);\n\t}\n\t\n\t\n\t/**\n\t * enable button\n\t */\n\tthis.enableButton = function(objButton, className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-disabled\";\n\t\t\n\t\tif(t.isButtonDisabled(objButton, className) == true)\t\t\n\t\t\tobjButton.removeClass(className);\n\t}\n\t\n\t\n\t/**\n\t * check if some buggon disabled\n\t */\n\tthis.isButtonDisabled = function(objButton, className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-disabled\";\n\t\t\n\t\tif(objButton.hasClass(className))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\n\tthis.z_________MATH_FUNCTIONS_______ = function(){}\n\t\n\t/**\n\t * \n\t * normalize the value for readable \"human\" setting value.\n\t */\n\tthis.normalizeSetting = function(realMin, realMax, settingMin, settingMax, value, fixBounds){\n\t\tif(!fixBounds)\n\t\t\tvar fixBounds = false;\n\t\t\n\t\tvar ratio = (value - settingMin)  / (settingMax - settingMin);\n\t\tvalue = realMin + (realMax - realMin) * ratio;\n\t\t\n\t\tif(fixBounds == true){\n\t\t\tif(value < realMin)\n\t\t\t\tvalue = realMin;\n\t\t\t\n\t\t\tif(value > realMax)\n\t\t\t\tvalue = realMax;\n\t\t}\n\t\t\n\t\treturn(value);\n\t}\n\n\t\n\t/**\n\t * \n\t * get \"real\" setting from normalized setting\n\t */\n\tthis.getNormalizedValue = function(realMin, realMax, settingMin, settingMax, realValue){\n\t\t\n\t\tvar ratio = (realValue - realMin)  / (realMax - realMin);\n\t\trealValue = realMin + (settingMax - settingMin) * ratio;\n\t\t\n\t\treturn(realValue);\n\t}\n\t\n\t\n\t/**\n\t * get distance between 2 points\n\t */\n\tthis.getDistance = function(x1,y1,x2,y2) {\n\t\t\n\t\tvar distance = Math.round(Math.sqrt(Math.abs(((x2-x1)*(x2-x1)) + ((y2-y1)*(y2-y1)))));\n\t\t\n\t\treturn distance;\n\t}\n\t\n\t\n\t/**\n\t * get center point of the 2 points\n\t */\n\tthis.getMiddlePoint = function(x1,y1,x2,y2){\n\t\tvar output = {}\n\t\toutput.x = x1 + Math.round((x2 - x1) / 2);\n\t\toutput.y = y1 + Math.round((y2 - y1) / 2);\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * get number of items in space width gap\n\t * even item sizes\n\t * by lowest\n\t */\n\tthis.getNumItemsInSpace = function(spaceSize, itemsSize, gapSize){\n\t\tvar numItems = Math.floor((spaceSize + gapSize) / (itemsSize + gapSize));\n\t\treturn(numItems);\n\t}\n\n\t/**\n\t * get number of items in space width gap\n\t * even item sizes\n\t * by Math.round\n\t */\n\tthis.getNumItemsInSpaceRound = function(spaceSize, itemsSize, gapSize){\n\t\tvar numItems = Math.round((spaceSize + gapSize) / (itemsSize + gapSize));\n\t\treturn(numItems);\n\t}\n\n\t/**\n\t * get space (width in carousel for example) by num items, item size, and gap size\n\t */\n\tthis.getSpaceByNumItems = function(numItems, itemSize, gapSize){\n\t\tvar space = numItems * itemSize + (numItems-1) * gapSize;\n\t\treturn(space);\n\t}\n\t\n\n\t/**\n\t * get item size by space and gap\n\t */\n\tthis.getItemSizeInSpace = function(spaceSize, numItems, gapSize){\n\t\tvar itemSize = Math.floor((spaceSize - (numItems-1) * gapSize) / numItems);\n\t\t\n\t\treturn(itemSize);\n\t}\n\t\n\t\n\t/**\n\t * get column x pos with even column sizes, start from 0\n\t */\n\tthis.getColX = function(col, colWidth, colGap){\n\t\t\n\t\tvar posx = col * (colWidth + colGap);\n\t\t\n\t\treturn posx;\n\t}\n\t\n\n\t/**\n\t * get column number by index\n\t */\n\tthis.getColByIndex = function(numCols, index){\n\t\tvar col = index % numCols;\n\t\treturn(col);\n\t}\n\t\n\t\n\t/**\n\t * get col and row by index\n\t */\n\tthis.getColRowByIndex = function(index, numCols){\n\t\t\n\t\tvar row = Math.floor(index / numCols);\n\t\tvar col = Math.floor(index % numCols);\n\t\t\n\t\treturn({col:col,row:row});\n\t}\n\t\n\t\n\t/**\n\t * get index by row, col, numcols\n\t */\n\tthis.getIndexByRowCol = function(row, col, numCols){\n\t\t\n\t\tif(row < 0)\n\t\t\treturn(-1);\n\t\t\n\t\tif(col < 0)\n\t\t\treturn(-1);\n\t\t\n\t\tvar index = row * numCols + col;\n\t\treturn(index);\n\t}\n\t\n\t/**\n\t * get previous row item in the same column\n\t */\n\tthis.getPrevRowSameColIndex = function(index, numCols){\n\t\tvar obj = t.getColRowByIndex(index, numCols);\n\t\tvar prevIndex = t.getIndexByRowCol(obj.row-1, obj.col, numCols);\n\t\treturn(prevIndex);\n\t}\n\t\n\t/**\n\t * get next row item in the same column\n\t */\n\tthis.getNextRowSameColIndex = function(index, numCols){\n\t\tvar obj = t.getColRowByIndex(index, numCols);\n\t\tvar nextIndex = t.getIndexByRowCol(obj.row+1, obj.col, numCols);\n\t\treturn(nextIndex);\n\t}\n\t\n\t\n\tthis.z_________DATA_FUNCTIONS_______ = function(){}\n\t\n\t/**\n\t * set data value\n\t */\n\tthis.setGlobalData = function(key, value){\n\t\t\n\t\tjQuery.data(document.body, key, value);\n\t\t\n\t}\n\t\n\t/**\n\t * get global data\n\t */\n\tthis.getGlobalData = function(key){\n\t\t\n\t\tvar value = jQuery.data(document.body, key);\n\t\t\n\t\treturn(value);\n\t}\n\t\n\tthis.z_________EVENT_DATA_FUNCTIONS_______ = function(){}\n\n\t\n\t/**\n\t * handle scroll top, return if scroll mode or not\n\t */\n\tthis.handleScrollTop = function(storedEventID){\n\t\t\n\t\tif(t.isTouchDevice() == false)\n\t\t\treturn(null);\n\t\t\n\t\tvar objData = t.getStoredEventData(storedEventID);\n\t\t\n\t\tvar horPass = 15;\n\t\tvar vertPass = 15;\n\t\t\n\t\t//check if need to set some movement\n\t\tif(objData.scrollDir === null){\n\t\t\t\n\t\t\tif(Math.abs(objData.diffMouseX) > horPass)\n\t\t\t\tobjData.scrollDir = \"hor\";\n\t\t\telse\n\t\t\t\tif(Math.abs(objData.diffMouseY) > vertPass && Math.abs(objData.diffMouseY) > Math.abs(objData.diffMouseX) ){\n\t\t\t\t\tobjData.scrollDir = \"vert\";\n\t\t\t\t\tobjData.scrollStartY = objData.lastMouseClientY;\n\t\t\t\t\tobjData.scrollOrigin = jQuery(document).scrollTop();\n\t\t\t\t\t\n\t\t\t\t\tg_temp.dataCache[storedEventID].scrollStartY = objData.lastMouseClientY;\n\t\t\t\t\tg_temp.dataCache[storedEventID].scrollOrigin = objData.scrollOrigin;\n\t\t\t\t}\n\t\t\t\n\t\t\t//update scrollDir\n\t\t\tg_temp.dataCache[storedEventID].scrollDir = objData.scrollDir;\n\t\t}\n\t\t\t\t\n\t\tif(objData.scrollDir !== \"vert\")\n\t\t\treturn(objData.scrollDir);\n\t\t\n\t\t\n\t\tvar currentScroll = jQuery(document).scrollTop();\n\t\t\n\t\tvar scrollPos = objData.scrollOrigin - (objData.lastMouseClientY - objData.scrollStartY);\n\t\t\n\t\tif(scrollPos >= 0)\n\t\t\tjQuery(document).scrollTop(scrollPos);\n\t\t\n\t\treturn(objData.scrollDir);\n\t}\n\n\t\n\t/**\n\t * return true / false if was vertical scrolling\n\t */\n\tthis.wasVerticalScroll = function(storedEventID){\n\t\tvar objData = t.getStoredEventData(storedEventID);\n\t\t\n\t\tif(objData.scrollDir === \"vert\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * store event data\n\t */\n\tthis.storeEventData = function(event, id, addData){\n\t\t\t\t\n\t\tvar mousePos = t.getMousePosition(event);\n\t\tvar time = jQuery.now();\n\t\t\n\t\tvar obj = {\n\t\t\t\tstartTime: time,\n\t\t\t\tlastTime: time,\n\t\t\t\tstartMouseX: mousePos.pageX,\n\t\t\t\tstartMouseY: mousePos.pageY,\n\t\t\t\tlastMouseX: mousePos.pageX,\n\t\t\t\tlastMouseY: mousePos.pageY,\n\t\t\t\t\n\t\t\t\tstartMouseClientY: mousePos.clientY,\n\t\t\t\tlastMouseClientY: mousePos.clientY,\n\t\t\t\t\n\t\t\t\tscrollTop: jQuery(document).scrollTop(),\n\t\t\t\tscrollDir: null\n\t\t};\n\t\t\n\t\tif(addData)\n\t\t\tobj = jQuery.extend(obj, addData);\n\t\t\n\t\tg_temp.dataCache[id] = obj;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * update event data with last position\n\t */\n\tthis.updateStoredEventData = function(event, id, addData){\n\t\t\n\t\tif(!g_temp.dataCache[id])\n\t\t\tthrow new Error(\"updateEventData error: must have stored cache object\");\n\t\t\n\t\tvar obj = g_temp.dataCache[id];\n\t\t\n\t\tvar mousePos = t.getMousePosition(event);\n\t\tobj.lastTime = jQuery.now();\n\t\t\n\t\tif(mousePos.pageX !== undefined){\n\t\t\tobj.lastMouseX = mousePos.pageX;\n\t\t\tobj.lastMouseY = mousePos.pageY;\n\t\t\tobj.lastMouseClientY = mousePos.clientY;\n\t\t}\n\t\t\n\t\tif(addData)\n\t\t\tobj = jQuery.extend(obj, addData);\n\t\t\n\t\tg_temp.dataCache[id] = obj;\n\t}\n\t\n\t/**\n\t * get stored event data\n\t */\n\tthis.getStoredEventData = function(id, isVertical){\n\t\tif(!g_temp.dataCache[id])\n\t\t\tthrow new Error(\"updateEventData error: must have stored cache object\");\n\t\t\n\t\tvar obj = g_temp.dataCache[id];\n\t\t\n\t\tobj.diffMouseX = obj.lastMouseX - obj.startMouseX;\n\t\tobj.diffMouseY = obj.lastMouseY - obj.startMouseY;\n\t\t\n\t\tobj.diffMouseClientY = obj.lastMouseClientY - obj.startMouseClientY;\n\t\t\n\t\tobj.diffTime = obj.lastTime - obj.startTime;\n\t\t\n\t\t//get mouse position according orientation\n\t\tif(isVertical === true){\n\t\t\tobj.startMousePos = obj.lastMouseY;\n\t\t\tobj.lastMousePos = obj.lastMouseY;\n\t\t\tobj.diffMousePos = obj.diffMouseY;\n\t\t}else{\n\t\t\tobj.startMousePos = obj.lastMouseX;\n\t\t\tobj.lastMousePos = obj.lastMouseX;\n\t\t\tobj.diffMousePos = obj.diffMouseX;\t\t\t\n\t\t}\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t/**\n\t * return if click event approved according the done motion\n\t */\n\tthis.isApproveStoredEventClick = function(id, isVertical){\n\t\t\n\t\tif(!g_temp.dataCache[id])\n\t\t\treturn(true);\n\t\t\n\t\tvar objData = t.getStoredEventData(id, isVertical);\n\t\t\n\t\tvar passedDistanceAbs = Math.abs(objData.diffMousePos);\n\t\t\n\t\tif(objData.diffTime > 400)\n\t\t\treturn(false);\n\t\t\n\t\tif(passedDistanceAbs > 30)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * clear stored event data\n\t */\n\tthis.clearStoredEventData = function(id){\n\t\tg_temp.dataCache[id] = null;\n\t}\n\n\tthis.z_________CHECK_SUPPORT_FUNCTIONS_______ = function(){}\n\t\n\t\n\t\n\t/**\n\t * is canvas exists in the browser\n\t */\n\tthis.isCanvasExists = function(){\n\t\t\n\t\tvar canvas = jQuery('<canvas width=\"500\" height=\"500\" > </canvas>')[0];\n\t\t\n\t\tif(typeof canvas.getContext == \"function\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * tells if vertical scrollbar exists\n\t */\n\tthis.isScrollbarExists = function(){\n\t\tvar hasScrollbar = window.innerWidth > document.documentElement.clientWidth;\n\t\treturn(hasScrollbar);\n\t}\n\t\n\t/**\n\t * check if this device are touch enabled\n\t */\n\tthis.isTouchDevice = function(){\n\t\t\n\t\t  //get from cache\n\t\t  if(g_temp.isTouchDevice !== -1)\n\t\t\t  return(g_temp.isTouchDevice);\n\t\t  \n\t\t  try{ \n\t\t\t  document.createEvent(\"TouchEvent\"); \n\t\t\t  g_temp.isTouchDevice = true; \n\t\t  }\n\t\t  catch(e){ \n\t\t\t  g_temp.isTouchDevice = false; \n\t\t  }\n\t\t  \n\t\t  return(g_temp.isTouchDevice);\n\t}\n\t\n\t\n\t\n\t/**\n\t * check if \n\t */\n\tthis.isRgbaSupported = function(){\n\t\t\n\t\tif(g_temp.isRgbaSupported !== -1)\n\t\t\treturn(g_temp.isRgbaSupported);\n\t\t\n\t\tvar scriptElement = document.getElementsByTagName('script')[0];\n\t\tvar prevColor = scriptElement.style.color;\n\t\ttry {\n\t\t\tscriptElement.style.color = 'rgba(1,5,13,0.44)';\n\t\t} catch(e) {}\n\t\tvar result = scriptElement.style.color != prevColor;\n\t\tscriptElement.style.color = prevColor;\n\t\t\n\t\tg_temp.isRgbaSupported = result;\n\t\t\n\t\treturn result;\n\t}\n\t\n\tthis.z_________GENERAL_FUNCTIONS_______ = function(){}\n\t\n\t\n\t/**\n\t * check if current jquery version is more then minimal version\n\t * version can be \"1.8.0\" for example\n\t */\n\tthis.checkMinJqueryVersion = function(version){\n\n\t   var arrCurrent = jQuery.fn.jquery.split('.');\n       var arrMin = version.split('.');\n\t  \n\t  for (var i=0, len=arrCurrent.length; i<len; i++) {\n\t\t  \n\t\t  var numCurrent = parseInt(arrCurrent[i]);\n\t      var numMin = parseInt(arrMin[i]);\n\n\t      if(typeof arrMin[i] == \"undefined\")\n\t    \t  return(true);\n\t      \n\t      if(numMin > numCurrent)\n\t    \t  return(false);\n\t      \n\t      if(numCurrent > numMin)\n\t    \t  return(true);\n\t  }\n\t  \n\t  \n\t  //if all equal then all ok\n\t  return true;\n\t}\n\n\t\n\t/**\n\t * get css size parameter, like width. if % given, leave it, if number without px - add px.\n\t */\n\tthis.getCssSizeParam = function(sizeParam){\n\t\tif(jQuery.isNumeric(sizeParam))\n\t\t\treturn(sizeParam + \"px\");\n\t\t\t\n\t\treturn(sizeParam);\n\t}\n\t\n\t/**\n\t * convert hex color to rgb color\n\t */\n\tthis.convertHexToRGB = function(hexInput, opacity){\n\t    \n\t\tvar hex = hexInput.replace('#','');\n\t    if(hex === hexInput)\n\t    \treturn(hexInput);\n\t    \n\t    r = parseInt(hex.substring(0,2), 16);\n\t    g = parseInt(hex.substring(2,4), 16);\n\t    b = parseInt(hex.substring(4,6), 16);\n\t    result = 'rgba('+r+','+g+','+b+','+opacity+')';\n\t    return result;\n\t}\t\n\t\n\t/**\n\t * get timestamp to string\n\t */\n\tthis.timestampToString = function(stamp){\n\t\t\n\t\tvar d = new Date(stamp);\n\t\tvar str = d.getDate() + \"/\" + d.getMonth();\n\t\tstr += \" \" + d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds() + \":\" + d.getMilliseconds();\n\t\t\n\t\treturn(str);\n\t}\n\t\n\t/**\n\t * get touches array (if exists) from the event\n\t */\n\tthis.getArrTouches = function(event){\n\t\t\n\t\tvar arrTouches = [];\n\t\t\t\t\n\t\tif(event.originalEvent && event.originalEvent.touches && event.originalEvent.touches.length > 0){\t\t\t\n\t\t\tarrTouches = event.originalEvent.touches;\n\t\t}\n\t\t\n\t\treturn(arrTouches);\n\t}\n\t\n\t/**\n\t * extract touch positions from arrTouches\n\t */\n\tthis.getArrTouchPositions = function(arrTouches){\n\t\t\n\t\tvar arrOutput = [];\n\t\t\n\t\tfor(var i=0;i<arrTouches.length;i++){\n\t\t\t\n\t\t\tvar point = {\n\t\t\t\tpageX:arrTouches[i].pageX,\n\t\t\t\tpageY:arrTouches[i].pageY\n\t\t\t};\n\t\t\t\n\t\t\tarrOutput.push(point);\n\t\t}\n\t\t\n\t\treturn(arrOutput);\n\t}\n\t\n\t\n\t/**\n\t * start time debug\n\t */\n\tthis.startTimeDebug = function(){\n\t\tg_temp.starTime = jQuery.now();\n\t}\n\t\n\t/**\n\t * show time debug\n\t */\n\tthis.showTimeDebug = function(){\n\t\t\n\t\tvar endTime = jQuery.now();\n\t\tvar diffTime = endTime - g_temp.starTime;\n\t\t\n\t\tdebugLine({\"Time Passed\": diffTime},true);\n\t}\n\t\n\t\t\n\t/**\n\t * put progress indicator to some parent by type\n\t * return the progress indicator object\n\t */\n\tthis.initProgressIndicator = function(type, options, objParent){\n\t\t\n\t\t//check canvas compatability\n\t\tif(type != \"bar\" && t.isCanvasExists() == false)\n\t\t\ttype = \"bar\";\n\t\t\n\t\t//put the progress indicator\n\t\tswitch(type){\n\t\t\tcase \"bar\":\n\t\t\t\tvar g_objProgress = new UGProgressBar();\t\t\n\t\t\t\tg_objProgress.putHidden(objParent, options);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tcase \"pie\":\n\t\t\t\tvar g_objProgress = new UGProgressPie();\t\t\n\t\t\t\tg_objProgress.putHidden(objParent, options);\n\t\t\tbreak;\t\t\t\n\t\t\tcase \"pie2\":\n\t\t\t\toptions.type_fill = true;\n\t\t\t\t\n\t\t\t\tvar g_objProgress = new UGProgressPie();\t\t\t\t\n\t\t\t\tg_objProgress.putHidden(objParent, options);\n\t\t\tbreak;\t\t\t\n\t\t}\n\t\t\n\t\treturn(g_objProgress);\n\t}\n\t\n\t\n\t/**\n\t * add to button ug-nohover class on ipad\n\t * need to be processed in css\n\t */\n\tthis.setButtonMobileReady = function(objButton){\n\t\t\n\t\tobjButton.on(\"touchstart\",function(event){\n\t\t\t//event.preventDefault();\n\t\t\tjQuery(this).addClass(\"ug-nohover\");\n\t\t});\n\t\t\n\t\tobjButton.on(\"mousedown touchend\",function(event){\n\t\t\t\n\t\t\t//debugLine(\"button touchend\",true,true);\n\t\t\t//event.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\t\n\t\t\t//debugLine(event.type, true, true);\n\t\t\t\n\t\t\treturn(false);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * register gallery theme\n\t */\n\tthis.registerTheme = function(themeName){\n\t\t\n\t\tg_temp.arrThemes.push(themeName);\n\t}\n\t\n\t/**\n\t * get themes array\n\t */\n\tthis.getArrThemes = function(){\n\t\t\n\t\treturn(g_temp.arrThemes);\n\t}\n\t\n\t\n\t/**\n\t * check if theme exists\n\t */\n\tthis.isThemeRegistered = function(theme){\n\t\n\t\tif(jQuery.inArray(theme, g_temp.arrThemes) !== -1)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * get first registered theme name\n\t */\n\tthis.getFirstRegisteredTheme = function(){\n\t\tif(g_temp.arrThemes.length == 0)\n\t\t\treturn(\"\");\n\t\tvar themeName = g_temp.arrThemes[0];\n\t\t\n\t\treturn(themeName);\n\t}\n\n\t\n\t\n\t\n\t/**\n\t * function checks if enought time passsed between function calls.\n\t * good for filtering same time events\n\t */\n\tthis.isTimePassed = function(handlerName, timeLimit){\n\t\t\n\t\tif(!timeLimit)\n\t\t\tvar timeLimit = 100;\n\t\t\n\t\tvar currentTime = jQuery.now();\n\t\tif(g_temp.timeCache.hasOwnProperty(handlerName) == false)\n\t\t\tlastTime = 0;\n\t\telse\n\t\t\tlastTime = g_temp.timeCache[handlerName];\n\t\t\n\t\tvar diffTime = currentTime - lastTime;\n\t\t\n\t\tg_temp.timeCache[handlerName] = currentTime;\n\t\t\n\t\t//debugLine(diffTime,true,true);\n\t\t\n\t\tif(diffTime <= timeLimit)\n\t\t\treturn(false);\n\t\t\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * check if continious event is over like resize\n\t */\n\tthis.whenContiniousEventOver = function(handlerName, onEventOver, timeLimit){\n\t\t\n\t\tif(!timeLimit)\n\t\t\tvar timeLimit = 300;\n\t\t\n\t\t\n\t\tif(g_temp.timeCache.hasOwnProperty(handlerName) == true && g_temp.timeCache[handlerName] != null){\n\t\t\tclearTimeout(g_temp.timeCache[handlerName]);\n\t\t\tg_temp.timeCache[handlerName] = null;\t\t\t\n\t\t}\n\t\t\n\t\tg_temp.timeCache[handlerName] = setTimeout(onEventOver, timeLimit);\n\t}\n\t\n\t\n\t/**\n\t * validate click and touchstart events. \n\t * if click comes after touchstart, return false.\n\t */\n\tthis.validateClickTouchstartEvent = function(eventType){\n\t\t\n\t\tvar returnVal = true;\n\t\t\n\t\tvar diff = jQuery.now() - g_temp.lastEventTime;\n\t\t\n\t\t//debugLine({lastType:g_temp.lastEventType, diff:diff},true, true);\n\t\t\n\t\tif(eventType == \"click\" && g_temp.lastEventType == \"touchstart\" && diff < 1000)\n\t\t\treturnVal = false;\n\t\t\n\t\tg_temp.lastEventTime = jQuery.now();\n\t\tg_temp.lastEventType = eventType;\n\t\t\n\t\treturn(returnVal);\n\t}\n\t\n\t/**\n\t * add some class on hover (hover event)\n\t */\n\tthis.addClassOnHover = function(element,className){\n\t\tif(!className)\n\t\t\tvar className = \"ug-button-hover\";\n\t\t\n\t\telement.hover(function(){\n\t\t\tjQuery(this).addClass(className);\n\t\t},function(){\t\t\t\t\n\t\t\tjQuery(this).removeClass(className);\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * destroy hover effect on elements\n\t */\n\tthis.destroyButton = function(element){\n\t\telement.off(\"mouseenter\");\n\t\telement.off(\"mouseleave\");\n\t\telement.off(\"click\");\n\t\telement.off(\"touchstart\");\n\t\telement.off(\"touchend\");\n\t\telement.off(\"mousedown\");\n\t\telement.off(\"tap\");\n\t}\n\t\n\t/**\n\t * set button on click event, advanced\n\t */\n\tthis.setButtonOnClick = function(objButton, onClickFunction){\n\t\t\n\t\tt.setButtonMobileReady(objButton);\n\t\t\n\t\tobjButton.on(\"click touchstart\", function(event){\n\t\t\t\n\t\t\tobjThis = jQuery(this);\n\t\t\t\t\t\t\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\t\n\t\t\tif(t.validateClickTouchstartEvent(event.type) == false)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tonClickFunction(objThis, event);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set button on tap\n\t */\n\tthis.setButtonOnTap = function(objButton, onClickFunction){\n\t\t\n\t\t//set the event\n\t\tobjButton.on(\"tap\",onClickFunction);\n\t\t\n\t\t//set tap event trigger\n\t\tif(t.isTouchDevice() == false){\n\t\t\t\n\t\t\tobjButton.on(\"click\", function(event){\n\t\t\t\tvar objElement = jQuery(this);\n\t\t\t\t\n\t\t\t\tif(t.validateClickTouchstartEvent(event.type) == false)\n\t\t\t\t\treturn(true);\n\t\t\t\t\n\t\t\t\tobjElement.trigger(\"tap\");\n\t\t\t});\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\t//set tap event\n\t\t\tobjButton.on(\"touchstart\",function(event){\n\t\t\t\t\n\t\t\t\tvar objElement = jQuery(this);\n\t\t\t\t\n\t\t\t\tobjElement.addClass(\"ug-nohover\");\n\t\t\t\t\t\t\t\n\t\t\t\tg_temp.lastTouchStartElement = jQuery(this);\n\t\t\t\tg_temp.lastEventTime = jQuery.now();\n\t\t\t});\n\t\t\t\n\t\t\tobjButton.on(\"touchend\", function(event){\n\t\t\t\tvar objElement = jQuery(this);\n\t\t\t\t\n\t\t\t\t//validate same element\n\t\t\t\tif(objElement.is(g_temp.lastTouchStartElement) == false)\n\t\t\t\t\treturn(true);\n\t\t\t\t\n\t\t\t\t//validate time passed\n\t\t\t\tif(!g_temp.lastEventTime)\n\t\t\t\t\treturn(true);\n\t\t\t\t\n\t\t\t\tvar timePassed = jQuery.now() - g_temp.lastEventTime;\n\t\t\t\tif(timePassed > g_temp.touchThreshold)\n\t\t\t\t\treturn(true);\n\t\t\t\t\n\t\t\t\tobjElement.trigger(\"tap\");\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * load javascript dynamically\n\t */\n\tthis.loadJs = function(url, addProtocol){\n\t\t\n\t\tif(addProtocol === true)\n\t\t\turl = location.protocol + \"//\" + url;\n\t\t\n\t\tvar tag = document.createElement('script');\n\t\ttag.src = url;\n\t\tvar firstScriptTag = document.getElementsByTagName('script')[0];\n\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\t\t\n\t}\n\t\n\t/**\n\t * load css dymanically\n\t */\n\tthis.loadCss = function(url, addProtocol){\n\t\tif(addProtocol === true)\n\t\t\turl = location.protocol + \"//\" + url;\n\t\t\n\t\tvar tag=document.createElement(\"link\");\n\t\t  tag.setAttribute(\"rel\", \"stylesheet\");\n\t\t  tag.setAttribute(\"type\", \"text/css\");\n\t\t  tag.setAttribute(\"href\", url);\n\t\t  \n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(tag);\n\t}\n\t\n\t/**\n\t * add event listener with old browsers fallback\n\t */\n\t this.addEvent = function(elem, event, func ) {\n\t\t \n\t\t if (typeof (elem.addEventListener) != \"undefined\") {\n\t\t\t elem.addEventListener(event, func, false);\n\t\t    } else if (elem.attachEvent) {\n\t\t    \telem.attachEvent('on' + event, func);\n\t\t  }\n\t\t \n\t  }\n\n\n\n\n\t/**\n\t * fire event where all images are loaded\n\t */\n\tthis.checkImagesLoaded = function(objImages, onComplete, onProgress){\n\t\t\n\t\tvar arrImages = [];\n\t\tvar counter = 0;\n\t\tvar numImages = objImages.length;\n\t\t\n\t\t//if no images - exit\n\t\tif(numImages == 0 && onComplete){\n\t\t\tonComplete();\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//nested function\n\t\tfunction checkComplete(image, isError){\n\t\t\tcounter++;\n\t\t\t\t\t\t\n\t\t\tif(typeof onProgress == \"function\"){\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tonProgress(image, isError);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif(counter == numImages && typeof onComplete == \"function\"){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tonComplete();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\n\n\t\t//start a little later\n\t\tsetTimeout(function(){\n\t\t\t\n\t\t\t//start the function\n\t\t\tfor(var index=0;index < numImages; index++){\n\t\t\t\tvar image = objImages[index];\n\t\t\t\t\n\t\t\t\t//arrImages.push(jQuery(image));\n\t\t\t\tif(image.naturalWidth !== undefined && image.naturalWidth !== 0){\n\t\t\t\t\tcheckComplete(objImages[index], false);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar proxyImage = jQuery('<img/>');\n\t\t\t\t\tproxyImage.data(\"index\", index);\n\t\t\t\t\t\n\t\t\t\t\tproxyImage.on(\"load\", function(){\n\t\t\t\t\t\tvar index = jQuery(this).data(\"index\");\n\t\t\t\t\t\tcheckComplete(objImages[index], false);\n\t\t\t\t\t});\n\t\t\t\t\tproxyImage.on(\"error\", function(){\n\t\t\t\t\t\tvar index = jQuery(this).data(\"index\");\n\t\t\t\t\t\tcheckComplete(objImages[index], true);\n\t\t\t\t\t});\n\t\t\t\t\tproxyImage.attr(\"src\", image.src);\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the function when the element size will be not 0\n\t */\n\tthis.waitForWidth = function(element, func){\n\t\tvar width = element.width();\n\t\tif(width != 0){\n\t\t\tfunc();\n\t\t\treturn(false);\n\t\t}\n\n\t\tg_temp.handle = setInterval(function(){\n\t\t\twidth = element.width();\n\t\t\tif(width != 0){\n\t\t\t\tclearInterval(g_temp.handle);\n\t\t\t\tfunc();\t\t\t\t\n\t\t\t}\n\n\t\t}, 300);\n\t\t\n\t}\n\t\n\t/**\n\t * shuffle (randomise) array\n\t */\n\tthis.arrayShuffle = function(arr){\n\t\t\n\t\tif(typeof arr != \"object\")\n\t\t\treturn(arr);\n\t\t\t\n\t    for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);\n\t    return arr;\n\t}\n\n\t\n\t/**\n\t * get object length\n\t */\n\tthis.getObjectLength = function(object){\n\t\tvar num = 0;\n\t\tfor(var item in object)\n\t\t\tnum++;\n\t\treturn num;\n\t}\n\n\t/**\n\t * normalize the percent, return always between 0 and 1\n\t */\n\tthis.normalizePercent = function(percent){\n\t\t\n\t\tif(percent < 0)\n\t\t\tpercent = 0;\n\t\t\n\t\tif(percent > 1)\n\t\t\tpercent = 1;\n\t\t\n\t\treturn(percent);\n\t}\n\t\n\t\n\t/**\n\t * strip tags from string\n\t */\n\tthis.stripTags = function(html){\n\t\t\n\t\tvar text = html.replace(/(<([^>]+)>)/ig,\"\");\n\t\t\n\t\treturn(text);\n\t}\n\t\n\t\n\t/**\n\t * escape double slash\n\t */\n\tthis.escapeDoubleSlash = function(str){\n\t\t\n\t\treturn str.replace('\"','\\\"');\n\t}\n\t\n\t\n\t/**\n\t * html entitles\n\t */\n\tthis.htmlentitles = function(html){\n\t\tvar text = jQuery('<div/>').text(html).html();\n\t\treturn(text);\n\t}\n\t\n\t\n\tthis.z_________END_GENERAL_FUNCTIONS_______ = function(){}\n\t\n}\n\n\n\nvar g_ugFunctions = new UGFunctions();\n\n\n/** -------------- END UgFunctions class ---------------------*/\n\n\n\n/** -------------- MouseWheel ---------------------*/\n\n!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):\"object\"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=h.call(arguments,1),u=0,r=0,d=0,f=0;if(t=e.event.fix(s),t.type=\"mousewheel\",\"detail\"in s&&(d=-1*s.detail),\"wheelDelta\"in s&&(d=s.wheelDelta),\"wheelDeltaY\"in s&&(d=s.wheelDeltaY),\"wheelDeltaX\"in s&&(r=-1*s.wheelDeltaX),\"axis\"in s&&s.axis===s.HORIZONTAL_AXIS&&(r=-1*d,d=0),u=0===d?r:d,\"deltaY\"in s&&(d=-1*s.deltaY,u=d),\"deltaX\"in s&&(r=s.deltaX,0===d&&(u=-1*r)),0!==d||0!==r){if(1===s.deltaMode){var c=e.data(this,\"mousewheel-line-height\");u*=c,d*=c,r*=c}else if(2===s.deltaMode){var m=e.data(this,\"mousewheel-page-height\");u*=m,d*=m,r*=m}return f=Math.max(Math.abs(d),Math.abs(r)),(!l||l>f)&&(l=f,i(s,f)&&(l/=40)),i(s,f)&&(u/=40,r/=40,d/=40),u=Math[u>=1?\"floor\":\"ceil\"](u/l),r=Math[r>=1?\"floor\":\"ceil\"](r/l),d=Math[d>=1?\"floor\":\"ceil\"](d/l),t.deltaX=r,t.deltaY=d,t.deltaFactor=l,t.deltaMode=0,a.unshift(t,u,r,d),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){l=null}function i(e,t){return r.settings.adjustOldDeltas&&\"mousewheel\"===e.type&&t%120===0}var o,l,s=[\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"],a=\"onwheel\"in document||document.documentMode>=9?[\"wheel\"]:[\"mousewheel\",\"DomMouseScroll\",\"MozMousePixelScroll\"],h=Array.prototype.slice;if(e.event.fixHooks)for(var u=s.length;u;)e.event.fixHooks[s[--u]]=e.event.mouseHooks;var r=e.event.special.mousewheel={version:\"3.1.9\",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,\"mousewheel-line-height\",r.getLineHeight(this)),e.data(this,\"mousewheel-page-height\",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)[\"offsetParent\"in e.fn?\"offsetParent\":\"parent\"]().css(\"fontSize\"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind(\"mousewheel\",e):this.trigger(\"mousewheel\")},unmousewheel:function(e){return this.unbind(\"mousewheel\",e)}})});\n\n/** -------------- EASING FUNCTIONS ---------------------*/\n\n(function(factory){if(typeof define===\"function\"&&define.amd){define([\"jquery\"],function($){return factory($)})}else if(typeof module===\"object\"&&typeof module.exports===\"object\"){exports=factory(require(\"jquery\"))}else{factory(jQuery)}})(function($){$.easing[\"jswing\"]=$.easing[\"swing\"];var pow=Math.pow,sqrt=Math.sqrt,sin=Math.sin,cos=Math.cos,PI=Math.PI,c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*PI/3,c5=2*PI/4.5;function bounceOut(x){var n1=7.5625,d1=2.75;if(x<1/d1){return n1*x*x}else if(x<2/d1){return n1*(x-=1.5/d1)*x+.75}else if(x<2.5/d1){return n1*(x-=2.25/d1)*x+.9375}else{return n1*(x-=2.625/d1)*x+.984375}}$.extend($.easing,{def:\"easeOutQuad\",swing:function(x){return $.easing[$.easing.def](x)},easeInQuad:function(x){return x*x},easeOutQuad:function(x){return 1-(1-x)*(1-x)},easeInOutQuad:function(x){return x<.5?2*x*x:1-pow(-2*x+2,2)/2},easeInCubic:function(x){return x*x*x},easeOutCubic:function(x){return 1-pow(1-x,3)},easeInOutCubic:function(x){return x<.5?4*x*x*x:1-pow(-2*x+2,3)/2},easeInQuart:function(x){return x*x*x*x},easeOutQuart:function(x){return 1-pow(1-x,4)},easeInOutQuart:function(x){return x<.5?8*x*x*x*x:1-pow(-2*x+2,4)/2},easeInQuint:function(x){return x*x*x*x*x},easeOutQuint:function(x){return 1-pow(1-x,5)},easeInOutQuint:function(x){return x<.5?16*x*x*x*x*x:1-pow(-2*x+2,5)/2},easeInSine:function(x){return 1-cos(x*PI/2)},easeOutSine:function(x){return sin(x*PI/2)},easeInOutSine:function(x){return-(cos(PI*x)-1)/2},easeInExpo:function(x){return x===0?0:pow(2,10*x-10)},easeOutExpo:function(x){return x===1?1:1-pow(2,-10*x)},easeInOutExpo:function(x){return x===0?0:x===1?1:x<.5?pow(2,20*x-10)/2:(2-pow(2,-20*x+10))/2},easeInCirc:function(x){return 1-sqrt(1-pow(x,2))},easeOutCirc:function(x){return sqrt(1-pow(x-1,2))},easeInOutCirc:function(x){return x<.5?(1-sqrt(1-pow(2*x,2)))/2:(sqrt(1-pow(-2*x+2,2))+1)/2},easeInElastic:function(x){return x===0?0:x===1?1:-pow(2,10*x-10)*sin((x*10-10.75)*c4)},easeOutElastic:function(x){return x===0?0:x===1?1:pow(2,-10*x)*sin((x*10-.75)*c4)+1},easeInOutElastic:function(x){return x===0?0:x===1?1:x<.5?-(pow(2,20*x-10)*sin((20*x-11.125)*c5))/2:pow(2,-20*x+10)*sin((20*x-11.125)*c5)/2+1},easeInBack:function(x){return c3*x*x*x-c1*x*x},easeOutBack:function(x){return 1+c3*pow(x-1,3)+c1*pow(x-1,2)},easeInOutBack:function(x){return x<.5?pow(2*x,2)*((c2+1)*2*x-c2)/2:(pow(2*x-2,2)*((c2+1)*(x*2-2)+c2)+2)/2},easeInBounce:function(x){return 1-bounceOut(1-x)},easeOutBounce:bounceOut,easeInOutBounce:function(x){return x<.5?(1-bounceOut(1-2*x))/2:(1+bounceOut(2*x-1))/2}})});\n\n/** -------------- JQuery Color Animations ---------------------*/\n\n!function(r,n){\n\tif(typeof r.cssHooks == \"undefined\")\t\t//error protection\n\t\treturn(false);\n\tfunction t(r,n,t){var e=f[n.type]||{};return null==r?t||!n.def?null:n.def:(r=e.floor?~~r:parseFloat(r),isNaN(r)?n.def:e.mod?(r+e.mod)%e.mod:0>r?0:e.max<r?e.max:r)}function e(n){var t=l(),e=t._rgba=[];return n=n.toLowerCase(),h(u,function(r,o){var a,s=o.re.exec(n),i=s&&o.parse(s),u=o.space||\"rgba\";return i?(a=t[u](i),t[c[u].cache]=a[c[u].cache],e=t._rgba=a._rgba,!1):void 0}),e.length?(\"0,0,0,0\"===e.join()&&r.extend(e,a.transparent),t):a[n]}function o(r,n,t){return t=(t+1)%1,1>6*t?r+(n-r)*t*6:1>2*t?n:2>3*t?r+(n-r)*(2/3-t)*6:r}var a,s=\"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",i=/^([\\-+])=\\s*(\\d+\\.?\\d*)/,u=[{re:/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(r){return[r[1],r[2],r[3],r[4]]}},{re:/rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(r){return[2.55*r[1],2.55*r[2],2.55*r[3],r[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}},{re:/hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,space:\"hsla\",parse:function(r){return[r[1],r[2]/100,r[3]/100,r[4]]}}],l=r.Color=function(n,t,e,o){return new r.Color.fn.parse(n,t,e,o)},c={rgba:{props:{red:{idx:0,type:\"byte\"},green:{idx:1,type:\"byte\"},blue:{idx:2,type:\"byte\"}}},hsla:{props:{hue:{idx:0,type:\"degrees\"},saturation:{idx:1,type:\"percent\"},lightness:{idx:2,type:\"percent\"}}}},f={\"byte\":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=l.support={},d=r(\"<p>\")[0],h=r.each;d.style.cssText=\"background-color:rgba(1,1,1,.5)\",p.rgba=d.style.backgroundColor.indexOf(\"rgba\")>-1,h(c,function(r,n){n.cache=\"_\"+r,n.props.alpha={idx:3,type:\"percent\",def:1}}),l.fn=r.extend(l.prototype,{parse:function(o,s,i,u){if(o===n)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=r(o).css(s),s=n);var f=this,p=r.type(o),d=this._rgba=[];return s!==n&&(o=[o,s,i,u],p=\"array\"),\"string\"===p?this.parse(e(o)||a._default):\"array\"===p?(h(c.rgba.props,function(r,n){d[n.idx]=t(o[n.idx],n)}),this):\"object\"===p?(o instanceof l?h(c,function(r,n){o[n.cache]&&(f[n.cache]=o[n.cache].slice())}):h(c,function(n,e){var a=e.cache;h(e.props,function(r,n){if(!f[a]&&e.to){if(\"alpha\"===r||null==o[r])return;f[a]=e.to(f._rgba)}f[a][n.idx]=t(o[r],n,!0)}),f[a]&&r.inArray(null,f[a].slice(0,3))<0&&(f[a][3]=1,e.from&&(f._rgba=e.from(f[a])))}),this):void 0},is:function(r){var n=l(r),t=!0,e=this;return h(c,function(r,o){var a,s=n[o.cache];return s&&(a=e[o.cache]||o.to&&o.to(e._rgba)||[],h(o.props,function(r,n){return null!=s[n.idx]?t=s[n.idx]===a[n.idx]:void 0})),t}),t},_space:function(){var r=[],n=this;return h(c,function(t,e){n[e.cache]&&r.push(t)}),r.pop()},transition:function(r,n){var e=l(r),o=e._space(),a=c[o],s=0===this.alpha()?l(\"transparent\"):this,i=s[a.cache]||a.to(s._rgba),u=i.slice();return e=e[a.cache],h(a.props,function(r,o){var a=o.idx,s=i[a],l=e[a],c=f[o.type]||{};null!==l&&(null===s?u[a]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),u[a]=t((l-s)*n+s,o)))}),this[o](u)},blend:function(n){if(1===this._rgba[3])return this;var t=this._rgba.slice(),e=t.pop(),o=l(n)._rgba;return l(r.map(t,function(r,n){return(1-e)*o[n]+e*r}))},toRgbaString:function(){var n=\"rgba(\",t=r.map(this._rgba,function(r,n){return null==r?n>2?1:0:r});return 1===t[3]&&(t.pop(),n=\"rgb(\"),n+t.join()+\")\"},toHslaString:function(){var n=\"hsla(\",t=r.map(this.hsla(),function(r,n){return null==r&&(r=n>2?1:0),n&&3>n&&(r=Math.round(100*r)+\"%\"),r});return 1===t[3]&&(t.pop(),n=\"hsl(\"),n+t.join()+\")\"},toHexString:function(n){var t=this._rgba.slice(),e=t.pop();return n&&t.push(~~(255*e)),\"#\"+r.map(t,function(r){return r=(r||0).toString(16),1===r.length?\"0\"+r:r}).join(\"\")},toString:function(){return 0===this._rgba[3]?\"transparent\":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(r){if(null==r[0]||null==r[1]||null==r[2])return[null,null,null,r[3]];var n,t,e=r[0]/255,o=r[1]/255,a=r[2]/255,s=r[3],i=Math.max(e,o,a),u=Math.min(e,o,a),l=i-u,c=i+u,f=.5*c;return n=u===i?0:e===i?60*(o-a)/l+360:o===i?60*(a-e)/l+120:60*(e-o)/l+240,t=0===l?0:.5>=f?l/c:l/(2-c),[Math.round(n)%360,t,f,null==s?1:s]},c.hsla.from=function(r){if(null==r[0]||null==r[1]||null==r[2])return[null,null,null,r[3]];var n=r[0]/360,t=r[1],e=r[2],a=r[3],s=.5>=e?e*(1+t):e+t-e*t,i=2*e-s;return[Math.round(255*o(i,s,n+1/3)),Math.round(255*o(i,s,n)),Math.round(255*o(i,s,n-1/3)),a]},h(c,function(e,o){var a=o.props,s=o.cache,u=o.to,c=o.from;l.fn[e]=function(e){if(u&&!this[s]&&(this[s]=u(this._rgba)),e===n)return this[s].slice();var o,i=r.type(e),f=\"array\"===i||\"object\"===i?e:arguments,p=this[s].slice();return h(a,function(r,n){var e=f[\"object\"===i?r:n.idx];null==e&&(e=p[n.idx]),p[n.idx]=t(e,n)}),c?(o=l(c(p)),o[s]=p,o):l(p)},h(a,function(n,t){l.fn[n]||(l.fn[n]=function(o){var a,s=r.type(o),u=\"alpha\"===n?this._hsla?\"hsla\":\"rgba\":e,l=this[u](),c=l[t.idx];return\"undefined\"===s?c:(\"function\"===s&&(o=o.call(this,c),s=r.type(o)),null==o&&t.empty?this:(\"string\"===s&&(a=i.exec(o),a&&(o=c+parseFloat(a[2])*(\"+\"===a[1]?1:-1))),l[t.idx]=o,this[u](l)))})})}),l.hook=function(n){var t=n.split(\" \");h(t,function(n,t){r.cssHooks[t]={set:function(n,o){var a,s,i=\"\";if(\"transparent\"!==o&&(\"string\"!==r.type(o)||(a=e(o)))){if(o=l(a||o),!p.rgba&&1!==o._rgba[3]){for(s=\"backgroundColor\"===t?n.parentNode:n;(\"\"===i||\"transparent\"===i)&&s&&s.style;)try{i=r.css(s,\"backgroundColor\"),s=s.parentNode}catch(u){}o=o.blend(i&&\"transparent\"!==i?i:\"_default\")}o=o.toRgbaString()}try{n.style[t]=o}catch(u){}}},r.fx.step[t]=function(n){n.colorInit||(n.start=l(n.elem,t),n.end=l(n.end),n.colorInit=!0),r.cssHooks[t].set(n.elem,n.start.transition(n.end,n.pos))}})},l.hook(s),r.cssHooks.borderColor={expand:function(r){var n={};return h([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(t,e){n[\"border\"+e+\"Color\"]=r}),n}},a=r.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}}(jQuery);\n\n\n/** -------------- SOME GENERAL FUNCTIONS ---------------------*/\n\n/**\n * ismouseover function - check if the mouse over some object\n */\n!function(t){function e(){try{var i=this===document?t(this):t(this).contents();}catch(error){return(false);}i.mousemove(function(e){t.mlp={x:e.pageX,y:e.pageY}}),i.find(\"iframe\").on(\"load\",e)}t.mlp={x:0,y:0},t(e),t.fn.ismouseover=function(){var e=!1;return this.eq(0).each(function(){var i=t(this).is(\"iframe\")?t(this).contents().find(\"body\"):t(this),n=i.offset();e=n.left<=t.mlp.x&&n.left+i.outerWidth()>t.mlp.x&&n.top<=t.mlp.y&&n.top+i.outerHeight()>t.mlp.y}),e}}(jQuery);\n\n\n\nfunction UGThumbsGeneral(){\n\t\n\tvar t = this, g_objThis = jQuery(t);\n\t\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objects, g_objWrapper; \n\tvar g_arrItems, g_objStrip, g_objParent;\n\tvar g_functions = new UGFunctions();\n\tvar g_strip;\n\tvar outer_options;\n\t\n\tthis.type = {\n\t\t\tGET_THUMBS_ALL: \"all\",\n\t\t\tGET_THUMBS_RATIO: \"ratio\",\n\t\t\tGET_THUMBS_NO_RATIO: \"no_ratio\",\n\t\t\tGET_THUMBS_NEW:\"new\"\n\t};\n\t\n\tthis.events = {\t\t\n\t\tSETOVERSTYLE: \"thumbmouseover\",\n\t\tSETNORMALSTYLE: \"thumbmouseout\",\n\t\tSETSELECTEDSTYLE: \"thumbsetselected\",\n\t\t\n\t\tPLACEIMAGE: \"thumbplaceimage\",\n\t\tAFTERPLACEIMAGE: \"thumb_after_place_image\",\n\t\tIMAGELOADERROR: \"thumbimageloaderror\",\n\t\tTHUMB_IMAGE_LOADED: \"thumb_image_loaded\"\n\t};\n\t\n\tvar g_options = {\n\t\t\tthumb_width:88,\t\t\t\t\t\t\t\t//thumb width\n\t\t\tthumb_height:50,\t\t\t\t\t\t\t//thumb height\n\t\t\tthumb_fixed_size: true,\t\t\t\t\t\t//true,false - fixed/dynamic thumbnail width\n\t\t\tthumb_resize_by: \"height\",\t\t\t\t\t//set resize by width or height of the image in case of non fixed size, \n\t\t\t\n\t\t\tthumb_border_effect:true,\t\t\t\t\t//true, false - specify if the thumb has border\n\t\t\tthumb_border_width: 0,\t\t\t\t\t\t//thumb border width\n\t\t\tthumb_border_color: \"#000000\",\t\t\t\t//thumb border color\n\t\t\tthumb_over_border_width: 0,\t\t\t\t\t//thumb border width in mouseover state\n\t\t\tthumb_over_border_color: \"#d9d9d9\",\t\t\t//thumb border color in mouseover state\n\t\t\tthumb_selected_border_width: 1,\t\t\t\t//thumb width in selected state\n\t\t\tthumb_selected_border_color: \"#d9d9d9\",\t\t//thumb border color in selected state\n\t\t\t\n\t\t\tthumb_round_corners_radius:0,\t\t\t\t//thumb border radius\n\t\t\t\n\t\t\tthumb_color_overlay_effect: true,\t\t\t//true,false - thumb color overlay effect, release the overlay on mouseover and selected states\n\t\t\tthumb_overlay_color: \"#000000\",\t\t\t\t//thumb overlay color\n\t\t\tthumb_overlay_opacity: 0.4,\t\t\t\t\t//thumb overlay color opacity\n\t\t\tthumb_overlay_reverse:false,\t\t\t\t//true,false - reverse the overlay, will be shown on selected state only\n\t\t\t\n\t\t\tthumb_image_overlay_effect: false,\t\t\t//true,false - images orverlay effect on normal state only\n\t\t\tthumb_image_overlay_type: \"bw\",\t\t\t\t//bw , blur, sepia - the type of image effect overlay, black and white, sepia and blur.\n\t\t\t\n\t\t\tthumb_transition_duration: 200,\t\t\t\t//thumb effect transition duration\n\t\t\tthumb_transition_easing: \"easeOutQuad\",\t\t//thumb effect transition easing\n\t\t\t\n\t\t\tthumb_show_loader: true,\t\t\t\t\t//show thumb loader while loading the thumb\n\t\t\tthumb_loader_type: \"dark\",\t\t\t\t\t//dark, light - thumb loader type\n\t\t\t\n\t\t\tthumb_wrapper_as_link: false,\t\t\t\t//set thumb as link\n\t\t\tthumb_link_newpage: false\t\t\t\t\t//set the link to open newpage\n\t\t}\n\t\n\t\tvar g_temp = {\n\t\t\ttouchEnabled: false,\n\t\t\tnum_thumbs_checking:0,\n\t\t\tcustomThumbs:false,\n\t\t\tfuncSetCustomThumbHtml:null,\n\t\t\tisEffectBorder: false,\n\t\t\tisEffectOverlay: false,\n\t\t\tisEffectImage: false,\n\t\t\tcolorOverlayOpacity: 1,\n\t\t\tthumbInnerReduce: 0,\n\t\t\tallowOnResize: true,\t\t//allow onresize event\n\t\t\tclassNewThumb: \"ug-new-thumb\"\n\t\t};\n\t\t\n\t\n\t\tvar g_serviceParams = {\t\t\t//service variables\t\n\t\t\ttimeout_thumb_check:100,\n\t\t\tthumb_max_check_times:600,\t//60 seconds\n\t\t\teventSizeChange: \"thumb_size_change\"\n\t\t};\n\n\t\t/**\n\t\t * init the thumbs object\n\t\t */\n\t\tthis.init = function(gallery, customOptions){\n\t\t\tg_objects = gallery.getObjects();\n\t\t\tg_gallery = gallery;\n\t\t\tg_objGallery = jQuery(gallery);\n\t\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\t\tg_arrItems = g_objects.g_arrItems;\n\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\n\t\t\t//set effects vars:\n\t\t\tg_temp.isEffectBorder = g_options.thumb_border_effect;\n\t\t\tg_temp.isEffectOverlay = g_options.thumb_color_overlay_effect;\n\t\t\tg_temp.isEffectImage = g_options.thumb_image_overlay_effect;\n\t\t\n\t\t}\n\t\t\n\t\tthis._____________EXTERNAL_SETTERS__________ = function(){};\n\t\t\n\t\t\n\t\t/**\n\t\t * append html from item\n\t\t */\n\t\tfunction appendHtmlThumbFromItem(itemIndex, imageEffectClass){\n\t\t\t\n\t\t\tvar objItem = g_arrItems[itemIndex];\n\t\t\t \n\t\t\t var classAddition = \"\";\n\t\t\t if(g_temp.customThumbs == false)\n\t\t\t\t classAddition = \" ug-thumb-generated\";\n\t\t\t\n\t\t\tvar zIndex = objItem.index + 1;\n\t\t\tvar thumbStyle = \"style='z-index:\"+zIndex+\";'\";\n\t\t\t\n\t\t \tvar htmlThumb = \"<div class='ug-thumb-wrapper\"+classAddition+\"' \" + thumbStyle + \"></div>\";\n\n\t\t\t if(g_options.thumb_wrapper_as_link == true){\n\t\t\t\t var urlLink = objItem.link;\n\t\t\t\t if(objItem.link == \"\")\n\t\t\t\t\t urlLink = \"javascript:void(0)\";\n\t\t\t\t\n\t\t\t\t var linkTarget = \"\";\n\t\t\t\t\tif(g_options.thumb_link_newpage == true && objItem.link)\n\t\t\t\t\t\tlinkTarget = \" target='_blank'\";\n\t\t\t\t \n\t\t\t\t var htmlThumb = \"<a href='\" + urlLink + \"'\"+linkTarget+\" class='ug-thumb-wrapper\"+classAddition+\"'></a>\";\n\t\t\t }\n\t\t\t \n\t\t\t var objThumbWrapper = jQuery(htmlThumb);\n\t\t\t \n\t\t\t var objImage = objItem.objThumbImage;\n\t\t\t\n\t\t\t if(g_temp.customThumbs == false){\n\t\t\t\t \n\t\t\t\t if(g_options.thumb_show_loader == true && objImage){\n\t\t\t\t\t \n\t\t\t\t\t var loaderClass = \"ug-thumb-loader-dark\";\n\t\t\t\t\t if(g_options.thumb_loader_type == \"bright\")\n\t\t\t\t\t\t loaderClass = \"ug-thumb-loader-bright\";\n\t\t\t\t\t \n\t\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-loader \" + loaderClass + \"'></div>\");\n\t\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-error' style='display:none'></div>\");\n\t\t\t\t }\n\t\t\t\t \t\t\t\t\t \n\t\t\t\t if(objImage){\n\t\t\t\t\t objImage.addClass(\"ug-thumb-image\");\n\t\t\t\t\t \n\t\t\t\t\t //if image overlay effects active, clone the image, and set the effects class on it\n\t\t\t\t\t if(g_options.thumb_image_overlay_effect == true){\n\t\t\t\t\t\tvar objImageOverlay = objImage.clone().appendTo(objThumbWrapper);\n\t\t\t\t\t\t\n\t\t\t\t\t\tobjImageOverlay.addClass(\"ug-thumb-image-overlay \" + imageEffectClass).removeClass(\"ug-thumb-image\");\n\t\t\t\t\t\tobjImageOverlay.fadeTo(0,0);\n\t\t\t\t\t\tobjItem.objImageOverlay = objImageOverlay;\n\t\t\t\t\t }\n\t\t\t\t\t\t\t \n\t\t\t\t\t objThumbWrapper.append(objImage);\n\t\t\t\t }\n\t\t\t\t \n\t\t\t }//end if not custom thumb\n\t\t\t \n\t\t\t if(g_temp.isEffectBorder)\n\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-border-overlay'></div>\");\n\t\t\t \n\t\t\t if(g_temp.isEffectOverlay)\n\t\t\t\t objThumbWrapper.append(\"<div class='ug-thumb-overlay'></div>\");\n\t\t\t \n\t\t\t g_objParent.append(objThumbWrapper);\n\n\t\t\t //only custom thumbs function\n\t\t\t if(g_temp.customThumbs){\n\t\t\t\t \n\t\t\t\t g_temp.funcSetCustomThumbHtml(objThumbWrapper, objItem);\n\t\t\t\t \n\t\t\t }\n\t\t\t \n\t\t\t //add thumb wrapper object to items array\n\t\t\t g_arrItems[itemIndex].objThumbWrapper = objThumbWrapper;\n\t\t\t\n\t\t\t return(objThumbWrapper);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * append the thumbs html to some parent\n\t\t */\n\t\tthis.setHtmlThumbs = function(objParent, isAppend){\n\t\t\t\n\t\t\tg_objParent = objParent;\n\t\t\t\n\t\t\t//set image effect class\n\t\t\tif(g_temp.isEffectImage == true){\n\t\t\t\tvar imageEffectClass = getImageEffectsClass();\n\t\t\t}\n\t\t\t\n\t\t\tif(isAppend !== true){\t\t//set all thumbs\n\t\t\t\tvar numItems = g_gallery.getNumItems();\n\t\t\t\t\n\t\t\t\t //append thumbs to strip\n\t\t\t\t for(var i=0;i<numItems;i++){\n\t\t\t\t\t appendHtmlThumbFromItem(i, imageEffectClass);\n\t\t\t\t }\n\t\t\t\t\n\t\t\t}else{\t\t//append only new items, mark only new added thumbs as new thumbs\n\t\t\t\t\n\t\t\t\tvar objThumbs = t.getThumbs();\n\t\t\t\t\n\t\t\t\tobjThumbs.removeClass(g_temp.classNewThumb);\n\t\t\t\t\n\t\t\t\tvar arrNewIndexes = g_gallery.getNewAddedItemsIndexes();\n\t\t\t\t\n\t\t\t\t jQuery.each(arrNewIndexes,function(i,itemIndex){\n\t\t\t\t\t \n\t\t\t\t\t var objThumbWrapper = appendHtmlThumbFromItem(itemIndex, imageEffectClass);\n\t\t\t\t\t objThumbWrapper.addClass(g_temp.classNewThumb);\n\t\t\t\t\t \n\t\t\t\t });\n\t\t\t\t \t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t \n\t\t}\n\n\t\t\n\t\tfunction _______________SETTERS______________(){};\n\n\t\t\n\t\t/**\n\t\t * set thumb size with all the inside components (without the image).\n\t\t * else, set to all the thumbs\n\t\t */\n\t\tfunction setThumbSize(width, height, objThumb, innerOnly){\n\t\t\t\n\t\t\tvar objCss = {\n\t\t\t\twidth: width+\"px\",\n\t\t\t\theight: height+\"px\"\n\t\t\t};\n\t\t\t\n\t\t\tvar objCssInner = {\n\t\t\t\t\twidth: width-g_temp.thumbInnerReduce+\"px\",\n\t\t\t\t\theight: height-g_temp.thumbInnerReduce+\"px\"\n\t\t\t\t};\n\t\t\t\n\t\t\tvar selectorsString = \".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay\";\n\t\t\t\n\t\t\t//set thumb size\n\t\t\tif(objThumb){\n\t\t\t\tif(innerOnly !== true)\n\t\t\t\t\tobjThumb.css(objCss);\n\t\t\t\t\n\t\t\t\tobjThumb.find(selectorsString).css(objCssInner);\n\t\t\t}\n\t\t\telse{\t//set to all items\n\t\t\t\tg_objParent.children(\".ug-thumb-wrapper\").css(objCss);\n\t\t\t\tg_objParent.find(selectorsString).css(objCssInner);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t\n\t\t/**\n\t\t * set thumb border effect\n\t\t */\n\t\tfunction setThumbBorderEffect(objThumb, borderWidth, borderColor, noAnimation){\n\t\t\t\t\t\t\n\t\t\tif(!noAnimation)\n\t\t\t\tvar noAnimation = false;\n\t\t\t\n\t\t\tif(g_gallery.isFakeFullscreen())\n\t\t\t\tnoAnimation = true;\n\t\t\t\n\t\t\tvar objBorderOverlay = objThumb.children(\".ug-thumb-border-overlay\");\n\t\t\t\n\t\t\t//set the border to thumb and not to overlay if no border size transition\n\t\t\t/*\n\t\t\tif(g_options.thumb_border_width == g_options.thumb_over_border_width\n\t\t\t\t&& g_options.thumb_border_width == g_options.thumb_selected_border_width)\n\t\t\t\tobjBorderOverlay = objThumb;\n\t\t\t*/\n\t\t\t\n\t\t\tvar objCss = {};\n\t\t\t\n\t\t\tobjCss[\"border-width\"] = borderWidth + \"px\";\n\t\t\t\n\t\t\tif(borderWidth != 0)\n\t\t\t\tobjCss[\"border-color\"] = borderColor;\n\t\t\t\n\t\t\tif(noAnimation && noAnimation === true){\n\t\t\t\tobjBorderOverlay.css(objCss);\n\t\t\t\t\n\t\t\t\tif(borderWidth == 0)\n\t\t\t\t\tobjBorderOverlay.hide();\n\t\t\t\telse\n\t\t\t\t\tobjBorderOverlay.show();\n\t\t\t}\n\t\t\telse{\n\t\t\t\t\n\t\t\t\tif(borderWidth == 0)\n\t\t\t\t\tobjBorderOverlay.stop().fadeOut(g_options.thumb_transition_duration);\n\t\t\t\telse\n\t\t\t\t\tobjBorderOverlay.show().stop().fadeIn(g_options.thumb_transition_duration);\n\t\t\t\t\n\t\t\t\tanimateThumb(objBorderOverlay, objCss);\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumb border effect\n\t\t */\n\t\tfunction setThumbColorOverlayEffect(objThumb, isActive, noAnimation){\n\t\t\t\n\t\t\tvar objOverlay = objThumb.children(\".ug-thumb-overlay\");\n\t\t\t\n\t\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\tif(noAnimation && noAnimation === true)\n\t\t\t\tanimationDuration = 0;\n\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjOverlay.stop(true).fadeTo(animationDuration, g_temp.colorOverlayOpacity);\n\t\t\t}else{\n\t\t\t\tobjOverlay.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumbnail bw effect\n\t\t */\n\t\tfunction setThumbImageOverlayEffect(objThumb, isActive, noAnimation){\n\t\t\t\n\t\t\tvar objImage = objThumb.children(\"img.ug-thumb-image\");\n\t\t\tvar objImageOverlay = objThumb.children(\"img.ug-thumb-image-overlay\");\n\t\t\t\t\t\n\t\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\tif(noAnimation && noAnimation === true)\n\t\t\t\tanimationDuration = 0;\n\t\t\t\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjImageOverlay.stop(true).fadeTo(animationDuration,1);\n\t\t\t}else{\n\t\t\t\t//show the image, hide the overlay\n\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\tobjImageOverlay.stop(true).fadeTo(animationDuration,0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse out - return the thumb style to original\n\t\t */\n\t\tthis.setThumbNormalStyle = function(objThumb, noAnimation, fromWhere){\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\tobjThumb.removeClass(\"ug-thumb-over\");\n\t\t\t}\n\t\t\t\n\t\t\tif(g_temp.isEffectBorder)\n\t\t\t  setThumbBorderEffect(objThumb, g_options.thumb_border_width, g_options.thumb_border_color, noAnimation);\n\t\t\t\n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?false:true;\n\t\t\t\tsetThumbColorOverlayEffect(objThumb, isSet, noAnimation);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isEffectImage){\n\t\t\t\tsetThumbImageOverlayEffect(objThumb, true, noAnimation);\n\t\t\t}\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.SETNORMALSTYLE, objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse over - turn thumb style to over position\n\t\t */\n\t\tthis.setThumbOverStyle = function(objThumb){\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\tobjThumb.addClass(\"ug-thumb-over\");\n\t\t\t}\n\t\t\t\n\t\t\t//border effect\n\t\t\tif(g_temp.isEffectBorder)\n\t\t\t\tsetThumbBorderEffect(objThumb, g_options.thumb_over_border_width, g_options.thumb_over_border_color);\n\t\t\t\n\t\t\t//color overlay effect \n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?true:false;\n\t\t\t\tsetThumbColorOverlayEffect(objThumb, isSet);\n\t\t\t}\n\t\t\t\n\t\t\t//image overlay effect\n\t\t\tif(g_temp.isEffectImage == true){\n\t\t\t\tsetThumbImageOverlayEffect(objThumb, false);\n\t\t\t}\n\t\t\t\n\t\t\t//trigger event for parent classes\n\t\t\tg_objThis.trigger(t.events.SETOVERSTYLE, objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumb selected style\n\t\t */\n\t\tfunction setThumbSelectedStyle(objThumb, noAnimation){\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isEffectBorder)\t\t\t\n\t\t\t\tsetThumbBorderEffect(objThumb, g_options.thumb_selected_border_width, g_options.thumb_selected_border_color, noAnimation);\n\t\t\t\n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?true:false;\n\t\t\t\tsetThumbColorOverlayEffect(objThumb, isSet, noAnimation);\n\t\t\t}\n\t\t\t\n\t\t\t//image overlay effect\n\t\t\tif(g_temp.isEffectImage)\n\t\t\t\tsetThumbImageOverlayEffect(objThumb, false, noAnimation);\n\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.SETSELECTEDSTYLE, objThumb);\n\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set loading error of the thumb\n\t\t */\n\t\tfunction setItemThumbLoadedError(objThumb){\n\t\t\t\n\t\t\tvar objItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\tobjItem.isLoaded = true;\n\t\t\tobjItem.isThumbImageLoaded = false;\t\t\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.IMAGELOADERROR, objThumb);\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tobjThumb.children(\".ug-thumb-loader\").hide();\n\t\t\tobjThumb.children(\".ug-thumb-error\").show();\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set border radius of all the thmbs\n\t\t */\n\t\tfunction setThumbsBorderRadius(objThumbs){\n\t\t\t\t\t\t\n\t\t\tif(g_options.thumb_round_corners_radius <= 0)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\t//set radius:\n\t\t\tvar objCss = {\n\t\t\t\t\"border-radius\":g_options.thumb_round_corners_radius + \"px\"\n\t\t\t};\n\t\t\t\n\t\t\tif(objThumbs){\n\t\t\t\tobjThumbs.css(objCss);\n\t\t\t\tobjThumbs.find(\".ug-thumb-border-overlay\").css(objCss);\n\t\t\t}else{\n\t\t\t\tg_objParent.find(\".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay\").css(objCss);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * animate thumb transitions\n\t\t */\n\t\tfunction animateThumb(objThumb, objThumbCss){\n\t\t\t\n\t\t\tobjThumb.stop(true).animate(objThumbCss ,{\n\t\t\t\tduration: g_options.thumb_transition_duration,\n\t\t\t\teasing: g_options.thumb_transition_easing,\n\t\t\t\tqueue: false\n\t\t\t});\n\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * redraw the thumb style according the state\n\t\t */\n\t\tfunction redrawThumbStyle(objThumb){\n\n\t\t\tif(isThumbSelected(objThumb) == true)\n\t\t\t\tsetThumbSelectedStyle(objThumb, true, \"redraw\");\n\t\t\telse\n\t\t\t\tt.setThumbNormalStyle(objThumb, true, \"redraw\");\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t/**\n\t\t * place thumb image\n\t\t * retrun - false, if already loaded\n\t\t * return true - if was set on this function\n\t\t * isForce - set the image anyway\n\t\t */\n\t\tfunction placeThumbImage(objThumb, objImage, objItem){\n\t\t\t\n\t\t\t//scale the image\n\t\t\tif(g_options.thumb_fixed_size == true){\n\t\t\t\tg_functions.scaleImageCoverParent(objImage, objThumb);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t\n\t\t\t\t//variant size\n\t\t\t\t\n\t\t\t\tif(g_options.thumb_resize_by == \"height\")\t//horizontal strip\n\t\t\t\t\tg_functions.scaleImageByHeight(objImage, g_options.thumb_height);\n\t\t\t\telse\t\t//vertical strip\n\t\t\t\t\tg_functions.scaleImageByWidth(objImage, g_options.thumb_width);\n\t\t\t\t\n\t\t\t\tvar imageSize = g_functions.getElementSize(objImage);\n\t\t\t\tg_functions.placeElement(objImage, 0, 0);\n\t\t\t\tsetThumbSize(imageSize.width, imageSize.height, objThumb);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//hide loader\n\t\t\tobjThumb.children(\".ug-thumb-loader\").hide();\n\t\t\t\n\t\t\t//show image\n\t\t\tobjImage.show();\n\t\t\t\n\t\t\t//if overlay effect exists\n\t\t\tif(g_options.thumb_image_overlay_effect == false){\n\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t}\n\t\t\telse{\n\n\t\t\t\t//place bw image also if exists\n\t\t\t\tif(g_options.thumb_image_overlay_effect == true){\n\t\t\t\t\tcopyPositionToThumbOverlayImage(objImage);\n\t\t\t\t}\n\n\t\t\t\t//hide the original image (avoid blinking at start)\n\t\t\t\tobjImage.fadeTo(0,0);\n\n\t\t\t\t//redraw the style, because this function can overwrite it\n\t\t\t\tredrawThumbStyle(objThumb);\n\t\t\t}\n\t\t\t\n\t\t\tg_objThis.trigger(t.events.AFTERPLACEIMAGE, objThumb);\n\t\t\t\n\t\t}\n\n\n\t\t\n\t\t/**\n\t\t * copy image position to bw image (if exists)\n\t\t */\n\t\tfunction copyPositionToThumbOverlayImage(objImage){\n\t\t\t\t\t\t\n\t\t\tvar objImageBW = objImage.siblings(\".ug-thumb-image-overlay\");\n\t\t\tif(objImageBW.length == 0)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\tvar objSize = g_functions.getElementSize(objImage);\n\t\t\t\t\n\t\t\tvar objCss = {\n\t\t\t\t\t\"width\":objSize.width+\"px\",\n\t\t\t\t\t\"height\":objSize.height+\"px\",\n\t\t\t\t\t\"left\":objSize.left+\"px\",\n\t\t\t\t\t\"top\":objSize.top+\"px\"\n\t\t\t\t}\n\t\t\t\t\n\t\t\tobjImageBW.css(objCss);\n\t\t\t\n\t\t\t//show the image\n\t\t\tif(g_temp.customThumbs == false)\n\t\t\t\tobjImageBW.fadeTo(0,1);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tfunction _______________GETTERS______________(){};\n\t\t\n\t\t\n\t\t/**\n\t\t * get the image effects class from the options\n\t\t */\n\t\tfunction getImageEffectsClass(){\n\t\t\t\n\t\t\tvar imageEffectClass = \"\";\n\t\t\tvar arrEffects = g_options.thumb_image_overlay_type.split(\",\");\n\t\t\t\n\t\t\tfor(var index in arrEffects){\n\t\t\t\tvar effect = arrEffects[index];\n\t\t\t\t\n\t\t\t\tswitch(effect){\n\t\t\t\t\tcase \"bw\":\n\t\t\t\t\t\timageEffectClass += \" ug-bw-effect\";\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"blur\":\n\t\t\t\t\t\timageEffectClass += \" ug-blur-effect\";\n\t\t\t\t\tbreak; \n\t\t\t\t\tcase \"sepia\":\n\t\t\t\t\t\timageEffectClass += \" ug-sepia-effect\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\n\t\t\treturn(imageEffectClass);\n\t\t}\n\n\t\t/**\n\t\t * get if the thumb is selected\n\t\t */\n\t\tfunction isThumbSelected(objThumbWrapper){\n\t\t\t\n\t\t\tif(objThumbWrapper.hasClass(\"ug-thumb-selected\"))\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\treturn(false);\n\t\t}\n\n\t\t\n\t\tfunction _______________EVENTS______________(){};\n\t\t\n\t\t/**\n\t\t * on thumb size change - triggered by parent on custom thumbs type\n\t\t */\n\t\tfunction onThumbSizeChange(temp, objThumb){\n\t\t\t\n\t\t\tobjThumb = jQuery(objThumb);\n\t\t\tvar objItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\tvar objSize = g_functions.getElementSize(objThumb);\n\t\t\t\n\t\t\tsetThumbSize(objSize.width, objSize.height, objThumb, true);\n\t\t\t\n\t\t\tredrawThumbStyle(objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse over\n\t\t */\n\t\tfunction onMouseOver(objThumb){\n\t\t\t\n\t\t\t\n\t\t\t//if touch enabled unbind event\n\t\t\tif(g_temp.touchEnabled == true){\n\t\t\t\tobjThumbs.off(\"mouseenter\").off(\"mouseleave\");\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(isThumbSelected(objThumb) == false)\n\t\t\t\tt.setThumbOverStyle(objThumb);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on thumb mouse out\n\t\t */\n\t\tfunction onMouseOut(objThumb){\n\t\t\t\n\t\t\tif(g_temp.touchEnabled == true)\n\t\t\t\treturn(true);\n\t\t\t\t\t\t\t\n\t\t\tif(isThumbSelected(objThumb) == false)\n\t\t\t\tt.setThumbNormalStyle(objThumb, false);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on image loaded event\n\t\t */\n\t\tfunction onImageLoaded(image, isForce){\n\n\t\t\tif(!isForce)\n\t\t\t\tvar isForce = false;\n\t\t\t\n\t\t\tvar objImage = jQuery(image);\n\t\t\tvar objThumb = objImage.parents(\".ug-thumb-wrapper\");\n\t\t\t\n\t\t\tif(objThumb.parent().length == 0)\t\t//don't treat detached thumbs\n\t\t\t\treturn(false);\n\t\t\t\t\t\t\n\t\t\tobjItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\tif(objItem.isLoaded == true && isForce === false)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\tt.triggerImageLoadedEvent(objThumb, objImage);\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true){\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.PLACEIMAGE, [objThumb, objImage]);\n\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tplaceThumbImage(objThumb, objImage, objItem);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * on image loaded - set appropriete item vars\n\t\t */\n\t\tfunction onThumbImageLoaded(data, objThumb, objImage){\n\t\t\t\t\t\t\n\t\t\tobjItem = t.getItemByThumb(objThumb);\n\t\t\t\t\t\t\n\t\t\tobjItem.isLoaded = true;\n\t\t\tobjItem.isThumbImageLoaded = true;\n\t\t\t\n\t\t\tvar objSize = g_functions.getImageOriginalSize(objImage);\n\t\t\t\t\t\t\n\t\t\tobjItem.thumbWidth = objSize.width;\n\t\t\tobjItem.thumbHeight = objSize.height;\n\t\t\tobjItem.thumbRatioByWidth = objSize.width / objSize.height;\n\t\t\tobjItem.thumbRatioByHeight = objSize.height / objSize.width;\n\t\t\t\n\t\t\tobjThumb.addClass(\"ug-thumb-ratio-set\");\n\t\t\t\n\t\t}\n\n\t\t\n\t\t/**\n\t\t * set thumbnails html properties\n\t\t */\n\t\tthis.setHtmlProperties = function(objThumbs){\n\t\t\t\n\t\t\tif(!objThumbs)\n\t\t\t\tvar objThumbs = t.getThumbs();\n\t\t\t\n\t\t\t//set thumb params\n\t\t\tif(g_temp.customThumbs == false){\n\t\t\t\tvar objThumbCss = {};\n\t\t\t\n\t\t\t\t//set thumb fixed size\n\t\t\t\tif(g_options.thumb_fixed_size == true)\n\t\t\t\t\tsetThumbSize(g_options.thumb_width, g_options.thumb_height, objThumbs);\n\t\t\t\t\n\t\t\t\t setThumbsBorderRadius(objThumbs);\n\t\t\t}\n\t\t\t \n\t\t\t //set normal style to all the thumbs\n\t\t\tobjThumbs.each(function(){\n\t\t\t\t var objThumb = jQuery(this);\n\t\t\t\t redrawThumbStyle(objThumb);\n\t\t\t });\n\t\t\t\n\n\t\t\t//set color. if empty set from css\n\t\t\tif(g_temp.isEffectOverlay){\n\t\t\t\t\n\t\t\t\tif(g_options.thumb_overlay_color){\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tvar objCss = {};\n\t\t\t\t\tif(g_functions.isRgbaSupported()){\n\t\t\t\t\t\tvar colorRGB = g_functions.convertHexToRGB(g_options.thumb_overlay_color, g_options.thumb_overlay_opacity);\n\t\t\t\t\t\tobjCss[\"background-color\"] = colorRGB;\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tobjCss[\"background-color\"] = g_options.thumb_overlay_color;\n\t\t\t\t\t\tg_temp.colorOverlayOpacity = g_options.thumb_overlay_opacity;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tobjThumbs.find(\".ug-thumb-overlay\").css(objCss);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t\t\t\n\t\t/**\n\t\t * set the thumb on selected state\n\t\t */\n\t\tthis.setThumbSelected = function(objThumbWrapper){\n\t\t\t\n\t\t\tif(g_temp.customThumbs == true)\n\t\t\t\tobjThumbWrapper.removeClass(\"ug-thumb-over\");\n\t\t\t\n\t\t\tif(isThumbSelected(objThumbWrapper) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tobjThumbWrapper.addClass(\"ug-thumb-selected\");\n\t\t\t\n\t\t\t//set thumb selected style\n\t\t\tsetThumbSelectedStyle(objThumbWrapper);\n\t\t}\n\t\t\n\t\t/**\n\t\t * set the thumb unselected state\n\t\t */\n\t\tthis.setThumbUnselected = function(objThumbWrapper){\n\t\t\t\n\t\t\t//remove the selected class\n\t\t\tobjThumbWrapper.removeClass(\"ug-thumb-selected\");\n\t\t\t\n\t\t\tt.setThumbNormalStyle(objThumbWrapper, false, \"set unselected\");\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set the options of the strip\n\t\t */\n\t\tthis.setOptions = function(objOptions){\n\t\t\t\n\t\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * set thumb inner reduce - reduce this number when resizing thumb inner\n\t\t */\n\t\tthis.setThumbInnerReduce = function(innerReduce){\n\t\t\t\n\t\t\tg_temp.thumbInnerReduce = innerReduce;\n\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * set custom thumbs\n\t\t * allowedEffects - border, overlay, image\n\t\t */\n\t\tthis.setCustomThumbs = function(funcSetHtml, arrAlowedEffects, customOptions){\n\t\t\t\n\t\t\tg_temp.customThumbs = true;\n\t\t\t\t\t\t\n\t\t\tif(typeof funcSetHtml != \"function\")\n\t\t\t\tthrow new Error(\"The argument should be function\");\n\t\t\t\n\t\t\t\n\t\t\tg_temp.funcSetCustomThumbHtml = funcSetHtml;\n\t\t\t\n\t\t\t//enable effects:\n\t\t\tif(jQuery.inArray(\"overlay\", arrAlowedEffects) == -1)\n\t\t\t\tg_temp.isEffectOverlay = false;\t\t\t\t\n\t\t\t\n\t\t\tif(jQuery.inArray(\"border\", arrAlowedEffects) == -1)\n\t\t\t\tg_temp.isEffectBorder = false;\n\t\t\t\n\t\t\tg_temp.isEffectImage = false;\t\t//for custom effects the image is always off\n\n\t\t\t//check for dissalow onresize\n\t\t\tif(customOptions && customOptions.allow_onresize === false){\n\t\t\t\tg_temp.allowOnResize = false;\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tthis._____________EXTERNAL_GETTERS__________ = function(){};\n\n\t\t/**\n\t\t * get the options object\n\t\t */\n\t\tthis.getOptions = function(){\n\t\t\t\n\t\t\treturn(g_options);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get num thumbs\n\t\t */\n\t\tthis.getNumThumbs = function(){\n\t\t\tvar numThumbs = g_arrItems.length;\n\t\t\treturn(numThumbs);\n\t\t}\n\n\t\t\n\t\t/**\n\t\t * get thumb image\n\t\t */\n\t\tthis.getThumbImage = function(objThumb){\n\t\t\t\n\t\t\tvar objImage = objThumb.find(\".ug-thumb-image\");\n\t\t\treturn(objImage);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get thumbs by index\n\t\t */\n\t\tthis.getThumbByIndex = function(index){\n\t\t\tvar objThumbs = t.getThumbs();\n\t\t\t\n\t\t\tif(index >= objThumbs.length || index < 0)\n\t\t\t\tthrow new Error(\"Wrong thumb index\");\n\t\t\t\n\t\t\tvar objThumb = jQuery(objThumbs[index]);\n\t\t\t\n\t\t\treturn(objThumb);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get all thumbs jquery object\n\t\t */\n\t\tthis.getThumbs = function(mode){\n\t\t\t\n\t\t\tvar thumbClass = \".ug-thumb-wrapper\";\n\t\t\tvar classRatio = \".ug-thumb-ratio-set\";\n\t\t\t\n\t\t\tswitch(mode){\n\t\t\t\tdefault:\n\t\t\t\tcase t.type.GET_THUMBS_ALL:\n\t\t\t\t\tvar objThumbs = g_objParent.children(thumbClass)\n\t\t\t\tbreak;\n\t\t\t\tcase t.type.GET_THUMBS_NO_RATIO:\n\t\t\t\t\tvar objThumbs = g_objParent.children(thumbClass).not(classRatio);\n\t\t\t\tbreak;\n\t\t\t\tcase t.type.GET_THUMBS_RATIO:\n\t\t\t\t\tvar objThumbs = g_objParent.children(thumbClass + classRatio);\n\t\t\t\tbreak;\n\t\t\t\tcase t.type.GET_THUMBS_NEW:\n\t\t\t\t\tvar objThumbs = g_objParent.children(\".\"+g_temp.classNewThumb);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\treturn(objThumbs);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get item by thumb object\n\t\t */\n\t\tthis.getItemByThumb = function(objThumb){\n\t\t\t\n\t\t\tvar index = objThumb.data(\"index\");\n\t\t\t\n\t\t\tif(index === undefined)\n\t\t\t\tindex = objThumb.index();\n\t\t\t\n\t\t\tvar arrItem = g_arrItems[index];\n\t\t\treturn(arrItem);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * is thumb loaded\n\t\t */\n\t\tthis.isThumbLoaded = function(objThumb){\n\t\t\t\n\t\t\tvar objItem = t.getItemByThumb(objThumb);\n\t\t\t\n\t\t\treturn(objItem.isLoaded);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * get global thumb size\n\t\t */\n\t\tthis.getGlobalThumbSize = function(){\n\t\t\t\n\t\t\tvar objSize = {\n\t\t\t\twidth:g_options.thumb_width,\n\t\t\t\theight: g_options.thumb_height\n\t\t\t};\n\t\t\t\n\t\t\treturn(objSize);\n\t\t}\n\t\t\n\t\t\n\t\tthis._____________EXTERNAL_OTHERS__________ = function(){};\n\n\n\t\t/**\n\t\t * init events\n\t\t */\n\t\tthis.initEvents = function(){\n\t\t\t\n\t\t\tvar selectorThumb = \".ug-thumb-wrapper\";\n\t\t\t\n\t\t\t//one time event\n\t\t\tif(g_temp.allowOnResize == true)\n\t\t\t\tg_objWrapper.on(g_serviceParams.eventSizeChange, onThumbSizeChange);\n\t\t\t\n\t\t\t//on image loaded event - for setting the image sizes\n\t\t\tg_objThis.on(t.events.THUMB_IMAGE_LOADED, onThumbImageLoaded);\n\t\t\t\t\t\t\t\t\t\n\t\t\t//thumbs events\t\t\t\t\t\t\n\t\t\tg_objParent.on(\"touchstart\",selectorThumb,function(){\n\t\t\t\tg_temp.touchEnabled = true;\n\t\t\t\tg_objParent.off(\"mouseenter\").off(\"mouseleave\");\n\t\t\t});\n\t\t\t\n\t\t\tg_objParent.on(\"mouseenter\",selectorThumb,function(event){\t\t\t\t\n\t\t\t\tvar objThumb = jQuery(this);\n\t\t\t\tonMouseOver(objThumb);\n\t\t\t});\n\n\t\t\tg_objParent.on(\"mouseleave\",selectorThumb,function(event){\n\t\t\t\tvar objThumb = jQuery(this);\n\t\t\t\tonMouseOut(objThumb);\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * destroy the thumb element\n\t\t */\n\t\tthis.destroy = function(){\n\t\t\t\n\t\t\tvar selectorThumb = \".ug-thumb-wrapper\";\n\t\t\t\n\t\t\tg_objParent.off(\"touchstart\",selectorThumb);\n\t\t\tg_objWrapper.off(g_serviceParams.eventSizeChange);\n\t\t\tg_objParent.off(\"mouseenter\",selectorThumb);\n\t\t\tg_objParent.off(\"mouseleave\",selectorThumb);\n\t\t\tg_objThis.off(t.events.THUMB_IMAGE_LOADED);\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * preload thumbs images and put them into the thumbnails\n\t\t */\n\t\tthis.loadThumbsImages = function(){\n\n\t\t\tvar objImages = g_objParent.find(\".ug-thumb-image\");\n\t\t\tg_functions.checkImagesLoaded(objImages, null, function(objImage,isError){\n\t\t\t\t\n\t\t\t\tif(isError == false){\n\t\t\t\t\tonImageLoaded(objImage, true);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar objItem = jQuery(objImage).parent();\n\t\t\t\t\tsetItemThumbLoadedError(objItem);\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * trigger image loaded event\n\t\t */\n\t\tthis.triggerImageLoadedEvent = function(objThumb, objImage){\n\n\t\t\tg_objThis.trigger(t.events.THUMB_IMAGE_LOADED, [objThumb, objImage]);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t/**\n\t\t * hide thumbs\n\t\t */\n\t\tthis.hideThumbs = function(){\n\t\t\t\n\t\t\tg_objParent.find(\".ug-thumb-wrapper\").hide();\n\t\t\t\n\t\t}\n\t\t\n}\n\n/**\n * thumbs class\n * addon to strip gallery\n */\nfunction UGThumbsStrip(){\n\n\tvar t = this;\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objects, g_objWrapper; \n\tvar g_arrItems, g_objStrip, g_objStripInner;\n\tvar g_aviaControl, g_touchThumbsControl, g_functions = new UGFunctions();\t\n\tvar g_isVertical = false, g_thumbs = new UGThumbsGeneral();\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tstrip_vertical_type: false,\n\t\tstrip_thumbs_align: \"left\",\t\t\t\t\t//left, center, right, top, middle, bottom - the align of the thumbs when they smaller then the strip size.\n\t\tstrip_space_between_thumbs:6,\t\t\t\t//space between thumbs\n\t\tstrip_thumb_touch_sensetivity:15,  \t\t\t//from 1-100, 1 - most sensetive, 100 - most unsensetive\n\t\tstrip_scroll_to_thumb_duration:500,\t\t\t//duration of scrolling to thumb\n\t\tstrip_scroll_to_thumb_easing:\"easeOutCubic\",\t\t//easing of scrolling to thumb animation\n\t\tstrip_control_avia:true,\t\t\t\t\t//avia control - move the strip according strip moseover position\n\t\tstrip_control_touch:true,\t\t\t\t\t//touch control - move the strip by dragging it\n\t\tstrip_padding_top: 0,\t\t\t\t\t\t//add some space from the top\t\t\t\t\t\n\t\tstrip_padding_bottom: 0,\t\t\t\t\t//add some space from the bottom\n\t\tstrip_padding_left: 0,\t\t\t\t\t\t//add some space from left\n\t\tstrip_padding_right: 0\t\t\t\t\t\t//add some space from right\n\t}\n\t\n\tvar g_temp = {\n\t\tisRunOnce:false,\n\t\tis_placed:false,\n\t\tisNotFixedThumbs: false,\n\t\thandle: null\n\t};\n\t\n\tvar g_sizes = {\n\t\tstripSize:0,\t\t//set after position thumbs\n\t\tstripActiveSize:0,\t//strip size without the padding\n\t\tstripInnerSize:0,\t\n\t\tthumbSize:0,\n\t\tthumbSecondSize:0\t//size of the height and width of the strip\n\t}\n\t\n\tthis.events = {\t\t//events variables\n\t\t\tSTRIP_MOVE:\"stripmove\",\n\t\t\tINNER_SIZE_CHANGE:\"size_change\"\n\t}\t\n\t\n\t//the defaults for vertical align\n\tvar g_defaultsVertical = {\n\t\tstrip_thumbs_align: \"top\",\n\t\tthumb_resize_by: \"width\"\n\t}\n\t\n\t\n\t/**\n\t * set the thumbs strip html\n\t */\t\n\tthis.setHtml = function(objParent){\n\t\t\n\t\tif(!objParent){\n\t\t\tvar objParent = g_objWrapper;\n\t\t\tif(g_options.parent_container != null)\n\t\t\t\tobjParent = g_options.parent_container;\t\t\t\n\t\t}\n\t\t\t\t\n\t\tobjParent.append(\"<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>\");\t\t \n\t\tg_objStrip = objParent.children(\".ug-thumbs-strip\");\n\t\t\n\t\tg_objStripInner = g_objStrip.children(\".ug-thumbs-strip-inner\");\t\t\n\t\t\t\t\n\t\t//put the thumbs to inner strip\n\t\tg_thumbs.setHtmlThumbs(g_objStripInner);\n\t\t\n\t\t//hide thumbs on not fixed mode\n\t\tif(g_temp.isNotFixedThumbs == true)\n\t\t\tg_thumbs.hideThumbs();\n\t\t\n\t}\n\n\t\n\tfunction ___________GENERAL___________(){};\n\t\n\t\n\t/**\n\t * init the strip\n\t */\n\tfunction initStrip(gallery, customOptions){\n\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_gallery.attachThumbsPanel(\"strip\", t);\n\t\t\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\tg_isVertical = g_options.strip_vertical_type;\n\t\t\n\t\t//set vertical defaults\n\t\tif(g_isVertical == true){\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsVertical);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\n\t\t\tcustomOptions.thumb_resize_by = \"width\";\n\t\t}\n\t\t\n\t\tg_thumbs.init(gallery, customOptions);\n\t\t\n\t\tonAfterSetOptions();\n\t}\n\t\n\t\n\t/**\n\t * run this funcion after set options.\n\t */\n\tfunction onAfterSetOptions(){\n\n\t\tvar thumbsOptions = g_thumbs.getOptions();\n\t\t\n\t\tg_temp.isNotFixedThumbs = (thumbsOptions.thumb_fixed_size === false);\n\t\tg_isVertical = g_options.strip_vertical_type;\n\t}\n\t\n\t\n\t/**\n\t * run the strip\n\t */\n\tfunction runStrip(){\n\t\t\n\t\tg_thumbs.setHtmlProperties();\n\t\t\n\t\tinitSizeParams();\n\n\t\tfixSize();\n\n\t\tpositionThumbs();\n\t\t\n\t\t//run only once\n\t\tif(g_temp.isRunOnce == false){\n\n\t\t\t//init thumbs strip touch\n\t\t\tif(g_options.strip_control_touch == true){\n\t\t\t\tg_touchThumbsControl = new UGTouchThumbsControl();\n\t\t\t\tg_touchThumbsControl.init(t);\n\t\t\t}\n\n\t\t\t//init thumbs strip avia control\n\t\t\tif(g_options.strip_control_avia == true){\n\t\t\t\tg_aviaControl = new UGAviaControl();\n\t\t\t\tg_aviaControl.init(t);\n\t\t\t}\n\n\t\t\tcheckControlsEnableDisable();\n\n\t\t\tg_thumbs.loadThumbsImages();\n\t\t\t\n\t\t\tinitEvents();\n\t\t}\n\t\t\n\t\t\t\t\t\t\n\t\tg_temp.isRunOnce = true;\n\n\t}\n\t\n\t\n\t/**\n\t * store strip size and strip active size in vars\n\t * do after all strip size change\n\t */\n\tfunction storeStripSize(size){\n\t\t\n\t\tg_sizes.stripSize = size;\n\n\t\tif(g_isVertical == false)\n\t\t\tg_sizes.stripActiveSize = g_sizes.stripSize - g_options.strip_padding_left - g_options.strip_padding_right;\n\t\telse\n\t\t\tg_sizes.stripActiveSize = g_sizes.stripSize - g_options.strip_padding_top - g_options.strip_padding_bottom;\n\t\t\t\n\t\tif(g_sizes.stripActiveSize < 0)\n\t\t\tg_sizes.stripActiveSize = 0;\n\n\t}\n\t\n\t\n\t/**\n\t * init some size parameters, before size init and after position thumbs\n\t */\n\tfunction initSizeParams(){\n\t\t\n\t\t//set thumb outer size:\n\t\tvar arrThumbs = g_objStripInner.children(\".ug-thumb-wrapper\");\n\t\tvar firstThumb = jQuery(arrThumbs[0]);\n\t\tvar thumbsRealWidth = firstThumb.outerWidth();\n\t\tvar thumbsRealHeight = firstThumb.outerHeight();\n\t\tvar thumbs_options = g_thumbs.getOptions();\n\t\t\n\t\tif(g_isVertical == false){\t\t\t//horizontal\n\t\t\t\n\t\t\tg_sizes.thumbSize = thumbsRealWidth;\n\t\t\n\t\t\tif(thumbs_options.thumb_fixed_size == true){\n\t\t\t\tg_sizes.thumbSecondSize = thumbsRealHeight;\n\t\t\t} else {\n\t\t\t\tg_sizes.thumbSecondSize = thumbs_options.thumb_height;\n\t\t\t}\n\t\t\t\n\t\t\tstoreStripSize(g_objStrip.width());\n\t\t\tg_sizes.stripInnerSize = g_objStripInner.width();\n\t\t\n\t\t}else{\t\t//vertical\n\t\t\tg_sizes.thumbSize = thumbsRealHeight;\n\t\t\t\n\t\t\tif(thumbs_options.thumb_fixed_size == true){\n\t\t\t\tg_sizes.thumbSecondSize = thumbsRealWidth;\n\t\t\t} else {\n\t\t\t\tg_sizes.thumbSecondSize = thumbs_options.thumb_width;\n\t\t\t}\n\t\t\t\n\t\t\tstoreStripSize(g_objStrip.height());\n\n\t\t\tg_sizes.stripInnerSize = g_objStripInner.height();\t\t\t\n\t\t}\n\n\t\t\n\t}\n\t\n\t\n\n\t\n\t/**\n\t * set size of inner strip according the orientation\n\t */\n\tfunction setInnerStripSize(innerSize){\n\n\t\tif(g_isVertical == false)\n\t\t\tg_objStripInner.width(innerSize);\n\t\telse\n\t\t\tg_objStripInner.height(innerSize);\n\t\t\t\n\t\tg_sizes.stripInnerSize = innerSize;\n\t\t\n\t\tcheckControlsEnableDisable();\n\t\t\n\t\tjQuery(t).trigger(t.events.INNER_SIZE_CHANGE);\n\t}\n\t\n\t\n\t/**\n\t * position thumbnails in the thumbs panel\n\t */\n\tfunction positionThumbs(){\n\t\t\n\t\tvar arrThumbs = g_objStripInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\tposy = g_options.strip_padding_top;\n\t\t\n\t\tfor (i = 0; i < arrThumbs.length; i++) {\n\t\t\t\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\t\n\t\t\t//skip from placing if not loaded yet on non fixed mode\n\t\t\tif(g_temp.isNotFixedThumbs == true){\n\t\t\t\tobjItem = g_thumbs.getItemByThumb(objThumb);\n\t\t\t\tif(objItem.isLoaded == false)\n\t\t\t\t\tcontinue;\n\t\t\t\t\n\t\t\t\t//the thumb is hidden if not placed\n\t\t\t\tobjThumb.show();\n\t\t\t}\n\t\t\t\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\tif(g_isVertical == false)\n\t\t\t\tposx += objThumb.outerWidth() + g_options.strip_space_between_thumbs;\n\t\t\telse\n\t\t\t\tposy += objThumb.outerHeight() + g_options.strip_space_between_thumbs;\n\t\t}\n\t\t\n\t\t//set strip size, width or height\n\t\tif(g_isVertical == false)\n\t\t\tvar innerStripSize = posx - g_options.strip_space_between_thumbs;\n\t\telse\n\t\t\tvar innerStripSize = posy - g_options.strip_space_between_thumbs;\n\t\t\t\n\t\tsetInnerStripSize(innerStripSize);\n\t}\n\n\t\n\t\n\t/**\n\t * fix strip and inner size\n\t */\n\tfunction fixSize(){\n\t\t\n\t\tif(g_isVertical == false){\t\t//fix horizontal\n\t\t\t\n\t\t\tvar height = g_sizes.thumbSecondSize;\n\t\t\t\n\t\t\t var objCssStrip = {};\n\t\t\t objCssStrip[\"height\"] = height+\"px\";\n\t\t\t \t\t \n\t\t\t //set inner strip params\n\t\t\t var objCssInner = {};\n\t\t\t objCssInner[\"height\"] = height+\"px\";\n\n\t\t}else{\t//fix vertical\n\t\t\t\n\t\t\tvar width = g_sizes.thumbSecondSize;\n\t\t\t\n\t\t\t var objCssStrip = {};\n\t\t\t objCssStrip[\"width\"] = width+\"px\";\n\t\t\t \t\t \n\t\t\t //set inner strip params\n\t\t\t var objCssInner = {};\n\t\t\t objCssInner[\"width\"] = width+\"px\";\n\t\t\t \n\t\t}\n\t\t \n\t\tg_objStrip.css(objCssStrip);\n\t\tg_objStripInner.css(objCssInner);\t\t\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * scroll by some number\n\t * .\n\t */\n\tfunction scrollBy(scrollStep){\n\t\t\n\t\tvar innerPos = t.getInnerStripPos();\n\t\tvar finalPos = innerPos + scrollStep;\n\t\t\n\t\tfinalPos = t.fixInnerStripLimits(finalPos);\n\t\t\n\t\tt.positionInnerStrip(finalPos, true);\t\t\n\t}\n\t\n\n\t/**\n\t * scroll to thumb from min. (left or top) position\n\t */\n\tfunction scrollToThumbMin(objThumb){\n\t\t\n\t\tvar objThumbPos = getThumbPos(objThumb);\n\t\t\n\t\tvar scrollPos = objThumbPos.min * -1;\n\t\tscrollPos = t.fixInnerStripLimits(scrollPos);\n\n\t\tt.positionInnerStrip(scrollPos, true);\n\t}\n\t\n\t\n\t/**\n\t * scroll to thumb from max. (right or bottom) position\n\t */\n\tfunction scrollToThumbMax(objThumb){\n\t\t\n\t\tvar objThumbPos = getThumbPos(objThumb);\t\t\n\t\t\n\t\tvar scrollPos = objThumbPos.max * -1 + g_sizes.stripSize;\n\t\tscrollPos = t.fixInnerStripLimits(scrollPos);\n\t\t\n\t\tt.positionInnerStrip(scrollPos, true);\n\t}\n\n\t\n\t/**\n\t * scroll to some thumbnail\n\t */\n\tfunction scrollToThumb(objThumb){\n\t\t\n\t\tif(isStripMovingEnabled() == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar objBounds = getThumbsInsideBounds();\n\t\t\n\t\tvar objThumbPos = getThumbPos(objThumb);\n\t\t\n\t\tif(objThumbPos.min < objBounds.minPosThumbs){\t\t\t\n\t\t\t\n\t\t\tvar prevThumb = objThumb.prev();\n\t\t\tif(prevThumb.length)\n\t\t\t\tscrollToThumbMin(prevThumb);\n\t\t\telse \n\t\t\t\tscrollToThumbMin(objThumb);\t\t\t\t\n\t\t\t\n\t\t}else if(objThumbPos.max > objBounds.maxPosThumbs){\t\t\t\n\t\t\t\n\t\t\tvar nextThumb = objThumb.next();\n\t\t\tif(nextThumb.length)\n\t\t\t\tscrollToThumbMax(nextThumb);\n\t\t\telse\n\t\t\t\tscrollToThumbMax(objThumb);\n\t\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * scroll to selected thumb\n\t */\n\tfunction scrollToSelectedThumb(){\n\t\t\n\t\tvar selectedItem = g_gallery.getSelectedItem();\n\t\tif(selectedItem == null)\n\t\t\treturn(true);\n\t\t\n\t\tvar objThumb = selectedItem.objThumbWrapper;\n\t\tif(objThumb)\n\t\t\tscrollToThumb(objThumb);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * check that the inner strip off the limits position, and reposition it if there is a need\n\t */\n\tfunction checkAndRepositionInnerStrip(){\n\t\tif(isStripMovingEnabled() == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar pos = t.getInnerStripPos();\n\t\t\n\t\tvar posFixed = t.fixInnerStripLimits(pos);\n\t\t\t\t\n\t\tif(pos != posFixed)\n\t\t\tt.positionInnerStrip(posFixed, true);\n\t}\n\t\n\t\n\t/**\n\t * enable / disable controls according inner width (move enabled).\n\t */\n\tfunction checkControlsEnableDisable(){\n\t\t\n\t\tvar isMovingEndbled = isStripMovingEnabled();\n\t\t\n\t\tif(isMovingEndbled == true){\n\t\t\t\n\t\t\tif(g_aviaControl)\n\t\t\t\tg_aviaControl.enable();\n\t\t\t\n\t\t\tif(g_touchThumbsControl)\n\t\t\t\tg_touchThumbsControl.enable();\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_aviaControl)\n\t\t\t\tg_aviaControl.disable();\n\t\t\t\n\t\t\tif(g_touchThumbsControl)\n\t\t\t\tg_touchThumbsControl.disable();\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * align inner strip according the options\n\t */\n\tfunction alignInnerStrip(){\n\t\t\n\t\tif(isStripMovingEnabled())\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\tg_functions.placeElement(g_objStripInner, g_options.strip_thumbs_align, 0);\n\t\telse\n\t\t\tg_functions.placeElement(g_objStripInner, 0, g_options.strip_thumbs_align);\n\t\t\t\n\t}\n\t\n\t\n\tfunction ___________EVENTS___________(){};\n\t\n\t/**\n\t * on thumb click event. Select the thumb\n\t */\n\tfunction onThumbClick(objThumb){\n\n\t\t//cancel click event only if passed significant movement\n\t\tif(t.isTouchMotionActive()){\n\n\t\t\tvar isSignificantPassed = g_touchThumbsControl.isSignificantPassed();\n\t\t\tif(isSignificantPassed == true)\n\t\t\t\treturn(true);\n\t\t}\n\n\t\t//run select item operation\n\t\tvar objItem = g_thumbs.getItemByThumb(objThumb);\n\n\t\tg_gallery.selectItem(objItem);\n\t}\n\t\n\t\n\t/**\n\t * on some thumb placed, run the resize, but with time passed\n\t */\n\tfunction onThumbPlaced(){\n\t\t\n\t\tclearTimeout(g_temp.handle);\n\t\t\n\t\tg_temp.handle = setTimeout(function(){\n\t\t\t\n\t\t\tpositionThumbs();\n\t\t\t\n\t\t},50);\n\t\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * on item change\n\t */\n\tfunction onItemChange(){\n\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\tg_thumbs.setThumbSelected(objItem.objThumbWrapper);\n\t\tscrollToThumb(objItem.objThumbWrapper);\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_thumbs.initEvents();\n\n\t\tvar objThumbs = g_objStrip.find(\".ug-thumb-wrapper\");\n\t\t\t\t\n\t\tobjThumbs.on(\"click touchend\", function(event){\n\t\t\t\n\t\t\tvar clickedThumb = jQuery(this);\n\t\t\tonThumbClick(clickedThumb);\n\t\t});\n\t\t\n\t\t//on item change, make the thumb selected\n\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\n\t\t\n\t\t//position thumbs after each load on non fixed mode\n\t\tif(g_temp.isNotFixedThumbs){\n\t\t\t\n\t\t\tjQuery(g_thumbs).on(g_thumbs.events.AFTERPLACEIMAGE, onThumbPlaced);\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the strip panel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tvar objThumbs = g_objStrip.find(\".ug-thumb-wrapper\");\n\t\t\n\t\tobjThumbs.off(\"click\");\n\t\tobjThumbs.off(\"touchend\");\n\t\tg_objGallery.off(g_gallery.events.ITEM_CHANGE);\n\n\t\tjQuery(g_thumbs).off(g_thumbs.events.AFTERPLACEIMAGE);\n\t\t\n\t\tif(g_touchThumbsControl)\n\t\t\tg_touchThumbsControl.destroy();\n\t\t\n\t\tif(g_aviaControl)\n\t\t\tg_aviaControl.destroy();\n\t\t\n\t\tg_thumbs.destroy();\n\t}\n\t\n\t\n\tfunction ____________GETTERS___________(){};\n\t\t\n\n\t/**\n\t * check if the inner width is more then strip width\n\t */\n\tfunction isStripMovingEnabled(){\n\t\t\n\t\tif(g_sizes.stripInnerSize > g_sizes.stripActiveSize)\n\t\t\treturn(true);\n\t\telse\n\t\t\treturn(false);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get bounds, if the thumb not in them, it need to be scrolled\n\t * minPosThumbs, maxPosThumbs - the min and max position that the thumbs should be located to be visible\n\t */\n\tfunction getThumbsInsideBounds(){\n\t\tvar obj = {};\n\t\tvar innerPos = t.getInnerStripPos();\n\t\t\n\t\t//the 1 is gap that avoid exact bounds\n\t\tobj.minPosThumbs = innerPos * -1 + 1;\t\t\t\t\n\t\tobj.maxPosThumbs = innerPos * -1 + g_sizes.stripSize - 1;\t\t\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get thumb position according the orientation in the inner strip\n\t */\n\tfunction getThumbPos(objThumb){\n\t\t\n\t\tvar objReturn = {};\n\t\t\n\t\tvar objPos = objThumb.position();\n\t\t\n\t\tif(g_isVertical == false){\n\t\t\tobjReturn.min = objPos.left;\n\t\t\tobjReturn.max = objPos.left + g_sizes.thumbSize;\n\t\t}else{\n\t\t\tobjReturn.min = objPos.top;\n\t\t\tobjReturn.max = objPos.top + g_sizes.thumbSize;\n\t\t}\n\n\t\t\n\t\treturn(objReturn);\n\t}\n\t\n\t\n\t\n\t\n\tthis.________EXTERNAL_GENERAL___________ = function(){};\n\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinitStrip(gallery, customOptions);\n\t}\n\t\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trunStrip();\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t* position inner strip on some pos according the orientation\n\t*/\n\tthis.positionInnerStrip = function(pos, isAnimate){\n\t\t\n\t\tif(isAnimate === undefined)\n\t\t\tvar isAnimate = false;\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\tvar objPosition = {\"left\": pos + \"px\"};\n\t\telse\n\t\t\tvar objPosition = {\"top\": pos + \"px\"};\n\t\t\n\t\tif(isAnimate == false){\t\t//normal position\n\t\t\t\n\t\t\tg_objStripInner.css(objPosition);\n\t\t\tt.triggerStripMoveEvent();\n\t\t}\n\t\telse{\t\t//position with animation\n\t\t\t\n\t\t\tt.triggerStripMoveEvent();\n\t\t\t\n\t\t\tg_objStripInner.stop(true).animate(objPosition ,{\n\t\t\t\tduration: g_options.strip_scroll_to_thumb_duration,\n\t\t\t\teasing: g_options.strip_scroll_to_thumb_easing,\n\t\t\t\tqueue: false,\n\t\t\t\tprogress:function(){t.triggerStripMoveEvent()},\n\t\t\t\talways: function(){t.triggerStripMoveEvent()}\n\t\t\t});\t\t\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n\t/**\n\t * trigger event - on strip move\n\t */\n\tthis.triggerStripMoveEvent = function(){\n\t\t\n\t\t//trigger onstripmove event\n\t\tjQuery(t).trigger(t.events.STRIP_MOVE);\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * return true if the touch animation or dragging is active\n\t */\n\tthis.isTouchMotionActive = function(){\n\t\tif(!g_touchThumbsControl)\n\t\t\treturn(false);\n\t\t\n\t\tvar isActive = g_touchThumbsControl.isTouchActive();\n\t\t\n\t\treturn(isActive);\n\t}\n\t\n\t\n\t/**\n\t * check if thmb item visible, means inside the visible part of the inner strip\n\t */\n\tthis.isItemThumbVisible = function(objItem){\n\t\t\n\t\tvar objThumb = objItem.objThumbWrapper;\n\t\tvar thumbPos = objThumb.position();\n\t\t\n\t\tvar posMin = t.getInnerStripPos() * -1;\n\t\t\n\t\tif(g_isVertical == false){\n\t\t\tvar posMax = posMin + g_sizes.stripSize;\n\t\t\tvar thumbPosMin = thumbPos.left;\n\t\t\tvar thumbPosMax = thumbPos.left + objThumb.width();\t\t\t\n\t\t}else{\n\t\t\tvar posMax = posMin + g_sizes.stripSize;\n\t\t\tvar thumbPosMin = thumbPos.top;\n\t\t\tvar thumbPosMax = thumbPos.top + objThumb.height();\t\t\t\n\t\t}\n\t\t\t\t\n\t\tvar isVisible = false;\n\t\tif(thumbPosMax >= posMin && thumbPosMin <= posMax)\n\t\t\tisVisible = true;\n\t\t\n\t\treturn(isVisible);\n\t}\n\t\n\t/**\n\t * get inner strip position according the orientation\n\t */\n\tthis.getInnerStripPos = function(){\n\t\t\n\t\tif(g_isVertical == false)\t\t\t\n\t\t\treturn g_objStripInner.position().left;\n\t\telse\n\t\t\treturn g_objStripInner.position().top;\n\t}\n\t\n\t\n\t/**\n\t * get inner strip limits\n\t */\n\tthis.getInnerStripLimits = function(){\n\t\t\n\t\tvar output = {};\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\toutput.maxPos = g_options.strip_padding_left;\n\t\telse\n\t\t\toutput.maxPos = g_options.strip_padding_top;\n\t\t\n\t\t//debugLine(g_sizes.stripActiveSize);\n\t\t\n\t\toutput.minPos = -(g_sizes.stripInnerSize - g_sizes.stripActiveSize);\n\t\t\n\t\treturn(output);\n\t}\n\n\t\n\t/**\n\t * fix inner position by check boundaries limit\n\t */\n\tthis.fixInnerStripLimits = function(distPos){\n\t\t\n\t\tvar minPos;\n\t\t\n\t\tvar objLimits = t.getInnerStripLimits();\n\t\t\n\t\tif(distPos > objLimits.maxPos)\n\t\t\tdistPos = objLimits.maxPos;\n\t\t\n\t\tif(distPos < objLimits.minPos)\n\t\t\tdistPos = objLimits.minPos;\n\t\t\n\t\treturn(distPos);\n\t}\n\t\n\t\n\t\n\t/**\n\t * scroll left or down\n\t */\n\tthis.scrollForeward = function(){\n\t\tscrollBy(-g_sizes.stripSize);\n\t}\n\t\n\t\n\t/**\n\t * scroll left or down\n\t */\n\tthis.scrollBack = function(){\n\t\t\t\t\n\t\tscrollBy(g_sizes.stripSize);\n\t}\n\t\n\t\n\tthis.________EXTERNAL_SETTERS___________ = function(){};\n\n\t\n\t/**\n\t * set the options of the strip\n\t */\n\tthis.setOptions = function(objOptions){\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\n\t\tg_thumbs.setOptions(objOptions);\n\t\t\n\t\tonAfterSetOptions();\n\t}\n\t\n\t\n\t/**\n\t * set size of the strip\n\t * the height size is set automatically from options\n\t */\n\tthis.setSizeVertical = function(height){\n\t\t\n\t\t if(g_isVertical == false){\n\t\t\t throw new Error(\"setSizeVertical error, the strip size is not vertical\");\n\t\t\t return(false);\n\t\t }\n\t\t\n\t\t var width = g_sizes.thumbSecondSize;\n\t\t\n\t\t var objCssStrip = {};\n\t\t objCssStrip[\"width\"] = width+\"px\";\n\t\t objCssStrip[\"height\"] = height+\"px\";\n\t\t \n\t\t g_objStrip.css(objCssStrip);\n\n\t\t storeStripSize(height);\n\t\t \n\t\t //set inner strip params\n\t\t var objCssInner = {};\n\t\t objCssInner[\"width\"] = width+\"px\";\n\t\t objCssInner[\"left\"] = \"0px\";\n\t\t objCssInner[\"top\"] = \"0px\";\n\t\t \n\t\t g_objStripInner.css(objCssInner);\n\t\t \n\t\t g_temp.is_placed = true;\n\t\t \n\t\t checkControlsEnableDisable();\n\t}\n\n\t\n\t/**\n\t * set size of the strip\n\t * the height size is set automatically from options\n\t */\n\tthis.setSizeHorizontal = function(width){\n\t\t\t\t\n\t\t if(g_isVertical == true){\n\t\t\t throw new Error(\"setSizeHorizontal error, the strip size is not horizontal\");\n\t\t\t return(false);\n\t\t }\n\t\t\n\t\tvar height = g_sizes.thumbSecondSize + g_options.strip_padding_top + g_options.strip_padding_bottom;\n\t\t\n\t\tvar objCssStrip = {};\n\t\tobjCssStrip[\"width\"] = width+\"px\";\n\t\tobjCssStrip[\"height\"] = height+\"px\";\n\t\t \n\t\tg_objStrip.css(objCssStrip);\n\t\t\n\t\tstoreStripSize(width);\n\t\t\n\t\tvar innerLeft = g_options.strip_padding_left;\n\t\t\n\t\t //set inner strip params\n\t\t var objCssInner = {};\n\t\t objCssInner[\"height\"] = height+\"px\";\n\t\t objCssInner[\"left\"] = innerLeft + \"px\";\n\t\t objCssInner[\"top\"] = \"0px\";\n\t\t \n\t\t g_objStripInner.css(objCssInner);\n\t\t \n\t\t g_temp.is_placed = true;\n\t\t\n\t\t checkControlsEnableDisable();\n\t}\n\t\n\t\n\t/**\n\t * set position of the strip\n\t */\n\tthis.setPosition = function(left, top, offsetLeft, offsetTop){\n\t\tg_functions.placeElement(g_objStrip, left, top, offsetLeft, offsetTop);\t\t\n\t}\n\t\n\t\n\t/**\n\t * resize the panel according the orientation\n\t */\n\tthis.resize = function(newSize){\n\t\t\n\t\tif(g_isVertical == false){\n\t\t\t\n\t\t\tg_objStrip.width(newSize);\n\t\t\tg_sizes.stripActiveSize = newSize - g_options.strip_padding_left - g_options.strip_padding_right;\n\n\t\t}else{\n\t\t\tg_objStrip.height(newSize);\n\t\t\tg_sizes.stripActiveSize = newSize - g_options.strip_padding_top - g_options.strip_padding_bottom;\n\t\t}\n\t\t\n\t\tstoreStripSize(newSize);\n\t\t\n\t\tcheckControlsEnableDisable();\n\t\t\n\t\tcheckAndRepositionInnerStrip();\n\t\t\n\t\talignInnerStrip();\n\t\t\n\t\tscrollToSelectedThumb();\n\t}\n\t\n\t\n\t/**\n\t * set the thumb unselected state\n\t */\n\tthis.setThumbUnselected = function(objThumbWrapper){\n\t\t\n\t\tg_thumbs.setThumbUnselected(objThumbWrapper);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set custom thumbs\n\t */\n\tthis.setCustomThumbs = function(funcSetHtml){\n\t\t\n\t\tg_thumbs.setCustomThumbs(funcSetHtml);\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\tthis.________EXTERNAL_GETTERS___________ = function(){};\n\t\n\t/**\n\t * get objects\n\t */\t\n\tthis.getObjects = function(){\n\t\t\n\t\tvar thumbsOptions = g_thumbs.getOptions();\n\t\tvar commonOpitions = jQuery.extend(g_options, thumbsOptions);\n\t\t\n\t\tvar obj = {\n\t\t\tg_gallery: g_gallery,\n\t\t\tg_objGallery: g_objGallery,\n\t\t\tg_objWrapper:g_objWrapper,\n\t\t\tg_arrItems:g_arrItems,\n\t\t\tg_objStrip : g_objStrip,\n\t\t\tg_objStripInner : g_objStripInner,\n\t\t\tg_aviaControl:g_aviaControl,\n\t\t\tg_touchThumbsControl:g_touchThumbsControl,\n\t\t\tisVertical: g_isVertical,\n\t\t\tg_options: commonOpitions,\n\t\t\tg_thumbs: g_thumbs\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get thumbs onject\n\t */\n\tthis.getObjThumbs = function(){\n\t\t\n\t\treturn(g_thumbs);\n\t}\n\t\n\t\n\t/**\n\t * get selected thumb\n\t */\n\tthis.getSelectedThumb = function(){\n\t\t\n\t\tvar selectedIndex = g_gallery.getSelectedItemIndex();\n\t\tif(selectedIndex == -1)\n\t\t\treturn(null);\n\t\t\n\t\treturn g_thumbs.getThumbByIndex(selectedIndex);\n\t}\n\t\n\t\n\t/**\n\t * get strip size and position object\n\t */\n\tthis.getSizeAndPosition = function(){\n\t\t\n\t\tvar obj = g_functions.getElementSize(g_objStrip);\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t/**\n\t * get thumbs strip height\n\t */\n\tthis.getHeight = function(){\n\t\t\n\t\tvar stripHeight = g_objStrip.outerHeight();\n\t\t\n\t\treturn(stripHeight)\n\t}\n\t\n\t\n\t/**\n\t * get thumbs strip width\n\t */\n\tthis.getWidth = function(){\n\t\t\n\t\tvar stripWidth = g_objStrip.outerWidth();\n\t\t\n\t\treturn(stripWidth);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get all stored sizes object\n\t */\n\tthis.getSizes = function(){\n\t\t\n\t\treturn(g_sizes);\n\t}\n\t\n\t\n\t/**\n\t * return if vertical orientation or not\n\t */\n\tthis.isVertical = function(){\n\t\treturn(g_isVertical);\n\t}\n\t\n\t\n\t/**\n\t * return if the strip is placed or not\n\t */\n\tthis.isPlaced = function(){\n\t\t\n\t\treturn(g_temp.is_placed);\n\t}\n\t\n\t/**\n\t * return if the strip moving enabled or not\n\t */\n\tthis.isMoveEnabled = function(){\n\t\tvar isEnabled = isStripMovingEnabled();\n\t\treturn(isEnabled);\n\t}\n\n}\n\n\n/**\n * touch thumbs control class\n * addon to strip gallery\n */\nfunction UGTouchThumbsControl(){\n\t\n\tvar g_parent, g_gallery, g_objGallery, g_objects;\n\tvar g_objStrip, g_objStripInner, g_options, g_isVertical;\n\tvar g_functions = new UGFunctions();\n\t\n\t//service variables\t\n\tvar g_serviceParams = {\t\t\t\n\t\ttouch_portion_time:200,\t\t\t\t\t//the time in ms that the potion is counts for continue touch movement\n\t\tthumb_touch_slowFactor:0,\t\t\t\t//set from user\n\t\tminDeltaTime: 70,\t\t\t\t\t\t//don't alow portion less then the minTime\n\t\tminPath: 10,\t\t\t\t\t\t\t//if less then this path, dont' continue motion\n\t\tlimitsBreakAddition: 30,\t\t\t\t//the limits break addition for second return animation\n\t\treturnAnimateSpeed: 500,\t\t\t\t//the speed of return animation\n\t\tanimationEasing: \"easeOutCubic\",\t\t//animation easing function\n\t\treturnAnimationEasing: \"easeOutCubic\"\t//return animation easing function\n\t};\n\t\n\t\n\tvar g_temp = {\t\t\t\t\t//temp variables\n\t\ttouch_active:false,\n\t\tloop_active:false,\n\t\tmousePos:0,\n\t\tinnerPos:0,\n\t\tstartPos:0,\n\t\tstartTime:0,\t\t\n\t\tlastTime:0,\n\t\tbuttonReleaseTime:0,\n\t\tlastPos:0,\n\t\tlastPortionPos:0,\n\t\tlastDeltaTime:0,\n\t\tlastDeltaPos:0,\n\t\tspeed:0,\n\t\thandle:\"\",\n\t\ttouchEnabled: false, \n\t\tisControlEnabled: true\n\t};\n\n\n\t/**\n\t * enable the control\n\t */\n\tthis.enable = function(){\n\t\tg_temp.isControlEnabled = true;\n\t}\n\t\n\t\n\t/**\n\t * disable the control\n\t */\n\tthis.disable = function(){\n\t\tg_temp.isControlEnabled = false;\t\t\n\t}\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objStrip){\n\t\t\n\t\tg_parent = objStrip;\n\t\tg_objects = objStrip.getObjects();\n\t\t\n\t\tg_gallery = g_objects.g_gallery;\n\t\tg_objGallery = g_objects.g_objGallery;\t//jquery object\n\t\t\t\t\n\t\tg_objStrip = g_objects.g_objStrip;\n\t\tg_objStripInner = g_objects.g_objStripInner;\n\t\tg_options = g_objects.g_options;\n\t\tg_isVertical = g_objects.isVertical;\n\t\t\n\t\tsetServiceParams();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t/**\n\t * get action related variables\n\t */\n\tfunction getActionVars(){\n\t\t\n\t\tvar currentTime = jQuery.now();\n\n\t\tvar obj = {};\n\t\tobj.passedTime = g_temp.lastTime - g_temp.startTime;\n\t\tobj.lastActiveTime = currentTime - g_temp.buttonReleaseTime;\n\t\tobj.passedDistance = g_temp.lastPos - g_temp.startPos;\n\t\tobj.passedDistanceAbs = Math.abs(obj.passedDistance);\n\t\t\t\t\n\t\treturn(obj);\n\t}\n\t\n\t/**\n\t * return if passed some significant movement\n\t */\n\tthis.isSignificantPassed = function(){\n\t\tvar objVars = getActionVars();\n\t\tif(objVars.passedTime > 300)\n\t\t\treturn(true);\n\t\t\n\t\tif(objVars.passedDistanceAbs > 30)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\t\t\n\t}\n\t\n\t\n\t/**\n\t * return true if the touch dragging or animate motion is active\n\t */\n\tthis.isTouchActive = function(){\n\t\t\n\t\tif(g_temp.touch_active == true)\n\t\t\treturn(true);\n\t\t\t\n\t\t//check if still animating\n\t\tif(g_objStripInner.is(\":animated\") == true)\n\t\t\treturn(true);\n\t\t\n\t\t//check if just ended, the touch active continue for a few moments.\n\t\tvar objVars = getActionVars();\n\t\tif(objVars.lastActiveTime < 50) \n\t\t\treturn(true);\n\t\t\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * set service parameters from user parameters\n\t */\n\tfunction setServiceParams(){\n\t\t\t\t\n\t\t//set slow factor by sensetivity of touch motion\t\t\n\t\tg_serviceParams.thumb_touch_slowFactor = g_functions.normalizeSetting(0.00005, 0.01, 1, 100, g_options.strip_thumb_touch_sensetivity, true);\n\t\t\t\t\n\t\t//debugLine(\"slowfactor \"+ g_serviceParams.thumb_touch_slowFactor);\n\t}\n\t\n\t\n\t/**\n\t * get mouse position based on orientation\n\t */\n\tfunction getMouseOrientPosition(event){\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\treturn(g_functions.getMousePosition(event).pageX);\n\t\telse\n\t\t\treturn(g_functions.getMousePosition(event).pageY);\t\t\t\n\t}\n\t\n\t/**\n\t * position the strip according the touch drag diff\n\t */\n\tfunction handleStripDrag(mousePos){\n\t\tvar diff = g_temp.mousePos - mousePos;\n\t\tvar distPos = g_temp.innerPos - diff;\n\t\t\n\t\t//make harder to drag the limits\n\t\tvar objLimits = g_parent.getInnerStripLimits();\n\t\t\n\t\tif(distPos > objLimits.maxPos){\n\t\t\tvar path = distPos - objLimits.maxPos;\n\t\t\tdistPos = objLimits.maxPos + path/3;\t\t\t\n\t\t}\n\t\t\n\t\tif(distPos < objLimits.minPos){\n\t\t\tvar path = objLimits.minPos - distPos;\n\t\t\tdistPos = objLimits.minPos - path/3;\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\tg_parent.positionInnerStrip(distPos);\n\t}\n\t\n\t\n\t/**\n\t * store initial touch values\n\t */\n\tfunction storeInitTouchValues(pagePos){\n\t\tvar currentInnerPos = g_parent.getInnerStripPos();\n\t\t\n\t\t//remember current mouse position and inner strip position\n\t\tg_temp.mousePos = pagePos;\n\t\tg_temp.innerPos = currentInnerPos;\n\t\tg_temp.lastPortionPos = currentInnerPos;\n\t\tg_temp.lastDeltaTime = 0;\n\t\tg_temp.lastDeltaPos = 0;\n\t\t\n\t\t//init position and time related variables\n\t\tg_temp.startTime = jQuery.now();\n\t\tg_temp.startPos = g_temp.innerPos;\n\t\t\n\t\tg_temp.lastTime = g_temp.startTime;\n\t\tg_temp.lastPos = g_temp.startPos;\n\t\tg_temp.speed = 0;\n\t}\n\t\n\t\n\t/**\n\t * store touch portion data\n\t */\n\tfunction storeTouchPortionData(){\n\t\t\t\t\n\t\t//calc speed\n\t\tvar currentTime = jQuery.now();\n\t\tvar deltaTime = currentTime - g_temp.lastTime;\n\t\t\n\t\tif(deltaTime >= g_serviceParams.touch_portion_time){\n\t\t\tg_temp.lastDeltaTime = currentTime - g_temp.lastTime;\n\t\t\tif(g_temp.lastDeltaTime > g_serviceParams.touch_portion_time)\n\t\t\t\tg_temp.lastDeltaTime = g_serviceParams.touch_portion_time;\n\t\t\t\t\n\t\t\tg_temp.lastDeltaPos = g_temp.lastPos - g_temp.lastPortionPos;\n\t\t\t\t\t\t\n\t\t\tg_temp.lastPortionPos = g_temp.lastPos;\n\t\t\tg_temp.lastTime = currentTime;\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * continue touch motion - touch motion ending.\n\t */\n\tfunction continueTouchMotion(){\n\t\t\t\t\n\t\tvar slowFactor = g_serviceParams.thumb_touch_slowFactor;\n\t\t\n\t\t//don't alow portion less then the minTime\n\t\tvar minDeltaTime = g_serviceParams.minDeltaTime;\n\t\t\n\t\t//if less then this path, dont' continue motion\n\t\tvar minPath = g_serviceParams.minPath;\t\n\t\t\n\t\tvar currentInnerPos = g_parent.getInnerStripPos();\n\t\t\n\t\tvar currentTime = jQuery.now();\n\t\tvar deltaTime = currentTime - g_temp.lastTime;\n\t\tvar deltaPos = currentInnerPos - g_temp.lastPortionPos;\n\t\t\n\t\t//if time too fast, take last portion values\n\t\tif(deltaTime < minDeltaTime && g_temp.lastDeltaTime > 0){\n\t\t\tdeltaTime = g_temp.lastDeltaTime;\n\t\t\tdeltaPos = g_temp.lastDeltaPos + deltaPos;\n\t\t}\n\t\t\n\t\t//fix delta time\n\t\tif(deltaTime < minDeltaTime)\n\t\t\tdeltaTime = minDeltaTime;\n\t\t\t\t\t\n\t\tvar dir = (deltaPos > 0)?1:-1;\n\t\t\n\t\tvar speed = 0;\n\t\tif(deltaTime > 0)\n\t\t\tspeed = deltaPos / deltaTime;\t\n\t\t\n\t\tvar path = (speed * speed) / (slowFactor * 2) * dir;\n\t\t\n\t\t//disable path for very slow motions\n\t\tif(Math.abs(path) <= minPath)\n\t\t\tpath = 0;\n\t\t\n\t\t\n\t\tvar innerStripPos = g_parent.getInnerStripPos();\n\t\tvar newPos = innerStripPos + path;\t\n\t\t\n\t\tvar correctPos = g_parent.fixInnerStripLimits(newPos);\n\t\tvar objLimits = g_parent.getInnerStripLimits();\n\t\t\n\t\t//check the off the limits and return (second animation)\n\t\tvar limitsBreakAddition = g_serviceParams.limitsBreakAddition;\n\t\tvar doQueue = false;\n\t\tvar returnPos = correctPos;\n\t\t\n\t\t//fix the first animation position (off the limits)\n\t\tif(newPos > objLimits.maxPos){\n\t\t\tdoQueue = true;\n\t\t\tcorrectPos = limitsBreakAddition;\n\t\t\tif(newPos < limitsBreakAddition)\n\t\t\t\tcorrectPos = newPos;\t\t\t\n\t\t}\n\t\t\t\t\n\t\tif(newPos < objLimits.minPos){\n\t\t\tdoQueue = true;\n\t\t\tvar maxStopPos = objLimits.minPos - limitsBreakAddition;\n\t\t\tcorrectPos = maxStopPos;\n\t\t\tif(newPos > maxStopPos)\n\t\t\t\tcorrectPos = newPos;\n\t\t}\n\t\t\t\t\n\t\tvar correctPath = correctPos - innerStripPos;\n\t\t\n\t\t//set animation speed\t\t\n\t\tvar animateSpeed =  Math.abs(Math.round(speed / slowFactor));\n\t\t\n\t\t//fix animation speed according the paths difference\n\t\tif(path != 0)\n\t\t\tanimateSpeed = animateSpeed * correctPath / path;\t\t\n\t\t\n\t\t\n\t\t//Do first animation\n\t\tif(innerStripPos != correctPos){\n\t\t\t\n\t\t\tvar animateProps = {\"left\":correctPos+\"px\"};\n\t\t\tif(g_isVertical == true)\n\t\t\t\tanimateProps = {\"top\":correctPos+\"px\"};\t\t\n\t\t\t\n\t\t\tg_objStripInner.animate(animateProps ,{\n\t\t\t\t\tduration: animateSpeed,\n\t\t\t\t\teasing: g_serviceParams.animationEasing,\n\t\t\t\t\tqueue: true,\n\t\t\t\t\tprogress:onAnimateProgress \n\t\t\t});\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\t\t\n\t\t//do second animation if off limits\n\t\tif(doQueue == true){\n\t\t\tvar returnAnimateSpeed = g_serviceParams.returnAnimateSpeed;\n\t\t\t\n\t\t\tvar returnAnimateProps = {\"left\":returnPos+\"px\"};\n\t\t\tif(g_isVertical == true)\n\t\t\t\treturnAnimateProps = {\"top\":returnPos+\"px\"};\t\t\n\t\t\t\n\t\t\t\n\t\t\tg_objStripInner.animate(returnAnimateProps,{\t\t\t\t\n\t\t\t\tduration: returnAnimateSpeed,\n\t\t\t\teasing: g_serviceParams.returnAnimationEasing,\n\t\t\t\tqueue: true,\n\t\t\t\tprogress:onAnimateProgress \n\t\t\t});\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on animate progress event. store position and trigger event to gallery\n\t */\n\tfunction onAnimateProgress(){\n\t\tg_temp.lastPos = g_parent.getInnerStripPos();\n\t\tg_parent.triggerStripMoveEvent();\n\t}\n\t\n\t/**\n\t * start loop while touching strip\n\t */\n\tfunction startStripTouchLoop(){\n\t\t\n\t\tif(g_temp.loop_active == true)\n\t\t\treturn(true);\n\t\t\t\n\t\tg_temp.loop_active = true;\n\t\tg_temp.handle = setInterval(storeTouchPortionData,10);\n\t}\n\t\n\t\n\t/**\n\t * end loop when not touching\n\t */\n\tfunction endStripTouchLoop(event){\n\t\t\n\t\tif(g_temp.loop_active == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(event){\n\t\t\tvar pagePos = getMouseOrientPosition(event);\n\t\t\tcontinueTouchMotion(pagePos);\n\t\t}\n\t\t\n\t\tg_temp.loop_active = false;\n\t\tg_temp.handle = clearInterval(g_temp.handle);\n\t}\n\t\n\t\n\t/**\n\t * on tuch end event\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_temp.isControlEnabled == false)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tg_temp.buttonReleaseTime = jQuery.now();\n\t\t\n\t\tif(g_temp.touch_active == false){\n\t\t\tendStripTouchLoop(event);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tevent.preventDefault();\n\t\t\t\n\t\tg_temp.touch_active = false;\n\t\t\n\t\tendStripTouchLoop(event);\n\t\t\n\t\tg_objStrip.removeClass(\"ug-dragging\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on touch start - start the motion\n\t * @param event\n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\tif(g_temp.isControlEnabled == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tg_temp.touch_active = true;\t\t//don't move this up\n\t\t\n\t\tvar pagePos = getMouseOrientPosition(event);\n\t\t\t\t\t\n\t\t//stop inner animation if exist\n\t\tg_objStripInner.stop(true);\n\t\t\n\t\t//store initial touch values\n\t\tstoreInitTouchValues(pagePos);\n\t\tstartStripTouchLoop();\n\t\t\n\t\tg_objStrip.addClass(\"ug-dragging\");\n\t}\n\t\n\t\n\t/**\n\t * on touch move event, move the strip\n\t */\n\tfunction onTouchMove(event){\n\t\t\n\t\tif(g_temp.isControlEnabled == false)\n\t\t\treturn(true);\t\t\n\t\t\n\t\tif(g_temp.touch_active == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\t//detect moving without button press\n\t\tif(event.buttons == 0){\n\t\t\tg_temp.touch_active = false;\n\t\t\t\n\t\t\tendStripTouchLoop(event);\n\t\t\treturn(true);\n\t\t}\n\t\n\t\t//store current position\n\t\tvar pagePos = getMouseOrientPosition(event);\n\t\tg_temp.lastPos = g_parent.getInnerStripPos();\n\t\t\n\t\thandleStripDrag(pagePos);\n\t\t\n\t\tstoreTouchPortionData();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init strip touch events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//strip mouse down - drag start\n\t\tg_objStrip.bind(\"mousedown touchstart\",onTouchStart);\n\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\",onTouchEnd);\n\t\t\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\", onTouchMove);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the touch events\n\t */\n\tthis.destroy = function(){\n\t\tg_objStrip.unbind(\"mousedown\");\n\t\tg_objStrip.unbind(\"touchstart\");\n\t\tjQuery(window).add(\"body\").unbind(\"mouseup\").unbind(\"touchend\");\n\t\tjQuery(\"body\").unbind(\"mousemove\").unbind(\"touchmove\");\n\t}\n}\n\n\n/** -------------- Panel Base Functions ---------------------*/\n\nfunction UGPanelsBase(){\n\t\n\tvar g_temp, g_panel, g_objPanel, g_options, g_objThis;\n\tvar g_gallery = new UniteGalleryMain();\n\tvar t = this, g_objHandle, g_objGallery;\n\tvar g_functions = new UGFunctions();\n\t\n\t\n\t/**\n\t * init the base panel\n\t */\n\tthis.init = function(gallery, g_tempArg, g_panelArg, options, g_objThisArg){\n\t\tg_temp = g_tempArg; \n\t\tg_panel = g_panelArg;\n\t\tg_gallery = gallery;\n\t\tg_options = options;\n\t\tg_objThis = g_objThisArg;\n\t\t\n\t\tg_objGallery = jQuery(g_gallery);\n\t}\n\n\t/**\n\t * set common panels html\n\t */\n\tthis.setHtml = function(g_objPanelArg){\n\t\t\n\t\tg_objPanel = g_objPanelArg;\n\t\t\n\t\tif(g_temp.panelType == \"strip\")\n\t\t\tvar enable_handle = g_options.strippanel_enable_handle;\n\t\telse\n\t\t\tvar enable_handle = g_options.gridpanel_enable_handle;\n\t\t\n\t\t// add handle\n\t\tif (enable_handle == true) {\n\t\t\tg_objHandle = new UGPanelHandle();\n\t\t\tg_objHandle.init(g_panel, g_objPanel, g_options, g_temp.panelType, g_gallery);\n\t\t\tg_objHandle.setHtml();\n\t\t}\n\t\t\n\t\t\n\t\t//set disabled at start if exists\n\t\tif(g_temp.isDisabledAtStart === true){\n\t\t\tvar html = \"<div class='ug-overlay-disabled'></div>\";\n\t\t\tg_objPanel.append(html);\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tg_objPanel.children(\".ug-overlay-disabled\").hide();\n\t\t\t}, g_temp.disabledAtStartTimeout);\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place common elements\n\t */\n\tthis.placeElements = function(){\n\t\t\n\t\t// place handle\n\t\tif (g_objHandle)\n\t\t\tg_objHandle.placeHandle();\t\t\n\t}\n\t\n\t\n\t/**\n\t * init common events\n\t */\n\tthis.initEvents = function(){\n\t\t\n\t\t// set handle events\n\t\tif (g_objHandle){\n\t\t\tg_objHandle.initEvents();\n\t\t\t\n\t\t\t//set on slider action events\n\t\t\tg_objGallery.on(g_gallery.events.SLIDER_ACTION_START, function(){\t\t\t\n\t\t\t\tg_objHandle.hideHandle();\n\t\t\t});\n\t\t\t\n\t\t\tg_objGallery.on(g_gallery.events.SLIDER_ACTION_END, function(){\t\t\t\n\t\t\t\tg_objHandle.showHandle();\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * destroy the panel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objHandle){\n\t\t\tg_objHandle.destroy();\n\t\t\tg_objGallery.off(g_gallery.events.SLIDER_ACTION_START);\n\t\t\tg_objGallery.off(g_gallery.events.SLIDER_ACTION_END);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * place panel with some animation\n\t */\n\tfunction placePanelAnimation(panelDest, functionOnComplete) {\n\n\t\tswitch (g_temp.orientation) {\n\t\tcase \"right\": // vertical\n\t\tcase \"left\":\n\t\t\tvar objCss = {\n\t\t\t\tleft : panelDest + \"px\"\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tcase \"bottom\":\n\t\t\tvar objCss = {\n\t\t\t\ttop : panelDest + \"px\"\n\t\t\t};\n\t\t\tbreak;\n\t\t}\n\n\t\tg_objPanel.stop(true).animate(objCss, {\n\t\t\tduration : 300,\n\t\t\teasing : \"easeInOutQuad\",\n\t\t\tqueue : false,\n\t\t\tcomplete : function() {\n\t\t\t\tif (functionOnComplete)\n\t\t\t\t\tfunctionOnComplete();\n\t\t\t}\n\t\t});\n\n\t}\n\t\n\t\n\t/**\n\t * place the panel without animation\n\t * \n\t * @param panelDest\n\t */\n\tfunction placePanelNoAnimation(panelDest) {\n\n\t\tswitch (g_temp.orientation) {\n\t\tcase \"right\": // vertical\n\t\tcase \"left\":\n\t\t\tg_functions.placeElement(g_objPanel, panelDest, null);\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\tcase \"bottom\":\n\t\t\tg_functions.placeElement(g_objPanel, null, panelDest);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t/**\n\t * event on panel slide finish\n\t */\n\tfunction onPanelSlideFinish() {\n\n\t\tg_objThis.trigger(g_panel.events.FINISH_MOVE);\n\n\t}\n\t\n\t\n\t/**\n\t * open the panel\n\t */\n\tthis.openPanel = function(noAnimation) {\n\n\t\tif (!noAnimation)\n\t\t\tvar noAnimation = false;\n\n\t\tif (g_objPanel.is(\":animated\"))\n\t\t\treturn (false);\n\n\t\tif (g_temp.isClosed == false)\n\t\t\treturn (false);\n\n\t\tg_temp.isClosed = false;\n\n\t\tg_objThis.trigger(g_panel.events.OPEN_PANEL);\n\n\t\tif (noAnimation === false)\n\t\t\tplacePanelAnimation(g_temp.originalPos, onPanelSlideFinish);\n\t\telse {\n\n\t\t\tplacePanelNoAnimation(g_temp.originalPos);\n\t\t\tonPanelSlideFinish();\n\t\t}\n\n\t}\n\n\t\n\t/**\n\t * close the panel (slide in)\n\t */\n\tthis.closePanel = function(noAnimation) {\n\n\t\tif (!noAnimation)\n\t\t\tvar noAnimation = false;\n\n\t\tif (g_objPanel.is(\":animated\"))\n\t\t\treturn (false);\n\n\t\tif (g_temp.isClosed == true)\n\t\t\treturn (false);\n\n\t\tvar panelDest = t.getClosedPanelDest();\n\n\t\tg_temp.isClosed = true;\n\n\t\tg_objThis.trigger(g_panel.events.CLOSE_PANEL);\n\n\t\tif (noAnimation === false)\n\t\t\tplacePanelAnimation(panelDest, onPanelSlideFinish);\n\t\telse {\n\t\t\tplacePanelNoAnimation(panelDest);\n\t\t\tonPanelSlideFinish();\n\t\t}\n\n\t}\n\t\n\t/**\n\t * set the panel that it's in closed state, and set original pos for opening\n\t * later\n\t */\n\tthis.setClosedState = function(originalPos) {\n\t\t\n\t\tg_temp.originalPos = originalPos;\n\t\tg_objThis.trigger(g_panel.events.CLOSE_PANEL);\n\n\t\tg_temp.isClosed = true;\n\t}\n\n\t/**\n\t * set the panel opened state\n\t */\n\tthis.setOpenedState = function(originalPos) {\n\t\tg_objThis.trigger(g_panel.events.OPEN_PANEL);\n\n\t\tg_temp.isClosed = false;\n\t}\n\n\t/**\n\t * get closed panel destanation\n\t */\n\tthis.getClosedPanelDest = function() {\n\n\t\tvar objPanelSize = g_functions.getElementSize(g_objPanel), panelDest;\n\n\t\tswitch (g_temp.orientation) {\n\t\tcase \"left\":\n\t\t\tg_temp.originalPos = objPanelSize.left;\n\t\t\tpanelDest = -g_temp.panelWidth;\n\t\t\tbreak;\n\t\tcase \"right\":\n\t\t\tg_temp.originalPos = objPanelSize.left;\n\t\t\tvar gallerySize = g_gallery.getSize();\n\t\t\tpanelDest = gallerySize.width;\n\t\t\tbreak;\n\t\tcase \"top\":\n\t\t\tg_temp.originalPos = objPanelSize.top;\n\t\t\tpanelDest = -g_temp.panelHeight;\n\t\t\tbreak;\n\t\tcase \"bottom\":\n\t\t\tg_temp.originalPos = objPanelSize.top;\n\t\t\tvar gallerySize = g_gallery.getSize();\n\t\t\tpanelDest = gallerySize.height;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn (panelDest);\n\t}\n\n\n\t/**\n\t * tells if the panel is closed\n\t */\n\tthis.isPanelClosed = function() {\n\n\t\treturn (g_temp.isClosed);\n\t}\n\t\n\t\n\t/**\n\t * set the panel disabled at start, called after init before setHtml\n\t * it's enabled again after timeout end\n\t */\n\tthis.setDisabledAtStart = function(timeout){\n\t\t\n\t\tif(timeout <= 0)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.isDisabledAtStart = true;\n\t\tg_temp.disabledAtStartTimeout = timeout;\n\t\t\n\t}\n\t\n\t\n}\n\n\n/** -------------- Panel Handle object ---------------------*/\n\nfunction UGPanelHandle(){\n\t\n\tvar t = this, g_objPanel, g_panel, g_objHandleTip, g_panelOptions = {};\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\t\tpanel_handle_align: \"top\",\t\t//top, middle, bottom , left, right, center - close handle tip align on the handle bar according panel orientation\n\t\t\tpanel_handle_offset: 0,\t\t\t//offset of handle bar according the valign\n\t\t\tpanel_handle_skin: 0\t\t\t//skin of the handle, if empty inherit from gallery skin\n\t};\n\t\n\t\n\t/**\n\t * init the handle\n\t */\n\tthis.init = function(panel, objPanel, panelOptions, panelType, gallery){\n\t\tg_panel = panel;\n\t\tg_objPanel = objPanel;\n\t\t\n\t\t//set needed options\n\t\tswitch(panelType){\t\t\n\t\t\tcase \"grid\":\n\t\t\t\tg_options.panel_handle_align = panelOptions.gridpanel_handle_align;\n\t\t\t\tg_options.panel_handle_offset = panelOptions.gridpanel_handle_offset;\n\t\t\t\tg_options.panel_handle_skin = panelOptions.gridpanel_handle_skin;\n\t\t\tbreak;\n\t\t\tcase \"strip\":\n\t\t\t\tg_options.panel_handle_align = panelOptions.strippanel_handle_align;\n\t\t\t\tg_options.panel_handle_offset = panelOptions.strippanel_handle_offset;\n\t\t\t\tg_options.panel_handle_skin = panelOptions.strippanel_handle_skin;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Panel handle error: wrong panel type: \" + panelType);\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//set arrows skin:\n\t\tvar galleryOptions = gallery.getOptions();\n\t\tvar globalSkin = galleryOptions.gallery_skin;\t\t\n\t\tif(g_options.panel_handle_skin == \"\")\n\t\t\tg_options.panel_handle_skin = globalSkin;\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set handle html\n\t */\n\tthis.setHtml = function(){\n\t\t\n\t\tvar orientation = g_panel.getOrientation();\n\t\t\t\t\n\t\tvar classTip = \"ug-panel-handle-tip\";\n\t\t\n\t\tswitch(orientation){\n\t\t\tcase \"right\":\n\t\t\t\tclassTip += \" ug-handle-tip-left\";\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tclassTip += \" ug-handle-tip-right\";\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tclassTip += \" ug-handle-tip-top\";\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tclassTip += \" ug-handle-tip-bottom\";\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_objPanel.append(\"<div class='\"+classTip+\" ug-skin-\" + g_options.panel_handle_skin + \"'></div>\");\n\t\tg_objHandleTip = g_objPanel.children(\".ug-panel-handle-tip\");\n\t}\n\t\n\t\n\t/**\n\t * remove hover state of the tip\n\t */\n\tfunction removeHoverState(){\n\t\t\t\t\n\t\tg_objHandleTip.removeClass(\"ug-button-hover\");\n\t}\n\t\n\t/**\n\t * add closed state class\n\t */\n\tfunction setClosedState(){\n\t\t\t\t\n\t\tg_objHandleTip.addClass(\"ug-button-closed\");\t\t\n\t}\n\t\n\t/**\n\t * add closed state class\n\t */\n\tfunction removeClosedState(){\n\t\tg_objHandleTip.removeClass(\"ug-button-closed\");\t\t\n\t}\n\n\t/**\n\t * on handle click, close or open panel\n\t */\n\tfunction onHandleClick(event){\n\t\t\n\t\tevent.stopPropagation();\n\t\tevent.stopImmediatePropagation();\n\t\t\n\t\tif(g_functions.validateClickTouchstartEvent(event.type) == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_panel.isPanelClosed())\n\t\t\tg_panel.openPanel();\n\t\telse\n\t\t\tg_panel.closePanel();\n\t}\n\t\n\t/**\n\t * init events\n\t */\n\tthis.initEvents = function(){\n\t\tg_functions.addClassOnHover(g_objHandleTip);\n\t\tg_objHandleTip.bind(\"click touchstart\", onHandleClick);\n\t\t\n\t\t//on panel open\n\t\tjQuery(g_panel).on(g_panel.events.OPEN_PANEL, function(){\n\t\t\tremoveHoverState();\n\t\t\tremoveClosedState();\n\t\t});\n\t\t\n\t\t//one panel close\n\t\tjQuery(g_panel).on(g_panel.events.CLOSE_PANEL, function(){\n\t\t\tremoveHoverState();\n\t\t\tsetClosedState();\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * destroy the handle panel events\n\t */\n\tthis.destroy = function(){\n\t\tg_functions.destroyButton(g_objHandleTip);\n\t\tjQuery(g_panel).off(g_panel.events.OPEN_PANEL);\n\t\tjQuery(g_panel).off(g_panel.events.CLOSE_PANEL);\n\t}\n\t\n\t\n\t\n\t/**\n\t * check and fix align option, set write direction\n\t */\n\tfunction checkAndFixAlign(){\n\t\tvar orientation = g_panel.getOrientation();\n\t\t\n\t\tswitch(orientation){\n\t\t\tcase \"right\":\n\t\t\tcase \"left\":\n\t\t\t\tif(g_options.panel_handle_align != \"top\" && g_options.panel_handle_align != \"bottom\")\n\t\t\t\t\tg_options.panel_handle_align = \"top\";\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tif(g_options.panel_handle_align != \"left\" && g_options.panel_handle_align != \"right\")\n\t\t\t\t\tg_options.panel_handle_align = \"left\";\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tif(g_options.panel_handle_align != \"left\" && g_options.panel_handle_align != \"right\")\n\t\t\t\t\tg_options.panel_handle_align = \"right\";\t\t\t\t\n\t\t\tbreak;\n\t\t}\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the panel\n\t */\n\tthis.placeHandle = function(){\n\t\tvar handleSize = g_functions.getElementSize(g_objHandleTip);\n\t\t\n\t\tcheckAndFixAlign();\n\t\t\t\t\n\t\tvar orientation = g_panel.getOrientation();\n\t\t\n\t\tswitch(orientation){\n\t\t\tcase \"left\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, \"right\", g_options.panel_handle_align, -handleSize.width);\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, -handleSize.width, g_options.panel_handle_align, 0 ,g_options.panel_handle_offset);\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, g_options.panel_handle_align, \"bottom\", g_options.panel_handle_offset, -handleSize.height);\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tg_functions.placeElement(g_objHandleTip, g_options.panel_handle_align, \"top\", g_options.panel_handle_offset, -handleSize.height);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Wrong panel orientation: \" + orientation);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * hide the handle\n\t */\n\tthis.hideHandle = function(){\n\t\t\n\t\tif(g_objHandleTip.is(\":visible\") == true)\n\t\t\tg_objHandleTip.hide();\n\t\n\t}\n\t\n\t/**\n\t * show the handle\n\t */\n\tthis.showHandle = function(){\n\t\t\n\t\tif(g_objHandleTip.is(\":visible\") == false)\n\t\t\tg_objHandleTip.show();\n\t\t\n\t}\n\t\n\t\n}\n\n/**\n * grid panel class addon to grid gallery\n */\nfunction UGStripPanel() {\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objPanel;\n\tvar g_functions = new UGFunctions(), g_objStrip = new UGThumbsStrip(), g_panelBase = new UGPanelsBase();\n\tvar g_objButtonNext, g_objButtonPrev;\n\n\tthis.events = {\n\t\tFINISH_MOVE : \"gridpanel_move_finish\", // called after close or open panel (slide finish).\n\t\tOPEN_PANEL : \"open_panel\", \t\t\t   // called before opening the panel.\n\t\tCLOSE_PANEL : \"close_panel\" \t\t   // called before closing the panel.\n\t};\n\n\tvar g_options = {\n\n\t\tstrippanel_vertical_type : false, // true, false - specify if the panel is vertical or horizonatal type\n\n\t\tstrippanel_padding_top : 8,       // space from top of the panel\n\t\tstrippanel_padding_bottom : 8,    // space from bottom of the panel\n\n\t\tstrippanel_padding_left : 0,      // space from left of the panel\n\t\tstrippanel_padding_right : 0,     // space from right of the panel\n\n\t\tstrippanel_enable_buttons : true, // enable buttons from the sides of the panel\n\t\tstrippanel_buttons_skin : \"\",     // skin of the buttons, if empty inherit from gallery skin\n\t\t\t\t\t\t\t\t\t\t  \n\t\tstrippanel_padding_buttons : 2,   // padding between the buttons and the panel\n\n\t\tstrippanel_buttons_role : \"scroll_strip\",   // scroll_strip, advance_item - the role of the side buttons\n\t\t\n\t\tstrippanel_enable_handle : true,  // enable grid handle\n\t\tstrippanel_handle_align : \"top\",  // top, middle, bottom , left, right, center - close handle tip align on the handle bar according panel orientation\n\t\tstrippanel_handle_offset : 0, \t  // offset of handle bar according the valign\n\t\t\t\t\t\t\t\t\t\t\n\t\tstrippanel_handle_skin : \"\", \t  // skin of the handle, if empty inherit  from gallery skin\n\n\t\tstrippanel_background_color : \"\"  // background color of the strip wrapper, if not set, it will be taken from the css\n\t\t\n\t};\n\n\tvar g_defaults_vertical = {\n\t\tstrip_vertical_type : true,\n\t\tstrippanel_padding_left : 8,\n\t\tstrippanel_padding_right : 8,\n\t\tstrippanel_padding_top : 0,\n\t\tstrippanel_padding_bottom : 0\n\t};\n\n\tvar g_defaults_no_buttons = {\n\t\tstrippanel_padding_left : 8,\n\t\tstrippanel_padding_right : 8,\n\t\tstrippanel_padding_top : 8,\n\t\tstrippanel_padding_bottom : 8\n\t};\n\n\tvar g_temp = {\n\t\tpanelType: \"strip\",\n\t\tpanelWidth : 0,\n\t\tpanelHeight : 0,\n\t\tisEventsInited : false,\n\t\tisClosed : false,\n\t\torientation : null,\n\t\toriginalPos : null,\n\t\tisFirstRun : true\n\t};\n\n\t/**\n\t * init the panel\n\t */\n\tfunction initPanel(gallery, customOptions) {\n\t\tg_gallery = gallery;\n\n\t\tg_objGallery = jQuery(g_gallery);\n\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\n\t\tvar repeatCustomOptions = false;\n\n\t\tif (g_options.strippanel_vertical_type == true) {\n\t\t\tg_options = jQuery.extend(g_options, g_defaults_vertical);\n\t\t\trepeatCustomOptions = true;\n\t\t}\n\n\t\tif (g_options.strippanel_enable_buttons == false) {\n\t\t\tg_options = jQuery.extend(g_options, g_defaults_no_buttons);\n\t\t\trepeatCustomOptions = true;\n\t\t}\n\n\t\tif (repeatCustomOptions == true)\n\t\t\tg_options = jQuery.extend(g_options, customOptions); // do the\n\t\t\n\t\t\n\t\t// set arrows skin:\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\tvar globalSkin = galleryOptions.gallery_skin;\n\t\tif (g_options.strippanel_buttons_skin == \"\")\n\t\t\tg_options.strippanel_buttons_skin = globalSkin;\n\n\t\tg_objWrapper = g_gallery.getElement();\n\t\t\n\t\t//init the base panel object:\n\t\tg_panelBase.init(g_gallery, g_temp, t, g_options, g_objThis);\n\t\t\n\t\t//init thumbs strip\n\t\tg_objStrip = new UGThumbsStrip();\n\t\tg_objStrip.init(g_gallery, g_options);\n\t\t\n\t}\n\n\t\n\t/**\n\t * validate panel before run\n\t */\n\tfunction validatePanelBeforeRun() {\n\t\t\n\t\tif (g_options.strippanel_vertical_type == false) { // horizontal\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// validate\n\t\t\tif (g_temp.panelWidth == 0) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\"Strip panel error: The width not set, please set width\");\n\t\t\t\treturn (false);\n\t\t\t}\n\n\t\t} else { // vertical validate\n\n\t\t\tif (g_temp.panelHeight == 0) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\"Strip panel error: The height not set, please set height\");\n\t\t\t\treturn (false);\n\t\t\t}\n\n\t\t}\n\n\t\t// validate orientation\n\t\tif (g_temp.orientation == null) {\n\t\t\tthrow new Error(\n\t\t\t\t\t\"Wrong orientation, please set panel orientation before run\");\n\t\t\treturn (false);\n\t\t}\n\n\t\treturn (true);\n\t}\n\n\t/**\n\t * run the panel\n\t */\n\tfunction runPanel() {\n\n\t\t// validation\n\t\tif (g_temp.isFirstRun == true && validatePanelBeforeRun() == false)\n\t\t\treturn (false);\n\n\t\tg_objStrip.run();\n\t\t\n\t\tsetElementsSize();\n\t\tplaceElements();\n\t\t\t\t\n\t\tinitEvents();\n\n\t\tg_temp.isFirstRun = false;\n\n\t\tcheckSideButtons();\n\t}\n\n\t/**\n\t * set panel html\n\t */\n\tfunction setPanelHtml(parentContainer) {\n\t\t\n\t\tif (!parentContainer)\n\t\t\tvar parentContainer = g_objWrapper;\n\n\t\t// add panel wrapper\n\t\tparentContainer.append(\"<div class='ug-strip-panel'></div>\");\n\n\t\tg_objPanel = parentContainer.children('.ug-strip-panel');\n\n\t\t// add arrows:\n\t\tif (g_options.strippanel_enable_buttons == true) {\n\n\t\t\tvar arrowPrevClass = \"ug-strip-arrow-left\";\n\t\t\tvar arrowNextClass = \"ug-strip-arrow-right\";\n\t\t\tif (g_options.strippanel_vertical_type == true) {\n\t\t\t\tarrowPrevClass = \"ug-strip-arrow-up\";\n\t\t\t\tarrowNextClass = \"ug-strip-arrow-down\";\n\t\t\t}\n\n\t\t\tg_objPanel.append(\"<div class='ug-strip-arrow \" + arrowPrevClass\n\t\t\t\t\t+ \" ug-skin-\" + g_options.strippanel_buttons_skin\n\t\t\t\t\t+ \"'><div class='ug-strip-arrow-tip'></div></div>\");\n\t\t\tg_objPanel.append(\"<div class='ug-strip-arrow \" + arrowNextClass\n\t\t\t\t\t+ \" ug-skin-\" + g_options.strippanel_buttons_skin\n\t\t\t\t\t+ \"'><div class='ug-strip-arrow-tip'></div></div>\");\n\n\t\t}\n\t\t\n\t\tg_panelBase.setHtml(g_objPanel);\n\t\t\n\t\tg_objStrip.setHtml(g_objPanel);\n\t\t\n\t\tif (g_options.strippanel_enable_buttons == true) {\n\t\t\tg_objButtonPrev = g_objPanel.children(\".\" + arrowPrevClass);\n\t\t\tg_objButtonNext = g_objPanel.children(\".\" + arrowNextClass);\n\t\t}\n\n\t\tsetHtmlProperties();\n\t}\n\n\t/**\n\t * set html properties according the options\n\t */\n\tfunction setHtmlProperties() {\n\n\t\t// set panel background color\n\t\tif (g_options.strippanel_background_color != \"\")\n\t\t\tg_objPanel.css(\"background-color\",\n\t\t\t\t\tg_options.strippanel_background_color);\n\n\t}\n\n\t/**\n\t * set elements size horizontal type\n\t */\n\tfunction setElementsSize_hor() {\n\t\t\n\t\t// get strip height\n\t\tvar stripHeight = g_objStrip.getHeight();\n\t\tvar panelWidth = g_temp.panelWidth;\n\n\t\t// set buttons height\n\t\tif (g_objButtonNext) {\n\t\t\tg_objButtonPrev.height(stripHeight);\n\t\t\tg_objButtonNext.height(stripHeight);\n\n\t\t\t// arrange buttons tip\n\t\t\tvar prevTip = g_objButtonPrev.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(prevTip, \"center\", \"middle\");\n\n\t\t\tvar nextTip = g_objButtonNext.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(nextTip, \"center\", \"middle\");\n\t\t}\n\n\t\t// set panel height\n\t\tvar panelHeight = stripHeight + g_options.strippanel_padding_top\n\t\t\t\t+ g_options.strippanel_padding_bottom;\n\n\t\t// set panel size\n\t\tg_objPanel.width(panelWidth);\n\t\tg_objPanel.height(panelHeight);\n\n\t\tg_temp.panelHeight = panelHeight;\n\n\t\t// set strip size\n\t\tvar stripWidth = panelWidth - g_options.strippanel_padding_left\t- g_options.strippanel_padding_right;\n\n\t\tif (g_objButtonNext) {\n\t\t\tvar buttonWidth = g_objButtonNext.outerWidth();\n\t\t\tstripWidth = stripWidth - buttonWidth * 2 - g_options.strippanel_padding_buttons * 2;\n\t\t}\n\n\t\tg_objStrip.resize(stripWidth);\n\t}\n\n\t/**\n\t * set elements size vertical type\n\t */\n\tfunction setElementsSize_vert() {\n\t\t\t\t\n\t\t// get strip width\n\t\tvar stripWidth = g_objStrip.getWidth();\n\t\tvar panelHeight = g_temp.panelHeight;\n\t\t\n\t\t// set buttons height\n\t\tif (g_objButtonNext) {\n\t\t\tg_objButtonPrev.width(stripWidth);\n\t\t\tg_objButtonNext.width(stripWidth);\n\n\t\t\t// arrange buttons tip\n\t\t\tvar prevTip = g_objButtonPrev.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(prevTip, \"center\", \"middle\");\n\n\t\t\tvar nextTip = g_objButtonNext.children(\".ug-strip-arrow-tip\");\n\t\t\tg_functions.placeElement(nextTip, \"center\", \"middle\");\n\t\t}\n\n\t\t// set panel width\n\t\tvar panelWidth = stripWidth + g_options.strippanel_padding_left\n\t\t\t\t+ g_options.strippanel_padding_right;\n\n\t\t// set panel size\n\t\tg_objPanel.width(panelWidth);\n\t\tg_objPanel.height(panelHeight);\n\n\t\tg_temp.panelWidth = panelWidth;\n\n\t\t// set strip size\n\t\tvar stripHeight = panelHeight - g_options.strippanel_padding_top\n\t\t\t\t- g_options.strippanel_padding_bottom;\n\n\t\tif (g_objButtonNext) {\n\t\t\tvar buttonHeight = g_objButtonNext.outerHeight();\n\t\t\tstripHeight = stripHeight - buttonHeight * 2\n\t\t\t\t\t- g_options.strippanel_padding_buttons * 2;\n\t\t}\n\n\t\tg_objStrip.resize(stripHeight);\n\t}\n\n\t/**\n\t * set elements size and place the elements\n\t */\n\tfunction setElementsSize() {\n\n\t\tif (g_options.strippanel_vertical_type == false)\n\t\t\tsetElementsSize_hor();\n\t\telse\n\t\t\tsetElementsSize_vert();\n\t}\n\n\t/**\n\t * place elements horizontally\n\t */\n\tfunction placeElements_hor() {\n\n\t\t// place buttons\n\t\tif (g_objButtonNext) {\n\t\t\tg_functions.placeElement(g_objButtonPrev, \"left\", \"top\",\n\t\t\t\t\tg_options.strippanel_padding_left,\n\t\t\t\t\tg_options.strippanel_padding_top);\n\t\t\tg_functions.placeElement(g_objButtonNext, \"right\", \"top\",\n\t\t\t\t\tg_options.strippanel_padding_right,\n\t\t\t\t\tg_options.strippanel_padding_top);\n\t\t}\n\n\t\tvar stripX = g_options.strippanel_padding_left;\n\t\tif (g_objButtonNext)\n\t\t\tstripX += g_objButtonNext.outerWidth()\n\t\t\t\t\t+ g_options.strippanel_padding_buttons;\n\n\t\tg_objStrip.setPosition(stripX, g_options.strippanel_padding_top);\n\n\t}\n\n\t/**\n\t * place elements vertically\n\t */\n\tfunction placeElements_vert() {\n\n\t\t// place buttons\n\t\tif (g_objButtonNext) {\n\t\t\tg_functions.placeElement(g_objButtonPrev, \"left\", \"top\",\n\t\t\t\t\tg_options.strippanel_padding_left,\n\t\t\t\t\tg_options.strippanel_padding_top);\n\t\t\tg_functions.placeElement(g_objButtonNext, \"left\", \"bottom\",\n\t\t\t\t\tg_options.strippanel_padding_left,\n\t\t\t\t\tg_options.strippanel_padding_bottom);\n\t\t}\n\n\t\tvar stripY = g_options.strippanel_padding_top;\n\t\tif (g_objButtonNext)\n\t\t\tstripY += g_objButtonNext.outerHeight()\n\t\t\t\t\t+ g_options.strippanel_padding_buttons;\n\n\t\tg_objStrip.setPosition(g_options.strippanel_padding_left, stripY);\n\t}\n\n\t/**\n\t * place elements\n\t */\n\tfunction placeElements() {\n\n\t\tif (g_options.strippanel_vertical_type == false)\n\t\t\tplaceElements_hor();\n\t\telse\n\t\t\tplaceElements_vert();\n\n\t\tg_panelBase.placeElements();\n\n\t}\n\n\n\n\tfunction __________EVENTS___________() {\n\t}\n\t;\n\n\t/**\n\t * on next button click\n\t */\n\tfunction onNextButtonClick(objButton) {\n\n\t\tif (g_functions.isButtonDisabled(objButton))\n\t\t\treturn (true);\n\n\t\tif (g_options.strippanel_buttons_role == \"advance_item\")\n\t\t\tg_gallery.nextItem();\n\t\telse\n\t\t\tg_objStrip.scrollForeward();\n\t}\n\n\t/**\n\t * on previous button click\n\t */\n\tfunction onPrevButtonClick(objButton) {\n\n\t\tif (g_functions.isButtonDisabled(objButton))\n\t\t\treturn (true);\n\n\t\tif (g_options.strippanel_buttons_role == \"advance_item\")\n\t\t\tg_gallery.prevItem();\n\t\telse\n\t\t\tg_objStrip.scrollBack();\n\t}\n\n\t/**\n\t * check buttons if they need to be disabled or not\n\t */\n\tfunction checkSideButtons() {\n\t\t\t\t\n\t\tif (!g_objButtonNext)\n\t\t\treturn (true);\n\n\t\t// if the strip not movable - disable both buttons\n\t\tif (g_objStrip.isMoveEnabled() == false) {\n\t\t\tg_functions.disableButton(g_objButtonPrev);\n\t\t\tg_functions.disableButton(g_objButtonNext);\n\t\t\treturn (true);\n\t\t}\n\t\t\n\t\t// check the limits\n\t\tvar limits = g_objStrip.getInnerStripLimits();\n\t\tvar pos = g_objStrip.getInnerStripPos();\n\t\t\n\t\tif (pos >= limits.maxPos) {\n\t\t\tg_functions.disableButton(g_objButtonPrev);\n\t\t} else {\n\t\t\tg_functions.enableButton(g_objButtonPrev);\n\t\t}\n\n\t\tif (pos <= limits.minPos)\n\t\t\tg_functions.disableButton(g_objButtonNext);\n\t\telse\n\t\t\tg_functions.enableButton(g_objButtonNext);\n\n\t}\n\n\t/**\n\t * on strip move event\n\t */\n\tfunction onStripMove() {\n\t\tcheckSideButtons();\n\t}\n\n\t/**\n\t * on item change event, disable or enable buttons according the images\n\t * position\n\t */\n\tfunction onItemChange() {\n\n\t\tif (g_gallery.isLastItem())\n\t\t\tg_functions.disableButton(g_objButtonNext);\n\t\telse\n\t\t\tg_functions.enableButton(g_objButtonNext);\n\n\t\tif (g_gallery.isFirstItem())\n\t\t\tg_functions.disableButton(g_objButtonPrev);\n\t\telse\n\t\t\tg_functions.enableButton(g_objButtonPrev);\n\n\t}\n\n\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents() {\n\n\t\tif (g_temp.isEventsInited == true)\n\t\t\treturn (false);\n\t\t\n\t\tg_temp.isEventsInited = true;\n\t\t\n\t\t// buttons events\n\t\tif (g_objButtonNext) {\n\n\t\t\t// add hove class\n\t\t\tg_functions.addClassOnHover(g_objButtonNext, \"ug-button-hover\");\n\t\t\tg_functions.addClassOnHover(g_objButtonPrev, \"ug-button-hover\");\n\n\t\t\t// add click events\n\t\t\tg_functions.setButtonOnClick(g_objButtonPrev, onPrevButtonClick);\n\t\t\tg_functions.setButtonOnClick(g_objButtonNext, onNextButtonClick);\n\n\t\t\t// add disable / enable buttons on strip move event\n\t\t\tif (g_options.strippanel_buttons_role != \"advance_item\") {\n\t\t\t\t\n\t\t\t\tjQuery(g_objStrip).on(g_objStrip.events.STRIP_MOVE, onStripMove);\n\t\t\t\t\n\t\t\t\tjQuery(g_objStrip).on(g_objStrip.events.INNER_SIZE_CHANGE, checkSideButtons);\n\t\t\t\t\n\t\t\t\tg_objGallery.on(g_gallery.events.SIZE_CHANGE, checkSideButtons);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tvar galleryOptions = g_gallery.getOptions();\n\t\t\t\tif (galleryOptions.gallery_carousel == false)\n\t\t\t\t\tjQuery(g_gallery).on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\t}\n\n\t\t}\n\n\t\tg_panelBase.initEvents();\n\t}\n\t\n\t/**\n\t * destroy the strip panel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objButtonNext){\n\t\t\tg_functions.destroyButton(g_objButtonNext);\n\t\t\tg_functions.destroyButton(g_objButtonPrev);\n\t\t\tjQuery(g_objStrip).off(g_objStrip.events.STRIP_MOVE);\n\t\t\tjQuery(g_gallery).off(g_gallery.events.ITEM_CHANGE);\n\t\t\tjQuery(g_gallery).off(g_gallery.events.SIZE_CHANGE);\n\t\t}\n\t\t\n\t\tg_panelBase.destroy();\n\t\tg_objStrip.destroy();\n\t}\n\t\n\t\n\t/**\n\t * get panel orientation\n\t */\n\tthis.getOrientation = function() {\n\n\t\treturn (g_temp.orientation);\n\t}\n\n\t/**\n\t * set panel orientation (left, right, top, bottom)\n\t */\n\tthis.setOrientation = function(orientation) {\n\n\t\tg_temp.orientation = orientation;\n\t}\n\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(gallery, customOptions) {\n\t\tinitPanel(gallery, customOptions);\n\t}\n\n\t/**\n\t * run the panel\n\t */\n\tthis.run = function() {\n\t\trunPanel();\n\t}\n\n\t/**\n\t * place panel html\n\t */\n\tthis.setHtml = function(parentContainer) {\n\t\tsetPanelHtml(parentContainer);\n\t}\n\n\t/**\n\t * get the panel element\n\t */\n\tthis.getElement = function() {\n\t\treturn (g_objPanel);\n\t}\n\n\t/**\n\t * get panel size object\n\t */\n\tthis.getSize = function() {\n\n\t\tvar objSize = g_functions.getElementSize(g_objPanel);\n\n\t\treturn (objSize);\n\t}\n\n\t/**\n\t * set panel width (for horizonal type)\n\t */\n\tthis.setWidth = function(width) {\n\n\t\tg_temp.panelWidth = width;\n\n\t}\n\n\t/**\n\t * set panel height (for vertical type)\n\t */\n\tthis.setHeight = function(height) {\n\n\t\tg_temp.panelHeight = height;\n\n\t}\n\n\t/**\n\t * resize the panel\n\t */\n\tthis.resize = function(newWidth) {\n\t\tt.setWidth(newWidth);\n\t\tsetElementsSize();\n\t\tplaceElements();\n\t}\n\t\n\tthis.__________Functions_From_Base_____ = function() {}\n\t\n\t/**\n\t * tells if the panel is closed\n\t */\n\tthis.isPanelClosed = function() {\t\t\n\t\treturn (g_panelBase.isPanelClosed());\n\t}\n\n\t/**\n\t * get closed panel destanation\n\t */\n\tthis.getClosedPanelDest = function() {\n\t\treturn g_panelBase.getClosedPanelDest();\n\t}\t\n\t\t\n\t/**\n\t * open the panel\n\t */\t\n\tthis.openPanel = function(noAnimation) {\n\t\tg_panelBase.openPanel(noAnimation);\n\t}\n\t\n\t\n\t/**\n\t * close the panel (slide in)\n\t */\n\tthis.closePanel = function(noAnimation) {\n\t\tg_panelBase.closePanel(noAnimation);\t\t\n\t}\t\n\t\n\t/**\n\t * set the panel opened state\n\t */\n\tthis.setOpenedState = function(originalPos) {\n\t\tg_panelBase.setOpenedState(originalPos);\n\t}\n\n\t/**\n\t * set the panel that it's in closed state, and set original pos for opening later\n\t */\n\tthis.setClosedState = function(originalPos) {\n\t\tg_panelBase.setClosedState(originalPos);\t\n\t}\n\t\n\t/**\n\t * set custom thumbs of the strip\n\t */\n\tthis.setCustomThumbs = function(funcSetHtml){\n\t\t\n\t\tg_objStrip.setCustomThumbs(funcSetHtml);\n\t\n\t}\n\t\n\t/**\n\t * set panel disabled at start\n\t */\n\tthis.setDisabledAtStart = function(timeout){\n\t\t\n\t\tg_panelBase.setDisabledAtStart(timeout);\n\t\t\n\t}\n\t\n}\n\n\n/**\n * grid panel class\n * addon to grid gallery\n */\nfunction UGGridPanel(){\n\t\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objPanel;\n\tvar g_functions = new UGFunctions();\n\tvar g_objGrid = new UGThumbsGrid();\n\tvar g_panelBase = new UGPanelsBase();\n\tvar g_objArrowNext, g_objArrowPrev;\n\t\n\tthis.events = {\n\t\tFINISH_MOVE: \"gridpanel_move_finish\",\t//called after close or open panel (slide finish).\n\t\tOPEN_PANEL: \"open_panel\",\t\t\t\t//called before opening the panel.\n\t\tCLOSE_PANEL: \"close_panel\"\t\t\t\t//called before closing the panel.\n\t};\n\t\n\tvar g_options = {\n\t\t\tgridpanel_vertical_scroll: true,\t\t\t//vertical or horizontal grid scroll and arrows\n\t\t\tgridpanel_grid_align: \"middle\",\t\t\t\t//top , middle , bottom, left, center, right - the align of the grid panel in the gallery \n\t\t\tgridpanel_padding_border_top: 10,\t\t    //padding between the top border of the panel\n\t\t\tgridpanel_padding_border_bottom: 4,\t\t\t//padding between the bottom border of the panel\n\t\t\tgridpanel_padding_border_left: 10,\t\t\t//padding between the left border of the panel\n\t\t\tgridpanel_padding_border_right: 10,\t\t\t//padding between the right border of the panel\n\t\t\t\n\t\t\tgridpanel_arrows_skin: \"\",\t\t\t\t\t//skin of the arrows, if empty inherit from gallery skin\n\t\t\tgridpanel_arrows_align_vert: \"middle\",\t\t//borders, grid, middle - vertical align of arrows, to the top and bottom botders, to the grid, or in the middle space.\n\t\t\tgridpanel_arrows_padding_vert: 4,\t\t\t//padding between the arrows and the grid, in case of middle align, it will be minimal padding\n\t\t\tgridpanel_arrows_align_hor: \"center\",\t\t//borders, grid, center - horizontal align of arrows, to the left and right botders, to the grid, or in the center space.\n\t\t\tgridpanel_arrows_padding_hor: 10,\t\t\t//in case of horizontal type only, minimal size from the grid in case of \"borders\" and size from the grid in case of \"grid\"\n\t\t\t\n\t\t\tgridpanel_space_between_arrows: 20,\t\t\t//space between arrows on horizontal grids only\n\t\t\tgridpanel_arrows_always_on: false,\t\t\t//always show arrows even if the grid is one pane only\n\n\t\t\tgridpanel_enable_handle: true,\t\t\t\t//enable grid handle\t\t\t\n\t\t\tgridpanel_handle_align: \"top\",\t\t\t\t//top, middle, bottom , left, right, center - close handle tip align on the handle bar according panel orientation\n\t\t\tgridpanel_handle_offset: 0,\t\t\t\t\t//offset of handle bar according the valign\n\t\t\tgridpanel_handle_skin: \"\",\t\t\t\t\t//skin of the handle, if empty inherit from gallery skin\n\t\t\t\n\t\t\tgridpanel_background_color:\"\"\t\t\t\t//background color of the grid wrapper, if not set, it will be taken from the css\n\t};\n\t\n\t\n\t//default options for vertical scroll\n\tvar g_defaultsVertical = {\n\t\t\tgridpanel_grid_align: \"middle\",\t\t\t//top , middle , bottom\n\t\t\tgridpanel_padding_border_top: 2,\t\t//padding between the top border of the panel\n\t\t\tgridpanel_padding_border_bottom: 2\t\t//padding between the bottom border of the panel\n\t};\n\t\n\t//default options for horizontal type panel\n\tvar g_defaultsHorType = {\n\t\t\tgridpanel_grid_align: \"center\"\t\t\t//left, center, right\t\t\t\n\t};\n\t\n\tvar g_temp = {\n\t\tpanelType: \"grid\",\n\t\tisHorType: false,\n\t\tarrowsVisible: false,\n\t\tpanelHeight: 0,\n\t\tpanelWidth: 0,\n\t\toriginalPosX:null,\n\t\tisEventsInited: false,\n\t\tisClosed: false,\n\t\torientation: null\n\t};\n\t\n\t\n\t/**\n\t * init the grid panel\n\t */\n\tfunction initGridPanel(gallery, customOptions){\n\t\t\n\t\tg_gallery = gallery;\n\t\t\n\t\tvalidateOrientation();\n\t\t\n\t\t//set defaults and custom options\n\t\tif(customOptions && customOptions.vertical_scroll){\n\t\t\tg_options.gridpanel_vertical_scroll = customOptions.vertical_scroll;\t\t\t\n\t\t}\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\t//set defautls for horizontal panel type\n\t\tif(g_temp.isHorType == true){\n\t\t\t\t\t\t\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsHorType);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\t\n\t\t}else if(g_options.gridpanel_vertical_scroll == true){\n\n\t\t\t//set defaults for vertical scroll\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsVertical);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\tg_options.grid_panes_direction = \"bottom\";\t\t\n\t\t}\n\t\t\n\t\t//set arrows skin:\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\tvar globalSkin = galleryOptions.gallery_skin;\t\t\n\t\tif(g_options.gridpanel_arrows_skin == \"\")\n\t\t\tg_options.gridpanel_arrows_skin = globalSkin;\n\t\t\n\t\t\n\t\t//get the gallery wrapper\n\t\tvar objects = gallery.getObjects();\n\t\tg_objWrapper = objects.g_objWrapper;\n\t\t\n\t\t//init the base panel object:\n\t\tg_panelBase.init(g_gallery, g_temp, t, g_options, g_objThis);\t\t\n\n\t\t//init the grid \n\t\tg_objGrid = new UGThumbsGrid();\n\t\tg_objGrid.init(g_gallery, g_options);\n\n\t}\n\t\n\t\n\t/**\n\t * validate the orientation if exists\n\t */\n\tfunction validateOrientation(){\n\t\t\n\t\tif(g_temp.orientation == null)\n\t\t\tthrow new Error(\"Wrong orientation, please set panel orientation before run\");\n\t\t\n\t}\n\t\n\t/**\n\t * run the rid panel\n\t */\n\tfunction runPanel(){\n\t\t\n\t\t//validate orientation\n\t\tvalidateOrientation();\n\t\t\n\t\tprocessOptions();\n\t\t\n\t\tg_objGrid.run();\n\t\t\n\t\tsetArrows();\n\t\tsetPanelSize();\n\t\tplaceElements();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * set html of the grid panel\n\t */\n\tfunction setHtmlPanel(){\n\t\t\n\t\t//add panel wrapper\n\t\tg_objWrapper.append(\"<div class='ug-grid-panel'></div>\");\n\t\t\n\t\tg_objPanel = g_objWrapper.children('.ug-grid-panel');\n\t\t\n\t\t//add arrows:\n\t\tif(g_temp.isHorType){\n\t\t\t\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-left-hortype ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-right-hortype ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\t\n\t\t\tg_objArrowPrev = g_objPanel.children(\".grid-arrow-left-hortype\");\n\t\t\tg_objArrowNext = g_objPanel.children(\".grid-arrow-right-hortype\");\n\t\t}\n\t\telse if(g_options.gridpanel_vertical_scroll == false){\t\t//horizonatl arrows\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-left ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-right ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\t\n\t\t\tg_objArrowPrev = g_objPanel.children(\".grid-arrow-left\");\n\t\t\tg_objArrowNext = g_objPanel.children(\".grid-arrow-right\");\n\t\t\t\n\t\t}else{\t\t//vertical arrows\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-up ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\tg_objPanel.append(\"<div class='grid-arrow grid-arrow-down ug-skin-\" + g_options.gridpanel_arrows_skin + \"'></div>\");\n\t\t\t\n\t\t\tg_objArrowPrev = g_objPanel.children(\".grid-arrow-up\");\n\t\t\tg_objArrowNext = g_objPanel.children(\".grid-arrow-down\");\n\t\t}\n\t\t\n\t\tg_panelBase.setHtml(g_objPanel);\n\t\t\n\t\t//hide the arrows\n\t\tg_objArrowPrev.fadeTo(0,0);\n\t\tg_objArrowNext.fadeTo(0,0);\n\t\t\n\t\tg_objGrid.setHtml(g_objPanel);\n\t\t\n\t\tsetHtmlProperties();\n\t}\n\t\n\t\n\t/**\n\t * set html properties according the options\n\t */\n\tfunction setHtmlProperties(){\n\t\t\n\t\t//set panel background color\n\t\tif(g_options.gridpanel_background_color != \"\")\n\t\t\tg_objPanel.css(\"background-color\",g_options.gridpanel_background_color);\n\t}\n\t\n\t\n\t/**\n\t * process and fix certain options, avoid arrows and validate options\n\t */\n\tfunction processOptions(){\n\t\t\n\t\tif(g_options.gridpanel_grid_align == \"center\")\n\t\t\tg_options.gridpanel_grid_align = \"middle\";\n\t}\n\t\n\t\t\n\t/**\n\t * place panel with some animation\n\t */\n\tfunction placePanelAnimation(panelX, functionOnComplete){\n\t\t\t\t\t\t\n\t\tvar objCss  = {left: panelX + \"px\"};\n\t\t\n\t\tg_objPanel.stop(true).animate(objCss ,{\n\t\t\tduration: 300,\n\t\t\teasing: \"easeInOutQuad\",\n\t\t\tqueue: false,\n\t\t\tcomplete: function(){\n\t\t\t\tif(functionOnComplete)\n\t\t\t\t\tfunctionOnComplete();\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * get max height of the grid according the arrows size\n\t */\n\tfunction getGridMaxHeight(){\n\t\t\n\t\t//check space taken without arrows for one pane grids\n\t\tvar spaceTaken = g_options.gridpanel_padding_border_top + g_options.gridpanel_padding_border_bottom;\n\t\tvar maxGridHeight = g_temp.panelHeight - spaceTaken;\n\t\t\n\t\tif(g_options.gridpanel_arrows_always_on == false){\n\t\t\tvar numPanes = g_objGrid.getNumPanesEstimationByHeight(maxGridHeight);\n\t\t\tif(numPanes == 1)\n\t\t\t\treturn(maxGridHeight);\n\t\t}\n\t\t\n\t\t//count the size with arrows\n\t\tvar arrowsSize = g_functions.getElementSize(g_objArrowNext);\n\t\tvar arrowsHeight = arrowsSize.height;\n\t\t\n\t\tvar spaceTaken = arrowsHeight + g_options.gridpanel_arrows_padding_vert;\n\t\t\n\t\tif(g_options.gridpanel_vertical_scroll == true)\t//in case of 2 arrows multiply by 2\n\t\t\tspaceTaken *= 2;\n\t\t\t\t\n\t\tspaceTaken += g_options.gridpanel_padding_border_top + g_options.gridpanel_padding_border_bottom;\n\t\t\n\t\tmaxGridHeight = g_temp.panelHeight - spaceTaken;\t\t\t\n\t\t\n\t\treturn(maxGridHeight);\n\t}\n\t\n\t\n\t/**\n\t * get grid maximum width\n\t */\n\tfunction getGridMaxWidth(){\n\t\t\t\t\n\t\t//check space taken without arrows for one pane grids\n\t\tvar spaceTaken = g_options.gridpanel_padding_border_left + g_options.gridpanel_padding_border_right;\n\t\t\t\t\n\t\tvar maxGridWidth = g_temp.panelWidth - spaceTaken;\n\t\t\n\t\tif(g_options.gridpanel_arrows_always_on == false){\n\t\t\tvar numPanes = g_objGrid.getNumPanesEstimationByWidth(maxGridWidth);\n\t\t\t\t\t\t\n\t\t\tif(numPanes == 1)\n\t\t\t\treturn(maxGridWidth);\n\t\t}\n\t\t\n\t\t//count the size with arrows\n\t\tvar arrowsSize = g_functions.getElementSize(g_objArrowNext);\n\t\tvar arrowsWidth = arrowsSize.width;\n\t\t\n\t\tspaceTaken += (arrowsWidth + g_options.gridpanel_arrows_padding_hor) * 2;\n\t\t\t\t\t\t\t\t\n\t\tmaxGridWidth = g_temp.panelWidth - spaceTaken;\t\t\t\n\t\t\n\t\treturn(maxGridWidth);\n\t}\n\t\t\n\t\n\t/**\n\t * enable / disable arrows according the grid\n\t */\n\tfunction setArrows(){\n\t\t\n\t\tvar showArrows = false;\n\t\tif(g_options.gridpanel_arrows_always_on == true){\n\t\t\tshowArrows = true;\n\t\t}\n\t\telse{\n\t\t\tvar numPanes = g_objGrid.getNumPanes();\n\t\t\tif(numPanes > 1)\n\t\t\t\tshowArrows = true;\n\t\t}\n\t\t\n\t\tif(showArrows == true){\t\t//show arrows\n\t\t\t\n\t\t\tg_objArrowNext.show().fadeTo(0,1);\n\t\t\tg_objArrowPrev.show().fadeTo(0,1);\n\t\t\tg_temp.arrowsVisible = true;\n\t\t\t\n\t\t}else{\t\t//hide arrows\n\t\t\t\n\t\t\tg_objArrowNext.hide();\n\t\t\tg_objArrowPrev.hide();\n\t\t\tg_temp.arrowsVisible = false;\t\t\t\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set panel size by the given height and grid width\n\t */\n\tfunction setPanelSize(){\n\t\tvar gridSize = g_objGrid.getSize();\n\t\t\t\t\n\t\t//set panel size\n\t\tif(g_temp.isHorType == true)\n\t\t\tg_temp.panelHeight = gridSize.height + g_options.gridpanel_padding_border_top + g_options.gridpanel_padding_border_bottom;\n\t\telse\n\t\t\tg_temp.panelWidth = gridSize.width + g_options.gridpanel_padding_border_left + g_options.gridpanel_padding_border_right;\n\t\t\n\t\tg_functions.setElementSize(g_objPanel, g_temp.panelWidth, g_temp.panelHeight);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the panel without animation\n\t * @param panelDest\n\t */\n\tfunction placePanelNoAnimation(panelDest){\n\t\t\n\t\tswitch(g_temp.orientation){\n\t\t\tcase \"right\":\t\t//vertical\n\t\t\tcase \"left\":\n\t\t\t\tg_functions.placeElement(g_objPanel, panelDest, null);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\tfunction __________EVENTS___________(){};\n\t\n\t\n\t\n\t/**\n\t * event on panel slide finish\n\t */\n\tfunction onPanelSlideFinish(){\n\t\t\t\t\n\t\tg_objThis.trigger(t.events.FINISH_MOVE);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(g_temp.isEventsInited == true)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.isEventsInited = true;\n\t\t\t\t\n\t\tif(g_objArrowPrev){\n\t\t\tg_functions.addClassOnHover(g_objArrowPrev);\n\t\t\tg_objGrid.attachPrevPaneButton(g_objArrowPrev);\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tif(g_objArrowNext){\n\t\t\tg_functions.addClassOnHover(g_objArrowNext);\n\t\t\tg_objGrid.attachNextPaneButton(g_objArrowNext);\t\t\t\n\t\t}\n\t\t\n\t\tg_panelBase.initEvents();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objArrowPrev)\n\t\t\tg_functions.destroyButton(g_objArrowPrev);\n\t\t\n\t\tif(g_objArrowNext)\n\t\t\tg_functions.destroyButton(g_objArrowNext);\n\t\t\n\t\tg_panelBase.destroy();\n\t\t\n\t\tg_objGrid.destroy();\n\t}\n\t\n\t\n\tfunction ______PLACE_ELEMENTS___________(){};\n\t\n\t\n\t/**\n\t * get padding left of the grid\n\t */\n\tfunction getGridPaddingLeft(){\n\t\t\n\t\tvar gridPanelLeft = g_options.gridpanel_padding_border_left;\n\t\t\n\t\treturn(gridPanelLeft);\n\t}\n\t\n\t\n\t/**\n\t * place elements vertical - grid only\n\t */\n\tfunction placeElements_noarrows(){\n\t\t\n\t\t//place grid\n\t\tvar gridY = g_options.gridpanel_grid_align, gridPaddingY = 0;\n\t\t\n\t\tswitch(gridY){\n\t\t\tcase \"top\":\n\t\t\t\tgridPaddingY = g_options.gridpanel_padding_border_top;\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tgridPaddingY = g_options.gridpanel_padding_border_bottom;\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tvar gridPanelLeft = getGridPaddingLeft();\n\t\t\n\t\tvar gridElement = g_objGrid.getElement();\t\t\n\t\tg_functions.placeElement(gridElement, gridPanelLeft, gridY, 0 , gridPaddingY);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements vertical - with arrows\n\t */\n\tfunction placeElementsVert_arrows(){\n\t\t\n\t\t//place grid\n\t\tvar gridY, prevArrowY, nextArrowY, nextArrowPaddingY;\n\t\tvar objArrowSize = g_functions.getElementSize(g_objArrowPrev);\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\t\t\n\t\t\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tdefault:\n\t\t\tcase \"top\":\n\t\t\t\tgridY = g_options.gridpanel_padding_border_top + objArrowSize.height + g_options.gridpanel_arrows_padding_vert;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\t\tgridY = \"middle\";\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tgridY = g_temp.panelHeight - objGridSize.height - objArrowSize.height - g_options.gridpanel_padding_border_bottom - g_options.gridpanel_arrows_padding_vert;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//place the grid\n\t\tvar gridPanelLeft = getGridPaddingLeft();\n\t\t\n\t\tvar gridElement = g_objGrid.getElement();\t\t\n\t\tg_functions.placeElement(gridElement, gridPanelLeft, gridY);\n\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\t\t\n\t\t\t\t\t\t\n\t\t//place arrows\n\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\tdefault:\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tprevArrowY = (objGridSize.top - objArrowSize.height) / 2;\n\t\t\t\tnextArrowY = objGridSize.bottom + (g_temp.panelHeight - objGridSize.bottom - objArrowSize.height) / 2;\n\t\t\t\tnextArrowPaddingY = 0;\n\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\tprevArrowY = objGridSize.top - objArrowSize.height - g_options.gridpanel_arrows_padding_vert_vert\n\t\t\t\tnextArrowY = objGridSize.bottom + g_options.gridpanel_arrows_padding_vert;\n\t\t\t\tnextArrowPaddingY = 0;\n\t\t\tbreak;\n\t\t\tcase \"border\":\n\t\t\tcase \"borders\":\n\t\t\t\tprevArrowY = g_options.gridpanel_padding_border_top;\t\t\t\t\n\t\t\t\tnextArrowY = \"bottom\"; \n\t\t\t\tnextArrowPaddingY = g_options.gridpanel_padding_border_bottom;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_functions.placeElement(g_objArrowPrev, \"center\", prevArrowY);\n\t\t\t\t\t\t\n\t\tg_functions.placeElement(g_objArrowNext, \"center\", nextArrowY, 0, nextArrowPaddingY);\n\t}\n\t\n\t\n\t/**\n\t * place elements vertical\n\t */\n\tfunction placeElementsVert(){\n\t\t\n\t\tif(g_temp.arrowsVisible == true)\n\t\t\tplaceElementsVert_arrows();\n\t\telse\n\t\t\tplaceElements_noarrows();\n\t}\n\t\n\t\n\t/**\n\t * place elements horizontal with arrows\n\t */\n\tfunction placeElementsHor_arrows(){\n\t\t\n\t\tvar arrowsY, prevArrowPadding, arrowsPaddingY, nextArrowPadding;\n\t\tvar objArrowSize = g_functions.getElementSize(g_objArrowPrev);\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\t//place grid\n\t\tvar gridY = g_options.gridpanel_padding_border_top;\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tcase \"middle\":\n\t\t\t\t\n\t\t\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvar elementsHeight = objGridSize.height + g_options.gridpanel_arrows_padding_vert + objArrowSize.height;\n\t\t\t\t\t\tgridY = (g_temp.panelHeight - elementsHeight) / 2;\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"border\":\n\t\t\t\t\tcase \"borders\":\n\t\t\t\t\t\tvar remainHeight = g_temp.panelHeight - objArrowSize.height - g_options.gridpanel_padding_border_bottom;\n\t\t\t\t\t\tgridY = (remainHeight - objGridSize.height) / 2;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tvar elementsHeight = objGridSize.height + objArrowSize.height + g_options.gridpanel_arrows_padding_vert;\n\t\t\t\tgridY = g_temp.panelHeight - elementsHeight - g_options.gridpanel_padding_border_bottom;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\tvar gridElement = g_objGrid.getElement();\t\t\n\t\tvar gridPanelLeft = getGridPaddingLeft();\n\t\t\n\t\tg_functions.placeElement(gridElement, gridPanelLeft, gridY);\n\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\tdefault:\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tarrowsY = objGridSize.bottom + (g_temp.panelHeight - objGridSize.bottom - objArrowSize.height) / 2;\n\t\t\t\tarrowsPaddingY = 0;\t\t\t\t\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\tarrowsY = objGridSize.bottom + g_options.gridpanel_arrows_padding_vert;\n\t\t\t\tarrowsPaddingY = 0;\n\t\t\tbreak;\n\t\t\tcase \"border\":\n\t\t\tcase \"borders\":\n\t\t\t\tarrowsY = \"bottom\";\n\t\t\t\tarrowsPaddingY = g_options.gridpanel_padding_border_bottom;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tprevArrowPadding = -objArrowSize.width/2 - g_options.gridpanel_space_between_arrows / 2;\n\t\t\t\t\n\t\tg_functions.placeElement(g_objArrowPrev, \"center\", arrowsY, prevArrowPadding, arrowsPaddingY);\n\t\t\t\t\t\t\n\t\t//place next arrow\n\t\tvar nextArrowPadding = Math.abs(prevArrowPadding);\t\t//make positive\n\t\t\t\t\n\t\tg_functions.placeElement(g_objArrowNext, \"center\", arrowsY, nextArrowPadding, arrowsPaddingY);\n\t\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements horizonatal\n\t */\n\tfunction placeElementsHor(){\n\t\t\n\t\tif(g_temp.arrowsVisible == true)\n\t\t\tplaceElementsHor_arrows();\n\t\telse\n\t\t\tplaceElements_noarrows();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements horizontal type with arrows\n\t */\n\tfunction placeElementsHorType_arrows(){\n\t\t\n\t\t//place grid\n\t\tvar gridX, prevArrowX, nextArrowX, arrowsY;\n\t\tvar objArrowSize = g_functions.getElementSize(g_objArrowPrev);\t\t\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tdefault:\n\t\t\tcase \"left\":\n\t\t\t\tgridX = g_options.gridpanel_padding_border_left + g_options.gridpanel_arrows_padding_hor + objArrowSize.width;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\tcase \"center\":\n\t\t\t\tgridX = \"center\";\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tgridX = g_temp.panelWidth - objGridSize.width - objArrowSize.width - g_options.gridpanel_padding_border_right - g_options.gridpanel_arrows_padding_hor;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//place the grid\t\t\n\t\tvar gridElement = g_objGrid.getElement();\n\t\tg_functions.placeElement(gridElement, gridX, g_options.gridpanel_padding_border_top);\n\t\tobjGridSize = g_objGrid.getSize();\n\t\t\n\t\t//place arrows, count Y\n\t\tswitch(g_options.gridpanel_arrows_align_vert){\n\t\t\tdefault:\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tarrowsY = (objGridSize.height - objArrowSize.height) / 2 + objGridSize.top;\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\t\tarrowsY = g_options.gridpanel_padding_border_top + g_options.gridpanel_arrows_padding_vert;\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tarrowsY = g_temp.panelHeight - g_options.gridpanel_padding_border_bottom - g_options.gridpanel_arrows_padding_vert - objArrowSize.height;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\t//get arrows X\n\t\tswitch(g_options.gridpanel_arrows_align_hor){\n\t\t\tdefault:\n\t\t\tcase \"borders\":\n\t\t\t\tprevArrowX = g_options.gridpanel_padding_border_left;\n\t\t\t\tnextArrowX = g_temp.panelWidth - g_options.gridpanel_padding_border_right - objArrowSize.width;\n\t\t\tbreak;\n\t\t\tcase \"grid\":\n\t\t\t\tprevArrowX = objGridSize.left - g_options.gridpanel_arrows_padding_hor - objArrowSize.width;\n\t\t\t\tnextArrowX = objGridSize.right + g_options.gridpanel_arrows_padding_hor;\n\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tprevArrowX = (objGridSize.left - objArrowSize.width) / 2;\n\t\t\t\tnextArrowX = objGridSize.right + (g_temp.panelWidth - objGridSize.right - objArrowSize.width) / 2;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_functions.placeElement(g_objArrowPrev, prevArrowX, arrowsY);\t\t\n\t\tg_functions.placeElement(g_objArrowNext, nextArrowX, arrowsY);\n\t}\n\t\n\t\n\t/**\n\t * place elements horizontal type without arrows\n\t */\n\tfunction placeElementHorType_noarrows(){\n\t\t\n\t\tvar gridX;\n\t\tvar objGridSize = g_objGrid.getSize();\n\t\t\n\t\tswitch(g_options.gridpanel_grid_align){\n\t\t\tdefault:\n\t\t\tcase \"left\":\n\t\t\t\tgridX = g_options.gridpanel_padding_border_left;\n\t\t\tbreak;\n\t\t\tcase \"middle\":\n\t\t\tcase \"center\":\n\t\t\t\tgridX = \"center\";\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tgridX = g_temp.panelWidth - objGridSize.width - g_options.gridpanel_padding_border_right;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//place the grid\t\t\n\t\tvar gridElement = g_objGrid.getElement();\n\t\tg_functions.placeElement(gridElement, gridX, g_options.gridpanel_padding_border_top);\n\t}\n\t\n\t\n\t/**\n\t * place elements when the grid in horizontal position\n\t */\n\tfunction placeElementsHorType(){\n\t\t\n\t\tif(g_temp.arrowsVisible == true)\n\t\t\tplaceElementsHorType_arrows();\n\t\telse\n\t\t\tplaceElementHorType_noarrows();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the arrows\n\t */\n\tfunction placeElements(){\n\t\t\n\t\tif(g_temp.isHorType == false){\n\t\t\t\n\t\t\tif(g_options.gridpanel_vertical_scroll == true)\n\t\t\t\tplaceElementsVert();\n\t\t\telse\n\t\t\t\tplaceElementsHor();\n\t\t\t\n\t\t}else{\n\t\t\tplaceElementsHorType();\n\t\t}\n\t\t\n\t\tg_panelBase.placeElements();\n\t}\n\t\n\t\n\t/**\n\t * get panel orientation\n\t */\n\tthis.getOrientation = function(){\n\t\t\n\t\treturn(g_temp.orientation);\n\t}\n\t\n\t\n\t/**\n\t * set panel orientation (left, right, top, bottom)\n\t */\n\tthis.setOrientation = function(orientation){\n\t\t\n\t\tg_temp.orientation = orientation;\n\t\t\n\t\t//set isHorType temp variable for ease of use\n\t\tswitch(orientation){\n\t\t\tcase \"right\":\n\t\t\tcase \"left\":\n\t\t\t\tg_temp.isHorType = false;\n\t\t\tbreak;\n\t\t\tcase \"top\":\n\t\t\tcase \"bottom\":\n\t\t\t\tg_temp.isHorType = true;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Wrong grid panel orientation: \" + orientation);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * set panel height\n\t */\n\tthis.setHeight = function(height){\n\t\t\n\t\tif(g_temp.isHorType == true)\n\t\t\tthrow new Error(\"setHeight is not appliable to this orientatio (\"+g_temp.orientation+\"). Please use setWidth\");\t\t\n\t\t\n\t\tg_temp.panelHeight = height;\n\t\tvar gridMaxHeight = getGridMaxHeight();\n\t\t\n\t\tg_objGrid.setMaxHeight(gridMaxHeight);\n\t}\n\t\n\t\n\t/**\n\t * set panel width\n\t */\n\tthis.setWidth = function(width){\n\n\t\tif(g_temp.isHorType == false)\n\t\t\tthrow new Error(\"setWidth is not appliable to this orientatio (\"+g_temp.orientation+\"). Please use setHeight\");\t\t\n\t\t\n\t\tg_temp.panelWidth = width;\n\t\t\n\t\tvar gridMaxWidth = getGridMaxWidth();\n\t\t\t\t\n\t\tg_objGrid.setMaxWidth(gridMaxWidth);\n\t}\n\t\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinitGridPanel(gallery, customOptions);\n\t}\n\t\n\t/**\n\t * place panel html\n\t */\n\tthis.setHtml = function(){\n\t\tsetHtmlPanel();\n\t}\n\t\n\t\n\t/**\n\t * run the panel\n\t */\n\tthis.run = function(){\n\t\t\n\t\trunPanel();\n\t}\n\t\n\t\n\t/**\n\t * get the panel element\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objPanel);\n\t}\n\t\n\t\n\t/**\n\t * get panel size object\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objPanel);\n\t\t\n\t\treturn(objSize);\n\t}\n\t\n\tthis.__________Functions_From_Base_____ = function() {}\n\t\n\t/**\n\t * tells if the panel is closed\n\t */\n\tthis.isPanelClosed = function() {\t\t\n\t\treturn (g_panelBase.isPanelClosed());\n\t}\n\n\t/**\n\t * get closed panel destanation\n\t */\n\tthis.getClosedPanelDest = function() {\n\t\treturn g_panelBase.getClosedPanelDest();\n\t}\t\n\t\t\n\t/**\n\t * open the panel\n\t */\t\n\tthis.openPanel = function(noAnimation) {\n\t\tg_panelBase.openPanel(noAnimation);\n\t}\n\t\n\t\n\t/**\n\t * close the panel (slide in)\n\t */\n\tthis.closePanel = function(noAnimation) {\n\t\tg_panelBase.closePanel(noAnimation);\t\t\n\t}\t\n\t\n\t/**\n\t * set the panel opened state\n\t */\n\tthis.setOpenedState = function(originalPos) {\n\t\tg_panelBase.setOpenedState(originalPos);\n\t}\n\n\t/**\n\t * set the panel that it's in closed state, and set original pos for opening later\n\t */\n\tthis.setClosedState = function(originalPos) {\n\t\tg_panelBase.setClosedState(originalPos);\t\n\t}\n\t\n\t\n\t/**\n\t * set panel disabled at start\n\t */\n\tthis.setDisabledAtStart = function(timeout){\n\t\t\n\t\tg_panelBase.setDisabledAtStart(timeout);\n\t\t\n\t}\n\t\n\t\n}\n\n/**\n * thumbs class\n * addon to strip gallery\n */\nfunction UGThumbsGrid(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objects, g_objWrapper;\n\tvar g_functions = new UGFunctions(), g_arrItems, g_objGrid, g_objInner;\n\tvar g_thumbs = new UGThumbsGeneral(), g_tilesDesign = new UGTileDesign();\n\t\n\tvar g_options = {\n\t\tgrid_panes_direction: \"left\",\t\t\t\t//where panes will move -> left, bottom\n\t\tgrid_num_cols: 2,\t\t\t\t\t\t\t//number of grid columns\n\t\tgrid_min_cols: 2,\t\t\t\t\t\t\t//minimum number of columns (for horizontal type) - the tile size is dynamic \n\t\tgrid_num_rows: 2,\t\t\t\t\t\t\t//number of grid rows (for horizontal type)\n\t\tgrid_space_between_cols: 10,\t\t\t\t//space between columns\n\t\tgrid_space_between_rows: 10,\t\t\t\t//space between rows\n\t\tgrid_space_between_mobile: 10,\t\t\t\t//space between rows and cols mobile\n\t\tgrid_transition_duration: 300,\t\t\t\t//transition of the panes change duration \n\t\tgrid_transition_easing: \"easeInOutQuad\",\t//transition of the panes change easing function\n\t\tgrid_carousel: false,\t\t\t\t\t\t//next pane goes to first when last\n\t\tgrid_padding: 0,\t\t\t\t\t\t\t//set padding to the grid\n\t\tgrid_vertical_scroll_ondrag: false\t\t\t//scroll the gallery on vertical drag\n\t};\n\t\n\tthis.events = {\n\t\tPANE_CHANGE: \"pane_change\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\teventSizeChange: \"thumb_size_change\",\n\t\t\tisHorizontal: false,\n\t\t\tisMaxHeight:false,\t\t//set if the height that set is max height. In that case need a height correction\n\t\t\tisMaxWidth:false,\t\t//set if the height that set is max height. In that case need a height correction\n\t\t\tgridHeight: 0,\n\t\t\tgridWidth: 0,\n\t\t\tinnerWidth: 0,\n\t\t\tinnerHeight:0,\n\t\t\tnumPanes:0,\n\t\t\tarrPanes:0,\n\t\t\tnumThumbs:0,\n\t\t\tcurrentPane:0,\n\t\t\tnumThumbsInPane:0,\n\t\t\tisNavigationVertical:false,\n\t\t\ttouchActive: false,\n\t\t\tstartScrollPos:0,\n\t\t\tisFirstTimeRun:true,\n\t\t\tisTilesMode: false,\n\t\t\tstoredEventID: \"thumbsgrid\",\n\t\t\ttileMaxWidth:null,\n\t\t\ttileMaxHeight:null,\n\t\t\tspaceBetweenCols: null,\n\t\t\tspaceBetweenRows: null\n\t\t};\n\t\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction init(gallery, customOptions, isTilesMode){\n\t\t\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_gallery.attachThumbsPanel(\"grid\", t);\n\t\t\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\t\t\n\t\tif(isTilesMode === true)\n\t\t\tg_temp.isTilesMode = true;\n\t\t\n\t\tg_temp.numThumbs = g_arrItems.length;\n\t\t\n\t\tsetOptions(customOptions);\n\t\t\n\t\tif(g_temp.isTilesMode == true){\n\t\t\t\n\t\t\tg_tilesDesign.setFixedMode();\n\t\t\tg_tilesDesign.setApproveClickFunction(isApproveTileClick);\n\t\t\tg_tilesDesign.init(gallery, g_options);\n\t\t\t\n\t\t\tvar options_td = g_tilesDesign.getOptions();\n\t\t\tg_temp.tileMaxHeight = options_td.tile_height;\n\t\t\tg_temp.tileMaxWidth = options_td.tile_width;\n\t\t\t\n\t\t\tg_thumbs = g_tilesDesign.getObjThumbs();\n\t\t}else{\n\t\t\t\n\t\t\t//disable the dynamic size in thumbs\n\t\t\tcustomOptions.thumb_fixed_size = true;\n\t\t\t\n\t\t\tg_thumbs.init(gallery, customOptions);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the grid panel html\n\t */\n\tfunction setHtml(parentContainer){\n\t\t\n\t\tvar objParent = g_objWrapper;\n\t\t\n\t\tif(parentContainer)\n\t\t\tobjParent = parentContainer;\n\t\t\n\t\tobjParent.append(\"<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>\");\t\t \n\t\tg_objGrid = objParent.children(\".ug-thumbs-grid\");\n\t\tg_objInner = g_objGrid.children(\".ug-thumbs-grid-inner\");\t\t\n\t\t\n\t\t//put the thumbs to inner strip\n\t\t\n\t\tif(g_temp.isTilesMode == true)\n\t\t\tg_tilesDesign.setHtml(g_objInner);\n\t\telse\n\t\t\tg_thumbs.setHtmlThumbs(g_objInner);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * validate before running the grid\n\t */\n\tfunction validateBeforeRun(){\n\t\t\n\t\tif(g_temp.isHorizontal == false){\t//vertical type\t\t\t\n\t\t\tif(g_temp.gridHeight == 0)\n\t\t\t\tthrow new Error(\"You must set height before run.\");\t\t\n\t\t}else{\n\t\t\tif(g_temp.gridWidth == 0)\n\t\t\t\tthrow new Error(\"You must set width before run.\");\t\t\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the gallery after init and set html\n\t */\n\tfunction run(){\n\t\t\n\t\tvar selectedItem = g_gallery.getSelectedItem();\n\t\t\n\t\tvalidateBeforeRun();\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true){\n\t\t\t\n\t\t\tinitEvents();\n\t\t\t\t\t\t\n\t\t\tif(g_temp.isTilesMode == true){\n\t\t\t\t\n\t\t\t\tinitGridDynamicSize();\n\t\t\t\tinitSizeParams();\t\t\t\t\t\n\t\t\t\tg_tilesDesign.run();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tg_thumbs.setHtmlProperties();\n\t\t\t\tinitSizeParams();\t\t\t\n\t\t\t\tg_thumbs.loadThumbsImages();\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_temp.isTilesMode == true){\n\t\t\t\t\n\t\t\t\t//check if dynamic size changed. If do, run the thumbs again\n\t\t\t\tvar isChanged = initGridDynamicSize();\n\t\t\t\t\n\t\t\t\tif(isChanged == true){\n\t\t\t\t\tinitSizeParams();\t\t\t\t\t\n\t\t\t\t\tg_tilesDesign.run();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\tpositionThumbs();\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true && g_temp.isTilesMode){\n\t\t\t\n\t\t\tvar objTiles = g_thumbs.getThumbs();\n\t\t\t\n\t\t\t//fire size change event\n\t\t\tobjTiles.each(function(index, tile){\n\t\t\t\t\n\t\t\t\tg_objWrapper.trigger(g_temp.eventSizeChange, jQuery(tile));\n\t\t\t});\n\t\t\t\n\t\t\tobjTiles.fadeTo(0,1);\n\t\t}\n\t\t\t\n\t\tif(selectedItem != null)\n\t\t\tscrollToThumb(selectedItem.index);\n\t\t\n\t\t//trigger pane change event on the start\n\t\tg_objThis.trigger(t.events.PANE_CHANGE, g_temp.currentPane);\n\t\t\n\t\tg_temp.isFirstTimeRun = false;\n\t}\n\t\n\t/**\n\t * get thumb size object\n\t */\n\tfunction getThumbsSize(){\n\t\tif(g_temp.isTilesMode == true)\n\t\t\tvar objThumbSize = g_tilesDesign.getGlobalTileSize();\n\t\telse\n\t\t\tvar objThumbSize = g_thumbs.getGlobalThumbSize();\n\t\t\n\t\treturn(objThumbSize);\n\t}\n\t\n\t\n\t/**\n\t * init grid dynamic size (tiles mode)\n\t */\n\tfunction initGridDynamicSize(){\n\t\t\n\t\tif(g_temp.isTilesMode == false)\n\t\t\tthrow new Error(\"Dynamic size can be set only in tiles mode\");\n\t\t\n\t\tvar isChanged = false;\n\t\tvar isMobile = g_gallery.isMobileMode();\n\t\t\n\t\t//--- set space between cols and rows\n\t\t\n\t\tvar spaceOld = g_temp.spaceBetweenCols;\n\t\t\n\t\tif(isMobile == true){\n\t\t\tg_temp.spaceBetweenCols = g_options.grid_space_between_mobile;\n\t\t\tg_temp.spaceBetweenRows = g_options.grid_space_between_mobile;\n\t\t}else{\n\t\t\tg_temp.spaceBetweenCols = g_options.grid_space_between_cols;\n\t\t\tg_temp.spaceBetweenRows = g_options.grid_space_between_rows;\n\t\t}\n\t\t\n\t\tif(g_temp.spaceBetweenCols != spaceOld)\n\t\t\tisChanged = true;\n\t\t\n\t\t//set tile size\n\t\t\n\t\tvar lastThumbSize = getThumbsSize();\n\t\tvar lastThumbWidth = lastThumbSize.width;\n\t\t\n\t\tvar tileWidth = g_temp.tileMaxWidth;\n\t\tvar numCols = g_functions.getNumItemsInSpace(g_temp.gridWidth, g_temp.tileMaxWidth, g_temp.spaceBetweenCols);\n\t\t\n\t\tif(numCols < g_options.grid_min_cols){\n\t\t\ttileWidth = g_functions.getItemSizeInSpace(g_temp.gridWidth, g_options.grid_min_cols, g_temp.spaceBetweenCols);\n\t\t}\n\t\t\n\t\tg_tilesDesign.setTileSizeOptions(tileWidth);\n\t\t\n\t\tif(tileWidth != lastThumbWidth)\n\t\t\tisChanged = true;\n\t\t\n\t\t\n\t\treturn(isChanged);\n\t}\n\t\n\t\n\t/**\n\t * init grid size horizontal\n\t * get height param\n\t */\n\tfunction initSizeParamsHor(){\n\t\t\t\t\n\t\tvar objThumbSize = getThumbsSize();\n\t\t\n\t\tvar thumbsHeight = objThumbSize.height;\n\t\t\n\t\t//set grid size\n\t\tvar gridWidth = g_temp.gridWidth;\n\t\tvar gridHeight = g_options.grid_num_rows * thumbsHeight + (g_options.grid_num_rows-1) * g_temp.spaceBetweenRows + g_options.grid_padding*2;\n\t\t\n\t\tg_temp.gridHeight = gridHeight;\n\t\t\n\t\tg_functions.setElementSize(g_objGrid, gridWidth, gridHeight);\n\t\n\t\t//set inner size (as grid size, will be corrected after placing thumbs\n\t\tg_functions.setElementSize(g_objInner, gridWidth, gridHeight);\n\t\t\n\t\t//set initial inner size params\n\t\tg_temp.innerWidth = gridWidth;\n\t\tg_temp.innerHeight = gridHeight;\n\t}\n\t\n\t\n\t/**\n\t * init size params vertical\n\t */\n\tfunction initSizeParamsVert(){\n\n\t\tvar objThumbSize = getThumbsSize();\n\t\t\n\t\tvar thumbsWidth = objThumbSize.width;\n\t\t\n\t\t//set grid size\n\t\tvar gridWidth = g_options.grid_num_cols * thumbsWidth + (g_options.grid_num_cols-1) * g_temp.spaceBetweenCols + g_options.grid_padding*2;\n\t\tvar gridHeight = g_temp.gridHeight;\n\t\t\n\t\tg_temp.gridWidth = gridWidth;\n\t\t\n\t\tg_functions.setElementSize(g_objGrid, gridWidth, gridHeight);\n\t\n\t\t//set inner size (as grid size, will be corrected after placing thumbs\n\t\tg_functions.setElementSize(g_objInner, gridWidth, gridHeight);\n\t\t\n\t\t//set initial inner size params\n\t\tg_temp.innerWidth = gridWidth;\n\t\tg_temp.innerHeight = gridHeight;\n\t\t\n\t}\n\t\n\t/**\n\t * init grid size\n\t */\n\tfunction initSizeParams(){\n\t\t\n\t\tif(g_temp.isHorizontal == false)\n\t\t\tinitSizeParamsVert();\n\t\telse\n\t\t\tinitSizeParamsHor();\n\t\t\n\t}\n\n\t\n\n\t/**\n\t * goto pane by index\n\t */\n\tfunction scrollToThumb(thumbIndex){\n\t\t\n\t\tvar paneIndex = getPaneIndexByThumbIndex(thumbIndex);\n\t\tif(paneIndex == -1)\n\t\t\treturn(false);\n\t\t\t\t\n\t\tt.gotoPane(paneIndex, \"scroll\");\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the options of the strip\n\t */\n\tfunction setOptions(objOptions){\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\n\t\tg_thumbs.setOptions(objOptions);\n\t\t\n\t\t//set vertical or horizon\n\t\tg_temp.isNavigationVertical = (g_options.grid_panes_direction == \"top\" || g_options.grid_panes_direction == \"bottom\")\n\t\t\n\t\tg_temp.spaceBetweenCols = g_options.grid_space_between_cols;\n\t\tg_temp.spaceBetweenRows = g_options.grid_space_between_rows;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * position the thumbs and init panes horizontally\n\t */\n\tfunction positionThumb_hor(){\n\t\t\t\t\n\t\tvar arrThumbs = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\tvar counter = 0;\n\t\tvar baseX = 0;\n\t\tvar maxx = 0, maxy = 0;\n\t\tg_temp.innerWidth = 0;\n\t\tg_temp.numPanes = 1;\n\t\tg_temp.arrPanes = [];\n\t\tg_temp.numThumbsInPane = 0;\n\t\t\n\t\t//set first pane position\n\t\tg_temp.arrPanes.push(baseX);\t\n\t\t\n\t\tvar numThumbs = arrThumbs.length;\n\t\t\t\n\t\tfor(i=0;i < numThumbs; i++){\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\tvar thumbWidth = objThumb.outerWidth();\n\t\t\tvar thumbHeight = objThumb.outerHeight();\n\t\t\t\n\t\t\t//count maxx\n\t\t\tif(posx > maxx)\n\t\t\t\tmaxx = posx;\n\t\t\t\n\t\t\t//count maxy\n\t\t\tvar endY = posy + thumbHeight;\n\t\t\tif(endY > maxy)\n\t\t\t\tmaxy = endY;\n\t\t\t\n\t\t\t//count maxx end\n\t\t\tvar endX = maxx + thumbWidth;\n\t\t\tif(endX > g_temp.innerWidth)\n\t\t\t\tg_temp.innerWidth = endX;\n\t\t\t\t\t\t\n\t\t\tposx += thumbWidth + g_temp.spaceBetweenCols;\n\t\t\t\n\t\t\t//next row\n\t\t\tcounter++;\n\t\t\tif(counter >= g_options.grid_num_cols){\n\t\t\t\tposy += thumbHeight + g_temp.spaceBetweenRows;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t}\n\t\t\t\n\t\t\t//count number thumbs in pane\n\t\t\tif(g_temp.numPanes == 1)\n\t\t\t\tg_temp.numThumbsInPane++;\n\t\t\t\n\t\t\t//prepare next pane\n\t\t\tif((posy + thumbHeight) > g_temp.gridHeight){\n\t\t\t\tposy = 0;\n\t\t\t\tbaseX = g_temp.innerWidth + g_temp.spaceBetweenCols;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t\t\t\t\t\t\n\t\t\t\t//correct max height size (do it once only)\n\t\t\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\t\t\tg_temp.gridHeight = maxy;\n\t\t\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//save next pane props (if exists)\n\t\t\t\tif(i < (numThumbs - 1)){\n\t\t\t\t\tg_temp.numPanes++;\n\t\t\t\t\t\n\t\t\t\t\t//set next pane position\n\t\t\t\t\tg_temp.arrPanes.push(baseX);\t\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t//set inner strip width and height\n\t\tg_objInner.width(g_temp.innerWidth);\n\t\t\n\t\t//set grid height\n\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\tg_temp.gridHeight = maxy;\n\t\t\tg_objGrid.height(maxy);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * position the thumbs and init panes vertically\n\t */\n\tfunction positionThumb_vert(){\n\t\tvar arrThumbs = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\tvar maxy = 0;\n\t\tvar counter = 0;\n\t\tvar baseX = 0;\n\t\tvar paneStartY = 0;\n\t\t\n\t\tg_temp.innerWidth = 0;\n\t\tg_temp.numPanes = 1;\n\t\tg_temp.arrPanes = [];\n\t\tg_temp.numThumbsInPane = 0;\n\t\t\n\t\t//set first pane position\n\t\tg_temp.arrPanes.push(baseX);\n\t\t\n\t\tvar numThumbs = arrThumbs.length;\n\t\t\t\n\t\tfor(i=0;i < numThumbs; i++){\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\tvar thumbWidth = objThumb.outerWidth();\n\t\t\tvar thumbHeight = objThumb.outerHeight();\n\t\t\t\t\t\t\t\t\t\n\t\t\tposx += thumbWidth + g_temp.spaceBetweenCols;\n\t\t\t\n\t\t\tvar endy = (posy + thumbHeight);\n\t\t\tif(endy > maxy)\n\t\t\t\tmaxy = endy;\n\t\t\t\n\t\t\t//next row\n\t\t\tcounter++;\n\t\t\tif(counter >= g_options.grid_num_cols){\n\t\t\t\tposy += thumbHeight + g_temp.spaceBetweenRows;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t}\n\t\t\t\n\t\t\t//count number thumbs in pane\n\t\t\tif(g_temp.numPanes == 1)\n\t\t\t\tg_temp.numThumbsInPane++;\n\t\t\t\t\t\t\n\t\t\t//prepare next pane\n\t\t\tendy = (posy + thumbHeight);\n\t\t\tvar paneMaxY = paneStartY + g_temp.gridHeight;\n\t\t\t\n\t\t\t//advance next pane\n\t\t\tif(endy > paneMaxY){\n\t\t\t\t\n\t\t\t\t//correct max height size (do it once only)\n\t\t\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\t\t\tg_temp.gridHeight = maxy;\n\t\t\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t\tpaneMaxY = g_temp.gridHeight;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tposy = paneMaxY + g_temp.spaceBetweenRows;\t\t\t\t\t\n\t\t\t\tpaneStartY = posy;\n\t\t\t\tbaseX = 0;\n\t\t\t\tposx = baseX;\n\t\t\t\tcounter = 0;\n\t\t\t\t\n\t\t\t\t//save next pane props (if exists)\n\t\t\t\tif(i < (numThumbs - 1)){\n\t\t\t\t\tg_temp.numPanes++;\n\t\t\t\t\t\n\t\t\t\t\t//set next pane position\n\t\t\t\t\tg_temp.arrPanes.push(posy);\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}//for\n\t\t\t\t\n\t\t//set inner height \n\t\tg_objInner.height(maxy);\n\t\tg_temp.innerHeight = maxy;\n\t\t\n\t\t//set grid height\n\t\tif(g_temp.isMaxHeight == true && g_temp.numPanes == 1){\n\t\t\tg_temp.gridHeight = maxy;\n\t\t\tg_objGrid.height(maxy);\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * position the thumbs horizontal type\n\t */\t\n\tfunction positionThumb_hortype(){\n\t\t\t\t\n\t\tvar arrThumbs = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\tvar baseX = g_options.grid_padding;\n\t\tvar baseY = g_options.grid_padding;\n\t\tvar posy = baseY;\n\t\tvar posx = baseX;\n\t\tvar maxx = 0, maxy = 0, paneMaxY = 0, gridMaxY = 0;\n\t\tvar rowsCounter = 0;\n\t\t\n\t\tg_temp.innerWidth = 0;\n\t\tg_temp.numPanes = 1;\n\t\tg_temp.arrPanes = [];\n\t\tg_temp.numThumbsInPane = 0;\n\t\t\n\t\t//set first pane position\n\t\tg_temp.arrPanes.push(baseX-g_options.grid_padding);\t\n\t\t\n\t\tvar numThumbs = arrThumbs.length;\n\t\t\t\t\n\t\tfor(i=0;i < numThumbs; i++){\n\t\t\tvar objThumb = jQuery(arrThumbs[i]);\n\t\t\t\n\t\t\tvar thumbWidth = objThumb.outerWidth();\n\t\t\tvar thumbHeight = objThumb.outerHeight();\n\t\t\t\n\t\t\t//check end of the size, start a new row\n\t\t\tif((posx - baseX + thumbWidth) > g_temp.gridWidth){\n\t\t\t\trowsCounter++;\n\t\t\t\tposy = 0;\n\t\t\t\t\n\t\t\t\tif(rowsCounter >= g_options.grid_num_rows){\n\t\t\t\t\t\n\t\t\t\t\t//change to a new pane\t\t\t\t\t\n\t\t\t\t\trowsCounter = 0;\n\t\t\t\t\tbaseX = posx;\n\t\t\t\t\tposy = baseY;\n\t\t\t\t\tpaneMaxY = 0;\n\t\t\t\t\t\n\t\t\t\t\t//change grid width to max width\n\t\t\t\t\tif(g_temp.numPanes == 1){\n\t\t\t\t\t\tg_temp.gridWidth = maxx+g_options.grid_padding;\n\t\t\t\t\t\tg_objGrid.width(g_temp.gridWidth);\n\t\t\t\t\t\t\n\t\t\t\t\t\tg_temp.gridHeight = gridMaxY + g_options.grid_padding;\n\t\t\t\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tg_temp.numPanes++;\n\t\t\t\t\tg_temp.arrPanes.push(baseX-g_options.grid_padding);\n\t\t\t\t\t\n\t\t\t\t}else{\t\t\t//start new line in existing pane\n\t\t\t\t\tposx = baseX;\n\t\t\t\t\tposy = paneMaxY + g_temp.spaceBetweenRows;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//place the thumb\n\t\t\tg_functions.placeElement(objThumb, posx, posy);\n\t\t\t\n\t\t\t//count maxx\n\t\t\tvar endX = posx + thumbWidth;\n\t\t\tif(endX > maxx)\n\t\t\t\tmaxx = endX;\n\t\t\t\n\t\t\t//count maxy\n\t\t\tvar endY = posy + thumbHeight;\n\t\t\t\n\t\t\tif(endY > paneMaxY)\t\t//pane height\n\t\t\t\tpaneMaxY = endY;\n\t\t\t\n\t\t\tif(endY > gridMaxY)\t\t//total height\n\t\t\t\tgridMaxY = endY;\n\t\t\t\n\t\t\tif(endY > maxy)\n\t\t\t\tmaxy = endY;\n\t\t\t\n\t\t\t//count maxx end\n\t\t\tvar endX = maxx + thumbWidth;\n\t\t\tif(endX > g_temp.innerWidth)\n\t\t\t\tg_temp.innerWidth = endX;\n\t\t\t\t\t\t\n\t\t\tposx += thumbWidth + g_temp.spaceBetweenCols;\n\t\t\t\t\t\t\n\t\t\t//count number thumbs in pane\n\t\t\tif(g_temp.numPanes == 1)\n\t\t\t\tg_temp.numThumbsInPane++;\n\t\t\t\n\t\t\t\n\t\t}//end for\n\t\t\n\t\t//set inner strip width and height\n\t\tg_temp.innerWidth = maxx + g_options.grid_padding;\n\t\tg_temp.innerHeight = gridMaxY + g_options.grid_padding;\n\t\t\n\t\tg_objInner.width(g_temp.innerWidth);\n\t\tg_objInner.height(g_temp.innerHeight);\n\n\n\t\t//set grid height\n\t\tif(g_temp.numPanes == 1){\n\t\t\tg_temp.gridWidth = maxx + g_options.grid_padding;\n\t\t\tg_temp.gridHeight = gridMaxY + g_options.grid_padding;\n\t\t\t\n\t\t\tg_objGrid.width(g_temp.gridWidth);\n\t\t\tg_objGrid.height(g_temp.gridHeight);\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * position the thumbs and init panes related and width related vars\n\t */\n\tfunction positionThumbs(){\n\t\t\n\t\tif(g_temp.isHorizontal == false){\t\t//position vertical type\n\t\t\t\n\t\t\tif(g_temp.isNavigationVertical)\n\t\t\t\tpositionThumb_vert();\n\t\t\telse\n\t\t\t\tpositionThumb_hor();\n\t\t\t\n\t\t}else{\n\t\t\tpositionThumb_hortype();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * validate thumb index\n\t */\n\tfunction validateThumbIndex(thumbIndex){\n\t\t\n\t\tif(thumbIndex < 0 || thumbIndex >= g_temp.numThumbs){\n\t\t\tthrow new Error(\"Thumb not exists: \" + thumbIndex);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * validate that the pane index exists\n\t */\n\tfunction validatePaneIndex(paneIndex){\n\t\t\n\t\tif(paneIndex >= g_temp.numPanes || paneIndex < 0){\n\t\t\tthrow new Error(\"Pane \" + index + \" doesn't exists.\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t/**\n\t * validate inner position\n\t */\n\tfunction validateInnerPos(pos){\n\t\t\t\t\n\t\tvar absPos = Math.abs(pos);\n\t\t\n\t\tif(g_temp.isNavigationVertical == false){\n\t\t\t\n\t\t\tif(absPos < 0 || absPos >= g_temp.innerWidth){\n\t\t\t\tthrow new Error(\"wrong inner x position: \" + pos);\n\t\t\t\treturn(false);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(absPos < 0 || absPos >= g_temp.innerHeight){\n\t\t\t\tthrow new Error(\"wrong inner y position: \" + pos);\n\t\t\t\treturn(false);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * \n\t * set inner strip position\n\t */\n\tfunction setInnerPos(pos){\n\t\t\n\t\tvar objCss = getInnerPosObj(pos);\n\t\tif(objCss == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_objInner.css(objCss);\n\t}\n\t\n\t\n\t/**\n\t * animate inner to some position\n\t */\n\tfunction animateInnerTo(pos){\n\t\t\n\t\tvar objCss = getInnerPosObj(pos);\n\t\tif(objCss == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_objInner.stop(true).animate(objCss ,{\n\t\t\tduration: g_options.grid_transition_duration,\n\t\t\teasing: g_options.grid_transition_easing,\n\t\t\tqueue: false\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * animate back to current pane\n\t */\n\tfunction animateToCurrentPane(){\n\t\t\n\t\tvar innerPos = -g_temp.arrPanes[g_temp.currentPane];\n\t\tanimateInnerTo(innerPos);\n\t}\n\t\n\t\t\n\t\n\tfunction __________GETTERS_________(){};\n\t\n\t/**\n\t * get inner object size according the orientation\n\t */\n\tfunction getInnerSize(){\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(g_temp.innerHeight);\n\t\telse\n\t\t\treturn(g_temp.innerWidth);\n\t}\n\t\n\t\n\t/**\n\t * get pane width or height according the orientation\n\t */\n\tfunction getPaneSize(){\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(g_temp.gridHeight);\n\t\telse\n\t\t\treturn(g_temp.gridWidth);\n\t}\n\t\n\t\n\t/**\n\t * get object of iner position move\n\t */\n\tfunction getInnerPosObj(pos){\n\t\t\t\t\n\t\tvar obj = {};\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\tobj.top = pos + \"px\";\n\t\telse\n\t\t\tobj.left = pos + \"px\";\n\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get mouse position according the orientation\n\t */\n\tfunction getMousePos(event){\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(mousePos.pageY);\n\t\telse\n\t\t\treturn(mousePos.pageX);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get inner position according the orientation\n\t */\n\tfunction getInnerPos(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(objSize.top);\n\t\telse\n\t\t\treturn(objSize.left);\n\t\n\t}\n\t\n\t/**\n\t * get pane by thumb index\n\t */\n\tfunction getPaneIndexByThumbIndex(thumbIndex){\n\t\t\n\t\t//validate thumb index\n\t\tif(validateThumbIndex(thumbIndex) == false)\n\t\t\treturn(-1);\n\t\t\n\t\tvar numPane = Math.floor(thumbIndex / g_temp.numThumbsInPane);\n\t\t\n\t\treturn(numPane);\n\t}\n\t\n\t/**\n\t * get position of some pane\n\t */\n\tfunction getPanePosition(index){\n\t\t\t\t\t\t\t\t\n\t\tvar pos = g_temp.arrPanes[index];\n\t\treturn(pos);\n\t}\n\t\n\t\n\t/**\n\t * return if passed some significant movement, for thumb click\n\t */\n\tfunction isSignificantPassed(){\n\t\t\n\t\tif(g_temp.numPanes == 1)\n\t\t\treturn(false);\n\t\t\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID);\n\t\t\n\t\tvar passedTime = objData.diffTime;\n\t\t\n\t\tvar currentInnerPos = getInnerPos();\n\t\tvar passedDistanceAbs = Math.abs(currentInnerPos - objData.startInnerPos);\n\t\t\n\t\tif(passedDistanceAbs > 30)\n\t\t\treturn(true);\n\t\t\n\t\tif(passedDistanceAbs > 5 && passedTime > 300)\n\t\t\treturn(true);\n\t\t\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t\n\t/**\n\t * check if the movement that was held is valid for pane change\n\t */\n\tfunction isMovementValidForChange(){\n\t\t\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID);\n\t\t\n\t\t//check position, if more then half, move\n\t\tvar currentInnerPos = getInnerPos();\n\t\tdiffPos = Math.abs(objData.startInnerPos - currentInnerPos);\n\t\t\t\t\n\t\tvar paneSize = getPaneSize();\n\t\tvar breakSize = Math.round(paneSize * 3 / 8);\n\t\t\n\t\tif(diffPos >= breakSize)\n\t\t\treturn(true);\n\t\t\n\t\tif(objData.diffTime < 300 && diffPos > 25)\n\t\t\treturn(true);\n\t\t\t\t\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * return if passed some significant movement\n\t */\n\tfunction isApproveTileClick(){\n\t\t\n\t\tif(g_temp.numPanes == 1)\n\t\t\treturn(true);\n\t\t\t\n\t\tvar isApprove = g_functions.isApproveStoredEventClick(g_temp.storedEventID, g_temp.isNavigationVertical);\n\t\t\n\t\treturn(isApprove);\n\t}\n\t\n\t\n\tfunction __________EVENTS_______(){};\n\t\n\t\n\t/**\n\t * on thumb click event\n\t */\n\tfunction onThumbClick(event){\n\t\t\n\t\t//event.preventDefault();\n\t\tif(isSignificantPassed() == true)\n\t\t\treturn(true);\n\t\t\n\t\t//run select item operation\n\t\tvar objThumb = jQuery(this);\n\t\tvar objItem = g_thumbs.getItemByThumb(objThumb);\n\t\t\n\t\tg_gallery.selectItem(objItem);\n\t}\n\t\n\t\n\t/**\n\t * on touch start\n\t */\n\tfunction onTouchStart(event){\n\t\t\t\t\n\t\tif(g_temp.numPanes == 1)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.touchActive == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isTilesMode == false)\n\t\t\tevent.preventDefault();\n\t\t\n\t\tg_temp.touchActive = true;\n\t\t\n\t\tvar addData = {\n\t\t\t\tstartInnerPos: getInnerPos()\n\t\t};\n\t\t\n\t\tg_functions.storeEventData(event, g_temp.storedEventID, addData);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * handle scroll top, return if scroll mode or not\n\t */\n\tfunction handleScrollTop(){\n\t\t\n\t\tif(g_options.grid_vertical_scroll_ondrag == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isNavigationVertical == true)\n\t\t\treturn(false);\n\t\t\n\t\tvar scrollDir = g_functions.handleScrollTop(g_temp.storedEventID);\n\t\t\n\t\tif(scrollDir === \"vert\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * on touch move\n\t */\n\tfunction onTouchMove(event){\n\t\t\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\t\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID, g_temp.isNavigationVertical);\n\t\t\n\t\t//check if was vertical scroll\n\t\tvar isScroll = handleScrollTop();\n\t\tif(isScroll)\n\t\t\treturn(true);\n\t\t\n\t\t\n\t\tvar diff = objData.diffMousePos;\n\t\tvar innerPos = objData.startInnerPos + diff;\n\t\tvar direction = (diff > 0) ? \"prev\":\"next\";\n\t\tvar lastPaneSize = g_temp.arrPanes[g_temp.numPanes-1];\n\t\t\n\t\t//slow down when off limits\n\t\tif(g_options.grid_carousel == false && innerPos > 0 && direction == \"prev\"){\n\t\t\tinnerPos = innerPos / 3;\n\t\t}\n\t\t\n\t\t//debugLine({lastSize:lastPaneSize,innerPos: innerPos});\n\t\t\n\t\tif(g_options.grid_carousel == false && innerPos < -lastPaneSize && direction == \"next\"){\n\t\t\tinnerPos = objData.startInnerPos + diff / 3;\n\t\t}\n\t\t\n\t\tsetInnerPos(innerPos);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * on touch end\n\t * change panes or return to current pane\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\tvar objData = g_functions.getStoredEventData(g_temp.storedEventID, g_temp.isNavigationVertical);\n\t\t\n\t\t//event.preventDefault();\n\t\tg_temp.touchActive = false;\n\t\t\n\t\tif(isMovementValidForChange() == false){\n\t\t\tanimateToCurrentPane();\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//move pane or return back\n\t\tvar innerPos = getInnerPos();\n\t\tvar diff = innerPos - objData.startInnerPos;\n\t\tvar direction = (diff > 0) ? \"prev\":\"next\";\n\t\t\n\t\tif(direction == \"next\"){\n\t\t\t\t\t\t\n\t\t\tif(g_options.grid_carousel == false && t.isLastPane())\n\t\t\t\tanimateToCurrentPane();\n\t\t\telse\n\t\t\t\tt.nextPane();\t\t\t\n\t\t}\n\t\telse{\n\t\t\t\t\t\t\n\t\t\tif(g_options.grid_carousel == false && t.isFirstPane()){\n\t\t\t\tanimateToCurrentPane();\n\t\t\t}\n\t\t\telse\n\t\t\t\tt.prevPane();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on item change\n\t */\n\tfunction onItemChange(){\n\t\t\t\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\tg_thumbs.setThumbSelected(objItem.objThumbWrapper);\n\t\t\n\t\tscrollToThumb(objItem.index);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(g_temp.isTilesMode == false){\n\t\t\t\n\t\t\tg_thumbs.initEvents();\t\t\n\t\t\tvar objThumbs = g_objGrid.find(\".ug-thumb-wrapper\");\n\t\t\tobjThumbs.on(\"click touchend\",onThumbClick);\n\t\t\t\n\t\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\t\n\t\t}else{\n\t\t\tg_tilesDesign.initEvents();\n\t\t}\n\t\t\n\t\t//touch drag events\n\t\t\n\t\t//slider mouse down - drag start\n\t\tg_objGrid.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_temp.isTilesMode == false){\n\t\t\t\n\t\t\tvar objThumbs = g_objGrid.find(\".ug-thumb-wrapper\");\n\t\t\tobjThumbs.off(\"click\");\n\t\t\tobjThumbs.off(\"touchend\");\n\t\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE);\n\t\t\tg_thumbs.destroy();\t\t\n\t\t\t\t\t\t\n\t\t}else{\n\t\t\tg_tilesDesign.destroy();\n\t\t}\n\t\t\n\t\tg_objGrid.unbind(\"mousedown\");\n\t\tg_objGrid.unbind(\"touchstart\");\n\t\tjQuery(\"body\").unbind(\"mousemove\");\n\t\tjQuery(\"body\").unbind(\"touchmove\");\n\t\t\n\t\tjQuery(window).add(\"body\").unbind(\"touchend\");\n\t\tjQuery(window).add(\"body\").unbind(\"mouseup\");\n\t\t\n\t\tg_objThis.off(t.events.PANE_CHANGE);\n\t\t\n\t}\n\t\n\t\n\t\n\tthis.__________EXTERNAL_GENERAL_________ = function(){};\n\t\n\t/**\n\t * set the thumb unselected state\n\t */\n\tthis.setThumbUnselected = function(objThumbWrapper){\n\t\t\n\t\tg_thumbs.setThumbUnselected(objThumbWrapper);\n\t\t\n\t}\n\t\n\t/**\n\t * check if thmb item visible, means inside the visible part of the inner strip\n\t */\n\tthis.isItemThumbVisible = function(objItem){\n\t\tvar itemIndex = objItem.index;\n\t\tvar paneIndex = getPaneIndexByThumbIndex(itemIndex);\n\t\t\n\t\tif(paneIndex == g_temp.currentPane)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\tthis.__________EXTERNAL_API_________ = function(){};\n\t\n\t/**\n\t * get estimation of number of panes by the height of the grid.\n\t */\n\tthis.getNumPanesEstimationByHeight = function(gridHeight){\n\t\t\n\t\tif(g_temp.isTilesMode == true){\n\t\t\t\n\t\t\tvar thumbHeight = g_options.tile_height;\n\t\t\t\n\t\t}else{\n\t\t\tvar thumbsOptions = g_thumbs.getOptions();\t\t\n\t\t\tvar thumbHeight = thumbsOptions.thumb_height;\n\t\t}\n\t\t\n\t\tvar numThumbs = g_thumbs.getNumThumbs();\n\t\tvar numRows = Math.ceil(numThumbs / g_options.grid_num_cols);\n\t\t\n\t\tvar totalHeight = numRows * thumbHeight + (numRows-1) * g_temp.spaceBetweenRows;\n\t\t\t\n\t\tvar numPanes = Math.ceil(totalHeight / gridHeight);\n\t\t\n\t\treturn(numPanes);\n\t}\n\t\n\t/**\n\t * get estimation of number of panes by the width of the grid.\n\t */\n\tthis.getNumPanesEstimationByWidth = function(gridWidth){\n\t\t\n\t\tif(g_temp.isTilesMode){\n\t\t\tvar thumbWidth = g_options.tile_width;\t\t\t\n\t\t}else{\n\t\t\tvar thumbsOptions = g_thumbs.getOptions();\t\t\n\t\t\tvar thumbWidth = thumbsOptions.thumb_width;\n\t\t}\n\t\t\n\t\tvar numThumbs = g_thumbs.getNumThumbs();\n\t\tvar numCols = Math.ceil(numThumbs / g_options.grid_num_rows);\n\t\t\n\t\tvar totalWidth = numCols * thumbWidth + (numCols-1) * g_temp.spaceBetweenCols;\n\t\t\n\t\tvar numPanes = Math.ceil(totalWidth / gridWidth);\n\t\t\t\t\n\t\treturn(numPanes);\n\t}\n\t\n\t\n\t/**\n\t * get height estimation by width, works only in tiles mode\n\t */\n\tthis.getHeightEstimationByWidth = function(width){\n\t\t\n\t\tif(g_temp.isTilesMode == false)\n\t\t\tthrow new Error(\"This function works only with tiles mode\");\n\t\t\n\t\tvar numThumbs = g_thumbs.getNumThumbs();\n\t\tvar numCols = g_functions.getNumItemsInSpace(width, g_options.tile_width, g_temp.spaceBetweenCols);\n\t\tvar numRows = Math.ceil(numThumbs / numCols);\n\t\t\n\t\tif(numRows > g_options.grid_num_rows)\n\t\t\tnumRows = g_options.grid_num_rows;\n\t\t\n\t\tvar gridHeight = g_functions.getSpaceByNumItems(numRows, g_options.tile_height, g_temp.spaceBetweenRows);\n\t\tgridHeight += g_options.grid_padding * 2;\n\t\t\n\t\treturn(gridHeight);\n\t}\n\t\n\t/**\n\t * get the grid element\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objGrid);\n\t}\n\t\n\t/**\n\t * get element size and position\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objGrid);\n\t\treturn(objSize);\n\t\t\n\t}\n\t\n\t/**\n\t * get number of panes\n\t */\n\tthis.getNumPanes = function(){\n\t\t\n\t\treturn(g_temp.numPanes);\n\t}\n\t\n\t/**\n\t * get if the current pane is first\n\t */\n\tthis.isFirstPane = function(){\n\t\t\n\t\tif(g_temp.currentPane == 0)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get if the current pane is last\n\t */\n\tthis.isLastPane = function(){\n\t\t\n\t\tif(g_temp.currentPane == (g_temp.numPanes -1) )\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get pane number, and num panes\n\t */\n\tthis.getPaneInfo = function(){\n\t\t\n\t\tvar obj = {\n\t\t\tpane: g_temp.currentPane,\n\t\t\ttotal: g_temp.numPanes\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get current pane\n\t */\n\tthis.getPane = function(){\n\t\t\n\t\treturn(g_temp.currentPane);\n\t}\n\t\n\t\n\t/**\n\t * set grid width (horizontal type)\n\t */\n\tthis.setWidth = function(gridWidth){\n\t\tg_temp.gridWidth = gridWidth;\n\t\tg_temp.isHorizontal = true;\n\t}\n\t\n\t/**\n\t * set max width, the width will be corrected by the number of items\n\t * set vertical type\n\t */\n\tthis.setMaxWidth = function(maxWidth){\n\t\tg_temp.gridWidth = maxWidth;\n\t\tg_temp.isMaxWidth = true;\n\t\tg_temp.isHorizontal = true;\n\t}\n\t\n\t\n\t/**\n\t * set grid height (vertical type)\n\t */\n\tthis.setHeight = function(gridHeight){\n\t\tg_temp.gridHeight = gridHeight;\n\t\tg_temp.isHorizontal = false;\n\t\t\n\t}\n\t\n\t/**\n\t * set max height, the height will be corrected by the number of items\n\t * set the vertical type\n\t */\n\tthis.setMaxHeight = function(maxHeight){\n\t\tg_temp.gridHeight = maxHeight;\n\t\tg_temp.isMaxHeight = true;\n\t\tg_temp.isHorizontal = false;\n\t}\n\t\n\t\n\t/**\n\t * goto some pane\n\t * force skip current pane checks\n\t */\n\tthis.gotoPane = function(index, fromWhere){\n\t\t\n\t\tif(validatePaneIndex(index) == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(index == g_temp.currentPane)\n\t\t\treturn(false);\n\t\t\n\t\tvar innerPos = -g_temp.arrPanes[index];\n\t\t\n\t\tg_temp.currentPane = index;\n\t\tanimateInnerTo(innerPos);\n\t\t\n\t\t//trigger pane change event\n\t\tg_objThis.trigger(t.events.PANE_CHANGE, index);\n\t}\n\t\n\t\n\t/**\n\t * foreward to the next pane\n\t */\n\tthis.nextPane = function(){\n\t\t\t\t\n\t\tvar nextPaneIndex = g_temp.currentPane+1;\n\t\t\n\t\tif(nextPaneIndex >= g_temp.numPanes){\n\t\t\t\n\t\t\tif(g_options.grid_carousel == false)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tnextPaneIndex = 0;\n\t\t}\n\t\t\n\t\tt.gotoPane(nextPaneIndex, \"next\");\n\t}\n\t\n\t\n\t/**\n\t * foreward to the next pane\n\t */\n\tthis.prevPane = function(){\n\t\t\n\t\tvar prevPaneIndex = g_temp.currentPane-1;\n\t\tif(prevPaneIndex < 0){\n\t\t\tprevPaneIndex = g_temp.numPanes-1;\n\t\t\t\n\t\t\tif(g_options.grid_carousel == false)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tt.gotoPane(prevPaneIndex, \"prev\");\n\t}\n\t\n\t\n\t/**\n\t * set next pane button\n\t */\n\tthis.attachNextPaneButton = function(objButton){\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.nextPane);\n\n\t\tif(g_options.grid_carousel == true)\t\t\n\t\t\treturn(true);\n\t\t\n\t\tif(t.isLastPane())\n\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\n\t\t//set disabled button class if first pane\n\t\tg_objThis.on(t.events.PANE_CHANGE, function(){\n\t\t\t\n\t\t\tif(t.isLastPane())\n\t\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\telse\n\t\t\t\tobjButton.removeClass(\"ug-button-disabled\");\n\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set prev pane button\n\t */\n\tthis.attachPrevPaneButton = function(objButton){\n\t\t\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.prevPane);\n\t\t\n\t\tif(g_options.grid_carousel == true)\t\t\n\t\t\treturn(true);\n\t\t\n\t\tif(t.isFirstPane())\n\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\n\t\t//set disabled button class if first pane\n\t\tg_objThis.on(t.events.PANE_CHANGE, function(){\n\t\t\t\n\t\t\tif(t.isFirstPane())\n\t\t\t\tobjButton.addClass(\"ug-button-disabled\");\n\t\t\telse\n\t\t\t\tobjButton.removeClass(\"ug-button-disabled\");\n\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * attach bullets object\n\t */\n\tthis.attachBullets = function(objBullets){\n\t\t\n\t\tobjBullets.setActive(g_temp.currentPane);\n\t\t\n\t\tjQuery(objBullets).on(objBullets.events.BULLET_CLICK, function(data, numBullet){\n\t\t\tt.gotoPane(numBullet, \"theme\");\n\t\t\tobjBullets.setActive(numBullet);\t\t\t\t\n\t\t});\n\t\t\n\t\tjQuery(t).on(t.events.PANE_CHANGE, function(data, numPane){\n\t\t\tobjBullets.setActive(numPane);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get tile design object\n\t */\n\tthis.getObjTileDesign = function(){\n\t\treturn g_tilesDesign;\n\t}\n\t\n\t\n\t/**\n\t * init function \n\t */\n\tthis.init = function(gallery, customOptions, isTilesMode){\n\t\t\n\t\tinit(gallery, customOptions, isTilesMode);\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trun();\n\t}\n\n\t\n\t/**\n\t * set html \n\t */\n\tthis.setHtml = function(parentContainer){\n\t\t\n\t\tsetHtml(parentContainer);\n\t}\n\t\n}\n\n\n\n/**\n * tiles class\n */\nfunction UGTiles(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objParent;\t\n\tvar g_functions = new UGFunctions(), g_arrItems, g_objTileDesign = new UGTileDesign();\n\tvar g_thumbs = new UGThumbsGeneral(), g_vars = {};\n    var g_arrNestedGridRow, g_arrNestedItems;\n\t\n\t\n\tvar g_options = {\n\t\t tiles_type: \"columns\",\t\t\t\t\t//columns / justified - tiles layout type\n\t\t tiles_col_width: 250,\t\t\t\t\t//column width - exact or base according the settings\n\t\t tiles_align:\"center\",\t\t\t\t\t//align of the tiles in the space\n\t\t tiles_exact_width: false,\t\t\t\t//exact width of column - disables the min and max columns\n\t\t tiles_space_between_cols: 3,\t\t\t//space between images\n\t\t tiles_space_between_cols_mobile: 3,    //space between cols for mobile type\n\t\t tiles_include_padding: true,\t\t\t//include padding at the sides of the columns, equal to current space between cols\n\t\t tiles_min_columns: 2,\t\t\t\t\t//min columns\n\t\t tiles_max_columns: 0,\t\t\t\t\t//max columns (0 for unlimited)\n\t\t tiles_keep_order: false,\t\t\t\t//keep order - slower algorytm\n\t\t tiles_set_initial_height: true,\t\t//set some estimated height before images show\n\t\t \n\t\t tiles_justified_row_height: 150,\t\t//base row height of the justified type\n\t\t tiles_justified_space_between: 3,\t\t//space between the tiles justified type\n\n\t\t tiles_nested_optimal_tile_width: 250,\t// tiles optimal width\n\t     tiles_nested_col_width: null,\t\t\t// nested tiles column width\n\t     tiles_nested_debug: false,\n\t     \n\t\t tiles_enable_transition: true\t\t\t//enable transition when screen width change\n\t};\n\t\n\tthis.events = {\n\t\t\tTHUMB_SIZE_CHANGE: \"thumb_size_change\",\n\t\t\tTILES_FIRST_PLACED: \"tiles_first_placed\",\t\t//only in case of justified\n\t\t\tALL_TILES_LOADED: \"all_tiles_loaded\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\tisFirstTimeRun:true,   //if run once\n\t\t\thandle:null,\t\t   //interval handle\n\t\t\tisTransActive: false,  //is transition active\n\t\t\tisTransInited: false,  //if the transition function is set\n\t\t\tisFirstPlaced: true,   //is first time placed\n\t\t\tisAllLoaded: false\n\t};\n\t\n    var g_nestedWork = {\n    \t\tcolWidth: null,\n            nestedOptimalCols: 5,\n            gridY: 0,\n            maxColumns: 0,\t\t\t\t\t\t //maxColumns\n            columnsValueToEnableHeightResize: 3, //columns Value To Enable Height Resize\n            resizeLeftRightToColumn: true,\n            currentItem: 0,\n\t        currentGap: null,\n\t        optimalTileWidth: null,\n\t        maxGridY:0\n    }\n\t\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction init(gallery, customOptions){\n\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\n\t\tmodifyOptions();\n\t\t\n\t\tg_objTileDesign.init(gallery, g_options);\n\t\t\n\t\tg_thumbs = g_objTileDesign.getObjThumbs();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * modify options\n\t */\n\tfunction modifyOptions(){\n\t\t\n\t\tif(g_options.tiles_min_columns < 1)\n\t\t\tg_options.tiles_min_columns = 1;\n\t\t\n\t\t//protection of max columns, can't be more then min columns\n\t\tif(g_options.tiles_max_columns != 0 && g_options.tiles_max_columns < g_options.tiles_min_columns){\n\t\t\tg_options.tiles_max_columns = g_options.tiles_min_columns;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the grid panel html\n\t */\n\tfunction setHtml(objParent){\n\t\t\n\t\tif(!objParent){\n\t\t\tif(g_objParent)\n\t\t\t\tobjParent = g_objParent;\n\t\t\telse\n\t\t\t\tvar objParent = g_objWrapper;\n\t\t}\n\t\t\n\t\tg_objParent = objParent;\n\t\t\n\t\tvar tilesType = g_options.tiles_type;\n\t\tobjParent.addClass(\"ug-tiletype-\"+tilesType);\n\t\t\n\t\tg_objTileDesign.setHtml(objParent);\n\t\t\n\t\tobjParent.children(\".ug-thumb-wrapper\").hide();\n\t}\n\t\n\t\n\t/**\n\t * set class that enables transition\n\t */\n\tfunction setTransition(){\n\t\t\n\t\t//set the tiles in resting mode, to activate their own transitions\n\t\tg_objParent.addClass(\"ug-tiles-rest-mode\");\n\t\t\n\t\tg_temp.isTransInited = true;\n\t\t\n\t\t//add css tansition\n\t\tif(g_options.tiles_enable_transition == true){\n\t\t\tg_objParent.addClass(\"ug-tiles-transit\");\n\t\t\t\n\t\t\t//add image overlay transition\n\t\t\tvar optionsTile = g_objTileDesign.getOptions();\n\t\t\t\n\t\t\tif(optionsTile.tile_enable_image_effect == true && optionsTile.tile_image_effect_reverse == false)\n\t\t\t\tg_objParent.addClass(\"ug-tiles-transit-overlays\");\n\t\t\t\n\t\t\tg_temp.isTransActive = true;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get parent width\n\t */\n\tfunction getParentWidth(){\n\t\treturn g_functions.getElementSize(g_objParent).width;\n\t}\n\t\n\t\n\t/**\n\t * do some actions before transition\n\t */\n\tfunction doBeforeTransition(){\n\t\t\n\t\tif(g_temp.isTransInited == false)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_objParent.addClass(\"ug-tiles-transition-active\");\n\t\tg_objParent.removeClass(\"ug-tiles-rest-mode\");\n\t\t\n\t\t//prepare for transition\n\t\tif(g_temp.isTransActive == false)\n\t\t\treturn(false);\n\t\t\t\t\n\t\tg_objTileDesign.disableEvents();\n\t}\n\t\n\t\n\t/**\n\t * set after transition classes\n\t */\n\tfunction doAfterTransition_setClasses(){\n\t\t\n\t\tif(g_temp.isTransInited == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_objParent.removeClass(\"ug-tiles-transition-active\");\n\t\tg_objParent.addClass(\"ug-tiles-rest-mode\");\n\t}\n\t\n\t\n\t/**\n\t * do some actions after transition\n\t */\n\tfunction doAfterTransition(){\n\n\t\t\n\t\tif(g_temp.isTransActive == true){\n\t\t\t\t\t\t\n\t\t\t//trigger size change after transition\n\t\t\tsetTimeout(function(){\n\t\t\t\t\n\t\t\t\tg_objTileDesign.enableEvents();\n\t\t\t\tg_objTileDesign.triggerSizeChangeEventAllTiles();\n\t\t\t\t\n\t\t\t\tdoAfterTransition_setClasses();\n\t\t\t\t\n\n\t\t\t}, 800);\n\t\t\t\n\t\t\t//control size change \n\t\t\tif(g_temp.handle)\n\t\t\t\tclearTimeout(g_temp.handle);\n\t\t\t\t\n\t\t\tg_temp.handle = setTimeout(function(){\n\t\t\t\t\n\t\t\t\tdoAfterTransition_setClasses();\n\t\t\t\t\n\t\t\t\tg_objTileDesign.triggerSizeChangeEventAllTiles();\n\t\t\t\tg_temp.handle = null;\n\t\t\t\t\t\t\t\t\n\t\t\t}, 2000);\n\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\t\t\t\t\n\t\t\tg_objTileDesign.triggerSizeChangeEventAllTiles();\n\n\t\t\tdoAfterTransition_setClasses();\n\n\t\t}\n\n\t}\n\n\t\n\tfunction __________COLUMN_TYPE_RELATED_________(){};\n\t\n\t/**\n\t * count width by number of columns\n\t */\n\tfunction fillTilesVars_countWidthByCols(){\n\n\t\tg_vars.colWidth = (g_vars.availWidth - g_vars.colGap * (g_vars.numCols-1)) / g_vars.numCols;\n\t\tg_vars.colWidth = Math.floor(g_vars.colWidth);\n\n\t\tg_vars.totalWidth = g_functions.getSpaceByNumItems(g_vars.numCols, g_vars.colWidth, g_vars.colGap);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * fill common tiles vars\n\t */\n\tfunction fillTilesVars(){\n\t\t\n\t\tg_vars.colWidth = g_options.tiles_col_width;\n\t\tg_vars.minCols = g_options.tiles_min_columns;\n\t\tg_vars.maxCols = g_options.tiles_max_columns;\n\t\t\n\t\tif(g_gallery.isMobileMode() == false){\n\t\t\tg_vars.colGap = g_options.tiles_space_between_cols;\n\t\t} else {\n\t\t\tg_vars.colGap = g_options.tiles_space_between_cols_mobile;\n\t\t}\n\t\t\n\t\t//set gallery width\n\t\tg_vars.galleryWidth = getParentWidth();\n\t\t\n\t\tg_vars.availWidth = g_vars.galleryWidth;\n\t\t\n\t\tif(g_options.tiles_include_padding == true)\n\t\t\tg_vars.availWidth = g_vars.galleryWidth - g_vars.colGap*2;\n\t\t\n\t\t//set the column number by exact width\n\t\tif(g_options.tiles_exact_width == true){\n\t\t\t\n\t\t\tg_vars.numCols = g_functions.getNumItemsInSpace(g_vars.availWidth, g_vars.colWidth, g_vars.colGap);\n\n\t\t\tif(g_vars.maxCols > 0 && g_vars.numCols > g_vars.maxCols)\n\t\t\t\tg_vars.numCols = g_vars.maxCols;\n\n\t\t\t//if less then min cols count width by cols\n\t\t\tif(g_vars.numCols < g_vars.minCols){\n\t\t\t\tg_vars.numCols = g_vars.minCols;\n\n\t\t\t\tfillTilesVars_countWidthByCols();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tg_vars.totalWidth = g_vars.numCols * (g_vars.colWidth + g_vars.colGap) - g_vars.colGap;\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\t//set dynamic column number\n\t\t\t\n\t\t\tvar numCols = g_functions.getNumItemsInSpaceRound(g_vars.availWidth, g_vars.colWidth, g_vars.colGap);\n\t\t\t\t\t\t\n\t\t\tif(numCols < g_vars.minCols)\n\t\t\t\tnumCols = g_vars.minCols;\n\t\t\telse\n\t\t\t\tif(g_vars.maxCols != 0 && numCols > g_vars.maxCols)\n\t\t\t\t\tnumCols = g_vars.maxCols;\n\n\t\t\tg_vars.numCols = numCols;\n\t\t\t\n\t\t\tfillTilesVars_countWidthByCols();\n\t\t\t\n\t\t}\n\n\t\tswitch(g_options.tiles_align){\n\t\t\tcase \"center\":\n\t\t\tdefault:\n\t\t\t\t//add x to center point\n\t\t\t\tg_vars.addX = Math.round( (g_vars.galleryWidth - g_vars.totalWidth) / 2 );\n\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tg_vars.addX = 0;\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tg_vars.addX = g_vars.galleryWidth - g_vars.totalWidth;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\t//get posx array (constact to all columns)\n\t\tg_vars.arrPosx = [];\t\t\n\t\tfor(col = 0; col < g_vars.numCols; col++){\n\t\t\tvar colX = g_functions.getColX(col, g_vars.colWidth, g_vars.colGap);\n\t\t\tg_vars.arrPosx[col] = colX + g_vars.addX;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init col heights\n\t */\n\tfunction initColHeights(){\n\t\t\n\t\tg_vars.maxColHeight = 0;\n\t\t\n\t\t//empty heights array\n\t\tg_vars.colHeights = [0];\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * get column with minimal height\n\t */\n\tfunction getTilesMinCol(){\n\t\tvar numCol = 0;\n\t\t\n\t\tvar minHeight = 999999999;\n\t\t\n\t\tfor(col = 0; col < g_vars.numCols; col++){\n\t\t\t\n\t\t\tif(g_vars.colHeights[col] == undefined || g_vars.colHeights[col] == 0)\n\t\t\t\treturn col;\n\t\t\t\n\t\t\tif(g_vars.colHeights[col] < minHeight){\n\t\t\t\tnumCol = col;\n\t\t\t\tminHeight = g_vars.colHeights[col];\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\treturn(numCol);\n\t}\n\t\n\t\n\t/**\n\t * place tile as it loads\n\t */\n\tfunction placeTile(objTile, toShow, setGalleryHeight, numCol){\n\t\t\n\t\tif(numCol === null || typeof numCol == \"undefined\")\n\t\t\tvar numCol = getTilesMinCol();\n\t\t\n\t\t//set posy\n\t\tvar posy = 0;\n\t\tif(g_vars.colHeights[numCol] !== undefined)\n\t\t\tposy = g_vars.colHeights[numCol];\n\t\t\n\t\tvar itemHeight = g_objTileDesign.getTileHeightByWidth(g_vars.colWidth, objTile);\n\t\t\n\t\tif(itemHeight === null){\t//for custom html tile\n\t\t\tif(g_options.tiles_enable_transition == true)\n\t\t\t\tthrow new Error(\"Can't know tile height, please turn off transition\");\n\t\t\t\n\t\t\tvar itemSize = g_functions.getElementSize(objTile);\n\t\t\titemHeight = itemSize.height;\n\t\t}\n\t\t\n\t\tvar posx = g_vars.arrPosx[numCol];\n\t\t\n\t\tg_functions.placeElement(objTile, posx, posy);\n\t\t\n\t\tvar realHeight = posy + itemHeight;\n\t\t\t\t\n\t\tg_vars.colHeights[numCol] = realHeight + g_vars.colGap;\n\t\t\n\t\t//set max height\n\t\tif(g_vars.maxColHeight < realHeight)\n\t\t\tg_vars.maxColHeight = realHeight;\n\n\t\tif(toShow == true)\n\t\t\tobjTile.show().fadeTo(0,1);\n\t\t\n\t\tif(setGalleryHeight == true){\n\t\t\tg_objParent.height(g_vars.maxColHeight);\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place the tiles\n\t */\n\tfunction placeTiles(toShow){\n\t\t\n\t\tif(!toShow)\n\t\t\ttoShow = false;\n\t\t\n\t\tfillTilesVars();\n\t\tinitColHeights();\n\t\t\n\t\tvar objThumbs = g_thumbs.getThumbs(g_thumbs.type.GET_THUMBS_RATIO);\n\t\t\t\t\n\t\t//do some operation before the transition\n\t\tdoBeforeTransition();\n\t\t\n\t\t//resize all thumbs\n\t\tg_objTileDesign.resizeAllTiles(g_vars.colWidth, g_objTileDesign.resizemode.VISIBLE_ELEMENTS, objThumbs);\n\t\t\n\t\t//place elements\n\t\tfor(var index = 0; index < objThumbs.length; index++){\n\t\t\tvar objTile = jQuery(objThumbs[index]);\n\t\t\tvar col = undefined;\n\t\t\tif(g_options.tiles_keep_order == true)\n\t\t\t\tcol = g_functions.getColByIndex(g_vars.numCols, index);\n\t\t\t\n\t\t\tplaceTile(objTile, toShow, false, col);\n\t\t}\n\t\t\n\t\t//bring back the state after transition\n\t\tdoAfterTransition();\n\t\t\n\t\t//set gallery height, according the transition\n\t\tvar galleryHeight = g_objParent.height();\n\t\t\n\t\tif(g_temp.isTransActive == true && galleryHeight > g_vars.maxColHeight)\n\t\t\tsetTimeout(function(){\n\t\t\t\tg_objParent.height(g_vars.maxColHeight);\n\t\t\t},700);\n\t\telse\n\t\t\tg_objParent.height(g_vars.maxColHeight);\n\t}\n\t\n\t\n\t/**\n\t * check if alowed to place ordered tile\n\t */\n\tfunction isOrderedTilePlaceAlowed(objTile){\n\t\t\n\t\tvar index = objTile.index();\n\n\t\t//don't allow double put items\n\t\tvar currentItem = g_gallery.getItem(index);\n\t\tif(currentItem.ordered_placed === true)\n\t\t\treturn(false);\n\n\t\t\n\t\tvar prevIndex = g_functions.getPrevRowSameColIndex(index, g_vars.numCols);\n\n\t\t//put first item in the column\n\t\tif(prevIndex < 0)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//check if previous tile in column is placed\n\t\tvar objPrevItem = g_gallery.getItem(prevIndex);\n\t\tif(objPrevItem.ordered_placed === true)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * place ordered tile\n\t */\n\tfunction placeOrderedTile(objTile, isForce){\n\t\t\n\t\tif(isForce !== true){\n\n\t\t\tvar isAlowed = isOrderedTilePlaceAlowed(objTile);\n\t\t\t\n\t\t\tif(isAlowed == false)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\t\n\t\tvar index = objTile.index();\n\t\t\t\t\n\t\tvar col = g_functions.getColByIndex(g_vars.numCols, index);\n\n\t\tvar objItem = g_gallery.getItem(index);\n\t\t\n\t\tg_objTileDesign.resizeTile(objTile, g_vars.colWidth);\n\t\t\n\t\tplaceTile(objTile, true, true, col);\n\t\t\n\t\tobjItem.ordered_placed = true;\n\t\t\n\t\t//check by recursion and place next items in column\n\t\tvar numItems = g_gallery.getNumItems();\n\t\tvar nextIndex = g_functions.getNextRowSameColIndex(index, g_vars.numCols);\n\t\tif(nextIndex >= numItems)\n\t\t\treturn(false);\n\t\t\n\t\tvar nextTile = g_thumbs.getThumbByIndex(nextIndex);\n\t\tvar nextItem = g_gallery.getItem(nextIndex);\n\t\t\n\t\tvar isLoaded = g_thumbs.isThumbLoaded(nextTile);\n\t\t\n\t\tif(g_thumbs.isThumbLoaded(nextTile) && !nextItem.ordered_placed)\n\t\t\tplaceOrderedTile(nextTile, true);\n\t}\n\t\n\t\n\t/**\n\t * on single image load\n\t */\n\tfunction onSingleImageLoad(objImage, isError){\n\t\t\n\t\tif(isError == true)\n\t\t\treturn(false);\n\t\t\n\t\tobjImage = jQuery(objImage);\n\t\tvar objTile = jQuery(objImage).parent();\n\t\t\n\t\tg_thumbs.triggerImageLoadedEvent(objTile, objImage);\n\t\t\n\t\tif(g_options.tiles_keep_order == true){\n\n\t\t\tplaceOrderedTile(objTile);\n\t\t\n\t\t}else{\n\t\t\t\t\t\t\n\t\t\tg_objTileDesign.resizeTile(objTile, g_vars.colWidth);\n\t\t\tplaceTile(objTile, true, true);\n\t\t}\n\t\n\t}\n\t\n\t\n\t/**\n\t * run columns type - place tiles that are not loaded yet\n\t */\n\tfunction runColumnsType(){\n\t\t\n\t\t//get thumbs only when the ratio not set\n\t\tvar objThumbs = g_thumbs.getThumbs(g_thumbs.type.GET_THUMBS_NO_RATIO);\n\t\t\n\t\tif(!objThumbs || objThumbs.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.isAllLoaded = false;\n\t\t\t\t\n\t\tif(g_temp.isFirstPlaced == true){\n\t\t\t\n\t\t\tfillTilesVars();\n\t\t\tinitColHeights();\n\t\t\t\n\t\t\tvar diffWidth = Math.abs(g_vars.galleryWidth - g_vars.totalWidth);\n\t\t\t\n\t\t\t//set initial height of the parent by estimation\n\t\t\tif(g_options.tiles_set_initial_height == true && g_functions.isScrollbarExists() == false && diffWidth < 25){\n\t\t\t\t\n\t\t\t\tvar numThumbs = objThumbs.length;\n\t\t\t\tvar numRows = Math.ceil(objThumbs.length / g_vars.numCols);\n\t\t\t\tvar estimateHeight = numRows * g_options.tiles_col_width * 0.75;\n\t\t\t\t\n\t\t\t\tg_objParent.height(estimateHeight);\n\t\t\t\tfillTilesVars();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\tobjThumbs.fadeTo(0,0);\n\t\tvar objImages = objThumbs.find(\"img.ug-thumb-image\");\n\t\t\n\t\tvar initNumCols = g_vars.numCols;\n\t\tvar initWidth = g_vars.galleryWidth;\n\t\t\n\t\t//on place the tile as it loads. After all tiles loaded,check position again.\n\t\tg_functions.checkImagesLoaded(objImages, function(){\n\t\t\t\t\t\t\n\t\t\tfillTilesVars();\n\t\t\t\n\t\t\tif(initNumCols != g_vars.numCols || initWidth != g_vars.galleryWidth){\n\t\t\t\tplaceTiles(false);\n\t\t\t}\n\t\t\t\n\t\t\tsetTransition();\n\t\t\tg_objThis.trigger(t.events.ALL_TILES_LOADED);\n\t\t\t\n\t\t} ,function(objImage, isError){\n\t\t\t\n\t\t\tif(g_temp.isFirstPlaced == true)\n\t\t\t\tg_gallery.triggerEvent(t.events.TILES_FIRST_PLACED);\t//set to false\n\t\t\t\n\t\t\tonSingleImageLoad(objImage, isError);\n\t\t\n\t\t});\n\t\t\t\t\t\n\t\t\n\t}\n\t\n\t\n\tfunction __________JUSTIFIED_TYPE_RELATED_________(){};\n\n\t/**\n\t * ------------ JUSTIFIED TYPE RELATED FUNCTIONS ----------------\n\t */\n\t\n\tfunction getJustifiedData(){\n\t\t\n\t\tvar galleryWidth = getParentWidth();\n\t\t\n\t\tvar objTiles = g_thumbs.getThumbs(true);\n\t\tvar rowHeightOpt = g_options.tiles_justified_row_height;\n\t\tvar arrWidths = [];\n\t\tvar totalWidth = 0;\n\t\tvar gap = g_options.tiles_justified_space_between;\n\t\tvar numTiles = objTiles.length;\n\t\t\n\t\t//get arr widths and total width\n\t\tjQuery.each(objTiles, function(index, objTile){\n\t\t\tobjTile = jQuery(objTile);\n\t\t\t\n\t\t\tvar objItem = g_thumbs.getItemByThumb(objTile);\n\t\t\t\n\t\t\tvar tileWidth = objItem.thumbWidth;\n\t\t\tvar tileHeight = objItem.thumbHeight;\n\t\t\t\n\t\t\tif (tileHeight !== rowHeightOpt) \n\t\t\t\ttileWidth = Math.floor(objItem.thumbRatioByWidth * rowHeightOpt);\n\t\t\t\n\t\t\tarrWidths[index] = tileWidth;\n\t\t\t\n\t\t\ttotalWidth += tileWidth;\n\t\t});\n\n\t\t\n\t\tvar numRows = Math.ceil(totalWidth / galleryWidth);\n\t\t\n\t\tif(numRows > numTiles)\n\t\t\tnumRows = numTiles;\n\t\t\n\t\tvar finalRowWidth = totalWidth / numRows;\n\t\t\n\t\t//fill rows array, break tiles to rows\n\t\tvar arrRows = [], eachRowWidth = 0;\n\t\tvar rowsWidths = [], rowsTiles = [], row = [];\n\t\tvar progressWidth = 0, numRow = 0;\n\t\t\n\t\tjQuery.each(objTiles, function(index, objTile){\n\t\t\tvar tileWidth = arrWidths[index];\n\t\t\t\t\t\t\n\t\t\tif( (progressWidth + tileWidth / 2) > (numRow+1) * finalRowWidth){\n\t\t\t\t\n\t\t\t\trowsWidths[arrRows.length] = eachRowWidth;\t\t\t\t\n\t\t\t\tarrRows.push(row);\n\t\t\t\trow = [];\n\t\t\t\teachRowWidth = 0;\n\t\t\t\tnumRow++;\n\t\t\t}\n\t\t\t\n\t\t\tprogressWidth += tileWidth;\n\t\t\teachRowWidth += tileWidth;\n\t\t\t\n\t\t\trow.push(objTile);\n\t\t});\n\t\t\n\t\trowsWidths[arrRows.length] = eachRowWidth;\n\t\tarrRows.push(row);\n\t\t\t\t\n\t\t\n\t\t//set heights and position images:\t\n\t\tvar arrRowWidths = [];\n\t\tvar arrRowHeights = [];\n\t\tvar totalHeight = 0;\n\t\t\n\t\tjQuery.each(arrRows, function(index, row){\n\t\t\t\n\t\t\tvar numTiles = row.length;\n\t\t\tvar rowWidth = rowsWidths[index];\n\t\t\t\n\t\t\tvar gapWidth = (row.length-1) * gap;\n\n\t\t\tvar ratio = (galleryWidth - gapWidth) / rowWidth;\n\t\t\tvar rowHeight = Math.round(rowHeightOpt * ratio);\n\t\t\t\n\t\t\t//count total height\n\t\t\ttotalHeight += rowHeight;\n\t\t\tif(index > 0)\n\t\t\t\ttotalHeight += gap;\n\t\t\t\n\t\t\tarrRowHeights.push(rowHeight);\n\t\t\t\n\t\t\t//ratio between 2 heights for fixing image width:\n            var ratioHeights = rowHeight / rowHeightOpt;\n\t\t\t\n            //set tiles sizes:\n            var arrRowTileWidths = [];\n            var actualRowWidth = gapWidth;\n            \n            jQuery.each(row, function(indexInRow, tile){\n            \tvar objTile = jQuery(tile);\n            \tvar tileIndex = objTile.index();\n            \tvar tileWidth = arrWidths[tileIndex];\n            \tvar newWidth = Math.round(tileWidth * ratioHeights);\n            \t\n            \tarrRowTileWidths[indexInRow] = newWidth;\n            \tactualRowWidth += newWidth;            \t\n            });\n        \t\n            //fix images widths by adding or reducing 1 pixel\n            var diff = actualRowWidth - galleryWidth;\n            \n            var newTotal = 0;\n            jQuery.each(arrRowTileWidths, function(indexInRow, width){\n            \t\n            \tif(diff == 0)            \t\t\n            \t\treturn(false);\n            \t\n            \tif(diff < 0){\n            \t\tarrRowTileWidths[indexInRow] = width + 1;\n            \t\tdiff++;\n            \t}else{\n            \t\tarrRowTileWidths[indexInRow] = width - 1;\n            \t\tdiff--;\n            \t}\n            \t\n            \t//if at last item diff stays, add all diff\n            \tif(indexInRow == (arrRowTileWidths.length-1) && diff != 0)\n            \t\tarrRowTileWidths[indexInRow] -= diff;\n            });\n            \n            arrRowWidths[index] = arrRowTileWidths;\n\t\t});\n\t\t\n\t\t\n\t\tvar objData = {\n\t\t\t\tarrRows: arrRows,\n\t\t\t\tarrRowWidths: arrRowWidths,\n\t\t\t\tarrRowHeights: arrRowHeights,\n\t\t\t\tgap: gap,\n\t\t\t\ttotalHeight: totalHeight\n\t\t};\n\t\t\n\t\treturn(objData);\n\t}\n\n\t\n\t/**\n\t * put justified images\n\t */\n\tfunction placeJustified(toShow){\n\t\t\n\t\tif(!toShow)\n\t\t\tvar toShow = false;\n\t\t\n\t\tvar parentWidth = getParentWidth();\n\n\t\tvar objData = getJustifiedData();\n\t\t\n\t\t//if the width changed after height change (because of scrollbar), recalculate\n\t\tg_objParent.height(objData.totalHeight);\n\t\n\t\tvar parentWidthAfter = getParentWidth();\n\t\tif(parentWidthAfter != parentWidth)\n\t\t\tobjData = getJustifiedData();\n\t\t\n\t\tdoBeforeTransition();\n\t\t\n\t\tvar posy = 0;\n\t\tvar totalWidth = 0;\t\t//just count total widht for check / print\n\t\tjQuery.each(objData.arrRows, function(index, row){\n        \t\n\t\t\tvar arrRowTileWidths = objData.arrRowWidths[index];\n\t\t\tvar rowHeight = objData.arrRowHeights[index];\n\t\t\t\n\t\t\t//resize and place tiles\n            var posx = 0;\n            jQuery.each(row, function(indexInRow, tile){\n            \t            \t            \t\n            \tvar objTile = jQuery(tile);\n            \tvar tileHeight = rowHeight;\n            \tvar tileWidth = arrRowTileWidths[indexInRow];\n            \t\n            \tg_objTileDesign.resizeTile(objTile, tileWidth, tileHeight, g_objTileDesign.resizemode.VISIBLE_ELEMENTS);\n            \tg_functions.placeElement(objTile, posx, posy);\n            \t\n            \tposx += tileWidth;\n            \t\n            \tif(posx > totalWidth)\n            \t\ttotalWidth = posx;\n            \t\n            \tposx += objData.gap;\n            \t\n            \tif(toShow == true)\n            \t\tjQuery(tile).show();\n            \n            });\n            \n            posy += (rowHeight + objData.gap);\n            \n\t\t});\n\t\t\n\t\tdoAfterTransition();\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * run justified type gallery\n\t */\n\tfunction runJustifiedType(){\n\t\t\n\t\tvar objImages = jQuery(g_objWrapper).find(\"img.ug-thumb-image\");\n\t\tvar objTiles = g_thumbs.getThumbs();\n\t\t\n\t\tg_temp.isAllLoaded = false;\n\t\t\n\t\tobjTiles.fadeTo(0,0);\t\t\t\t\n\t\t\n\t\tg_functions.checkImagesLoaded(objImages, function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tplaceJustified(true);\n\t\t\t\tobjTiles.fadeTo(0,1);\n\t\t\t\tg_gallery.triggerEvent(t.events.TILES_FIRST_PLACED);\n\t\t\t\tsetTransition();\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.ALL_TILES_LOADED);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}, function(objImage, isError){\n\n\t\t\tobjImage = jQuery(objImage);\n\t\t\tvar objTile = jQuery(objImage).parent();\n\t\t\tg_thumbs.triggerImageLoadedEvent(objTile, objImage);\n\t\t\n\t\t});\n\t\t\t\t\n\t}\n\t\n\n\t\n\t\t\n    function __________NESTED_TYPE_RELATED_________() {    };\n    \n    \n    /**\n     * ------------ NESTED TYPE RELATED FUNCTIONS ----------------\n     */\n    function runNestedType() {\n\n        var objImages = jQuery(g_objWrapper).find(\"img.ug-thumb-image\");\n        var objTiles = g_thumbs.getThumbs();\n        \n        g_temp.isAllLoaded = false;\n        \n        objTiles.fadeTo(0, 0);\n        \n        g_functions.checkImagesLoaded(objImages, function () {\n        \t\n        \tif(g_gallery.isMobileMode() == true){\n        \t\tplaceTiles(true);\n        \t}\n        \telse\n        \t\tplaceNestedImages(true);\n            \n        \tg_gallery.triggerEvent(t.events.TILES_FIRST_PLACED);\n            setTransition();\n            g_objThis.trigger(t.events.ALL_TILES_LOADED);\n\n        }, function (objImage, isError) {\n\n            objImage = jQuery(objImage);\n            var objTile = jQuery(objImage).parent();\n            g_thumbs.triggerImageLoadedEvent(objTile, objImage);\n\n        });\n\n    }\n\n    \n    /**\n     * fill nested vars\n     */\n    function fillNestedVars(){\n\n    \tvar galleryWidth = getParentWidth();\n    \tg_nestedWork.galleryWidth = galleryWidth;\n        \n        g_arrNestedGridRow = {};\n    \tg_nestedWork.colWidth = g_options.tiles_nested_col_width;\n    \tg_nestedWork.optimalTileWidth = g_options.tiles_nested_optimal_tile_width;\n    \t\n    \tg_nestedWork.currentGap = g_options.tiles_space_between_cols;\n\n    \tif(g_gallery.isMobileMode() == true)\n            g_nestedWork.currentGap = g_options.tiles_space_between_cols_mobile;\n    \t\n        if(g_nestedWork.colWidth == null){\n\t\t\tg_nestedWork.colWidth = Math.floor(g_nestedWork.optimalTileWidth/g_nestedWork.nestedOptimalCols);\n\t\t} else if (g_nestedWork.optimalTileWidth > g_nestedWork.colWidth) {\n            g_nestedWork.nestedOptimalCols = Math.ceil(g_nestedWork.optimalTileWidth / g_nestedWork.colWidth);\n        } else {\n            g_nestedWork.nestedOptimalCols = 1;\n        }\n    \t\n    \tg_nestedWork.maxColumns = g_functions.getNumItemsInSpace(galleryWidth, g_nestedWork.colWidth, g_nestedWork.currentGap);\n    \t\n        //fix col width - justify tiles\n        g_nestedWork.colWidth = g_functions.getItemSizeInSpace(galleryWidth, g_nestedWork.maxColumns, g_nestedWork.currentGap);\n        \n        g_nestedWork.gridY = 0;\n        g_arrNestedItems = []\n        \n    \tvar objTiles = g_thumbs.getThumbs(true);\n\t\tobjTiles.each(function(){\n\t\t\tvar objTile = jQuery(this);\n\t\t    var sizes = setNestedSize(objTile);\n\t\t    g_arrNestedItems.push(sizes);\n\t\t });\n        \n        if (g_nestedWork.optimalTileWidth > g_nestedWork.colWidth) {\n            g_nestedWork.nestedOptimalCols = Math.ceil(g_nestedWork.optimalTileWidth / g_nestedWork.colWidth);\n        } else {\n            g_nestedWork.nestedOptimalCols = 1;\n        }\n        \n        g_nestedWork.totalWidth = g_nestedWork.maxColumns*(g_nestedWork.colWidth+g_nestedWork.currentGap)-g_nestedWork.currentGap;\n\n        switch(g_options.tiles_align){\n\t\t\tcase \"center\":\n\t\t\tdefault:\n\t\t\t\t//add x to center point\n\t\t\t\tg_nestedWork.addX = Math.round( (g_nestedWork.galleryWidth - g_nestedWork.totalWidth) / 2 );\n\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\tg_nestedWork.addX = 0;\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tg_nestedWork.addX = g_nestedWork.galleryWidth - g_nestedWork.totalWidth;\n\t\t\tbreak;\n\t\t}\n        \n        \n        g_nestedWork.maxGridY = 0;\n    }\n    \n    \n    /**\n     * place Nested type images\n     */\n    function placeNestedImages(toShow){\n    \t\n    \tvar parentWidth = getParentWidth();\n    \t\n    \tfillNestedVars();\n        placeNestedImagesCycle();\n    \t\n        var totalHeight = g_nestedWork.maxGridY * (g_nestedWork.colWidth + g_nestedWork.currentGap) - g_nestedWork.currentGap;\n\n    \t//if the width changed after height change (because of scrollbar), recalculate\n\t\tg_objParent.height(totalHeight);\n\t\t\n\t\tvar parentWidthAfter = getParentWidth();\n\t\t\n\t\tif(parentWidthAfter != parentWidth){\n    \t\tfillNestedVars();\n        \tplaceNestedImagesCycle();\n        }\n        \n        if(g_options.tiles_nested_debug == false)\n        \tdrawNestedImages(toShow);\n\n    }\n\n    \n    /**\n     * set Nested size\n     */\n    function setNestedSize(objTile){\n\n        var dimWidth, dimHeight;\n        var output = {};\n        \n        var colWidth = g_nestedWork.colWidth;\n        var gapWidth = g_nestedWork.currentGap;\n        \n        var objImageSize = g_objTileDesign.getTileImageSize(objTile);\n        var index = objTile.index();\n        \n        var maxDim = Math.ceil(getPresettedRandomByWidth(index)*(g_nestedWork.nestedOptimalCols*1/3) + g_nestedWork.nestedOptimalCols * 2/3);\n        \n        var imgWidth = objImageSize.width;\n        var imgHeight = objImageSize.height;\n        \n        var ratio = imgWidth/imgHeight;\n        \n        if(imgWidth>imgHeight){\n            dimWidth = maxDim;\n            dimHeight = Math.round(dimWidth/ratio);\n            if(dimHeight == 0){\n                dimHeight = 1;\n            }\n        } else {\n            dimHeight = maxDim;\n            dimWidth = Math.round(dimHeight*ratio);\n            if(dimWidth == 0){\n                dimWidth = 1;\n            }\n        }\n\n        output.dimWidth = dimWidth;\n        output.dimHeight = dimHeight;\n        output.width = dimWidth * colWidth + gapWidth*(dimWidth-1);\n        output.height = dimHeight * colWidth + gapWidth*(dimHeight-1);\n        output.imgWidth =  imgWidth;\n        output.imgHeight = imgHeight;\n        output.left = 0;\n        output.top = 0;\n        return output;\n    }\n\n    \n    /**\n     *  get presetted random [0,1] from int\n     */\n    function getPresettedRandomByWidth(index){\n        return Math.abs(Math.sin(Math.abs(Math.sin(index)*1000)));\n    }\n\n    \n    /**\n     * place nested images debug\n     */\n    function placeNestedImagesDebug(toShow, placeOne){\n        \n    \tif(placeOne == false){\n            for(var i = g_nestedWork.currentItem; i<g_arrNestedItems.length; i++){\n                placeNestedImage(i, true);\n            }\n            g_nestedWork.currentItem = g_arrNestedItems.length-1;\n        } else {\n            placeNestedImage(g_nestedWork.currentItem, true);\n        }\n        \n    \tfor(var i = 0; i<=g_nestedWork.currentItem; i++){\n            drawNestedImage(i, true);\n        }\n\n        g_nestedWork.currentItem++;\n    \t\n    }\n    \n    \n    /**\n     * start cycle of placing imgaes\n     */\n    function placeNestedImagesCycle(placeOne){\n                \n        if(g_options.tiles_nested_debug == true){\n\n        \tif(typeof placeOne === 'undefined')\n                placeOne = true;\n        \t\n        \tplaceNestedImagesDebug(true, placeOne);\n        \t\n        \treturn(false);\n        } \n                \n        for(var i = 0; i < g_arrNestedItems.length; i++)\n                placeNestedImage(i, true);\n    \n    }\n\n\n    /**\n     * place Nested Image\n     */\n    function placeNestedImage(tileID, toShow){\n\n        if(!toShow)\n            var toShow = false;\n                \n        g_nestedWork.maxColHeight = 0;\n\n        var rowsValue = g_functions.getObjectLength(g_arrNestedGridRow);\n\n        for(var row = g_nestedWork.gridY; row<=rowsValue+1; row++){\n            for (var column = 0; column < g_nestedWork.maxColumns; column++) {\n                if (isGridRowExists(g_nestedWork.gridY) == false || isGridCellTaken(g_nestedWork.gridY, column) == false) {\n                    var totalFree = getTotalFreeFromPosition(column);\n                    calculateOptimalStretchAndPosition(tileID, totalFree, column);\n                                        \n                    return;\n                }\n            }\n            g_nestedWork.gridY++;\n        }\n        \n    }\n\n    \n    /**\n     * calculate optimal stretch of tile\n     */\n    function calculateOptimalStretchAndPosition(tileID, totalFree, column){\n\n        var sizes = jQuery.extend(true, {}, g_arrNestedItems[tileID]);\n        var currentWidth = sizes.dimWidth;\n        var placeForNextImage = totalFree - sizes.dimWidth;\n        var optimalWidth = g_nestedWork.nestedOptimalCols;\n        var onlyCurrentImage = (totalFree<=sizes.dimWidth || placeForNextImage<=0.33*optimalWidth || totalFree<=optimalWidth);\n\n        //Width stretching if needed\n        if(onlyCurrentImage){\t// if free space is smaller than image width - place to this space anyway\n            resizeToNewWidth(tileID, totalFree);\n        } else if (placeForNextImage<=optimalWidth){ // if there are place for 2 images\n            if(optimalWidth>=4){\n                if(isGridImageAligned(Math.floor(totalFree/2), column) == true){\n                    resizeToNewWidth(tileID, Math.floor(totalFree/2)+1);\n                } else {\n                    resizeToNewWidth(tileID, Math.floor(totalFree/2));\n                }\n            } else {\n                resizeToNewWidth(objImage, totalFree);\n            }\n        } else {\n            if(isGridImageAligned(currentWidth, column) == true){\n                switch(currentWidth>=optimalWidth){\n                    case true:\n                        resizeToNewWidth(tileID, currentWidth-1);\n                        break\n                    case false:\n                        resizeToNewWidth(tileID, currentWidth+1);\n                        break\n\n                }\n            }\n        }\n\n        //Height stretching if needed\n        sizes = jQuery.extend(true, {}, g_arrNestedItems[tileID]);\n        var columnInfo = getGridColumnHeight(tileID, sizes.dimWidth, column); \t// [columnHeight, imagesIDs]\n\n        if(g_nestedWork.columnsValueToEnableHeightResize <= columnInfo[0] && g_nestedWork.maxColumns>=2*g_nestedWork.nestedOptimalCols){\n\n            var sideHelper = getGridImageVerticalDifference(column, sizes);\n            var columnSizes = resizeToNewHeight(tileID, sideHelper.newHeight, true);\n            g_arrNestedItems[tileID].dimHeight = columnSizes.dimHeight;\n            var columnResizes = redistributeColumnItems(columnInfo, columnSizes.dimWidth, column);\n            var columnCrosshairs = getColumnCrosshairsCount(columnResizes);\n            var disableColumnResizes = false;\n\n            if(columnCrosshairs >= 2){\n                disableColumnResizes = true;\n            }\n\n            if(sideHelper.newHeight>=sizes.dimHeight){\n                sizes = resizeToNewHeight(tileID, sideHelper.newHeight, true);\n            }\n            var sideResizes = getSideResizeInfo(sideHelper.idToResize, sideHelper.newHeight, sizes.dimHeight);\n            sizes.top = g_nestedWork.gridY;\n            sizes.left = column;\n            sideResizes.push({\"tileID\": tileID, \"sizes\": sizes});\n\n            var sideResizesVal = calcResizeRatio(sideResizes);\n            var columnResizesVal = calcResizeRatio(columnResizes);\n\n            if(sideResizesVal<columnResizesVal || disableColumnResizes == true) {\n                applyResizes(sideResizes);\n                return;\n            } else {\n                applyResizes(columnResizes);\n                return;\n            }\n\n\n        }\n        sizes.left = column;\n        sizes.top = g_nestedWork.gridY;\n        g_arrNestedItems[tileID] = sizes;\n        putImageToGridRow(tileID, sizes, column, g_nestedWork.gridY);\n        \n        g_nestedWork.maxGridY = sizes.top + sizes.dimHeight;\n        \n    }\n\n    /**\n     * check columns crosshairs\n     */\n    function getColumnCrosshairsCount(tilesAndSizes){\n\n        var crosshairsCountR = 0;\n        var crosshairsCountL = 0;\n\n        for(var i = 0; i<tilesAndSizes.length-1; i++){\n\n            var sizes = tilesAndSizes[i].sizes;\n            var topItem = -1;\n            var bottomItem = -1;\n            if(isGridRowExists(sizes.top+sizes.dimHeight) && g_nestedWork.maxColumns>sizes.left+sizes.dimWidth){\n                topItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight-1][sizes.left+sizes.dimWidth];\n                bottomItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight][sizes.left+sizes.dimWidth];\n            }\n            if(topItem != bottomItem){\n                crosshairsCountR++;\n            }\n        }\n\n        for(var i = 0; i<tilesAndSizes.length-1; i++){\n\n            var sizes = tilesAndSizes[i].sizes;\n            var topItem = -1;\n            var bottomItem = -1;\n            if(isGridRowExists(sizes.top+sizes.dimHeight) && sizes.left-1>=0){\n                topItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight-1][sizes.left-1];\n                bottomItem = g_arrNestedGridRow[sizes.top+sizes.dimHeight][sizes.left-1];\n            }\n            if(topItem != bottomItem){\n                crosshairsCountL++;\n            }\n        }\n        return Math.max(crosshairsCountL, crosshairsCountR);\n    }\n\n    /**\n     * get size resize info\n     */\n    function getSideResizeInfo(idToResize, newHeight, dimHeight){\n\n        var currentTile = g_arrNestedItems[idToResize];\n        var\ttileHeight = currentTile.dimHeight;\n        var tileWidth = currentTile.dimWidth;\n        var tileLeft = currentTile.left;\n        var tileTop = currentTile.top;\n        var tileDimTop = parseInt(tileTop / (g_nestedWork.colWidth + g_nestedWork.currentGap));\n        var tileDimLeft = parseInt(tileLeft / (g_nestedWork.colWidth + g_nestedWork.currentGap));\n        var newSideHeight = tileHeight - newHeight + dimHeight;\n\n        var sideSizes = resizeToNewHeight(idToResize, newSideHeight, true);\n        var output = [];\n        output.push({\"tileID\": idToResize, \"sizes\": sideSizes});\n        return output;\n    }\n\n    /**\n     * apply resizes to fix column\n     */\n    function applyResizes(resizeTilesAndSizes){\n\n        for(var i = 0; i<resizeTilesAndSizes.length; i++){\n            var sizes = resizeTilesAndSizes[i].sizes;\n            var tileID = resizeTilesAndSizes[i].tileID;\n            g_arrNestedItems[tileID]=jQuery.extend(true, {}, sizes);\n            putImageToGridRow(tileID, sizes, sizes.left, sizes.top);\n        }\n\n    }\n\n    /**\n     * redistribute heights in column\n     * returns current item sizes\n     */\n    function redistributeColumnItems(columnInfo, columnWidth){\n\n        var originalHeight = 0;\n        var columnHeight = 0;\n        var objTiles = [];\n        var cordX = 0, cordY = 0;\n\n        for(var i = 0; i<columnInfo[1].length; i++){\n            var tileID = columnInfo[1][i];\n            var currentTile = g_arrNestedItems[columnInfo[1][i]];\n            columnHeight += currentTile.dimHeight;\n            if(i==0){\n                var sizes = resizeToNewWidth(tileID, columnWidth, true);\n                originalHeight += sizes.dimHeight;\n                objTiles.push([columnInfo[1][i], sizes.dimHeight]);\n                continue;\n            }\n            originalHeight += currentTile.dimHeight;\n            objTiles.push([tileID, currentTile.dimHeight]);\n        }\n\n        cordX = currentTile.left;\n        cordY = currentTile.top;\n\n        var tempHeight = columnHeight;\n        var output = [];\n\n        for(var i = objTiles.length-1; i>=0; i--){\n            var tileID = objTiles[i][0];\n            var newHeight;\n            if(i != 0) {\n                newHeight = Math.max(Math.round(columnHeight*1/3),Math.floor(objTiles[i][1] * (columnHeight / originalHeight)));\n                tempHeight = tempHeight - newHeight;\n                sizes = resizeToNewHeight(tileID, newHeight, true);\n                sizes.left = cordX;\n                sizes.top = cordY;\n                output.push({\"tileID\": tileID, \"sizes\": sizes});\n                cordY += sizes.dimHeight;\n            } else {\n                newHeight = tempHeight;\n                sizes = resizeToNewHeight(tileID, newHeight, true);\n                sizes.left = cordX;\n                sizes.top = cordY;\n                output.push({\"tileID\": tileID, \"sizes\": sizes});\n            }\n        }\n        return output;\n    }\n\n    /**\n     * Calculate num of objects in current column and return they are ID's\n     */\n    function getGridColumnHeight(tileID, dimWidth, column){\n        var tempY = g_nestedWork.gridY-1;\n        var curImage = 0;\n        var prevImage = 0;\n        var columnHeight = 1;\n        var imagesIDs = [];\n        var toReturn = [];\n        imagesIDs.push(tileID);\n        if(tempY>=0){\n            prevImage = 0;\n            while(tempY>=0){\n                curImage = g_arrNestedGridRow[tempY][column];\n                if( (typeof g_arrNestedGridRow[tempY][column-1] === 'undefined' || g_arrNestedGridRow[tempY][column-1] != g_arrNestedGridRow[tempY][column])\n                    &&(typeof g_arrNestedGridRow[tempY][column+dimWidth] === 'undefined' || g_arrNestedGridRow[tempY][column+dimWidth-1] != g_arrNestedGridRow[tempY][column+dimWidth])\n                    &&(g_arrNestedGridRow[tempY][column]==g_arrNestedGridRow[tempY][column+dimWidth-1])){\n                    if(prevImage != curImage){\n                        columnHeight++;\n                        imagesIDs.push(curImage);\n                    }\n                } else {\n                    toReturn.push(columnHeight);\n                    toReturn.push(imagesIDs);\n                    return toReturn;\n                }\n                tempY--;\n                prevImage = curImage;\n            }\n            toReturn.push(columnHeight);\n            toReturn.push(imagesIDs);\n            return toReturn;\n        }\n        return [0, []];\n    }\n\n    /**\n     * get new height based on left and right difference\n     */\n    function getGridImageVerticalDifference(column, sizes){\n        var newHeightR = 0;\n        var newHeightL = 0;\n        var dimWidth = sizes.dimWidth;\n        var dimHeight = sizes.dimHeight;\n        var leftID = 0;\n        var rightID = 0;\n        var array = jQuery.map(g_arrNestedGridRow, function(value, index) {\n            return [value];\n        });\n\n        if(typeof array[g_nestedWork.gridY] === 'undefined' || typeof array[g_nestedWork.gridY][column-1]=== 'undefined'){\n            newHeightL = 0;\n        } else {\n            var tempY=0;\n            while(true){\n                if(typeof g_arrNestedGridRow[g_nestedWork.gridY+tempY] !== 'undefined' && g_arrNestedGridRow[g_nestedWork.gridY+tempY][column-1] != -1 ){\n                    leftID = g_arrNestedGridRow[g_nestedWork.gridY+tempY][column-2];\n                    tempY++;\n                    newHeightL++;\n                } else {\n                    break;\n                }\n            }\n        }\n\n        if(typeof array[g_nestedWork.gridY] === 'undefined' || typeof array[g_nestedWork.gridY][column+dimWidth]=== 'undefined'){\n            newHeightR = 0;\n        } else {\n            tempY=0;\n            while(true){\n                if(typeof g_arrNestedGridRow[g_nestedWork.gridY+tempY] !== 'undefined' && g_arrNestedGridRow[g_nestedWork.gridY+tempY][column+dimWidth] != -1 ){\n                    rightID = g_arrNestedGridRow[g_nestedWork.gridY+tempY][column+dimWidth+1];\n                    tempY++;\n                    newHeightR++;\n                } else {\n                    break;\n                }\n            }\n        }\n\n        var newHeight = 0;\n        var idToResize = 0;\n        if(Math.abs(dimHeight - newHeightL) < Math.abs(dimHeight - newHeightR) && newHeightL != 0) {\n            newHeight = newHeightL;\n            idToResize = leftID;\n        } else if (newHeightR !=0) {\n            newHeight = newHeightR;\n            idToResize = rightID;\n        } else {\n            newHeight = dimHeight; //malo li\n        }\n\n        var output = {\"newHeight\": newHeight, \"idToResize\": idToResize};\n\n        return output;\n    }\n\n    /**\n     * resize to new Dim width\n     */\n    function resizeToNewWidth(tileID, newDimWidth, toReturn) {\n        if(!toReturn){\n            toReturn = false;\n        }\n        \n        var colWidth = g_nestedWork.colWidth;\n        var gapWidth = g_nestedWork.currentGap;\n        var currentTile = g_arrNestedItems[tileID];\n        var imgWidth = currentTile.imgWidth;\n        var imgHeight = currentTile.imgHeight;\n        var ratio = imgWidth / imgHeight;\n        dimWidth = newDimWidth;\n        dimHeight = Math.round(dimWidth / ratio);\n        if(toReturn == true){\n            var sizes = jQuery.extend(true, {}, currentTile);\n            sizes.dimWidth = dimWidth;\n            sizes.dimHeight = dimHeight;\n            sizes.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n            sizes.height = dimHeight * colWidth + gapWidth * (dimHeight - 1);\n            return sizes;\n        }\n        currentTile.dimWidth = dimWidth;\n        currentTile.dimHeight = dimHeight;\n        currentTile.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n        currentTile.height = dimHeight * colWidth + gapWidth * (dimHeight - 1);\n    }\n\n    /**\n     * resize to new height without width changing\n     */\n    function resizeToNewHeight(tileID, newDimHeight, toReturn) {\n\n        if(!toReturn){\n            toReturn = false;\n        }\n\n        var currentTile = g_arrNestedItems[tileID];\n        var dimWidth = currentTile.dimWidth;\n        var colWidth = g_nestedWork.colWidth;\n        var gapWidth = g_nestedWork.currentGap;\n\n        if(toReturn == true){\n            var sizes = jQuery.extend(true, {}, currentTile);\n\n            sizes.dimHeight = newDimHeight;\n            sizes.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n            sizes.height = newDimHeight * colWidth + gapWidth * (newDimHeight - 1);\n            \n            return sizes;\n        }\n\n        currentTile.dimHeight = newDimHeight;\n        currentTile.width = dimWidth * colWidth + gapWidth * (dimWidth - 1);\n        currentTile.height = newDimHeight * colWidth + gapWidth * (newDimHeight - 1);\n    }\n\n    /**\n     * calc resize koef\n     */\n    function calcResizeRatio(objTilesAndSizes){\n        var tempResizes = 0;\n        var tempNum = 0;\n\n        for(var i = 0; i<objTilesAndSizes.length; i++){\n            var sizes = g_arrNestedItems[objTilesAndSizes[i].tileID];\n            if((sizes.dimHeight != 0) && (sizes.height != 0)){\n                resizeVal = (sizes.dimWidth/sizes.dimHeight)/(sizes.imgWidth/sizes.imgHeight);\n            } else {\n                return;\n            }\n            if(resizeVal < 1){\n                resizeVal = 1/resizeVal;\n            }\n            tempResizes += resizeVal;\n            tempNum++;\n        }\n        return tempResizes/tempNum;\n    }\n\n    /**\n     * check for column break\n     */\n    function isGridImageAligned(dimWidth, column){\n        var y = g_nestedWork.gridY-1;\n        if(y<=0 || isGridRowExists(y) == false){\n            return false;\n        }\n        if(g_arrNestedGridRow[y][column+dimWidth-1]!=g_arrNestedGridRow[y][column+dimWidth]) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * get free line length in GridRow\n     */\n    function getTotalFreeFromPosition(column){\n        var x = column;\n        var totalFree = 0;\n        if(isGridRowExists(g_nestedWork.gridY) == true){\n            while(isGridCellTaken(g_nestedWork.gridY, x) == false){\n                totalFree ++;\n                x++;\n            }\n        } else {\n            totalFree = g_nestedWork.maxColumns;\n        }\n        return totalFree;\n    }\n\n    /**\n     * is nestedGridRow row exists\n     */\n    function isGridRowExists(y){\n        if(typeof g_arrNestedGridRow[y] === 'undefined'){\n            return false;\n        }\n        return true;\n    }\n\n    \n    /**\n     * put image to grid row\n     */\n    function putImageToGridRow(id, sizes, gridX, gridY){\n        \n    \tfor (var y = 0; y < sizes.dimHeight; y++) {\n            for (var x = 0; x < sizes.dimWidth; x++) {\n                if (isGridRowExists(gridY+y) == 0) {\n                    addGridRow(gridY+y);\n                }\n                \n                setGridCellValue(gridY+y, gridX+x, id);\n            }\n        }\n    }\n\n    /**\n     * add grid with Y index\n     */\n    function addGridRow(y){\n        g_arrNestedGridRow[y] = new Object;\n        for (var t = 0; t < g_nestedWork.maxColumns; t++) {\n            g_arrNestedGridRow[y][t] = -1;\n        }\n    }\n\n    /**\n     * isGridRowCellTaken\n     */\n    function isGridCellTaken(y,x){\n        return (g_arrNestedGridRow[y][x] != -1);\n    }\n\n    /**\n     * set nestedGridRow cell value\n     */\n    function setGridCellValue(y,x,value){\n        g_arrNestedGridRow[y][x]=value;\n    }\n\n\n    /**\n     * draw nested images\n     */\n    function drawNestedImages(toShow){\n    \t\n        if(!toShow)\n            var toShow = false;\n        \n        doBeforeTransition();\n        \n        for(var i = 0; i<g_arrNestedItems.length; i++){\n            drawNestedImage(i, toShow);\n        }\n\n        g_objParent.height(g_nestedWork.maxColHeight);\n        \n        doAfterTransition();\n    }\n\n    \n    /**\n     * draw nested image\n     */\n    function drawNestedImage(i, toShow){\n    \t\n        var objTile = g_thumbs.getThumbByIndex(i);\n\n        var sizes = g_arrNestedItems[i];\n        var newY = sizes.top * (g_nestedWork.colWidth + g_nestedWork.currentGap);\n        var newX = g_nestedWork.addX + sizes.left * (g_nestedWork.colWidth + g_nestedWork.currentGap);\n        \n        g_objTileDesign.resizeTile(objTile, sizes.width, sizes.height, g_objTileDesign.resizemode.VISIBLE_ELEMENTS);\n        \n        g_functions.placeElement(objTile, newX, newY);\n                \n        if(newY + sizes.height > g_nestedWork.maxColHeight){\n            g_nestedWork.maxColHeight = newY + sizes.height;\n        };\n        \n        if(toShow == true){\n            objTile.fadeTo(0, 1);\n        }\n        \n    }\n\t\n\t\n\tfunction __________COMMON_AND_EVENTS_______(){};\n\t\n\t\n\t/**\n\t * on resize event\n\t */\n\tfunction onResize(){\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isAllLoaded == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(g_options.tiles_type){\n\t\t\tcase \"columns\":\n\t\t\t\tplaceTiles(false);\n\t\t\tbreak;\n\t\t\tcase \"justified\":\n\t\t\t\tplaceJustified(false);\n\t\t\tbreak;\n            case \"nested\":\n            \t\n            \tvar isMobileMode = g_gallery.isMobileMode();\n            \tif(isMobileMode == true){\n            \t\tplaceTiles(false);\n            \t}\n            \telse\n            \t\tplaceNestedImages(false);\n            \n            break;\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_objThis.on(t.events.ALL_TILES_LOADED, function(){\n\t\t\t\n\t\t\tg_temp.isAllLoaded = true;\n\t\t\t\n\t\t});\n\t\t\n\t\tg_objGallery.on(g_gallery.events.SIZE_CHANGE, onResize);\n\t\t\n\t\tg_objGallery.on(t.events.TILES_FIRST_PLACED,function(){\n\t\t\tg_temp.isFirstPlaced = false;\n\t\t});\n\t\t\n\t\tg_objTileDesign.initEvents();\n\t\t\t\t\n\t}\n\n\t\n\t/**\n\t * run the gallery after init and set html\n\t */\n\tfunction run(){\n\t\t\t\t\n\t\t//show tiles\n\t\tg_objWrapper.children(\".ug-tile\").show();\n\n\t\tif(g_temp.isFirstTimeRun == true){\n\t\t\tinitEvents();\n\t\t}\n\t\t\n\t\tg_objTileDesign.run();\n\t\t\n\t\tswitch(g_options.tiles_type){\n\t\t\tdefault:\n\t\t\tcase \"columns\":\n\t\t\t\trunColumnsType();\n\t\t\tbreak;\n\t\t\tcase \"justified\":\n\t\t\t\trunJustifiedType();\n\t\t\tbreak;\n\t\t\tcase \"nested\":\n\t\t\t\trunNestedType();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t\n\t\tg_temp.isFirstTimeRun = false;\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objGallery.off(g_gallery.events.SIZE_CHANGE);\n\t\tg_objTileDesign.destroy();\n\t\tg_objGallery.off(t.events.TILES_FIRST_PLACED);\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinit(gallery, customOptions);\n\t}\n\n\t\n\t/**\n\t * set html\n\t */\n\tthis.setHtml = function(objParent){\n\t\tsetHtml(objParent);\n\t}\n\t\n\t/**\n\t * get tile design object\n\t */\n\tthis.getObjTileDesign = function(){\n\t\treturn(g_objTileDesign);\n\t}\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trun();\n\t}\n\t\n\t\n\t/**\n\t * run the new items\n\t */\n\tthis.runNewItems = function(){\n\t\t\n\t\tif(!g_objParent)\n\t\t\tthrow new Error(\"Can't run new items - parent not set\");\n\t\t\n\t\tg_objTileDesign.setHtml(g_objParent, true);\n\t\t\n\t\tg_objTileDesign.run(true);\n\t\t\n\t\t\n\t\tswitch(g_options.tiles_type){\n\t\t\tcase \"columns\":\n\t\t\t\t\n\t\t\t\trunColumnsType();\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tcase \"justified\":\n\t\t\tcase \"nested\":\n\t\t\t\tthrow new Error(\"Tiles type: \"+g_options.tiles_type+\" not support load more yet\");\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n}\n\n\n\n/**\n * tiles design class\n */\nfunction UGTileDesign(){\n\t\n\tvar t = this, g_objThis = jQuery(this);\t\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery;\n\tvar g_functions = new UGFunctions(), g_objParentWrapper, g_objWrapper;\n\tvar g_thumbs = new UGThumbsGeneral(), g_items;\n\t\n\tthis.resizemode = {\t\t\t//modes constants for resize tile\n\t\tFULL: \"full\",\n\t\tWRAPPER_ONLY: \"wrapper_only\",\n\t\tVISIBLE_ELEMENTS: \"visible_elements\"\n\t};\n\t\n\tthis.sizeby = {\t\t\t\t//sizeby option constants\n\t\tGLOBAL_RATIO: \"global_ratio\",\n\t\tTILE_RATIO: \"tile_ratio\",\n\t\tIMAGE_RATIO: \"image_ratio\",\n\t\tCUSTOM: \"custom\"\n\t};\n\t\n\tthis.events = {\n\t\t\tTILE_CLICK: \"tile_click\"\n\t};\n\t\n\tvar g_options = {\n\t\t\t\t\t\t\n\t\t\ttile_width: 250,\t\t\t\t\t\t//in case of fixed size: tile width\n\t\t\ttile_height: 200,\t\t\t\t\t\t//in case of fixed size: tile height\n\t\t\ttile_size_by:t.sizeby.IMAGE_RATIO,\t\t//image ratio, tile ratio , global_ratio - decide by what parameter resize the tile\n\t\t\ttile_visible_before_image:false,\t\t//tile visible before image load\n\t\t\t\n\t\t\ttile_enable_background:true,\t\t\t//enable backgruond of the tile\n\t\t\ttile_background_color: \"#F0F0F0\",\t\t//tile background color\n\t\t\t\n\t\t\ttile_enable_border:false,\t\t\t\t//enable border of the tile\n\t\t\ttile_border_width:3,\t\t\t\t\t//tile border width\n\t\t\ttile_border_color:\"#F0F0F0\",\t\t\t//tile border color\n\t\t\ttile_border_radius:0,\t\t\t\t\t//tile border radius (applied to border only, not to outline)\n\t\t\t\n\t\t\ttile_enable_outline: false,\t\t\t\t//enable outline of the tile (works only together with the border)\n\t\t\ttile_outline_color: \"#8B8B8B\",\t\t\t//tile outline color\n\t\t\t\n\t\t\ttile_enable_shadow:false,\t\t\t\t//enable shadow of the tile\n\t\t\ttile_shadow_h:1,\t\t\t\t\t\t//position of horizontal shadow\n\t\t\ttile_shadow_v:1,\t\t\t\t\t\t//position of vertical shadow\n\t\t\ttile_shadow_blur:3,\t\t\t\t\t\t//shadow blur\n\t\t\ttile_shadow_spread:2,\t\t\t\t\t//shadow spread\n\t\t\ttile_shadow_color:\"#8B8B8B\",\t\t\t//shadow color\n\t\t\t\n\t\t\ttile_enable_action:\ttrue,\t\t\t\t//enable tile action on click like lightbox\n\t\t\ttile_as_link: false,\t\t\t\t\t//act the tile as link, no lightbox will appear\n\t\t\ttile_link_newpage: true,\t\t\t\t//open the tile link in new page\n\n\t\t\ttile_enable_overlay: true,\t\t\t\t//enable tile color overlay (on mouseover)\n\t\t\ttile_overlay_opacity: 0.4,\t\t\t\t//tile overlay opacity\n\t\t\ttile_overlay_color: \"#000000\",\t\t\t//tile overlay color\n\t\t\t\n\t\t\ttile_enable_icons: true,\t\t\t\t//enable icons in mouseover mode\n\t\t\ttile_show_link_icon: false,\t\t\t\t//show link icon (if the tile has a link). In case of tile_as_link this option not enabled\n\t\t\ttile_videoplay_icon_always_on: 'never',\t//'always', 'never', 'mobile_only', 'desktop_only' always show video play icon\n\t\t\ttile_space_between_icons: 26,\t\t\t//initial space between icons, (on small tiles it may change)\n\t\t\t\n\t\t\ttile_enable_image_effect:false,\t\t\t//enable tile image effect\n\t\t\ttile_image_effect_type: \"bw\",\t\t\t//bw, blur, sepia - tile effect type\n\t\t\ttile_image_effect_reverse: false,\t\t//reverce the image, set only on mouseover state\n\t\t\t\n\t\t\ttile_enable_textpanel: false,\t\t\t //enable textpanel\n\t\t\ttile_textpanel_source: \"title\",\t\t\t //title,desc,desc_title,title_and_desc. source of the textpanel. desc_title - if description empty, put title\n\t\t\ttile_textpanel_always_on: false,\t\t //textpanel always visible - for inside type\n\t\t\ttile_textpanel_appear_type: \"slide\",\t //slide, fade - appear type of the textpanel on mouseover\n\t\t\ttile_textpanel_position:\"inside_bottom\", //inside_bottom, inside_top, inside_center, top, bottom the position of the textpanel\n\t\t\ttile_textpanel_offset:0\t\t\t\t\t //vertical offset of the textpanel\n\t};\n\t\n\t\n\tvar g_defaults = {\n\t\t\tthumb_color_overlay_effect: true,\n\t\t\tthumb_overlay_reverse: true,\n\t\t\tthumb_image_overlay_effect: false,\n\t\t\ttile_textpanel_enable_description: false,\n\t\t\ttile_textpanel_bg_opacity: 0.6,\n\t\t\ttile_textpanel_padding_top:8,\n\t\t\ttile_textpanel_padding_bottom: 8\n\t};\n\t\n\tvar g_temp = {\n\t\tratioByHeight:0,\n\t\tratioByWidth:0,\n\t\teventSizeChange: \"thumb_size_change\",\n\t\tfuncCustomTileHtml: null,\n\t\tfuncCustomPositionElements: null,\n\t\tfuncParentApproveClick: null,\n\t\tisSaparateIcons: false,\n\t\ttileInnerReduce: 0,\t\t//how much reduce from the tile inner elements from border mostly\n\t\tisTextpanelOutside: false,\t//is the textpanel is out of tile image border\n\t\thasImageContainer:false,\n\t\tisVideoplayIconAlwaysOn:false,\n\t\tisTextPanelHidden:false\n\t};\n\t\n\t\n\t/**\n\t * init the tile object\n\t */\n\tfunction init(gallery, customOptions){\n\t\t\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_objGallery = jQuery(gallery);\t\t\n\t\t\n\t\tvar objects = g_gallery.getObjects();\n\t\tg_objWrapper = objects.g_objWrapper;\n\t\t\n\t\tg_items = g_gallery.getArrItems();\n\t\t\t\t\n\t\tg_options = jQuery.extend(g_options, g_defaults);\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\tmodifyOptions();\n\t\t\t\t\n\t\tg_thumbs.init(gallery, g_options);\t\n\t\t\n\t\tvar objCustomOptions = {allow_onresize:false};\n\t\t\n\t\tvar customThumbsAdd = [\"overlay\"];\n\t\t\n\t\tif(g_temp.funcCustomTileHtml)\n\t\t\tcustomThumbsAdd = [];\n\t\t\n\t\tg_thumbs.setCustomThumbs(setHtmlThumb, customThumbsAdd, objCustomOptions);\n\t\t\n\t\t//get thumb default options too:\n\t\tvar thumbOptions = g_thumbs.getOptions();\n\t\tg_options = jQuery.extend(g_options, thumbOptions);\n\t\t\n\t\t//set ratios of fixed mode\n\t\tg_temp.ratioByWidth = g_options.tile_width / g_options.tile_height;\n\t\tg_temp.ratioByHeight = g_options.tile_height / g_options.tile_width;\n\t\t\n\t\t\n\t\t//set if tile has image container\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO && g_temp.isTextpanelOutside)\n\t\t\tg_temp.hasImageContainer = true;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set thumb and textpanel options according tile options\n\t */\n\tfunction modifyOptions(){\n\n\t\t//set overlay related options\n\t\tif(g_options.tile_enable_overlay == true){\n\t\t\t\n\t\t\tg_options.thumb_overlay_opacity = g_options.tile_overlay_opacity;\n\t\t\tg_options.thumb_overlay_color = g_options.tile_overlay_color;\n\t\t\n\t\t}else if(g_options.tile_enable_icons == false){\t\t//if nothing on overlay - turn it off\n\t\t\tg_options.thumb_color_overlay_effect = false;\t\t\n\t\t}else{\t\t\t\t\t\t\t\t\t\t\t//if icons enabled - make it transparent\n\t\t\tg_options.thumb_overlay_opacity = 0;\n\t\t}\n\t\t\n\t\t//set item as link\n\t\tif(g_options.tile_as_link){\n\t\t\tg_options.thumb_wrapper_as_link = true;\n\t\t\tg_options.thumb_link_newpage = g_options.tile_link_newpage;\n\t\t}\n\t\t\n\t\t//outline cannot appear without border\n\t\tif(g_options.tile_enable_outline == true && g_options.tile_enable_border == false)\n\t\t\tg_options.tile_enable_outline = false;\n\t\t\n\t\t//set inner reduce value - in case of the border\n\t\tg_temp.tileInnerReduce = 0;\n\t\tif(g_options.tile_enable_border){\n\t\t\tg_temp.tileInnerReduce = g_options.tile_border_width * 2;\n\t\t\tg_thumbs.setThumbInnerReduce(g_temp.tileInnerReduce);\n\t\t}\n\n\t\t//check if saparate icons\n\t\tg_temp.isSaparateIcons = !g_functions.isRgbaSupported();\n\t\t\n\t\t//set if the textpanel is enabled and outside\n\t\tif(g_options.tile_enable_textpanel == true){\n\t\t\t\n\t\t\t//optimize for touch device\n\t\t\tswitch(g_options.tile_textpanel_position){\n\t\t\t\tcase \"top\":\n\t\t\t\t\tg_options.tile_textpanel_align = \"top\";\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\tg_temp.isTextpanelOutside = true;\n\t\t\t\t\tg_options.tile_textpanel_always_on = true;\n\t\t\t\t\tg_options.tile_textpanel_offset = 0;\n\t\t\t\tbreak;\n\t\t\t\tcase \"inside_top\":\n\t\t\t\t\tg_options.tile_textpanel_align = \"top\";\n\t\t\t\tbreak;\n\t\t\t\tcase \"middle\":\n\t\t\t\t\tg_options.tile_textpanel_align = \"middle\";\n\t\t\t\t\tg_options.tile_textpanel_appear_type = \"fade\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\t//if text panel oppearing with the overlay, icons should be saparated\n\t\t\tif(g_options.tile_textpanel_always_on == false)\n\t\t\t\tg_temp.isSaparateIcons = true;\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//if the textpanel offset is not from the border, it's always fade.\n\t\tif(g_options.tile_textpanel_offset != 0){\n\t\t\tg_options.tile_textpanel_appear_type = \"fade\";\n\t\t\tg_options.tile_textpanel_margin = g_options.tile_textpanel_offset;\n\t\t}\n\t\t\n\t\t//enable description if needed\n\t\tif(g_options.tile_textpanel_source == \"title_and_desc\"){\n\t\t\tg_options.tile_textpanel_enable_description = true;\n\t\t\tg_options.tile_textpanel_desc_style_as_title = true;\n\t\t}\n\t\t\n\t}\n\t\n\n\t/**\n\t * set options before render\n\t */\n\tfunction modifyOptionsBeforeRender(){\n\t\t\n\t\tvar isMobile = g_gallery.isMobileMode();\n\t\t\n\t\t//set text panel show / hide\n\t\t\n\t\tg_temp.isTextPanelHidden = false;\n\t\tif(isMobile == true && g_options.tile_textpanel_always_on == false)\n\t\t\tg_temp.isTextPanelHidden = true;\n\t\t\n\t\t\n\t\t//set video icon always on true / false\n\t\t\n\t\tg_temp.isVideoplayIconAlwaysOn = g_options.tile_videoplay_icon_always_on;\n\t\t\n\t\tswitch(g_options.tile_videoplay_icon_always_on){\n\t\t\tcase \"always\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = true;\n\t\t\tbreak;\n\t\t\tcase \"never\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = false;\n\t\t\tbreak;\n\t\t\tcase \"mobile_only\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = (isMobile == true)?true:false;\n\t\t\tbreak;\n\t\t\tcase \"desktop_only\":\n\t\t\t\tg_temp.isVideoplayIconAlwaysOn = (isMobile == false)?true:false;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t\n\t}\n\n\t\n\t/**\n\t * set thumb html\n\t */\n\tfunction setHtmlThumb(objThumbWrapper, objItem){\n\t\t\n\t\tobjThumbWrapper.addClass(\"ug-tile\");\n\t\t\n\t\tif(g_temp.funcCustomTileHtml){\n\t\t\tg_temp.funcCustomTileHtml(objThumbWrapper, objItem);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar html = \"\";\n\t\t\t\n\t\t//add image container\n\t\tif(g_temp.hasImageContainer == true){\n\t\t\thtml += \"<div class='ug-image-container ug-trans-enabled'>\";\n\t\t}\n\t\t\n\t\t//add thumb image:\n\t\tvar classImage = \"ug-thumb-image\";\n\n\t\tif(g_options.tile_enable_image_effect == false || g_options.tile_image_effect_reverse == true)\n\t\t\tclassImage += \" ug-trans-enabled\";\n\t\t\n\t\tvar imageAlt = g_functions.stripTags(objItem.title);\n\t\timageAlt = g_functions.htmlentitles(imageAlt);\n\t\t\n\t\thtml += \"<img src=\\\"\"+g_functions.escapeDoubleSlash(objItem.urlThumb)+\"\\\" alt='\"+imageAlt+\"' class='\"+classImage+\"'>\";\n\n\t\tif(g_temp.hasImageContainer == true){\n\t\t\thtml += \"</div>\";\n\t\t}\t\n\t\t\n\t\tobjThumbWrapper.append(html);\n\t\t\n\t\t\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO){\n\t\t\tobjThumbWrapper.fadeTo(0,0);\t\t//turn on in thumbsGeneral\n\t\t}\n\t\t\n\t\t//---- set thumb styles ---- \n\t\t\n\t\t//set border:\n\t\tvar objCss = {};\n\t\t\n\t\tif(g_options.tile_enable_background == true){\n\t\t\tobjCss[\"background-color\"] = g_options.tile_background_color;\n\t\t}\n\t\t\n\t\tif(g_options.tile_enable_border == true){\n\t\t\tobjCss[\"border-width\"] = g_options.tile_border_width+\"px\";\n\t\t\tobjCss[\"border-style\"] = \"solid\";\n\t\t\tobjCss[\"border-color\"] = g_options.tile_border_color;\n\t\t\t\n\t\t\tif(g_options.tile_border_radius)\n\t\t\t\tobjCss[\"border-radius\"] = g_options.tile_border_radius+\"px\";\n\t\t}\n\t\t\n\t\t//set outline:\n\t\tif(g_options.tile_enable_outline == true){\n\t\t\tobjCss[\"outline\"] = \"1px solid \" + g_options.tile_outline_color;\n\t\t}\n\t\t\n\t\t//set shadow\n\t\tif(g_options.tile_enable_shadow == true){\n\t\t\tvar htmlShadow = g_options.tile_shadow_h+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_v+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_blur+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_spread+\"px \";\n\t\t\thtmlShadow += g_options.tile_shadow_color;\n\t\t\t\n\t\t\tobjCss[\"box-shadow\"] = htmlShadow;\n\t\t}\n\t\t\n\t\tobjThumbWrapper.css(objCss);\n\t\t\n\t\t\n\t\t//----- add icons\n\t\t\n\t\tvar htmlAdd = \"\";\n\t\t\n\t\tif(g_options.tile_enable_icons){\n\t\t\t\n\t\t\t//add zoom icon\n\t\t\tif(g_options.tile_as_link == false && g_options.tile_enable_action == true){\n\t\t\t\tvar iconPlayClass = \"ug-button-play ug-icon-zoom\";\n\t\t\t\tif(objItem.type != \"image\")\n\t\t\t\t\ticonPlayClass = \"ug-button-play ug-icon-play\";\n\t\t\t\t\n\t\t\t\thtmlAdd += \"<div class='ug-tile-icon \" + iconPlayClass + \"' style='display:none'></div>\";\n\t\t\t}\n\t\t\t\n\t\t\t//add link icon\n\t\t\tif(objItem.link && g_options.tile_show_link_icon == true || g_options.tile_as_link == true){\n\t\t\t\t\n\t\t\t\tif(g_options.tile_as_link == false){\n\t\t\t\t\tvar linkTarget = \"\";\n\t\t\t\t\tif(g_options.tile_link_newpage == true)\n\t\t\t\t\t\tlinkTarget = \" target='_blank'\";\n\t\t\t\t\t\n\t\t\t\t\thtmlAdd += \"<a href='\"+objItem.link+\"'\"+linkTarget+\" class='ug-tile-icon ug-icon-link'></a>\";\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\thtmlAdd += \"<div class='ug-tile-icon ug-icon-link' style='display:none'></div>\";\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\n\t\tvar toSaparateIcon = g_temp.isSaparateIcons;\n\t\tif(toSaparateIcon == false && objItem.type != \"image\" && g_temp.isVideoplayIconAlwaysOn == true)\n\t\t\ttoSaparateIcon = true;\n\t\t\n\t\tif(toSaparateIcon)\t\t//put the icons on the thumb\n\t\t\tvar objOverlay = objThumbWrapper;\n\t\telse\n\t\t\tvar objOverlay = objThumbWrapper.children(\".ug-thumb-overlay\");\n\t\t\n\t\tobjOverlay.append(htmlAdd);\t\t\n\t\t\n\t\tvar objButtonZoom = objOverlay.children(\".\" + iconPlayClass);\n\t\t\n\t\tif(objButtonZoom.length == 0)\n\t\t\tobjButtonZoom = null;\n\t\telse\n\t\t\tobjButtonZoom.hide();\n\t\t\n\t\tvar objButtonLink = objOverlay.children(\".ug-icon-link\");\n\t\t\n\t\tif(objButtonLink.length == 0)\n\t\t\tobjButtonLink = null;\n\t\telse\n\t\t\tobjButtonLink.hide();\n\t\t\n\t\t//if only zoom icon, make the tile clickable for lightbox open\n\t\tif(!objButtonLink && g_options.tile_enable_action == true)\n\t\t\tobjThumbWrapper.addClass(\"ug-tile-clickable\");\n\t\t\n\t\t}  //if icons enabled\n\t\telse{\t\t//if the icons don't enabled, set the tile clickable\n\t\t\t\n\t\t\tif(g_options.tile_enable_action == true)\n\t\t\t\tobjThumbWrapper.addClass(\"ug-tile-clickable\");\n\t\t\n\t\t}\n\t\t\n\t\t//add image overlay\n\t\tif(g_options.tile_enable_image_effect == true){\n\t\t\t\n\t\t\tvar imageEffectClassAdd = \"\";\n\t\t\tif(g_options.tile_image_effect_reverse == false)\n\t\t\t\timageEffectClassAdd = \" ug-trans-enabled\";\n\t\t\t\n\t\t\tvar imageOverlayHtml = \"<div class='ug-tile-image-overlay\"+imageEffectClassAdd+\"' >\";\n\t\t\tvar imageEffectClass = \" ug-\"+g_options.tile_image_effect_type+\"-effect\";\n\t\t\t\n\t\t\timageOverlayHtml += \"<img src=\\\"\"+g_functions.escapeDoubleSlash(objItem.urlThumb)+\"\\\" alt='\"+objItem.title+\"' class='\"+imageEffectClass + imageEffectClassAdd+\"'>\";\n\t\t\timageOverlayHtml += \"</div>\";\n\t\t\t\n\t\t\tobjThumbWrapper.append(imageOverlayHtml);\n\n\t\t\t//hide the image overlay if reversed\n\t\t\tif(g_options.tile_image_effect_reverse == true){\n\t\t\t\tobjThumbWrapper.children(\".ug-tile-image-overlay\").fadeTo(0,0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//add text panel\n\t\tif(g_options.tile_enable_textpanel == true){\n\t\t\t\n\t\t\tvar objTextPanel = new UGTextPanel();\t\t\t \n\t\t\tobjTextPanel.init(g_gallery, g_options, \"tile\");\n\t\t\t\n\t\t\t//set transition class\n\t\t\tvar textpanelAddClass = \"\";\n\t\t\tif(g_options.tile_textpanel_always_on == true || g_temp.isTextpanelOutside == true)\n\t\t\t\ttextpanelAddClass = \"ug-trans-enabled\";\n\t\t\t\n\t\t\tobjTextPanel.appendHTML(objThumbWrapper, textpanelAddClass);\n\t\t\t\n\t\t\tvar panelTitle = objItem.title;\n\t\t\tvar panelDesc = \"\";\n\t\t\t\n\t\t\tswitch(g_options.tile_textpanel_source){\n\t\t\t\tcase \"desc\":\n\t\t\t\tcase \"description\":\n\t\t\t\t\tpanelTitle = objItem.description;\n\t\t\t\tbreak;\n\t\t\t\tcase \"desc_title\":\n\t\t\t\t\tif(objItem.description != \"\")\n\t\t\t\t\t\tpanelTitle = objItem.description;\n\t\t\t\tbreak;\n\t\t\t\tcase \"title_and_desc\":\n\t\t\t\t\tpanelTitle = objItem.title;\n\t\t\t\t\tpanelDesc = objItem.description;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tobjTextPanel.setTextPlain(panelTitle, panelDesc);\n\t\t\t\n\t\t\tif(g_options.tile_textpanel_always_on == false)\n\t\t\t\tobjTextPanel.getElement().fadeTo(0,0);\n\t\t\t\n\t\t\tobjThumbWrapper.data(\"objTextPanel\", objTextPanel);\n\n\t\t\t//if textpanel always on, it has to be under the overlay\n\t\t\tif(g_options.tile_textpanel_always_on == true){\n\t\t\t\tvar textPanelElement = getTextPanelElement(objThumbWrapper);\n\t\t\t\ttextPanelElement.css(\"z-index\",2);\n\t\t\t}\n\t\t\t\n\t\t\t//if text panel is outside, clone textpanel\n\t\t\tif(g_temp.isTextpanelOutside == true){\n\t\t\t\t\n\t\t\t\tvar htmlClone = \"<div class='ug-tile-cloneswrapper'></div>\";\n\t\t\t\tobjThumbWrapper.append(htmlClone);\n\t\t\t\tvar objCloneWrapper = objThumbWrapper.children(\".ug-tile-cloneswrapper\");\n\t\t\t\t\n\t\t\t\tvar objTextPanelClone = new UGTextPanel(); \n\t\t\t\tobjTextPanelClone.init(g_gallery, g_options, \"tile\");\t\t\t\t\n\t\t\t\tobjTextPanelClone.appendHTML(objCloneWrapper);\n\t\t\t\tobjTextPanelClone.setTextPlain(panelTitle, panelDesc);\n\t\t\t\tobjThumbWrapper.data(\"objTextPanelClone\", objTextPanelClone);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t//add additional html\n\t\tif(objItem.addHtml !== null)\n\t\t\tobjThumbWrapper.append(objItem.addHtml);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * load tile image, place the image on load\n\t */\n\tthis.loadTileImage = function(objTile){\n\t\t\n\t\tvar objImage = t.getTileImage(objTile);\n\t\t\t\n\t\tg_functions.checkImagesLoaded(objImage, null, function(objImage,isError){\n\t\t\tonPlaceImage(null, objTile, jQuery(objImage));\n\t\t});\n\t\t\n\t}\n\t\n\tfunction _________________GETTERS________________(){};\n\t\n\t\n\t\n\t/**\n\t * get image overlay\n\t */\n\tfunction getTileOverlayImage(objTile){\n\t\tvar objOverlayImage = objTile.children(\".ug-tile-image-overlay\");\n\t\treturn(objOverlayImage);\n\t}\n\t\n\t/**\n\t * get tile color overlay\n\t */\n\tfunction getTileOverlay(objTile){\n\t\tvar objOverlay = objTile.children(\".ug-thumb-overlay\");\n\t\treturn(objOverlay);\t\t\n\t}\n\t\n\t\n\t/**\n\t * get image container\n\t */\n\tfunction getTileImageContainer(objTile){\n\t\tif(g_temp.hasImageContainer == false)\n\t\t\treturn(null);\n\t\t\n\t\tvar objImageContainer = objTile.children(\".ug-image-container\");\n\t\t\n\t\treturn(objImageContainer);\n\t}\n\t\n\t\n\t/**\n\t * get image effect\n\t */\n\tfunction getTileImageEffect(objTile){\t\t\n\t\tvar objImageEffect = objTile.find(\".ug-tile-image-overlay img\");\t\t\t\n\t\treturn(objImageEffect);\n\t}\n\t\n\t\n\t/**\n\t * get text panel\n\t */\n\tfunction getTextPanel(objTile){\n\t\tvar objTextPanel = objTile.data(\"objTextPanel\");\n\t\t\n\t\treturn(objTextPanel);\n\t}\n\t\n\t\n\t/**\n\t * get cloned text panel\n\t */\n\tfunction getTextPanelClone(objTile){\n\t\tvar objTextPanelClone = objTile.data(\"objTextPanelClone\");\n\t\t\n\t\treturn(objTextPanelClone);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get text panel element from the tile\n\t */\n\tfunction getTextPanelElement(objTile){\n\t\tvar objTextPanel = objTile.children(\".ug-textpanel\");\n\t\t\n\t\treturn(objTextPanel);\n\t}\n\t\n\t\n\t/**\n\t * get text panel element cloned\n\t */\n\tfunction getTextPanelCloneElement(objTile){\n\t\tvar objTextPanel = objTile.find(\".ug-tile-cloneswrapper .ug-textpanel\");\n\t\t\n\t\tif(objTextPanel.length == 0)\n\t\t\tthrow new Error(\"text panel cloned element not found\");\n\t\t\n\t\treturn(objTextPanel);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get text panel height\n\t */\n\tfunction getTextPanelHeight(objTile){\n\t\t\n\t\tif(g_temp.isTextpanelOutside == true)\n\t\t\tvar objTextPanel = getTextPanelCloneElement(objTile);\n\t\telse\n\t\t\tvar objTextPanel = getTextPanelElement(objTile);\n\t\t\n\t\t\n\t\tif(!objTextPanel)\n\t\t\treturn(0);\n\t\t\n\t\tvar objSize = g_functions.getElementSize(objTextPanel);\n\t\treturn(objSize.height);\n\t}\n\t\n\t\n\t/**\n\t * get button link\n\t */\n\tfunction getButtonLink(objTile){\n\t\tvar objButton = objTile.find(\".ug-icon-link\");\n\t\tif(objButton.length == 0)\n\t\t\treturn(null);\n\t\t\n\t\treturn objButton;\n\t}\n\n\t\n\t/**\n\t * get tile ratio\n\t */\n\tfunction getTileRatio(objTile){\n\t\t\n\t\t//global ratio\n\t\tvar ratio = g_temp.ratioByHeight;\n\t\t\n\t\tswitch(g_options.tile_size_by){\n\t\t\tdefault:\t\t//global ratio\n\t\t\t\tratio = g_temp.ratioByHeight;\n\t\t\tbreak;\n\t\t\tcase t.sizeby.IMAGE_RATIO:\n\n\t\t\t\tif(!objTile)\n\t\t\t\t\tthrow new Error(\"tile should be given for tile ratio\");\n\t\t\t\t\n\t\t\t\tvar item = t.getItemByTile(objTile);\n\t\t\t\t\t\t\t\t\n\t\t\t\tif(typeof item.thumbRatioByHeight != \"undefined\"){\n\t\t\t\t\n\t\t\t\t\tif(item.thumbRatioByHeight == 0){\n\t\t\t\t\t\ttrace(item);\n\t\t\t\t\t\tthrow new Error(\"the item ratio not inited yet\");\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tratio = item.thumbRatioByHeight;\n\t\t\t\t}\n\t\t\t\n\t\t\tbreak;\n\t\t\tcase t.sizeby.CUSTOM:\n\t\t\t\treturn null;\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\treturn(ratio);\n\t}\n\t\n\t\n\t/**\n\t * get button zoom\n\t */\n\tfunction getButtonZoom(objTile){\n\t\tvar objButton = objTile.find(\".ug-button-play\");\n\t\t\n\t\tif(objButton.length == 0)\n\t\t\treturn(null);\n\t\t\n\t\treturn objButton;\n\t}\n\t\n\t\n\t/**\n\t * tells if the tile is over style\n\t */\n\tfunction isOverStyle(objTile){\n\t\t\n\t\tif(objTile.hasClass(\"ug-thumb-over\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * check if the tile is clickable\n\t */\n\tfunction isTileClickable(objTile){\n\t\t\n\t\treturn objTile.hasClass(\"ug-tile-clickable\");\n\t}\n\t\n\t\n\t/**\n\t * return if the items icon always on\n\t */\n\tfunction isItemIconAlwaysOn(objItem){\n\t\t\n\t\tif(g_options.tile_enable_icons == true && g_temp.isVideoplayIconAlwaysOn == true && objItem.type != \"image\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\n\t\n\tfunction _________________SETTERS________________(){};\n\t\n\t\n\t/**\n\t * position tile images elements\n\t * width, height - tile width height\n\t */\n\tfunction positionElements_images(objTile, width, height, visibleOnly){\n\t\t\n\t\tvar objImageOverlay = getTileOverlayImage(objTile);\n\t\tvar objThumbImage = t.getTileImage(objTile);\n\t\tvar objImageEffect = getTileImageEffect(objTile);\n\t\t\n\t\t//reduce borders\n\t\twidth -= g_temp.tileInnerReduce;\n\t\theight -= g_temp.tileInnerReduce;\n\t\t\n\t\tvar imagePosy = null;\n\t\t\n\t\t//reduce textpanel height\n\t\tif(g_temp.isTextpanelOutside == true){\n\n\t\t\tvar textHeight = getTextPanelHeight(objTile);\n\t\t\theight -= textHeight;\n\n\t\t\tif(g_options.tile_textpanel_position == \"top\"){\n\t\t\t\timagePosy = textHeight;\n\t\t\t}\n\t\t\t\n\t\t\t/**\n\t\t\t * if has image container\n\t\t\t */\n\t\t\tif(g_temp.hasImageContainer == true){\n\t\t\t\tvar objImageContainer = getTileImageContainer(objTile);\n\t\t\t\tg_functions.setElementSize(objImageContainer, width, height);\n\t\t\t\t\n\t\t\t\tif(imagePosy !== null)\n\t\t\t\t\tg_functions.placeElement(objImageContainer, 0, imagePosy);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t//scale image\n\t\tif(g_options.tile_enable_image_effect == false){\n\n\t\t\tg_functions.scaleImageCoverParent(objThumbImage, width, height);\n\t\t\t\n\t\t\tif(g_temp.hasImageContainer == false && imagePosy !== null)\n\t\t\t\tg_functions.placeElement(objThumbImage, 0, imagePosy);\n\n\t\t}else{\t//width the effect\n\t\t\t\n\t\t\t//set what to resize\n\t\t\tvar dontResize = \"nothing\";\n\t\t\tif(visibleOnly === true && g_temp.isTextpanelOutside == false){\n\t\t\t\tif(g_options.tile_image_effect_reverse == true){\n\t\t\t\t\tdontResize = \"effect\";\n\t\t\t\t}else{\n\t\t\t\t\tdontResize = \"image\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//resize image effect\n\t\t\tif(dontResize != \"effect\"){\n\t\t\t\tg_functions.setElementSize(objImageOverlay, width, height);\n\t\t\t\t\n\t\t\t\tif(imagePosy !== null)\n\t\t\t\t\tg_functions.placeElement(objImageOverlay, 0, imagePosy);\n\t\t\t\t\n\t\t\t\tg_functions.scaleImageCoverParent(objImageEffect, width, height);\n\t\t\t}\n\t\t\t\n\n\t\t\t//resize image\n\t\t\tif(dontResize != \"image\"){\n\t\t\t\t\n\t\t\t\tif(g_temp.hasImageContainer == true){\n\t\t\t\t\tg_functions.scaleImageCoverParent(objThumbImage, width, height);\n\t\t\t\t}else{\n\t\t\t\t\t\n\t\t\t\t\t//if can't clone, resize\n\t\t\t\t\tif(dontResize == \"effect\"){\n\t\t\t\t\t\tg_functions.scaleImageCoverParent(objThumbImage, width, height);\n\t\t\t\t\t\tif(imagePosy !== null)\n\t\t\t\t\t\t\tg_functions.placeElement(objThumbImage, 0, imagePosy);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tg_functions.cloneElementSizeAndPos(objImageEffect, objThumbImage, false, null, imagePosy);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\t\n\t\t\t\n\t\t}\n\n\t}\n\t\n\t\n\t/**\n\t * position text panel\n\t * panelType - default or clone\n\t */\n\tfunction positionElements_textpanel(objTile, panelType, tileWidth, tileHeight){\n\t\t\n\t\tvar panelWidth = null;\n\t\tif(tileWidth)\n\t\t\tpanelWidth = tileWidth - g_temp.tileInnerReduce;\n\n\t\tif(tileHeight)\n\t\t\ttileHeight -= g_temp.tileInnerReduce;\n\t\t\n\t\tif(panelType == \"clone\"){\n\t\t\tvar objTextPanelClone = getTextPanelClone(objTile);\n\t\t\tobjTextPanelClone.refresh(true, true, panelWidth);\n\t\t\tvar objItem = t.getItemByTile(objTile);\n\t\t\tobjItem.textPanelCloneSizeSet = true;\n\t\t\t\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar objTextPanel = getTextPanel(objTile);\n\t\t\n\t\tif(!objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tvar panelHeight = null;\n\t\t\t\t\n\t\t//set panel height also\n\t\tif(g_temp.isTextpanelOutside == true)\n\t\t\tpanelHeight = getTextPanelHeight(objTile);\n\t\t\n\t\tobjTextPanel.refresh(false, true, panelWidth, panelHeight);\n\t\t\n\t\tvar isPosition = (g_options.tile_textpanel_always_on == true || g_options.tile_textpanel_appear_type == \"fade\");\n\t\t\n\t\tif(isPosition){\n\t\t\t\n\t\t\tif(g_temp.isTextpanelOutside == true && tileHeight && g_options.tile_textpanel_position == \"bottom\"){\n\t\t\t\n\t\t\t\tvar posy = tileHeight - panelHeight;\n\t\t\t\tobjTextPanel.positionPanel(posy);\n\t\t\t}else\n\t\t\t\tobjTextPanel.positionPanel();\n\t\t}\n\t\t\n\t}\n\t\t\n\t\n\t/**\n\t * position the elements\n\t */\n\tfunction positionElements(objTile){\n\t\t\n\t\tvar objItem = t.getItemByTile(objTile);\n\t\tvar objButtonZoom = getButtonZoom(objTile);\n\t\tvar objButtonLink = getButtonLink(objTile);\n\t\tvar sizeTile = g_functions.getElementSize(objTile);\n\t\t\t\t\n\t\tpositionElements_images(objTile, sizeTile.width, sizeTile.height);\n\t\t\n\t\t//position text panel:\n\t\tif(g_options.tile_enable_textpanel == true)\n\t\t\tpositionElements_textpanel(objTile, \"regular\", sizeTile.width, sizeTile.height);\n\t\t\n\t\t\n\t\t//position overlay:\n\t\tvar overlayWidth = sizeTile.width - g_temp.tileInnerReduce;\n\t\tvar overlayHeight = sizeTile.height - g_temp.tileInnerReduce;\n\t\tvar overlayY = 0;\n\t\tif(g_temp.isTextpanelOutside == true){\n\t\t\tvar textHeight = getTextPanelHeight(objTile);\n\t\t\toverlayHeight -= textHeight;\n\t\t\tif(g_options.tile_textpanel_position == \"top\")\n\t\t\t\toverlayY = textHeight;\n\t\t}\n\t\t\n\t\tvar objOverlay = getTileOverlay(objTile);\n\t\tg_functions.setElementSizeAndPosition(objOverlay, 0, overlayY, overlayWidth, overlayHeight);\n\t\t\n\t\t//set vertical gap for icons\n\t\tif(objButtonZoom || objButtonLink){\n\n\t\t\tvar gapVert = 0;\n\t\t\tif( g_options.tile_enable_textpanel == true && g_temp.isTextPanelHidden == false && g_temp.isTextpanelOutside == false){\n\t\t\t\tvar objTextPanelElement = getTextPanelElement(objTile);\n\t\t\t\tvar texPanelSize = g_functions.getElementSize(objTextPanelElement);\n\t\t\t\tif(texPanelSize.height > 0)\n\t\t\t\t\tgapVert = Math.floor((texPanelSize.height / 2) * -1);\n\t\t\t}\n\n\t\t}\n\t\t\n\t\tif(objButtonZoom && objButtonLink){\n\t\t\tvar sizeZoom = g_functions.getElementSize(objButtonZoom);\n\t\t\tvar sizeLink = g_functions.getElementSize(objButtonLink);\n\t\t\tvar spaceBetween = g_options.tile_space_between_icons;\n\t\t\t\n\t\t\tvar buttonsWidth = sizeZoom.width + spaceBetween + sizeLink.width;\n\t\t\tvar buttonsX = Math.floor((sizeTile.width - buttonsWidth) / 2);\n\t\t\t\n\t\t\t//trace(\"X: \"+buttonsX+\" \"+\"space: \" + spaceBetween);\n\t\t\t\n\t\t\t//if space more then padding, calc even space.\n\t\t\tif(buttonsX < spaceBetween){\n\t\t\t\tspaceBetween = Math.floor((sizeTile.width - sizeZoom.width - sizeLink.width) / 3);\n\t\t\t\tbuttonsWidth = sizeZoom.width + spaceBetween + sizeLink.width;\n\t\t\t\tbuttonsX = Math.floor((sizeTile.width - buttonsWidth) / 2);\n\t\t\t}\n\n\t\t\tg_functions.placeElement(objButtonZoom, buttonsX, \"middle\", 0 ,gapVert);\n\t\t\tg_functions.placeElement(objButtonLink, buttonsX + sizeZoom.width + spaceBetween, \"middle\", 0, gapVert);\n\t\t\t\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(objButtonZoom)\n\t\t\t\tg_functions.placeElement(objButtonZoom, \"center\", \"middle\", 0, gapVert);\n\t\t\t\n\t\t\tif(objButtonLink)\n\t\t\t\tg_functions.placeElement(objButtonLink, \"center\", \"middle\", 0, gapVert);\n\t\t\t\t\n\t\t}\n\t\t\n\t\tif(objButtonZoom)\n\t\t\tobjButtonZoom.show();\n\t\t\n\t\tif(objButtonLink)\n\t\t\tobjButtonLink.show();\n\t}\n\n\t\n\t/**\n\t * set tiles htmls\n\t */\n\tthis.setHtml = function(objParent, isAppend){\n\t\tg_objParentWrapper = objParent;\n\t\t\n\t\tif(isAppend !== true)\n\t\t\tmodifyOptionsBeforeRender();\n\t\t\n\t\tg_thumbs.setHtmlThumbs(objParent, isAppend);\n\t}\n\t\n\t\n\t\n\t/**\n\t * set the overlay effect\n\t */\n\tfunction setImageOverlayEffect(objTile, isActive){\n\t\t\n\t\tvar objItem = t.getItemByTile(objTile);\n\t\tvar objOverlayImage = getTileOverlayImage(objTile);\n\t\t\n\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\n\t\tif(g_options.tile_image_effect_reverse == false){\n\t\t\t\n\t\t\tvar objThumbImage = t.getTileImage(objTile);\n\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjThumbImage.fadeTo(0,1);\t\t\t\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 1);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(isActive){\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobjOverlayImage.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t}\n\n\t}\n\t\n\t\n\t/**\n\t * set textpanel effect\n\t */\n\tfunction setTextpanelEffect(objTile, isActive){\n\t\t\n\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\t\n\t\tvar objTextPanel = getTextPanelElement(objTile);\n\t\tif(!objTextPanel)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tif(g_options.tile_textpanel_appear_type == \"slide\"){\n\t\t\t\n\t\t\tvar panelSize = g_functions.getElementSize(objTextPanel);\n\t\t\tif(panelSize.width == 0)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t\tvar startPos = -panelSize.height;\n\t\t\tvar endPos = 0;\n\t\t\tvar startClass = {}, endClass = {};\n\t\t\t\n\t\t\tvar posName = \"bottom\";\n\t\t\tif(g_options.tile_textpanel_position == \"inside_top\")\n\t\t\t\tposName = \"top\";\n\t\t\t\n\t\t\tstartClass[posName] = startPos+\"px\";\n\t\t\tendClass[posName] = endPos+\"px\";\n\t\t\t\t\t\t\n\t\t\tif(isActive == true){\n\t\t\t\t\t\t\t\t\n\t\t\t\tobjTextPanel.fadeTo(0,1);\n\t\t\t\t\n\t\t\t\tif(objTextPanel.is(\":animated\") == false)\n\t\t\t\t\tobjTextPanel.css(startClass);\n\t\t\t\t\n\t\t\t\tendClass[\"opacity\"] = 1;\n\t\t\t\t\t\n\t\t\t\tobjTextPanel.stop(true).animate(endClass, animationDuration);\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tobjTextPanel.stop(true).animate(startClass, animationDuration);\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\t\t//fade effect\n\t\t\t\n\t\t\tif(isActive == true){\n\t\t\t\tobjTextPanel.stop(true).fadeTo(animationDuration, 1);\n\t\t\t}else{\n\t\t\t\tobjTextPanel.stop(true).fadeTo(animationDuration, 0);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\n\t/**\n\t * set thumb border effect\n\t */\n\tfunction setIconsEffect(objTile, isActive, noAnimation){\n\t\t\n\t\tvar animationDuration = g_options.thumb_transition_duration;\n\t\tif(noAnimation && noAnimation === true)\n\t\t\tanimationDuration = 0;\n\t\t\n\t\tvar g_objIconZoom = getButtonZoom(objTile);\n\t\tvar g_objIconLink = getButtonLink(objTile);\n\t\tvar opacity = isActive?1:0;\n\t\t\n\t\tif(g_objIconZoom)\n\t\t\tg_objIconZoom.stop(true).fadeTo(animationDuration, opacity);\n\t\t\n\t\tif(g_objIconLink)\n\t\t\tg_objIconLink.stop(true).fadeTo(animationDuration, opacity);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * set tile over style\n\t */\n\tfunction setOverStyle(data, objTile){\n\t\t\t\t\n\t\tobjTile = jQuery(objTile);\n\t\t\t\t\n\t\tif(g_options.tile_enable_image_effect)\n\t\t\tsetImageOverlayEffect(objTile, true);\n\n\t\tif(g_options.tile_enable_textpanel == true && g_options.tile_textpanel_always_on == false && g_temp.isTextPanelHidden == false)\n\t\t\tsetTextpanelEffect(objTile, true);\n\t\t\n\t\t//show/hide icons - if saparate (if not, they are part of the overlay)\n\t\t//if the type is video and icon always on - the icon should stay\n\t\tif(g_temp.isSaparateIcons && g_options.tile_enable_icons == true){\n\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true);\n\t\t\t\n\t\t\tvar objItem = t.getItemByTile(objTile);\n\t\t\tif(isItemIconAlwaysOn(objItem) == false)\n\t\t\t\tsetIconsEffect(objTile, isSet, false);\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set normal style\n\t */\n\tfunction setNormalStyle(data, objTile){\n\t\t\n\t\tobjTile = jQuery(objTile);\n\t\t\n\t\tif(g_options.tile_enable_image_effect)\n\t\t\tsetImageOverlayEffect(objTile, false);\n\t\t\n\t\tif(g_options.tile_enable_textpanel == true && g_options.tile_textpanel_always_on == false)\n\t\t\tsetTextpanelEffect(objTile, false);\n\t\t\n\t\t//show/hide icons - if saparate (if not, they are part of the overlay)\n\t\tif(g_temp.isSaparateIcons == true && g_options.tile_enable_icons == true){\n\t\t\t\n\t\t\tvar isSet = (g_options.thumb_overlay_reverse == true)?false:true;\n\t\t\t\n\t\t\tvar objItem = t.getItemByTile(objTile);\n\t\t\tif(isItemIconAlwaysOn(objItem) == false)\n\t\t\t\tsetIconsEffect(objTile, isSet, false);\n\t\t\telse{\t//make icon always appear\n\t\t\t\tsetIconsEffect(objTile, true, true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set all tiles normal style\n\t */\n\tfunction setAllTilesNormalStyle(objTileExcept){\n\t\t\n\t\tvar objTiles = g_thumbs.getThumbs().not(objTileExcept);\n\t\tobjTiles.each(function(index, objTile){\n\t\t\tg_thumbs.setThumbNormalStyle(jQuery(objTile));\n\t\t});\n\t\t\n\t}\n\t\n\t\n\tfunction _________________EVENTS________________(){};\n\t\n\t\n\t/**\n\t * on tile size change, place elements\n\t */\n\tfunction onSizeChange(data, objTile, forcePosition){\n\n\t\tobjTile = jQuery(objTile);\n\t\t\n\t\t//position elements only if the image loaded (placed)\n\t\tif(g_options.tile_visible_before_image == true && objTile.data(\"image_placed\") !== true && forcePosition !== true)\n\t\t\treturn(true);\n\n\t\tpositionElements(objTile);\n\t\t\n\t\tg_thumbs.setThumbNormalStyle(objTile);\n\t}\n\t\n\t\n\t/**\n\t * on place image event after images loaded\n\t */\n\tfunction onPlaceImage(data, objTile, objImage){\n\t\t\n\t\tpositionElements(objTile);\n\t\tobjImage.fadeTo(0,1);\n\t\t\n\t\tobjTile.data(\"image_placed\", true);\n\t}\n\t\n\t\n\t/**\n\t * on tile click on mobile devices on normal state\n\t * set the tile over state\n\t */\n\tfunction onMobileClick(objTile){\n\n\t\tif(isTileClickable(objTile) == true){\n\t\t\tg_objThis.trigger(t.events.TILE_CLICK, objTile);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tif(isOverStyle(objTile) == false){\n\t\t\tsetAllTilesNormalStyle(objTile);\t\t\t\n\t\t\tg_thumbs.setThumbOverStyle(objTile);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on tile click event\n\t */\n\tfunction onTileClick(event){\n\t\t\t\t\n\t\tvar objTile = jQuery(this);\n\t\t\n\t\tvar tagname = objTile.prop(\"tagName\").toLowerCase();\n\t\tvar isApproved = true;\n\t\tif(g_temp.funcParentApproveClick && g_temp.funcParentApproveClick() == false)\n\t\t\tisApproved = false;\n\t\t\t\t\n\t\tif(tagname == \"a\"){\n\t\t\t\n\t\t\tif(isApproved == false)\n\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\n\t\t}else{\t\t//in case of div\n\t\t\t\n\t\t\tif(isOverStyle(objTile) == false){\t//mobile click version\n\t\t\t\t\n\t\t\t\tif(isApproved == true)\n\t\t\t\t\tonMobileClick(objTile);\n\t\t\t\t\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(isTileClickable(objTile) == false)\n\t\t\t\t\treturn(true);\n\t\t\t\t\n\t\t\t\tif(isApproved == true)\n\t\t\t\t\tg_objThis.trigger(t.events.TILE_CLICK, objTile);\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * click on zoom button (as tile click)\n\t */\n\tfunction onZoomButtonClick(event){\n\t\t\t\t\n\t\tevent.stopPropagation();\n\t\t\n\t\tvar objTile = jQuery(this).parents(\".ug-tile\");\n\t\t\n\t\tvar isApproved = true;\n\t\t\n\t\tif(g_temp.funcParentApproveClick && g_temp.funcParentApproveClick() == false)\n\t\t\tisApproved = false;\n\t\t\n\t\tif(isOverStyle(objTile) == false){\n\t\t\tonMobileClick(objTile);\n\t\t\treturn(true);\n\t\t}\n\t\t\t\n\t\tif(isApproved == true){\n\t\t\tg_objThis.trigger(t.events.TILE_CLICK, objTile);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on link icon click\n\t */\n\tfunction onLinkButtonClick(event){\n\t\tvar objTile = jQuery(this).parents(\".ug-tile\");\n\t\t\t\t\n\t\tif(g_temp.funcParentApproveClick && g_temp.funcParentApproveClick() == false)\n\t\t\tevent.preventDefault();\n\t\t\n\t\t//allow click only from over style\n\t\tif(isOverStyle(objTile) == false && g_options.tile_as_link == false){\n\t\t\tevent.preventDefault();\n\t\t\tonMobileClick(objTile);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tthis.initEvents = function(){\n\t\t\t\t\n\t\tg_thumbs.initEvents();\n\t\t\n\t\t//connect the over and normal style of the regular thumbs\n\t\tjQuery(g_thumbs).on(g_thumbs.events.SETOVERSTYLE, setOverStyle);\n\t\tjQuery(g_thumbs).on(g_thumbs.events.SETNORMALSTYLE, setNormalStyle);\n\t\tjQuery(g_thumbs).on(g_thumbs.events.PLACEIMAGE, onPlaceImage);\n\t\t\n\t\tg_objWrapper.on(g_temp.eventSizeChange, onSizeChange);\n\t\t\n\t\tg_objParentWrapper.on(\"click\", \".ug-tile\", onTileClick);\n\t\t\n\t\tg_objParentWrapper.on(\"click\", \".ug-tile .ug-button-play\", onZoomButtonClick);\n\t\t\n\t\tg_objParentWrapper.on(\"click\", \".ug-tile .ug-icon-link\", onLinkButtonClick);\n\t}\n\t\n\t\n\t/**\n\t * destroy the element events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objParentWrapper.off(\"click\", \".ug-tile\");\n\t\tg_objParentWrapper.off(\"click\", \".ug-tile .ug-button-play\");\n\t\tg_objParentWrapper.off(\"click\", \".ug-tile .ug-icon-link\");\n\t\t\n\t\tjQuery(g_thumbs).off(g_thumbs.events.SETOVERSTYLE);\n\t\tjQuery(g_thumbs).off(g_thumbs.events.SETNORMALSTYLE);\n\t\tjQuery(g_thumbs).off(g_thumbs.events.PLACEIMAGE);\n\t\tg_objWrapper.off(g_temp.eventSizeChange);\n\t\t\n\t\tif(g_options.tile_enable_textpanel == true){\n\t\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\t\tjQuery.each(objThumbs, function(index, thumb){\t\t\t\t\n\t\t\t\tvar textPanel = getTextPanel(jQuery(thumb));\n\t\t\t\tif(textPanel)\n\t\t\t\t\ttextPanel.destroy();\n\t\t\t});\n\t\t}\n\t\t\n\t\tg_thumbs.destroy();\n\n\t}\n\n\t\n\t/**\n\t * external init\n\t */\n\tthis.init = function(gallery, g_thumbs, customOptions){\n\t\t\n\t\tinit(gallery, g_thumbs, customOptions);\n\t}\n\t\n\t/**\n\t * set fixed mode\n\t */\n\tthis.setFixedMode = function(){\n\t\t\n\t\tg_options.tile_size_by = t.sizeby.GLOBAL_RATIO;\n\t\tg_options.tile_visible_before_image = true;\n\t}\n\t\n\t\n\t/**\n\t * set parent approve click function\n\t */\n\tthis.setApproveClickFunction = function(funcApprove){\n\t\tg_temp.funcParentApproveClick = funcApprove;\n\t}\n\t\n\t\n\t\n\t/**\n\t * resize tile. If no size given, resize to original size\n\t * the resize mode taken from resize modes constants, default is full\n\t */\n\tthis.resizeTile = function(objTile, newWidth, newHeight, resizeMode){\n\t\t\n\t\t\t//if textpanel outside - refresh the textpanel first\n\t\t\tif(g_temp.isTextpanelOutside == true)\n\t\t\t\tpositionElements_textpanel(objTile, \"clone\", newWidth);\n\t\t\t\n\t\t\tif(!newWidth){\n\t\t\t\t\n\t\t\t\tvar newWidth = g_options.tile_width;\n\t\t\t\tvar newHeight = g_options.tile_height;\n\t\t\t\t\n\t\t\t}else{\t\t//only height is missing\n\t\t\t\tif(!newHeight){\n\t\t\t\t\t\n\t\t\t\t\tvar newHeight = t.getTileHeightByWidth(newWidth, objTile);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\tg_functions.setElementSize(objTile, newWidth, newHeight);\n\t\t\t\n\t\t\tswitch(resizeMode){\n\t\t\t\tdefault:\n\t\t\t\tcase t.resizemode.FULL:\n\t\t\t\t\tt.triggerSizeChangeEvent(objTile, true);\n\t\t\t\tbreak;\n\t\t\t\tcase t.resizemode.WRAPPER_ONLY:\n\t\t\t\t\treturn(true);\n\t\t\t\tbreak;\n\t\t\t\tcase t.resizemode.VISIBLE_ELEMENTS:\n\t\t\t\t\t\n\t\t\t\t\tif(g_temp.funcCustomTileHtml){\n\t\t\t\t\t\tt.triggerSizeChangeEvent(objTile, true);\n\t\t\t\t\t\treturn(true);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//resize images\n\t\t\t\t\tpositionElements_images(objTile, newWidth, newHeight, true);\n\t\t\t\t\t\n\t\t\t\t\t//resize text panel, if visible\n\t\t\t\t\tif(g_options.tile_enable_textpanel == true && g_options.tile_textpanel_always_on == true && newWidth){\n\t\t\t\t\t\tpositionElements_textpanel(objTile, \"regular\", newWidth, newHeight);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * resize all tiles \n\t */\n\tthis.resizeAllTiles = function(newWidth, resizeMode, objTiles){\n\t\t\n\t\tmodifyOptionsBeforeRender();\n\t\t\n\t\tvar newHeight = null;\n\t\t\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO)\n\t\t\tnewHeight = t.getTileHeightByWidth(newWidth);\n\t\t\n\t\tif(!objTiles)\n\t\t\tvar objTiles = g_thumbs.getThumbs();\n\t\t\n\t\tobjTiles.each(function(index, objTile){\n\t\t\tt.resizeTile(jQuery(objTile), newWidth, newHeight, resizeMode);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * trigger size change events\n\t * the force is only for fixed size mode\n\t */\n\tthis.triggerSizeChangeEvent = function(objTile, isForce){\n\t\t\n\t\tif(!objTile)\n\t\t\treturn(false);\n\t\t\n\t\tif(!isForce)\n\t\t\tvar isForce = false;\n\t\t\n\t\tg_objWrapper.trigger(g_temp.eventSizeChange, [objTile, isForce]);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * trigger size change event to all tiles\n\t * the force is only for fixed mode\n\t */\n\tthis.triggerSizeChangeEventAllTiles = function(isForce){\n\t\t\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\n\t\tobjThumbs.each(function(){\n\t\t\tvar objTile = jQuery(this);\n\t\t\t\n\t\t\tt.triggerSizeChangeEvent(objTile, isForce);\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\t\n\t/**\n\t * disable all events\n\t */\n\tthis.disableEvents = function(){\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\tobjThumbs.css(\"pointer-events\", \"none\");\n\t}\n\t\n\t\n\t/**\n\t * enable all events\n\t */\n\tthis.enableEvents = function(){\n\t\tvar objThumbs = g_thumbs.getThumbs();\n\t\tobjThumbs.css(\"pointer-events\", \"auto\");\n\t}\n\t\n\t\n\t/**\n\t * set new options\n\t */\n\tthis.setOptions = function(newOptions){\n\t\tg_options = jQuery.extend(g_options, newOptions);\n\t\tg_thumbs.setOptions(newOptions);\n\t}\n\t\n\t\n\t/**\n\t * set new tile size, this function will not resize, and keep ratio\n\t */\n\tthis.setTileSizeOptions = function(newTileWidth){\n\t\t\n\t\tif(g_options.tile_size_by !== t.sizeby.GLOBAL_RATIO)\n\t\t\tthrow new Error(\"setNewTileOptions works with global ration only\");\n\t\t\n\t\tg_options.tile_width = newTileWidth;\n\t\tg_options.tile_height = Math.floor(newTileWidth * g_temp.ratioByHeight);\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set custom tile html function\n\t */\n\tthis.setCustomFunctions = function(funcCustomHtml, funcPositionElements){\n\t\tg_temp.funcCustomTileHtml = funcCustomHtml;\n\t\tg_temp.funcCustomPositionElements = funcPositionElements;\n\t}\n\t\n\t\n\t/**\n\t * run the tile design\n\t */\n\tthis.run = function(newOnly){\n\t\t\n\t\t//resize all tiles\n\t\tvar getMode = g_thumbs.type.GET_THUMBS_ALL;\n\t\tif(newOnly === true)\n\t\t\tgetMode = g_thumbs.type.GET_THUMBS_NEW;\n\t\t\n\t\tvar objThumbs = g_thumbs.getThumbs(getMode);\n\t\t\n\t\tif(g_options.tile_size_by == t.sizeby.GLOBAL_RATIO){\n\t\t\tt.resizeAllTiles(g_options.tile_width, t.resizemode.WRAPPER_ONLY, objThumbs);\n\t\t}\n\t\t\n\t\t//hide original image if image effect active\n\t\tif(g_options.tile_enable_image_effect == true && g_options.tile_image_effect_reverse == false)\n\t\t\tobjThumbs.children(\".ug-thumb-image\").fadeTo(0,0);\n\t\t\n\t\tg_thumbs.setHtmlProperties(objThumbs);\n\t\t\n\t\tif(g_options.tile_visible_before_image == true){\n\t\t\t\n\t\t\t//if textpanel outside - refresh the textpanel first\t\t\t\n\t\t\tobjThumbs.children(\".ug-thumb-image\").fadeTo(0,0);\n\t\t\tg_thumbs.loadThumbsImages();\n\t\t}\n\t\t\n\t}\n\n\t\n\tthis._____________EXTERNAL_GETTERS____________=function(){};\n\t\n\t\n\t/**\n\t * get thumbs general option\n\t */\n\tthis.getObjThumbs = function(){\n\t\treturn g_thumbs;\n\t}\n\t\n\t/**\n\t * get options\n\t */\n\tthis.getOptions = function(){\n\t\treturn g_options;\n\t}\n\n\t/**\n\t * get tile image\n\t */\n\tthis.getTileImage = function(objTile){\n\t\tvar objImage = objTile.find(\"img.ug-thumb-image\");\n\t\treturn(objImage);\n\t}\n\n\t\n\t/**\n\t * get item from tile\n\t */\n\tthis.getItemByTile = function(objTile){\n\t\treturn g_thumbs.getItemByThumb(objTile);\n\t}\n\t\n\t\n\t/**\n\t * get tile height by width\n\t */\n\tthis.getTileHeightByWidth = function(newWidth, objTile){\n\t\t\n\t\tvar ratio = getTileRatio(objTile);\n\t\t\n\t\tif(ratio === null)\n\t\t\treturn(null);\n\t\t\n\t\tvar height = Math.floor( (newWidth - g_temp.tileInnerReduce) * ratio) + g_temp.tileInnerReduce;\n\t\t\n\t\tif(objTile && g_temp.isTextpanelOutside == true && g_options.tile_size_by == t.sizeby.IMAGE_RATIO)\n\t\t\theight += getTextPanelHeight(objTile);\n\t\t\n\t\treturn(height);\n\t}\n\t\n\t\n\t/**\n\t * get tile original size\n\t */\n\tthis.getTileImageSize = function(objTile){\n        var objItem = t.getItemByTile(objTile);\n        if(!objItem.thumbWidth || !objItem.thumbHeight)\n        \tthrow new Error(\"Can't get image size - image not inited.\");\n        \n        var objSize = {\n        \t\twidth: objItem.thumbWidth,\n        \t\theight: objItem.thumbHeight\n        };\n        \n        return(objSize);\n\t}\n\t\n\t\n\t/**\n\t * get tile size\n\t */\n\tthis.getGlobalTileSize = function(){\n\t\t\n\t\tif(g_options.tile_size_by != t.sizeby.GLOBAL_RATIO)\n\t\t\tthrow new Error(\"The size has to be global ratio\");\n\t\t\n\t\tvar objSize = {\n\t\t\t\twidth: g_options.tile_width,\n\t\t\t\theight: g_options.tile_height\n\t\t};\n\t\t\n\t\treturn(objSize);\n\t}\n\t\n\t\n}\n\n/**\n * avia control class\n * addon to strip gallery\n */\nfunction UGAviaControl(){\n\n\tvar g_parent, g_gallery, g_objects, g_objStrip, g_objStripInner, g_options;\n\tvar g_isVertical;\n\t\n\tvar g_temp = {\n\t\ttouchEnabled:false,\t\t\t//variable that tells if touch event was before move event\n\t\tisMouseInsideStrip: false,\n\t\tstrip_finalPos:0,\n\t\thandle_timeout:\"\",\n\t\tisStripMoving:false,\n\t\tisControlEnabled: true\n\t};\n\t\n\t\n\t/**\n\t * enable the control\n\t */\n\tthis.enable = function(){\n\t\tg_temp.isControlEnabled = true;\n\t}\n\t\n\t/**\n\t * disable the control\n\t */\n\tthis.disable = function(){\n\t\tg_temp.isControlEnabled = false;\t\t\n\t}\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objParent){\n\t\tg_parent = objParent;\n\t\t\n\t\tg_objects = objParent.getObjects();\n\t\t\t\t\n\t\tg_gallery = g_objects.g_gallery;\n\t\t\n\t\tg_objStrip = g_objects.g_objStrip;\n\t\tg_objStripInner = g_objects.g_objStripInner;\n\t\tg_options = g_objects.g_options;\n\t\tg_isVertical = g_objects.isVertical;\t\t\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t/**\n\t * get mouse position from event according the orientation\n\t */\n\tfunction getMousePos(event){\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\treturn(event.pageX);\n\t\t\n\t\treturn(event.pageY);\n\t}\n\t\n\t/**\n\t * handle avia strip control event on body mouse move\n\t */\n\tfunction initEvents(event){\n\t\t\n\t\t//make sure that the avia control will not work on touch devices\n\t\tjQuery(\"body\").on(\"touchstart\", function(event){\n\t\t\t\n\t\t\tif(g_temp.isControlEnabled == false)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_temp.touchEnabled = true;\n\t\t\t\n\t\t});\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").mousemove(function(event){\n\t\t\t\n\t\t\tif(g_temp.isControlEnabled == false)\n\t\t\t\treturn(true);\n\t\t\t\t\t\t\t\t\t\n\t\t\t//protection for touch devices, disable the avia events\n\t\t\tif(g_temp.touchEnabled == true){\n\t\t\t\tjQuery(\"body\").off(\"mousemove\");\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t\tg_temp.isMouseInsideStrip = g_objStrip.ismouseover();\n\t\t\tvar strip_touch_active = g_parent.isTouchMotionActive();\n\t\t\t\n\t\t\tif(g_temp.isMouseInsideStrip == true && strip_touch_active == false){\n\t\t\t\t\n\t\t\t\tvar mousePos = getMousePos(event);\n\t\t\t\t\n\t\t\t\tmoveStripToMousePosition(mousePos);\n\t\t\t}else{\n\t\t\t\tstopStripMovingLoop();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the avia control events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tjQuery(\"body\").off(\"touchstart\");\n\t\tjQuery(\"body\").off(\"mousemove\");\n\n\t}\n\t\n\t\n\t/**\n\t * get inner y position according mouse y position on the strip\n\t */\n\tfunction getInnerPosY(mouseY){\n\n\t\tvar innerOffsetTop = g_options.strip_padding_top;\n\t\tvar innerOffsetBottom = g_options.strip_padding_bottom;\n\n\t\tvar stripHeight = g_objStrip.height();\n\t\tvar innerHeight = g_objStripInner.height();\t\t\n\t\t\n\t\t//if all thumbs visible, no need to move\n\t\tif(stripHeight > innerHeight)\n\t\t\treturn(null);\n\t\t\n\t\t//find y position inside the strip\n\t\tvar stripOffset = g_objStrip.offset();\t\t\n\t\tvar offsetY = stripOffset.top;\n\t\tvar posy = mouseY - offsetY - innerOffsetTop;\n\t\tif(posy < 0)\n\t\t\treturn(null);\n\t\t\n\t\t//set measure line parameters\n\t\tvar mlineStart = g_options.thumb_height;\n\t\tvar mlineEnd = stripHeight - g_options.thumb_height;\n\t\tvar mLineSize = mlineEnd - mlineStart;\n\t\t\t\t\n\t\t//fix position borders on the measure line\n\t\tif(posy < mlineStart)\n\t\t\tposy = mlineStart;\n\t\t\n\t\tif(posy > mlineEnd)\n\t\t\tposy = mlineEnd;\n\t\t\n\t\t//count the ratio of the position on the measure line\n\t\tvar ratio = (posy - mlineStart) / mLineSize;\n\t\tvar innerPosY = (innerHeight - stripHeight) * ratio;\n\t\tinnerPosY = Math.round(innerPosY) * -1 + innerOffsetTop;\n\t\t\n\t\treturn(innerPosY);\n\t}\n\n\t\n\t/**\n\t * get inner x position according mouse x position on the strip\n\t */\n\tfunction getInnerPosX(mouseX){\n\t\t\n\t\tvar innerOffsetLeft = g_options.strip_padding_left;\n\t\tvar innerOffsetRight = g_options.strip_padding_right;\n\t\t\n\t\tvar stripWidth = g_objStrip.width() - innerOffsetLeft - innerOffsetRight;\n\t\tvar innerWidth = g_objStripInner.width();\n\t\t\n\t\t//if all thumbs visible, no need to move\n\t\tif(stripWidth > innerWidth)\n\t\t\treturn(null);\n\t\t\n\t\tvar stripOffset = g_objStrip.offset();\n\t\tvar offsetX = stripOffset.left;\n\t\tvar posx = mouseX - offsetX - innerOffsetLeft;\n\t\t\n\t\t//set measure line parameters\n\t\tvar mlineStart = g_options.thumb_width;\n\t\tvar mlineEnd = stripWidth - g_options.thumb_width;\n\t\tvar mLineSize = mlineEnd - mlineStart;\n\t\t\n\t\t//fix position borders on the measure line\n\t\tif(posx < mlineStart)\n\t\t\tposx = mlineStart;\n\t\t\n\t\tif(posx > mlineEnd)\n\t\t\tposx = mlineEnd;\n\t\t\n\t\t//count the ratio of the position on the measure line\n\t\tvar ratio = (posx - mlineStart) / mLineSize;\n\t\tvar innerPosX = (innerWidth - stripWidth) * ratio;\n\t\tinnerPosX = Math.round(innerPosX) * -1 + innerOffsetLeft;\n\t\t\n\t\t\n\t\treturn(innerPosX);\n\t}\n\t\t\n\t\t\n\t/**\n\t * move strip stap to final position\n\t */\n\tfunction moveStripStep(){\n\t\t\n\t\tif(g_temp.is_strip_moving == false){\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar innerPos = g_parent.getInnerStripPos();\n\t\t\t\t\n\t\tif(Math.floor(innerPos) == Math.floor(g_temp.strip_finalPos)){\n\t\t\tstopStripMovingLoop();\n\t\t}\n\t\t\n\t\t//calc step\n\t\tvar diff = Math.abs(g_temp.strip_finalPos - innerPos);\n\t\t\n\t\tvar dpos;\n\t\tif(diff < 1){\n\t\t\tdpos = diff;\n\t\t}\n\t\telse{\n\t\t\n\t\t\tdpos = diff / 4;\n\t\t\tif(dpos > 0 && dpos < 1)\n\t\t\t\tdpos = 1;\n\t\t}\t\t\n\t\t\n\t\tif(g_temp.strip_finalPos < innerPos)\n\t\t\tdpos = dpos * -1;\n\t\t\t\t\n\t\tvar newPos = innerPos + dpos;\n\t\t\n\t\tg_parent.positionInnerStrip(newPos);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * start loop of strip moving\n\t */\n\tfunction startStripMovingLoop(){\n\t\t\n\t\tif(g_temp.isStripMoving == true)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.isStripMoving = true;\n\t\tg_temp.handle_timeout = setInterval(moveStripStep,10);\n\t}\n\t\n\t/**\n\t * stop loop of strip moving\n\t */\n\tfunction stopStripMovingLoop(){\n\t\t\n\t\tif(g_temp.isStripMoving == false)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.isStripMoving = false;\n\t\tg_temp.handle_timeout = clearInterval(g_temp.handle_timeout);\n\t}\n\n\t/**\n\t * get inner position according the orientation\n\t * taken by the mouse position\n\t */\n\tfunction getInnerPos(mousePos){\n\t\t\n\t\tif(g_isVertical == false)\n\t\t\treturn getInnerPosX(mousePos);\n\t\telse\n\t\t\treturn getInnerPosY(mousePos);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * move the strip to mouse position on it\n\t * mousex - mouse position relative to the document\n\t */\n\tfunction moveStripToMousePosition(mousePos){\t\t\n\t\t\n\t\tvar innerPos = getInnerPos(mousePos);\n\t\t\n\t\tif(innerPos === null)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.is_strip_moving = true;\n\t\tg_temp.strip_finalPos = innerPos;\n\t\t\t\t\n\t\tstartStripMovingLoop();\n\t}\n\t\n}\n\n/**\n * slider class\n * addon to strip gallery\n */\nfunction UGSlider(){\n\t\n\tvar t = this, g_objThis = jQuery(t);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper, g_objThumbs;\t\n\t//the video arrows is independent arrows that is not sitting on the controls\n\tvar g_objSlider, g_objInner, g_objSlide1, g_objSlide2, g_objSlide3, g_objArrowLeft, g_objArrowRight;\n\tvar g_objTouchSlider, g_objZoomSlider, g_objZoomPanel, g_objButtonPlay = null, g_objButtonFullscreen = null, g_objBullets = null;\n\tvar g_objVideoPlayer = new UGVideoPlayer(), g_optionsPrefix;\n\tvar g_functions = new UGFunctions(), g_objProgress = null, g_objTextPanel = null;\n\t\n\t\n\tthis.events = {\t\t\n\t\tITEM_CHANGED: \"item_changed\",\t\t\t\t//on item changed\n\t\tBEFORE_SWITCH_SLIDES: \"before_switch\",\t\t//before slides switching\n\t\tBEFORE_RETURN: \"before_return\",\t\t\t\t//before return from pan or from zoom\n\t\tAFTER_RETURN: \"after_return\",\t\t\t\t//after return from pan or from zoom\n\t\tZOOM_START: \"slider_zoom_start\",\t\t\t//on zoom start \n\t\tZOOM_END: \"slider_zoom_end\",\t\t\t\t//on zoom move \n\t\tZOOMING: \"slider_zooming\",\t\t\t\t\t//on zooming\n\t\tZOOM_CHANGE: \"slider_zoom_change\",\t\t\t//on slide image image zoom change\t\n\t\tSTART_DRAG: \"start_drag\",\t\t\t\t\t//on slider drag start\n\t\tAFTER_DRAG_CHANGE: \"after_drag_change\",\t\t//after finish drag chagne transition\n\t\tACTION_START: \"action_start\",\t\t\t\t//on slide action start\n\t\tACTION_END: \"action_end\",\t\t\t\t\t//on slide action stop\n\t\tCLICK: \"slider_click\",\t\t\t\t\t\t//on click event\n\t\tTRANSITION_START:\"slider_transition_start\",\t//before transition start event\n\t\tTRANSITION_END:\"slider_transition_end\",\t\t//on transition end event\n\t\tAFTER_PUT_IMAGE: \"after_put_image\",\t\t\t//after put slide image\n\t\tIMAGE_MOUSEENTER: \"slider_image_mouseenter\", //on slide image mouseonter\n\t\tIMAGE_MOUSELEAVE: \"slider_image_mouseleave\",\t \t\t//on slide image mouseleave\n\t\tCURRENTSLIDE_LOAD_START: \"slider_current_loadstart\",\t//on current slide load image start\n\t\tCURRENTSLIDE_LOAD_END: \"slider_current_loadend\"\t\t//on finish load current slide image\n\t}\n\t\n\tvar g_options = {\n\t\t  slider_scale_mode: \"fill\",\t\t\t\t\t//fit: scale down and up the image to always fit the slider\n\t\t  \t\t\t\t\t\t\t\t\t\t\t\t//down: scale down only, smaller images will be shown, don't enlarge images (scale up)\n\t\t  \t\t\t\t\t\t\t\t\t\t\t\t//fill: fill the entire slider space by scaling, cropping and centering the image\n\t\t  \t\t\t\t\t\t\t\t\t\t\t\t//fitvert: make the image always fill the vertical slider area\n\t\t  slider_scale_mode_media: \"fill\",\t\t\t\t//fill, fit, down, fitvert - scale mode on media items\n\t\t  slider_scale_mode_fullscreen: \"down\",\t\t\t//fill, fit, down, fitvert - scale mode on fullscreen.\n\t\t  \t\t  \n\t\t  slider_item_padding_top: 0,\t\t\t\t\t//padding top of the slider item\n\t\t  slider_item_padding_bottom: 0,\t\t\t\t//padding bottom of the slider item\n\t\t  slider_item_padding_left: 0,\t\t\t\t\t//padding left of the slider item\n\t\t  slider_item_padding_right: 0,\t\t\t\t\t//padding right of the slider item\n\t\t  \n\t\t  slider_background_color: \"\",\t\t\t\t\t//slider background color, set if you want to change default\n\t\t  slider_background_opacity: 1,\t\t\t\t\t//slider background opacity\n\t\t  \n\t\t  slider_image_padding_top: 0,\t\t\t\t\t//padding top of the image inside the item\n\t\t  slider_image_padding_bottom: 0,\t\t\t\t//padding bottom of the image inside the item\n\t\t  slider_image_padding_left: 0,\t\t\t\t\t//padding left of the image inside the item\n\t\t  slider_image_padding_right: 0,\t\t\t\t//padding right of the image inside the item\n\n\t\t  slider_image_border: false,\t\t\t\t\t//enable border around the image\n\t\t  slider_image_border_width: 10,\t\t\t\t//image border width\n\t\t  slider_image_border_color: \"#ffffff\",\t\t\t//image border color\n\t\t  slider_image_border_radius: 0,\t\t\t\t//image border radius\n\t\t  slider_image_border_maxratio: 0.35,\t\t\t//max ratio that the border can take from the image\n\t\t  slider_image_shadow: false,\t\t\t\t\t//enable border shadow the image\n\t\t  \n\t\t  slider_video_constantsize: false, \t\t\t//constant video size mode for video items\n\t\t  slider_video_constantsize_scalemode: \"fit\", \t//fit,down: constant video size scale mode\n\t\t  slider_video_constantsize_width: 854,\t\t\t//constant video size width\n\t\t  slider_video_constantsize_height: 480,\t\t//constant video size height\n\t\t  \n\t\t  slider_video_padding_top: 0,\t\t\t\t\t//padding top of the video player inside the item\n\t\t  slider_video_padding_bottom: 0,\t\t\t\t//padding bottom of the video player inside the item\n\t\t  slider_video_padding_left: 0,\t\t\t\t\t//padding left of the video player inside the item\n\t\t  slider_video_padding_right: 0,\t\t\t\t//padding right of the video player inside the item\n\t\t  \n\t\t  slider_video_enable_closebutton: true,\t\t//enable video close button\n\t\t  \n\t\t  slider_transition: \"slide\",\t\t\t\t\t//fade, slide - the transition of the slide change\n\t\t  slider_transition_speed:300,\t\t\t\t \t//transition duration of slide change\n\t\t  slider_transition_easing: \"easeInOutQuad\",\t//transition easing function of slide change\n\t\t  \n\t\t  slider_control_swipe:true,\t\t\t\t\t//true,false - enable swiping control\n\t\t  slider_control_zoom:true,\t\t\t\t\t\t//true, false - enable zooming control\n\t\t  slider_zoom_mousewheel: true,\t\t\t\t\t//enable zoom on mousewheel\n\t\t  slider_vertical_scroll_ondrag: false,\t\t\t//vertical scroll on slider area drag\t\t\t\t\t  \n\t\t  slider_loader_type: 1,\t\t\t\t\t\t//shape of the loader (1-7)\n\t\t  slider_loader_color:\"white\",\t\t\t\t\t//color of the loader: (black , white)\n\t\t  slider_enable_links: true,\t\t\t\t\t//enable slide as link functionality\n\t\t  slider_links_newpage: false,\t\t\t\t\t//open the slide link in new page\n\t\t  \n\t\t  slider_enable_bullets: false,\t\t\t\t\t//enable the bullets onslider element\n\t\t  slider_bullets_skin: \"\",\t\t\t\t\t\t//skin of the bullets, if empty inherit from gallery skin\n\t\t  slider_bullets_space_between: -1,\t\t\t\t//set the space between bullets. If -1 then will be set default space from the skins\n\t\t  slider_bullets_align_hor:\"center\",\t\t\t//left, center, right - bullets horizontal align\n\t\t  slider_bullets_align_vert:\"bottom\",\t\t\t//top, middle, bottom - bullets vertical algin\n\t\t  slider_bullets_offset_hor:0,\t\t\t\t\t//bullets horizontal offset \n\t\t  slider_bullets_offset_vert:10,\t\t\t\t//bullets vertical offset\n\t\t  \n\t\t  slider_enable_arrows: true,\t\t\t\t\t//enable arrows onslider element\n\t\t  slider_arrows_skin: \"\",\t\t\t\t\t\t//skin of the slider arrows, if empty inherit from gallery skin\n\t\t  \n\t\t  slider_arrow_left_align_hor:\"left\",\t  \t\t//left, center, right - left arrow horizonal align\n\t\t  slider_arrow_left_align_vert:\"middle\", \t\t//top, middle, bottom - left arrow vertical align\n\t\t  slider_arrow_left_offset_hor:20,\t\t  \t\t//left arrow horizontal offset\n\t\t  slider_arrow_left_offset_vert:0,\t\t  \t\t//left arrow vertical offset\n\t\t  \n\t\t  slider_arrow_right_align_hor:\"right\",   \t\t//left, center, right - right arrow horizontal algin\n\t\t  slider_arrow_right_align_vert:\"middle\", \t\t//top, middle, bottom - right arrow vertical align\n\t\t  slider_arrow_right_offset_hor:20,\t   \t\t\t//right arrow horizontal offset \n\t\t  slider_arrow_right_offset_vert:0,\t   \t\t\t//right arrow vertical offset\n\t\t  \n\t\t  slider_enable_progress_indicator: true,\t\t //enable progress indicator element\n\t\t  slider_progress_indicator_type: \"pie\",\t\t //pie, pie2, bar (if pie not supported, it will switch to bar automatically)\n\t\t  slider_progress_indicator_align_hor:\"right\",   //left, center, right - progress indicator horizontal align\n\t\t  slider_progress_indicator_align_vert:\"top\",    //top, middle, bottom - progress indicator vertical align\n\t\t  slider_progress_indicator_offset_hor:10,\t     //progress indicator horizontal offset \n\t\t  slider_progress_indicator_offset_vert:10,\t     //progress indicator vertical offset\n\t\t  \n\t\t  slider_enable_play_button: true,\t\t\t\t //true,false - enable play / pause button onslider element\n\t\t  slider_play_button_skin: \"\",\t\t\t\t\t //skin of the slider play button, if empty inherit from gallery skin\n\t\t  slider_play_button_align_hor:\"left\",    \t\t //left, center, right - play button horizontal align\n\t\t  slider_play_button_align_vert:\"top\",     \t\t //top, middle, bottom - play button vertical align\n\t\t  slider_play_button_offset_hor:40,\t       \t\t //play button horizontal offset \n\t\t  slider_play_button_offset_vert:8,\t   \t\t\t //play button vertical offset\n\t\t  slider_play_button_mobilehide:false,\t\t \t //hide the play button on mobile\n\t\t  \n\t\t  slider_enable_fullscreen_button: true,\t\t //true,false - enable fullscreen button onslider element\n\t\t  slider_fullscreen_button_skin: \"\",\t\t\t //skin of the slider fullscreen button, if empty inherit from gallery skin\n\t\t  slider_fullscreen_button_align_hor:\"left\",     //left, center, right\t- fullscreen button horizonatal align\n\t\t  slider_fullscreen_button_align_vert:\"top\",     //top, middle, bottom - fullscreen button vertical align\n\t\t  slider_fullscreen_button_offset_hor:11,\t     //fullscreen button horizontal offset \n\t\t  slider_fullscreen_button_offset_vert:9,\t   \t //fullscreen button vertical offset\n\t\t  slider_fullscreen_button_mobilehide:false,\t //hide the button on mobile\n\t\t  \n\t\t  slider_enable_zoom_panel: true,\t\t\t\t //true,false - enable the zoom buttons, works together with zoom control.\n\t\t  slider_zoompanel_skin: \"\",\t\t\t\t\t //skin of the slider zoom panel, if empty inherit from gallery skin\t\t  \n\t\t  slider_zoompanel_align_hor:\"left\",    \t\t //left, center, right - zoom panel horizontal align\n\t\t  slider_zoompanel_align_vert:\"top\",     \t \t //top, middle, bottom - zoom panel vertical align\n\t\t  slider_zoompanel_offset_hor:12,\t       \t\t //zoom panel horizontal offset \n\t\t  slider_zoompanel_offset_vert:92,\t   \t\t\t //zoom panel vertical offset\n\t\t  slider_zoompanel_mobilehide:false,\t\t     //hide the zoom panel on mobile\n\t\t  \n\t\t  slider_controls_always_on: false,\t\t\t\t//true,false - controls are always on, false - show only on mouseover\n\t\t  slider_controls_appear_ontap: true,\t\t\t//true,false - appear controls on tap event on touch devices\n\t\t  slider_controls_appear_duration: 300,\t\t\t//the duration of appearing controls\n\t\t  \n\t\t  slider_enable_text_panel: true,\t\t\t\t//true,false - enable the text panel\n\t\t  slider_textpanel_always_on: true,\t\t\t\t//true,false - text panel are always on, false - show only on mouseover\n\t\t  \n\t\t  slider_videoplay_button_type: \"square\"\t\t//square, round - the videoplay button type, square or round\t\n\t};\n\t\n\t\n\t//default options for bar progress incicator\n\tvar g_defaultsProgressBar = {\n\t\t  slider_progress_indicator_align_hor:\"left\",    \t//left, center, right\n\t\t  slider_progress_indicator_align_vert:\"bottom\",    //top, middle, bottom\n\t\t  slider_progress_indicator_offset_hor:0,\t       \t//horizontal offset \n\t\t  slider_progress_indicator_offset_vert:0\t   \t\t//vertical offset\n\t};\n\t\n\tvar g_temp = {\n\t\tisRunOnce: false,\n\t\tisTextPanelSaparateHover: false,\t\t\t\t\t//if the panel need to be appeared without the controls object on mouseover\n\t\tnumPrev:1,\n\t\tnumCurrent:2,\n\t\tnumNext: 3,\n\t\tisControlsVisible: true,\n\t\tcurrentControlsMode: \"image\"\n\t};\n\t\n\tfunction __________GENERAL___________(){};\n\t\n\t\n\t/**\n\t * init the slider\n\t */\n\tfunction initSlider(objGallery, objOptions, optionsPrefix){\n\t\tg_gallery = objGallery;\n\t\t\t\t\n\t\t//change options by prefix\n\t\tif(optionsPrefix){\n\t\t\tg_optionsPrefix = optionsPrefix;\n\t\t\tobjOptions = g_functions.convertCustomPrefixOptions(objOptions, g_optionsPrefix, \"slider\");\n\t\t}\n\t\t\n\t\tg_objGallery = jQuery(objGallery);\n\t\t\n\t\tvar objects = g_gallery.getObjects();\t\t\n\t\tg_objWrapper = objects.g_objWrapper;\n\t\tg_objThumbs = objects.g_objThumbs;\n\t\t\n\t\t//set progress indicator bar defaults if type bar\n\t\tif(objOptions.hasOwnProperty(\"slider_progress_indicator_type\"))\n\t\t\tg_options.slider_progress_indicator_type = objOptions.slider_progress_indicator_type;\n\t\t\n\t\tif(g_options.slider_progress_indicator_type == \"bar\"){\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsProgressBar);\n\t\t}\n\t\t\t\t\n\t\tif(objOptions)\n\t\t\tt.setOptions(objOptions);\n\t\t\n\t\tprocessOptions();\n\t\t\n\t\t//init bullets:\n\t\tif(g_options.slider_enable_bullets == true){\n\t\t\tg_objBullets = new UGBullets();\n\t\t\tvar bulletsOptions = {\n\t\t\t\t\tbullets_skin: g_options.slider_bullets_skin,\n\t\t\t\t\tbullets_space_between: g_options.slider_bullets_space_between\n\t\t\t}\n\t\t\tg_objBullets.init(g_gallery, bulletsOptions);\n\t\t}\n\t\t\n\t\t//init text panel\n\t\tif(g_options.slider_enable_text_panel){\n\t\t\tg_objTextPanel = new UGTextPanel();\n\t\t\tg_objTextPanel.init(g_gallery, g_options, \"slider\");\n\t\t}\n\t\t\n\t\tif(g_options.slider_enable_zoom_panel){\n\t\t\tg_objZoomPanel = new UGZoomButtonsPanel();\n\t\t\tg_objZoomPanel.init(t, g_options);\n\t\t}\n\t\t\n\t\tvar galleryID = g_gallery.getGalleryID();\n\t\t\n\t\t//init video player\n\t\tg_objVideoPlayer.init(g_options, false, galleryID);\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the slider functionality\n\t */\n\tfunction runSlider(){\n\t\t\n\t\tif(g_temp.isRunOnce == true)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.isRunOnce = true;\n\t\t\n\t\t//set background color\n\t   if(g_options.slider_background_color){\t   \t\t\n\t\t   var bgColor = g_options.slider_background_color;\n\t\t   \n\t\t   if(g_options.slider_background_opacity != 1)\n\t\t\t   bgColor = g_functions.convertHexToRGB(bgColor, g_options.slider_background_opacity);\n\t\t   \n\t\t   g_objSlider.css(\"background-color\", bgColor);\n\t   \n\t   }else if(g_options.slider_background_opacity != 1){\t//set opacity with default color\n\t\t\n\t\t   bgColor = g_functions.convertHexToRGB(\"#000000\", g_options.slider_background_opacity);\n\t\t   g_objSlider.css(\"background-color\", bgColor);\n\t  \n\t   }\n\t   \n\t\t//init touch slider control\n\t\tif(g_options.slider_control_swipe == true){\n\t\t\tg_objTouchSlider = new UGTouchSliderControl();\n\t\t\tg_objTouchSlider.init(t, g_options);\n\t\t}\n\n\t\t//init zoom slider control\n\t\tif(g_options.slider_control_zoom == true){\n\t\t\tg_objZoomSlider = new UGZoomSliderControl();\n\t\t\tg_objZoomSlider.init(t, g_options);\n\t\t}\n\t\t\n\t\t//run the text panel\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.run();\n\t\t\n\t\tinitEvents();\t\t\n\t}\n\t\n\t\n\t/**\n\t * process the options\n\t */\n\tfunction processOptions(){\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\t\n\t\t//set skins:\n\t\tvar globalSkin = galleryOptions.gallery_skin;\n\t\t\n\t\tif(g_options.slider_bullets_skin == \"\")\n\t\t\tg_options.slider_bullets_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_arrows_skin == \"\")\n\t\t\tg_options.slider_arrows_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_zoompanel_skin == \"\")\n\t\t\tg_options.slider_zoompanel_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_play_button_skin == \"\")\n\t\t\tg_options.slider_play_button_skin = globalSkin;\n\t\t\n\t\tif(g_options.slider_fullscreen_button_skin == \"\")\n\t\t\tg_options.slider_fullscreen_button_skin = globalSkin;\n\t\t\n\t\tg_options.video_enable_closebutton = g_options.slider_video_enable_closebutton;\n\t\t\n\t\t//set mousewheel option depends on the gallery option\n\t\tif(galleryOptions.gallery_mousewheel_role != \"zoom\")\n\t\t\tg_options.slider_zoom_mousewheel = false;\n\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get html slide\n\t */\n\tfunction getHtmlSlide(loaderClass, numSlide){\n\t\t\n\t\tvar classVideoplay = \"ug-type-square\";\n\t\tif(g_options.slider_videoplay_button_type == \"round\")\n\t\t\tclassVideoplay = \"ug-type-round\";\n\t\t\n\t\tvar html = \"\";\n\t\thtml += \"<div class='ug-slide-wrapper ug-slide\"+numSlide+\"'>\";\n\t\thtml += \"<div class='ug-item-wrapper'></div>\";\n\t\thtml += \"<div class='ug-slider-preloader \"+loaderClass+\"'></div>\";\n\t\thtml += \"<div class='ug-button-videoplay \"+classVideoplay+\"' style='display:none'></div>\";\n\t\thtml += \"</div>\";\n\t\t\n\t\treturn(html);\n\t}\n\t\n\t\n\t/**\n\t * set the slider html\n\t */\n\tfunction setHtmlSlider(objParent){\n\t\t\n\t\tif(objParent)\n\t\t\tg_objWrapper = objParent;\n\t\t\n\t\t//get if the slide has controls\n\t\tvar loaderClass = getLoaderClass();\n\t\tvar galleryOptions = g_gallery.getOptions();\n\t\t\n\t\tvar html = \"<div class='ug-slider-wrapper'>\";\n\t\t\n\t\thtml += \"<div class='ug-slider-inner'>\";\n\t\thtml += getHtmlSlide(loaderClass,1);\n\t\thtml += getHtmlSlide(loaderClass,2);\n\t\thtml += getHtmlSlide(loaderClass,3);\n\t\t\t\t\n\t\thtml += \"</div>\";\t//end inner\n\t\t\n\t\t//----------------\n\t\t\t\t\n\t\t//add arrows\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\thtml += \"<div class='ug-slider-control ug-arrow-left ug-skin-\"+g_options.slider_arrows_skin+\"'></div>\";\n\t\t\thtml += \"<div class='ug-slider-control ug-arrow-right ug-skin-\"+g_options.slider_arrows_skin+\"'></div>\";\n\t\t}\n\t\t\n\t\t//add play button\n\t\tif(g_options.slider_enable_play_button == true){\n\t\t\thtml += \"<div class='ug-slider-control ug-button-play ug-skin-\"+g_options.slider_play_button_skin+\"'></div>\";\n\t\t}\n\t\t\n\t\t//add fullscreen button\n\t\tif(g_options.slider_enable_fullscreen_button == true){\n\t\t\thtml += \"<div class='ug-slider-control ug-button-fullscreen ug-skin-\"+g_options.slider_fullscreen_button_skin+\"'></div>\";\n\t\t}\n\t\t\n\t\t\n\t\thtml +=\t\"</div>\";\t//end slider\n\t\t\n\t\t\n\t\tg_objWrapper.append(html);\n\t\t\n\t\t//----------------\n\t\t\n\t\t//set objects\n\t\tg_objSlider = g_objWrapper.children(\".ug-slider-wrapper\");\n\t\tg_objInner = g_objSlider.children(\".ug-slider-inner\");\n\t\t\n\t\t\n\t\tg_objSlide1 = g_objInner.children(\".ug-slide1\");\n\t\tg_objSlide2 = g_objInner.children(\".ug-slide2\");\n\t\tg_objSlide3 = g_objInner.children(\".ug-slide3\");\n\t\t\n\t\t//set slides data\n\t\tg_objSlide1.data(\"slidenum\",1);\n\t\tg_objSlide2.data(\"slidenum\",2);\n\t\tg_objSlide3.data(\"slidenum\",3);\n\t\t\t\t\n\t\t//add bullets\n\t\tif(g_objBullets)\n\t\t\tg_objBullets.appendHTML(g_objSlider);\n\t\t\n\t\t//----------------\n\t\t\n\t\t//get arrows object\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\tg_objArrowLeft = g_objSlider.children(\".ug-arrow-left\");\n\t\t\tg_objArrowRight = g_objSlider.children(\".ug-arrow-right\");\n\t\t}\n\t\t\t\t\n\t\t//get play button\n\t\tif(g_options.slider_enable_play_button == true){\n\t\t\tg_objButtonPlay = g_objSlider.children(\".ug-button-play\");\n\t\t}\n\t\t\n\t\t//get fullscreen button\n\t\tif(g_options.slider_enable_fullscreen_button == true){\n\t\t\tg_objButtonFullscreen = g_objSlider.children(\".ug-button-fullscreen\");\n\t\t}\n\t\t\n\t\t\n\t\t//----------------\n\t\t\n\t\t//add progress indicator\n\t\tif(g_options.slider_enable_progress_indicator == true){\n\t\t\t\n\t\t\tg_objProgress = g_functions.initProgressIndicator(g_options.slider_progress_indicator_type, g_options, g_objSlider);\n\t\t\t\n\t\t\tvar finalType = g_objProgress.getType();\n\t\t\t\n\t\t\t//change options in case of type change\n\t\t\tif(finalType == \"bar\" && g_options.slider_progress_indicator_type == \"pie\"){\n\t\t\t\tg_options.slider_progress_indicator_type = \"bar\";\n\t\t\t\tg_options = jQuery.extend(g_options, g_defaultsProgressBar);\n\t\t\t}\t\n\t\t\t\n\t\t\tg_gallery.setProgressIndicator(g_objProgress);\n\t\t}\n\t\t\n\t\t//----------------\n\t\t\n\t\t//add text panel (hidden)\n\t\tif(g_options.slider_enable_text_panel == true){\n\t\t\t\n\t\t\t\tg_objTextPanel.appendHTML(g_objSlider);\n\t\t\t\t\t\t\t\t\n\t\t\t\t//hide panel saparatelly from the controls object\n\t\t\t\tif(g_options.slider_textpanel_always_on == false){\n\t\t\t\t\t\n\t\t\t\t\t//hide the panel\n\t\t\t\t\tvar panelElement = g_objTextPanel.getElement();\n\t\t\t\t\tpanelElement.hide().data(\"isHidden\", true);\n\t\n\t\t\t\t\tg_temp.isTextPanelSaparateHover = true;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\n\t\t//----------------\n\t\t\n\t\t//add zoom buttons panel:\n\t\tif(g_options.slider_enable_zoom_panel == true){\n\t\t\tg_objZoomPanel.appendHTML(g_objSlider);\n\t\t}\n\t\n\t\t\n\t\t//add video player\n\t\tg_objVideoPlayer.setHtml(g_objInner);\n\t}\n\t\n\t\n\t/**\n\t * position elements that related to slide\n\t */\n\tfunction positionSlideElements(objSlide){\n\t\t\n\t\t//position preloader\n\t\tvar objPreloader = getSlidePreloader(objSlide);\n\t\tg_functions.placeElementInParentCenter(objPreloader);\n\t\t\n\t\t//position video play button\n\t\tvar objVideoPlayButton = getSlideVideoPlayButton(objSlide);\n\t\tg_functions.placeElementInParentCenter(objVideoPlayButton);\t\t\n\t}\n\t\n\t\n\t/**\n\t * position elements\n\t */\n\tfunction positionElements(){\n\t\t\n\t\t//place bullets\n\t\tif(g_objBullets){\n\t\t\tobjBullets = g_objBullets.getElement();\n\t\t\t\n\t\t\t//strange bug fix (bullets width: 20) by double placing\n\t\t\tg_functions.placeElement(objBullets, g_options.slider_bullets_align_hor, g_options.slider_bullets_align_vert, g_options.slider_bullets_offset_hor, g_options.slider_bullets_offset_vert);\n\t\t\tg_functions.placeElement(objBullets, g_options.slider_bullets_align_hor, g_options.slider_bullets_align_vert, g_options.slider_bullets_offset_hor, g_options.slider_bullets_offset_vert);\n\t\t\t\n\t\t}\n\t\t\n\t\t//place arrows\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\tg_functions.placeElement(g_objArrowLeft, g_options.slider_arrow_left_align_hor, g_options.slider_arrow_left_align_vert, g_options.slider_arrow_left_offset_hor, g_options.slider_arrow_left_offset_vert);\n\t\t\tg_functions.placeElement(g_objArrowRight, g_options.slider_arrow_right_align_hor, g_options.slider_arrow_left_align_vert, g_options.slider_arrow_right_offset_hor, g_options.slider_arrow_right_offset_vert);\n\t\t}\n\t\t\n\t\t//hide controls\n\t\tif(g_options.slider_controls_always_on == false)\n\t\t\thideControls(true);\n\t\t\n\t\t//place progress indicator\n\t\tif(g_objProgress){\n\t\t\t\n\t\t\tvar objProgressElement = g_objProgress.getElement();\n\t\t\t\n\t\t\tif(g_options.slider_progress_indicator_type == \"bar\"){\n\t\t\t\tvar sliderWidth = g_objSlider.width();\t\t\t\t\n\t\t\t\tg_objProgress.setSize(sliderWidth);\n\t\t\t\tg_functions.placeElement(objProgressElement, \"left\", g_options.slider_progress_indicator_align_vert, 0, g_options.slider_progress_indicator_offset_vert);\t\t\t\t\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tg_functions.placeElement(objProgressElement, g_options.slider_progress_indicator_align_hor, g_options.slider_progress_indicator_align_vert, g_options.slider_progress_indicator_offset_hor, g_options.slider_progress_indicator_offset_vert);\t\t\t\t\n\t\t\t\t\n\t\t\t}\t\t\t\n\t\t}\n\t\t\t\t\n\t\t//position text panel\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.positionPanel();\n\t\t\n\t\t//position controls elements\n\t\tplaceControlsElements();\n\t\t\n\t\t//place slide elements\n\t\tpositionSlideElements(g_objSlide1);\n\t\tpositionSlideElements(g_objSlide2);\n\t\tpositionSlideElements(g_objSlide3);\n\t\t\n\t\tcheckMobileModify();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * place elements that located on \"controls\" div\n\t */\n\tfunction placeControlsElements(){\n\t\t\n\t\tif(g_objButtonPlay)\t\t\t\n\t\t\tg_functions.placeElement(g_objButtonPlay, g_options.slider_play_button_align_hor, g_options.slider_play_button_align_vert, g_options.slider_play_button_offset_hor, g_options.slider_play_button_offset_vert);\t\t\t\n\t\t\n\t\t//position fullscreen button\n\t\tif(g_objButtonFullscreen)\t\t\t\n\t\t\tg_functions.placeElement(g_objButtonFullscreen, g_options.slider_fullscreen_button_align_hor, g_options.slider_fullscreen_button_align_vert, g_options.slider_fullscreen_button_offset_hor, g_options.slider_fullscreen_button_offset_vert);\n\t\t\n\t\t//position zoom panel\n\t\tif(g_objZoomPanel){\n\t\t\tvar zoomPanelElement = g_objZoomPanel.getElement();\n\t\t\tg_functions.placeElement(zoomPanelElement, g_options.slider_zoompanel_align_hor, g_options.slider_zoompanel_align_vert, g_options.slider_zoompanel_offset_hor, g_options.slider_zoompanel_offset_vert);\n\t\t}\n\t}\n\t\n\t\n\t\t\n\t/**\n\t * position slides by their order\n\t */\n\tfunction positionSlides(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\tvar posX = 0, posY = 0, innerWidth;\n\t\tvar posXPrev=0, posXCurrent = 0, posXNext, nextHasItem, prevHasItem;\n\t\t\t\t\n\t\tnextHasItem = t.isSlideHasItem(slides.objNextSlide);\n\t\tprevHasItem = t.isSlideHasItem(slides.objPrevSlide);\n\t\t\n\t\tif(prevHasItem){\n\t\t\tposXCurrent = slides.objPrevSlide.outerWidth();\n\t\t\tslides.objPrevSlide.css(\"z-index\",1);\n\t\t}else\n\t\t\tslides.objPrevSlide.hide();\t\t\t\n\t\t\n\t\tposXNext = posXCurrent + slides.objCurrentSlide.outerWidth();\n\t\t\n\t\tinnerWidth = posXNext;\n\t\tif(nextHasItem){\n\t\t\tinnerWidth = posXNext + slides.objNextSlide.outerWidth();\n\t\t\tslides.objPrevSlide.css(\"z-index\",2);\t\t\n\t\t}else\n\t\t\tslides.objNextSlide.hide();\n\t\t\n\t\tslides.objCurrentSlide.css(\"z-index\",3);\n\t\t\n\t\t//set inner size and position\n\t\tg_functions.placeElement(slides.objCurrentSlide, posXCurrent, posY);\t\t\n\t\tg_objInner.css({\"left\":-posXCurrent+\"px\", width:innerWidth+\"px\"});\n\n\t\t//position prev\n\t\tif(prevHasItem){\n\t\t\tg_functions.placeElement(slides.objPrevSlide, posXPrev, posY);\n\t\t\tg_functions.showElement(slides.objPrevSlide);\n\t\t}\n\t\t\n\t\tif(nextHasItem){\n\t\t\tg_functions.showElement(slides.objNextSlide);\n\t\t\tg_functions.placeElement(slides.objNextSlide, posXNext, posY);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * resize the slide image inside item\n\t */\n\tfunction resizeSlideItem(objSlide){\n\t\tvar index = objSlide.data(\"index\");\n\t\tif(index === undefined || index == null)\n\t\t\treturn(false);\n\t\t\n\t\tvar objItem = g_gallery.getItem(index);\n\t\t\n\t\tif(!objItem)\n\t\t\treturn(false);\n\t\t\n\t\tsetItemToSlide(objSlide, objItem);\n\t}\n\t\n\t\n\t/**\n\t * show the preloader\n\t * show the index, so only the current index load will hide.\n\t */\t\n\tfunction showPreloader(objPreloader){\n\t\t\n\t\tobjPreloader.stop(true).show(100);\n\t\n\t}\n\t\n\t/**\n\t * hide the preloader\n\t */\n\tfunction hidePreloader(objPreloader){\n\t\t\n\t\tobjPreloader.stop(true).hide(100);\n\t}\n\t\n\t/**\n\t * get proper image border width\n\t */\n\tfunction getImageBorderWidth(objImage, imageData){\n\t\t\n\t\tvar borderWidth = g_options.slider_image_border_width;\n\t\t\n\t\tif(borderWidth <= 10)\n\t\t\treturn(borderWidth);\n\n\t\t//set image size\n\t\tvar imageSize = g_functions.getElementSize(objImage);\n\t\tvar imageWidth = imageSize.width;\n\t\tvar imageHeight = imageSize.height;\n\t\t\n\t\tif(imageData){\n\t\t\tif(imageData.hasOwnProperty(\"imageWidth\"))\n\t\t\t\timageWidth = imageData.imageWidth;\n\t\t\t\n\t\t\tif(imageData.hasOwnProperty(\"imageHeight\"))\n\t\t\t\timageHeight = imageData.imageHeight;\n\t\t\t\n\t\t}\n\t\t\n\t\tif(imageWidth <= 0)\n\t\t\treturn(borderWidth);\n\t\t\n\t\t//take the less size\n\t\tvar totalSize = (imageWidth < imageHeight)?imageWidth:imageHeight;\n\t\tvar borderSize = borderWidth * 2;\n\t\t\n\t\tvar borderRatio = borderSize / totalSize;\n\t\t\n\t\tif(borderRatio < g_options.slider_image_border_maxratio)\n\t\t\treturn(borderWidth);\n\t\t\n\t\t//change border width\t\t\n\t\tvar borderWidth = (totalSize * g_options.slider_image_border_maxratio)/2; \n\t\t\n\t\tborderWidth = Math.round(borderWidth);\n\t\t\n\t\treturn(borderWidth);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set slider image css design according the settings\n\t */\n\tfunction setImageDesign(objImage, slideType, imageData){\n\t\t\n\t\tvar css = {};\n\t\tif(g_options.slider_image_border == true){\n\t\t\tcss[\"border-style\"] = \"solid\";\n\t\t\t\n\t\t\tvar borderWidth = getImageBorderWidth(objImage, imageData);\n\t\t\t\n\t\t\tcss[\"border-width\"] = borderWidth+\"px\";\n\t\t\tcss[\"border-color\"] = g_options.slider_image_border_color;\n\t\t\tcss[\"border-radius\"] = g_options.slider_image_border_radius;\n\t\t}\n\t\t\n\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true)\n\t\t\tcss[\"background-color\"] = \"#000000\";\n\t\t\n\t\tif(g_options.slider_image_shadow == true){\n\t\t\tcss[\"box-shadow\"] = \"3px 3px 10px 0px #353535\";\n\t\t}\n\t\t\n\t\tobjImage.css(css);\n\t}\n\t\n\t\n\t/**\n\t * scale image constant size (for video items)\n\t */\n\tfunction scaleImageConstantSize(objImage, objItem){\n\t\t\n\t\tvar constantWidth = g_options.slider_video_constantsize_width;\n\t\tvar constantHeight = g_options.slider_video_constantsize_height;\n\t\tvar scaleMode = g_options.slider_video_constantsize_scalemode;\n\t\t\n\t\tvar objSize = g_functions.scaleImageExactSizeInParent(objImage, objItem.imageWidth, objItem.imageHeight, constantWidth, constantHeight, scaleMode);\n\t\t\n\t\t\n\t\treturn(objSize);\n\t}\n\n\t\n\t/**\n\t * \n\t * set item to slide\n\t */\n\tfunction setImageToSlide(objSlide, objItem, isForce){\n\t\t\n\t\tvar objItemWrapper = objSlide.children(\".ug-item-wrapper\");\n\t\t\n\t\tvar objPreloader = getSlidePreloader(objSlide);\n\t\t\n\t\tif(typeof objItem.urlImage == \"undefined\" || objItem.urlImage == \"\")\n\t\t\tthrow new Error(\"The slide don't have big image defined ( data-image='imageurl' ). Please check gallery items.\", \"showbig\");\n\t\t\n\t\tvar urlImage = objItem.urlImage;\n\t\t\n\t\tvar currentImage = objSlide.data(\"urlImage\");\n\t\t\t\t\n\t\tobjSlide.data(\"urlImage\",urlImage);\n\t\t\n\t\tvar scaleMode = t.getScaleMode(objSlide);\n\t\t\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\n\t\tobjPadding = t.getObjImagePadding();\n\t\t\n\t\t\n\t\tif(currentImage == urlImage && isForce !== true){\n\t\t\t\n\t\t\tvar objImage = objItemWrapper.children(\"img\");\n\t\t\t\t\t\t\n\t\t\tif(objItem.imageWidth == 0 || objItem.imageHeight == 0){\n\t\t\t\tg_gallery.checkFillImageSize(objImage, objItem);\n\t\t\t}\n\t\t\t\n\t\t\tvar objImageData = {};\n\t\t\t\n\t\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true){\n\t\t\t\tobjImageData = scaleImageConstantSize(objImage, objItem);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobjImageData = g_functions.scaleImageFitParent(objImage, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t}\n\t\t\t\n\t\t\tsetImageDesign(objImage, slideType, objImageData);\n\t\t\tg_objThis.trigger(t.events.AFTER_PUT_IMAGE, objSlide);\n\t\t\t\n\t\t}\n\t\telse{\t\t//place the image inside parent first time\n\t\t\t\n\t\t\tobjImage = g_functions.placeImageInsideParent(urlImage, objItemWrapper, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t\n\t\t\t//set image loaded on load:\n\t\t\tif(objItem.isBigImageLoaded == true){\n\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\thidePreloader(objPreloader);\n\t\t\t\t\n\t\t\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true)\n\t\t\t\t\tvar objImageData = scaleImageConstantSize(objImage, objItem);\n\t\t\t\telse\n\t\t\t\t\tvar objImageData = g_functions.getImageInsideParentData(objItemWrapper, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t\t\n\t\t\t\t//set missing css width\n\t\t\t\tobjImage.css(\"width\",objImageData.imageWidth+\"px\");\n\t\t\t\t\t\t\n\t\t\t\tsetImageDesign(objImage, slideType, objImageData);\n\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.AFTER_PUT_IMAGE, objSlide);\n\t\t\t}\n\t\t\telse{\t\t//if the image not loaded, load the image and show it after.\n\t\t\t\tobjImage.fadeTo(0,0);\n\t\t\t\tshowPreloader(objPreloader);\n\t\t\t\tobjSlide.data(\"isLoading\", true);\n\t\t\t\t\n\t\t\t\tif(t.isSlideCurrent(objSlide))\n\t\t\t\t\tg_objThis.trigger(t.events.CURRENTSLIDE_LOAD_START);\n\t\t\t\t\n\t\t\t\tobjImage.data(\"itemIndex\", objItem.index);\n\t\t\t\tobjImage.on(\"load\",function(){\n\t\t\t\t\t\n\t\t\t\t\t//place the image normally with coordinates\n\t\t\t\t\tvar objImage = jQuery(this);\n\t\t\t\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\t\t\t\n\t\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\t\t\n\t\t\t\t\t//get and hide preloader\n\t\t\t\t\tvar objSlide = objImage.parent().parent();\n\t\t\t\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\t\t\tvar objPreloader = getSlidePreloader(objSlide);\n\t\t\t\t\tvar objPadding = t.getObjImagePadding();\n\t\t\t\t\tvar scaleMode = t.getScaleMode(objSlide);\n\t\t\t\t\t\n\t\t\t\t\thidePreloader(objPreloader);\n\t\t\t\t\tobjSlide.data(\"isLoading\", false);\n\t\t\t\t\t\n\t\t\t\t\tif(t.isSlideCurrent(objSlide))\n\t\t\t\t\t\tg_objThis.trigger(t.events.CURRENTSLIDE_LOAD_END);\n\t\t\t\t\t\n\t\t\t\t\tg_gallery.onItemBigImageLoaded(null, objImage);\n\t\t\t\t\t\n\t\t\t\t\tvar objItem = g_gallery.getItem(itemIndex);\n\t\t\t\t\t\n\t\t\t\t\tvar objImageData = {};\n\t\t\t\t\t\n\t\t\t\t\tif(slideType != \"image\" && g_options.slider_video_constantsize == true)\n\t\t\t\t\t\tscaleImageConstantSize(objImage, objItem);\n\t\t\t\t\telse{\n\t\t\t\t\t\tobjImageData = g_functions.scaleImageFitParent(objImage, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tobjImage.fadeTo(0,1);\n\t\t\t\t\t\n\t\t\t\t\tsetImageDesign(objImage, slideType, objImageData);\n\t\t\t\t\t\n\t\t\t\t\tg_objThis.trigger(t.events.AFTER_PUT_IMAGE, objSlide);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * set slider image by url\n\t * if item not set, get current slide item\n\t */\n\tfunction setItemToSlide(objSlide, objItem){\n\t\t\n\t\ttry{\n\n\t\t\tvar objItemWrapper = objSlide.children(\".ug-item-wrapper\");\n\t\t\t\t\t\n\t\t\t//if the item is empty, remove the image from slide\n\t\t\tif(objItem == null){\n\t\t\t\tobjItemWrapper.html(\"\");\n\t\t\t\tobjSlide.removeData(\"index\");\n\t\t\t\tobjSlide.removeData(\"type\");\n\t\t\t\tobjSlide.removeData(\"urlImage\");\n\t\t\t\treturn(false);\n\t\t\t}\n\t\t\t\n\t\t\tvar currentIndex = objSlide.data(\"index\");\n\t\t\t\n\t\t\tobjSlide.data(\"index\",objItem.index);\n\t\t\tobjSlide.data(\"type\", objItem.type);\n\t\t\t\n\t\t\t//set link class\n\t\t\tif(g_options.slider_enable_links == true && objItem.type == \"image\"){\n\t\t\t\t\n\t\t\t\tif(objItem.link)\n\t\t\t\t\tobjSlide.addClass(\"ug-slide-clickable\");\n\t\t\t\telse\n\t\t\t\t\tobjSlide.removeClass(\"ug-slide-clickable\");\n\t\t\t}\n\t\t\t\n\t\t\tsetImageToSlide(objSlide, objItem);\n\t\t\t\n\t\t\t//show type related elements\n\t\t\tvar objVideoPlayButton = getSlideVideoPlayButton(objSlide);\n\t\t\tswitch(objItem.type){\n\t\t\t\tcase \"image\":\n\t\t\t\t\tobjVideoPlayButton.hide();\n\t\t\t\tbreak;\n\t\t\t\tdefault:\t\t//video\n\t\t\t\t\tobjVideoPlayButton.show();\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}catch(error){\n\t\t\t\n\t\t\tif(typeof error.fileName != \"undefined\" && error.fileName == \"showbig\")\n\t\t\t\tg_gallery.showErrorMessageReplaceGallery(error.message);\n\t\t\t\n\t\t\tobjItemWrapper.html(\"\");\n\t\t\tthrow new Error(error);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t}\t\n\t\n\t\n\t\n\t/**\n\t * hide the panel\n\t */\n\tfunction hideTextPanel(){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(isTextPanelHidden() == true)\n\t\t\treturn(false);\n\t\t\n\t\tvar panelElement = g_objTextPanel.getElement();\n\t\n\t\tvar animationTime = 0;\n\t\tif(g_temp.isTextPanelSaparateHover == true || g_options.slider_textpanel_always_on == true){\n\t\t\tanimationTime = g_options.slider_controls_appear_duration;\n\t\t}\n\t\t\n\t\tpanelElement.stop().fadeTo(animationTime, 0);\n\t\t\n\t\tpanelElement.data(\"isHidden\", true);\n\t}\n\t\n\t\n\t/**\n\t * show the text panel\n\t */\n\tfunction showTextPanel(){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(isTextPanelHidden() == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar panelElement = g_objTextPanel.getElement();\n\t\t\n\t\tvar animationTime = 0;\n\t\t\n\t\tif(g_temp.isTextPanelSaparateHover == true || g_options.slider_textpanel_always_on == true){\n\t\t\t\n\t\t\tpanelElement.show();\n\t\t\tg_objTextPanel.positionElements();\n\t\t\t\n\t\t\tanimationTime = g_options.slider_controls_appear_duration;\n\t\t}\n\t\t\n\t\tpanelElement.stop().show().fadeTo(animationTime,1);\n\t\t\n\t\tpanelElement.data(\"isHidden\", false);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * check if the text panel is hidden or not\n\t */\n\tfunction isTextPanelHidden(){\n\n\t\tvar panelElement = g_objTextPanel.getElement();\n\n\t\tvar isHidden = panelElement.data(\"isHidden\");\n\t\tif(isHidden === false)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\t\t\n\t}\t\n\t\n\t\n\t/**\n\t * validate that the slide is certain type, if not, throw error\n\t */\n\tfunction validateSlideType(type, objSlide){\n\t\tif(objSlide == undefined)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\t\t\n\t\tif(slideType != type){\n\t\t\tthrow new Error(\"Wrong slide type: \"+ slideType +\", should be: \"+type);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\tfunction __________VIDEO_PLAYER_______(){};\n\n\t\n\t\n\t/**\n\t * set video player position\n\t */\n\tfunction setVideoPlayerPosition(){\n\t\t\n\t\tvar objCurrentSlide = t.getCurrentSlide();\n\t\tvar objImage = t.getSlideImage(objCurrentSlide);\n\t\t\n\t\tvar slideSize = g_functions.getElementSize(objCurrentSlide);\n\t\tvar left = slideSize.left;\n\t\tvar top = slideSize.top;\n\t\t\t\t\n\t\t//set by image position\n\t\tif(g_options.slider_video_constantsize == true){\n\t\t\t\n\t\t\tvar imageSize = g_functions.getElementSize(objImage);\n\t\t\tleft += imageSize.left;\n\t\t\ttop += imageSize.top;\n\t\t\t\n\t\t}else{\t//set video padding\n\t\t\t\n\t\t\tleft += g_options.slider_video_padding_left;\n\t\t\ttop += g_options.slider_video_padding_top;\n\t\t\n\t\t}\n\t\t\n\t\tg_objVideoPlayer.setPosition(left, top);\n\t}\n\t\n\t\n\t/**\n\t * set video player constant size\n\t */\n\tfunction setVideoPlayerConstantSize(){\n\t\t\n\t\tvar videoWidth = g_options.slider_video_constantsize_width;\n\t\tvar videoHeight = g_options.slider_video_constantsize_height;\n\t\t\n\t\tg_objVideoPlayer.setSize(videoWidth, videoHeight);\n\t\t\n\t\t//set video design\n\t\tvar videoElement = g_objVideoPlayer.getObject();\n\t\t\n\t\tsetImageDesign(videoElement, \"video\");\n\t}\n\t\n\t\n\tfunction __________TRANSITION_______(){};\n\n\t\n\t\n\t/**\n\t * do the transition between the current and the next\n\t */\n\tfunction doTransition(direction, objItem, forceTransition){\n\t\t\n\t\tg_objThis.trigger(t.events.TRANSITION_START);\n\t\t\n\t\tvar transition = g_options.slider_transition;\n\t\tif(forceTransition)\n\t\t\ttransition = forceTransition;\n\n\t\t//stop current slide action\n\t\tt.stopSlideAction(null, true);\n\t\t\n\t\tswitch(transition){\n\t\t\tdefault:\n\t\t\tcase \"fade\":\n\t\t\t\ttransitionFade(objItem);\n\t\t\tbreak;\n\t\t\tcase \"slide\":\t\t\t\t\n\t\t\t\ttransitionSlide(direction, objItem);\n\t\t\tbreak;\n\t\t\tcase \"lightbox_open\":\t\t//fade transition without animation\n\t\t\t\ttransitionFade(objItem, false, true);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * switch slide numbers after transition (by direction)\n\t * \n\t */\n\tthis.switchSlideNums = function(direction){\n\t\t\n\t\t//trigger item changed effect\n\t\tg_objThis.trigger(t.events.BEFORE_SWITCH_SLIDES);\n\t\t\n\t\tswitch(direction){\n\t\t\tcase \"left\":\n\t\t\t\tvar currentNum = g_temp.numCurrent;\n\t\t\t\tg_temp.numCurrent = g_temp.numNext;\n\t\t\t\tg_temp.numNext = g_temp.numPrev;\n\t\t\t\tg_temp.numPrev = currentNum;\n\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tvar currentNum = g_temp.numCurrent;\n\t\t\t\tg_temp.numCurrent = g_temp.numPrev;\n\t\t\t\tg_temp.numPrev = g_temp.numNext;\n\t\t\t\tg_temp.numNext = currentNum;\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong direction: \"+ direction);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\t//trace(g_temp.numCurrent);\n\t\t\n\t\t//trigger item changed effect\n\t\tg_objThis.trigger(t.events.ITEM_CHANGED);\n\t}\n\t\n\t\n\t/**\n\t * do slide transition\n\t */\n\tfunction transitionSlide(direction, objItem){\n\t\t\n\t\tvar animating = t.isAnimating();\n\n\t\tif(animating == true){\n\t\t\tg_temp.itemWaiting = objItem;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//always clear next item on transition start\n\t\t// next item can be only in the middle of the transition.\n\t\tif(g_temp.itemWaiting != null)\n\t\t\tg_temp.itemWaiting = null;\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\t\n\t\tswitch(direction){\n\t\t\tcase \"right\":\t//change to prev item\n\t\t\t\tsetItemToSlide(slides.objPrevSlide, objItem);\n\t\t\t\tpositionSlides();\n\t\t\t\t\n\t\t\t\tvar posPrev = g_functions.getElementSize(slides.objPrevSlide);\n\t\t\t\tvar destX = -posPrev.left;\n\t\t\t\t\n\t\t\t\tt.switchSlideNums(\"right\");\n\t\t\t\t\n\t\t\tbreak;\t\n\t\t\tcase \"left\":\t\t//change to next item\n\t\t\t\tsetItemToSlide(slides.objNextSlide, objItem);\n\t\t\t\tpositionSlides();\n\t\t\t\t\n\t\t\t\tvar posNext = g_functions.getElementSize(slides.objNextSlide);\n\t\t\t\tvar destX = -posNext.left;\n\t\t\t\t\n\t\t\t\tt.switchSlideNums(\"left\");\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong direction: \"+direction);\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t\tvar transSpeed = g_options.slider_transition_speed;\n\t\tvar transEasing = g_options.slider_transition_easing;\n\n\t\t\n\t\tvar animateParams = {\n\t\t\t\tduration: transSpeed,\n\t\t\t\teasing: transEasing,\n\t\t\t\tqueue: false,\n\t\t\t\talways:function(){\n\t\t\t\t\t\t\n\t\t\t\t\t\tt.stopSlideAction();\n\t\t\t\t\t\tg_objVideoPlayer.hide();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//transit next item if waiting\n\t\t\t\t\t\tif(g_temp.itemWaiting != null){\n\t\t\t\t\t\t\tvar direction = getSlideDirection(g_temp.itemWaiting);\n\t\t\t\t\t\t\ttransitionSlide(direction, g_temp.itemWaiting);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//if no item waiting, please neighbour items in places\n\t\t\t\t\t\t\tt.placeNabourItems();\n\t\t\t\t\t\t\tg_objThis.trigger(t.events.TRANSITION_END);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t};\n\t\t\n\t\t\n\t\tg_objInner.animate({left:destX+\"px\"}, animateParams);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * animate opacity in and out\n\t */\n\tfunction animateOpacity(objItem, opacity, completeFunction){\n\t\t\n\t\tif(completeFunction)\n\t\t\tobjItem.fadeTo(g_options.slider_transition_speed, opacity, completeFunction);\n\t\telse\n\t\t\tobjItem.fadeTo(g_options.slider_transition_speed, opacity);\n\t}\n\t\n\t\n\t/**\n\t * do fade transition\n\t */\n\tfunction transitionFade(objItem, noAnimation, noHidePlayer){\n\t\t\n\t\tif(!noAnimation)\n\t\t\tvar noAnimation = false;\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t \n\t\tsetItemToSlide(slides.objNextSlide, objItem);\n\t\t\n\t\tvar objCurrentPos = g_functions.getElementSize(slides.objCurrentSlide);\n\t\t\t\t\n\t\tg_functions.placeElement(slides.objNextSlide,objCurrentPos.left,objCurrentPos.top);\n\t\t\n\t\t//switch slide nums\n\t\tvar currentNum = g_temp.numCurrent;\n\t\tg_temp.numCurrent = g_temp.numNext;\n\t\tg_temp.numNext = currentNum;\n\t\t\n\t\tg_objThis.trigger(t.events.ITEM_CHANGED);\n\t\t\n\t\tslides.objNextSlide.stop(true);\t\t\n\t\tslides.objCurrentSlide.stop(true);\n\t\t\n\t\tif(noAnimation == true){\n\t\t\t\n\t\t\tslides.objCurrentSlide.fadeTo(0, 0);\n\t\t\tslides.objNextSlide.fadeTo(0, 1);\t\n\t\t\tt.placeNabourItems();\n\t\t\tg_objThis.trigger(t.events.TRANSITION_END);\n\t\t\t\n\t\t\tif(noHidePlayer !== true)\n\t\t\t\tg_objVideoPlayer.hide();\n\t\t\n\t\t}else{\n\t\t\tslides.objNextSlide.fadeTo(0,0);\t\n\t\t\t\n\t\t\tanimateOpacity(slides.objCurrentSlide,0,function(){\n\t\t\t\tt.placeNabourItems();\n\t\t\t\tg_objThis.trigger(t.events.TRANSITION_END);\n\t\t\t\tif(noHidePlayer !== true)\n\t\t\t\t\tg_objVideoPlayer.hide();\n\t\t\t});\n\t\t\t\n\t\t\tif(g_objVideoPlayer.isVisible() == true){\n\t\t\t\tvar videoElement = g_objVideoPlayer.getObject();\n\t\t\t\tanimateOpacity(videoElement, 0);\n\t\t\t}\n\t\t\t\n\t\t\t//animate to next show next\n\t\t\tanimateOpacity(slides.objNextSlide,1);\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\tfunction __________CONTROLS_OBJECT_______(){};\n\t\n\t/**\n\t * modify the slider for mobile\n\t */\n\tfunction modifyForMobile(){\n\t\t\n\t\tif(g_options.slider_fullscreen_button_mobilehide == true && g_objButtonFullscreen)\n\t\t\tg_objButtonFullscreen.hide();\n\t\t\n\t\tif(g_options.slider_play_button_mobilehide == true && g_objButtonPlay)\n\t\t\tg_objButtonPlay.hide();\n\t\t\n\t\tif(g_options.slider_zoompanel_mobilehide == true && g_objZoomPanel)\n\t\t\tg_objZoomPanel.getElement().hide();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * modify for no mobile\n\t */\n\tfunction modifyForDesctop(){\n\t\t\n\t\tif(g_options.slider_fullscreen_button_mobilehide == true && g_objButtonFullscreen)\n\t\t\tg_objButtonFullscreen.show();\n\n\t\tif(g_options.slider_play_button_mobilehide == true && g_objButtonPlay)\n\t\t\tg_objButtonPlay.show();\n\t\t\n\t\tif(g_options.slider_zoompanel_mobilehide == true && g_objZoomPanel)\n\t\t\tg_objZoomPanel.getElement().show();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check and modify for mobile or desctop\n\t */\n\tfunction checkMobileModify(){\n\t\t\n\t\tvar isMobile = g_gallery.isMobileMode();\n\t\t\n\t\tif(isMobile)\n\t\t\tmodifyForMobile();\n\t\telse\n\t\t\tmodifyForDesctop();\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get a jquery set of the controls objects\n\t */\n\tfunction getControlsObjects(){\n\t\t\n\t\tvar objControl = g_objSlider.children(\".ug-slider-control\");\n\t\t\n\t\treturn(objControl);\n\t}\n\t\n\t\n\t/**\n\t * hide the controls\n\t */\n\tfunction hideControls(noAnimation){\n\t\t\t\t\n\t\tif(g_functions.isTimePassed(\"sliderControlsToggle\") == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isControlsVisible == false)\n\t\t\treturn(false);\n\t\t\t\t\n\t\tif(!noAnimation)\n\t\t\tvar noAnimation = false;\n\t\t\n\t\tvar objControls = getControlsObjects();\n\t\t\n\t\tif(noAnimation === true)\n\t\t\tobjControls.stop().fadeTo(0,0).hide();\n\t\telse{\n\t\t\tobjControls.stop().fadeTo(g_options.slider_controls_appear_duration, 0, function(){objControls.hide()});\n\t\t}\n\t\t\n\t\tg_temp.isControlsVisible = false;\n\t}\n\t\n\t\n\t/**\n\t * show controls only if they meaned to be shown\n\t * @param noAnimation\n\t */\n\tfunction checkAndShowControls(noAnimation){\n\t\t\n\t\tif(g_options.slider_controls_always_on == true)\n\t\t\tshowControls(noAnimation);\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the controls\n\t */\n\tfunction showControls(noAnimation){\n\t\t\t\t\n\t\t//validate for short time pass\n\t\tif(g_functions.isTimePassed(\"sliderControlsToggle\") == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isControlsVisible == true)\n\t\t\treturn(true);\n\t\t\n\t\t\n\t\tif(!noAnimation)\n\t\t\tvar noAnimation = false;\n\t\t\n\t\tvar objControls = getControlsObjects();\n\t\t\t\t\n\t\tif(noAnimation === true)\n\t\t\tobjControls.stop().show();\n\t\telse{\n\t\t\n\t\t\tobjControls.stop().show().fadeTo(0,0);\n\t\t\tobjControls.fadeTo(g_options.slider_controls_appear_duration, 1);\n\t\t\t\n\t\t}\n\t\t\n\t\tg_temp.isControlsVisible = true;\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * toggle the controls (show, hide)\n\t */\n\tfunction toggleControls(){\n\t\t\t\t\t\t\t\t\n\t\tif(g_temp.isControlsVisible == false)\n\t\t\tshowControls();\n\t\telse\n\t\t\thideControls();\n\t}\n\t\n\t\n\t/**\n\t * set controls mode\n\t * modes: image, video\n\t */\n\tfunction setControlsMode(mode){\n\t\t\t\t\n\t\tif(mode == g_temp.currentControlsMode)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(mode){\n\t\t\tcase \"image\":\n\t\t\t\tif(g_objZoomPanel)\n\t\t\t\t\tg_objZoomPanel.getElement().show();\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"video\":\n\t\t\t\tif(g_objZoomPanel)\n\t\t\t\t\tg_objZoomPanel.getElement().hide();\t\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong controld mode: \" + mode);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_temp.currentControlsMode = mode;\n\t\t\t\n\t}\n\t\n\t\n\t\n\tfunction __________EVENTS___________(){};\n\n\t/**\n\t * on item change event\n\t */\n\tfunction onItemChange(data, arg_objItem, role){\n\t\t\n\t\t//trace(\"slider on change\");\n\t\t\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\t\t\t\n\t\tt.setItem(objItem, false, role);\n\t\t\n\t\tvar itemIndex = objItem.index;\n\t\t\n\t\t//set active bullet\n\t\tif(g_objBullets)\n\t\t\tg_objBullets.setActive(itemIndex);\n\t\t\n\t\t//handle text panel\n\t\tif(g_objTextPanel){\t\t\t\n\t\t\tif(g_temp.isTextPanelSaparateHover == false)\n\t\t\t\tshowTextPanel();\n\t\t}\n\t\t\t\t\n\t\tif(objItem.type == \"image\"){\n\t\t\tsetControlsMode(\"image\");\n\t\t\t//placeControlsElements();\n\t\t}\n\t\telse{\n\t\t\tsetControlsMode(\"video\");\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * on bullet click - change the item to selected\n\t */\n\tfunction onBulletClick(event, bulletIndex){\n\t\tg_gallery.selectItem(bulletIndex);\t\t\n\t}\n\t\n\t\n\t/**\n\t * on touch end\n\t * toggle controls\n\t */\n\tfunction onClick(event){\n\t\t\n\t\t//double tap action\n\t\tif(g_objTouchSlider && g_objTouchSlider.isTapEventOccured(event) == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_objThis.trigger(t.events.CLICK, event);\n\t\t\t\n\t\t\n\t}\n\n\t\n\t/**\n\t * on actual click event\n\t */\n\tfunction onActualClick(){\n\n\t\t//check link\n\t\tvar currentSlide = t.getCurrentSlide();\n\t\tvar isClickable = currentSlide.hasClass(\"ug-slide-clickable\");\n\t\tvar objItem = t.getCurrentItem();\n\t\t\n\t\tif(isClickable){\n\t\t\t\n\t\t\t//redirect to link\n\t\t\tif(g_options.slider_links_newpage == false){\n\t\t\t\tlocation.href = objItem.link;\n\t\t\t}else{\n\t\t\t\twindow.open(objItem.link, '_blank');\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//check toggle controls\n\t\tif(g_options.slider_controls_always_on == false && \n\t\t   g_options.slider_controls_appear_ontap == true && t.isCurrentSlideType(\"image\") == true){\n\t\t\t\n\t\t\ttoggleControls();\n\t\t\t\n\t\t\t//show text panel if hidden\n\t\t\tif(g_objTextPanel && g_options.slider_textpanel_always_on == true && t.isCurrentSlideType(\"image\") && t.isCurrentSlideImageFit())\n\t\t\t\tshowTextPanel();\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on zoom start event\n\t */\n\tfunction onZoomChange(event){\n\t\t\n\t\tif(g_objTextPanel && t.isCurrentSlideType(\"image\") && t.isCurrentSlideImageFit() == false)\n\t\t\thideTextPanel();\n\t}\n\t\n\t\n\t/**\n\t * on mouse enter\n\t */\n\tfunction onMouseEnter(){\n\t\t\n\t\tshowControls();\n\t\n\t}\n\t\n\t\n\t/**\n\t * on mouse leave\n\t */\n\tfunction onMouseLeave(){\n\n\t\thideControls();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on slide video play button click\n\t */\n\tfunction objVideoPlayClick(objButton){\n\t\tvar objSlide = objButton.parent();\n\t\tt.startSlideAction(objSlide);\n\t}\n\n\t/**\n\t * on video player show event\n\t */\n\tfunction onVideoPlayerShow(){\n\t\t\n\t\tif(g_gallery.isPlayMode()){\n\t\t\tg_gallery.pausePlaying();\n\t\t}\n\t\t\n\t\tg_objThis.trigger(t.events.ACTION_START);\n\t}\n\t\n\t\n\t/**\n\t * on video player hide event\n\t */\n\tfunction onVideoPlayerHide(){\n\t\t\n\t\tif(g_gallery.isPlayMode()){\n\t\t\tg_gallery.continuePlaying();\n\t\t}\n\t\t\n\t\tg_objThis.trigger(t.events.ACTION_END);\t\t\n\t}\n\t\n\t\n\t/**\n\t * on item image update, update the image inside the slider if relevant\n\t */\n\tfunction onItemImageUpdate(event, index, urlImage){\n\t\t\t\t\n\t\tif(g_objSlide1.data(\"index\") == index){\n\t\t\tobjItem = g_gallery.getItem(index);\n\t\t\tsetImageToSlide(g_objSlide1, objItem, true);\t//force\n\t\t}\n\t\t\n\t\tif(g_objSlide2.data(\"index\") == index){\n\t\t\tobjItem = g_gallery.getItem(index);\n\t\t\tsetImageToSlide(g_objSlide2, objItem, true);\n\t\t}\n\t\t\n\t\tif(g_objSlide3.data(\"index\") == index){\n\t\t\tobjItem = g_gallery.getItem(index);\n\t\t\tsetImageToSlide(g_objSlide3, objItem, true);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * after image loaded. position video play button\n\t */\n\tfunction onSlideImageLoaded(data, objSlide){\n\t\t\n\t\tobjSlide = jQuery(objSlide);\n\t\tvar objImage = t.getSlideImage(objSlide);\n\t\tvar objButtonVideoPlay = getSlideVideoPlayButton(objSlide);\n\t\tvar objSize = g_functions.getElementSize(objImage);\n\t\t\n\t\tg_functions.placeElement(objButtonVideoPlay, \"center\", \"middle\", objSize.left, objSize.top, objImage);\n\t}\n\t\n\t\n\t/**\n\t * init event of current slide\n\t */\n\tfunction initSlideEvents(objSlide){\n\t\t\n\t\t//set video player events\n\t\tvar objVideoPlayButton = getSlideVideoPlayButton(objSlide);\n\t\tg_functions.addClassOnHover(objVideoPlayButton);\n\t\t\n\t\tg_functions.setButtonOnClick(objVideoPlayButton, objVideoPlayClick);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//on item image update, update the image inside the slider if relevant\n\t\tg_objGallery.on(g_gallery.events.ITEM_IMAGE_UPDATED, onItemImageUpdate);\n\t\t\n\t\t\n\t\t//on item change, change the item in the slider.\n\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\n\t\tif(g_objBullets)\n\t\t\tjQuery(g_objBullets).on(g_objBullets.events.BULLET_CLICK,onBulletClick);\n\t\t\n\t\t//arrows events\n\t\tif(g_options.slider_enable_arrows == true){\n\t\t\t\n\t\t\tg_functions.addClassOnHover(g_objArrowRight, \"ug-arrow-hover\");\n\t\t\tg_functions.addClassOnHover(g_objArrowLeft, \"ug-arrow-hover\");\n\t\t\t\n\t\t\tg_gallery.setNextButton(g_objArrowRight);\n\t\t\tg_gallery.setPrevButton(g_objArrowLeft);\n\t\t}\n\t\t\n\t\t\n\t\t//show / hide controls\n\t\tif(g_options.slider_controls_always_on == false){\n\t\t\t\n\t\t\t//assign hover evens only if no touch device\n\t\t\tg_objSlider.hover(onMouseEnter, onMouseLeave);\n\t\t\t\n\t\t}\n\t\t\n\t\t//touch events appear on tap event\n\t\tg_objSlider.on(\"touchend click\", onClick);\n\t\t\n\t\t//actual click event\n\t\tg_objThis.on(t.events.CLICK, onActualClick);\n\t\t\n\t\t//show / hide text panel, if it's saparate from controls\n\t\tif(g_objTextPanel && g_temp.isTextPanelSaparateHover == true){\n\t\t\tg_objSlider.hover(showTextPanel, hideTextPanel);\n\t\t}\n\t\t\n\t\t//init play / pause button\n\t\tif(g_objButtonPlay){\n\t\t\tg_functions.addClassOnHover(g_objButtonPlay, \"ug-button-hover\");\n\t\t\tg_gallery.setPlayButton(g_objButtonPlay);\n\t\t}\n\t\t\n\t\t//init fullscreen button\n\t\tif(g_objButtonFullscreen){\n\t\t\tg_functions.addClassOnHover(g_objButtonFullscreen, \"ug-button-hover\");\n\t\t\tg_gallery.setFullScreenToggleButton(g_objButtonFullscreen);\n\t\t}\n\t\t\n\t\t//on zoom start / end events\n\t\tif(g_objZoomSlider){\n\t\t\tg_objThis.on(t.events.ZOOM_CHANGE, onZoomChange);\n\t\t}\n\t\t\n\t\tif(g_objZoomPanel)\n\t\t\tg_objZoomPanel.initEvents();\n\t\t\t\t\n\t\t//init video player related events\n\t\tg_objVideoPlayer.initEvents();\n\t\t\n\t\t//video API events\n\t\tjQuery(g_objVideoPlayer).on(g_objVideoPlayer.events.SHOW, onVideoPlayerShow);\t\t\n\t\tjQuery(g_objVideoPlayer).on(g_objVideoPlayer.events.HIDE, onVideoPlayerHide);\n\t\t\n\t\t//add slide events\n\t\tinitSlideEvents(g_objSlide1);\n\t\tinitSlideEvents(g_objSlide2);\n\t\tinitSlideEvents(g_objSlide3);\n\t\t\n\t\t//on image loaded\n\t\tg_objThis.on(t.events.AFTER_PUT_IMAGE, onSlideImageLoaded);\n\t\t\n\t\t//image mouseenter / mouseleave event\n\t\t\n\t\t//set mouseover events on the images\n\t\tg_objSlider.on(\"mouseenter\",\".ug-item-wrapper img\",function(event){\n\t\t\tg_objThis.trigger(t.events.IMAGE_MOUSEENTER);\n\t\t});\n\t\t\n\t\tg_objSlider.on(\"mouseleave\",\".ug-item-wrapper img\",function(event){\n\t\t\tvar isMouseOver = t.isMouseInsideSlideImage(event);\n\t\t\t\n\t\t\tif(isMouseOver == false)\n\t\t\t\tg_objThis.trigger(t.events.IMAGE_MOUSELEAVE);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy slider events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objThis.off(t.events.AFTER_PUT_IMAGE);\n\t\t\t\t\n\t\tg_objGallery.off(g_gallery.events.ITEM_IMAGE_UPDATED);\n\t\tg_objGallery.off(g_gallery.events.ITEM_CHANGE);\n\t\t\n\t\tif(g_objBullets)\n\t\t\tjQuery(g_objBullets).on(g_objBullets.events.BULLET_CLICK);\n\t\t\n\t\tg_objSlider.off(\"mouseenter\");\n\t\tg_objSlider.off(\"mouseleave\");\n\t\t\n\t\tg_objSlider.off(\"touchend\");\n\t\tg_objSlider.off(\"click\");\n\t\tg_objThis.off(t.events.CLICK);\n\t\t\n\t\tif(g_objZoomSlider)\n\t\t\tg_objThis.off(t.events.ZOOM_CHANGE);\n\t\t\n\t\tg_objThis.off(t.events.BEFORE_SWITCH_SLIDES);\n\t\tjQuery(g_objVideoPlayer).off(g_objVideoPlayer.events.SHOW);\t\t\n\t\tjQuery(g_objVideoPlayer).off(g_objVideoPlayer.events.HIDE);\n\t\t\n\t\tg_objVideoPlayer.destroy();\n\t\t\n\t\tg_objSlider.off(\"mouseenter\",\".ug-item-wrapper img\");\n\t\tg_objSlider.off(\"mouseleave\",\".ug-item-wrapper img\");\n\t}\n\t\n\t\n\tfunction __________GETTERS___________(){};\n\t\n\t/**\n\t * get loader class by loader type\n\t */\n\tfunction getLoaderClass(){\n\t\tvar loaderClass;\n\t\tswitch(g_options.slider_loader_type){\n\t\t\tdefault:\n\t\t\tcase 1: loaderClass = \"ug-loader1\";break;\n\t\t\tcase 2: loaderClass = \"ug-loader2\";break;\n\t\t\tcase 3: loaderClass = \"ug-loader3\";break;\n\t\t\tcase 4: loaderClass = \"ug-loader4\";break;\n\t\t\tcase 5: loaderClass = \"ug-loader5\";break;\n\t\t\tcase 6: loaderClass = \"ug-loader6\";break;\n\t\t\tcase 7: loaderClass = \"ug-loader7\";break;\n\t\t\tcase 8: loaderClass = \"ug-loader8\";break;\n\t\t\tcase 9: loaderClass = \"ug-loader9\";break;\n\t\t}\n\t\t\t\t\n\t\tif(g_options.slider_loader_color == \"black\")\n\t\t\tloaderClass += \" ug-loader-black\";\n\t\t\n\t\treturn(loaderClass);\n\t}\n\t\n\t\n\t\n\t/**\n\t * \n\t * get slide by number\n\t */\n\tfunction getSlideByNum(num){\n\t\t\t\t\n\t\tswitch(num){\n\t\t\tcase 1:\n\t\t\t\treturn(g_objSlide1);\n\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\treturn(g_objSlide2);\n\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\treturn(g_objSlide3);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"wrong num: \" + num);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get slide direction of current item\n\t */\n\tfunction getSlideDirection(objItem){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\t//validate if the item is not selected already\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\tvar nextIndex = objItem.index;\n\t\t\n\t\tvar direction = \"left\";\n\t\tif(currentIndex > nextIndex)\n\t\t\tdirection = \"right\";\n\t\t\t\t\n\t\treturn(direction);\n\t}\n\t\n\t\n\t/**\n\t * get slide preloader\n\t */\n\tfunction getSlidePreloader(objSlide){\n\t\t\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar objPreloader = objSlide.children(\".ug-slider-preloader\");\n\t\treturn(objPreloader);\n\t}\n\t\n\t/**\n\t * get slide videoplay button\n\t */\n\tfunction getSlideVideoPlayButton(objSlide){\n\t\tvar objButton = objSlide.children(\".ug-button-videoplay\");\n\t\treturn(objButton);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get slide item\n\t */\n\tfunction getSlideItem(objSlide){\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\t\n\t\tvar index = objSlide.data(\"index\");\n\t\tif(index == undefined)\n\t\t\treturn(null);\n\t\t\n\t\tvar objItem = g_gallery.getItem(index);\n\t\treturn(objItem);\n\t}\n\t\n\t\n\t/**\n\t * get slide number\n\t */\n\tfunction getNumSlide(objSlide){\n\t\tvar numSlide = objSlide.data(\"slidenum\");\n\t\treturn(numSlide);\n\t}\n\t\n\t\n\t\n\tthis.________EXTERNAL_GENERAL___________ = function(){};\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t * options: width / height\n\t */\n\tthis.init = function(objGallery, objOptions, optionsPrefix){\n\t\t\t\t\n\t\tinitSlider(objGallery, objOptions, optionsPrefix);\n\t}\n\n\t/**\n\t * get slide image\n\t */\n\tthis.getSlideImage = function(objSlide){\n\t\t\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar objImage = objSlide.find(\".ug-item-wrapper img\");\n\t\treturn(objImage);\n\t}\n\t\n\t\n\t/**\n\t * set slider html\n\t */\n\tthis.setHtml = function(objParent){\n\t\t\n\t\tsetHtmlSlider(objParent);\n\t}\n\t\n\t\n\t/**\n\t * run the slider\n\t */\n\tthis.run = function(){\n\t\t\n\t\trunSlider();\n\t}\n\t\n\t\n\t/**\n\t * check if the inner object in place, for panning znd zooming posibility check\n\t */\n\tthis.isInnerInPlace = function(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\tvar posCurrent = g_functions.getElementSize(slides.objCurrentSlide);\n\t\tvar inPlaceX = -posCurrent.left;\n\t\tvar objInnerSize = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tif(inPlaceX == objInnerSize.left)\n\t\t\treturn(true);\n\t\telse\n\t\t\treturn(false);\n\t}\n\t\n\t/**\n\t * is animating\n\t */\n\tthis.isAnimating = function(){\n\t\t\n\t\tvar isAnimated = g_objInner.is(\":animated\");\n\t\t\n\t\treturn(isAnimated);\n\t}\n\t\n\t/**\n\t * check if the slide is current\n\t */\n\tthis.isSlideCurrent = function(objSlide){\n\t\tvar numSlide = objSlide.data(\"slidenum\");\n\t\tif(g_temp.numCurrent == numSlide)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * tells if the slide has item\n\t */\n\tthis.isSlideHasItem = function(objSlide){\n\t\tvar index = objSlide.data(\"index\");\n\t\tif(index === undefined || index === null)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * get image padding object for scaling the image\n\t */\n\tthis.getObjImagePadding = function(){\n\t\t\n\t\tvar objPadding = {\n\t\t\t\tpadding_top: g_options.slider_image_padding_top,\n\t\t\t\tpadding_bottom: g_options.slider_image_padding_bottom,\n\t\t\t\tpadding_left: g_options.slider_image_padding_left,\n\t\t\t\tpadding_right: g_options.slider_image_padding_right\n\t\t};\n\t\t\n\t\treturn(objPadding);\n\t}\n\t\t\t\n\t\n\t/**\n\t * get items reference by their order\n\t */\n\tthis.getSlidesReference = function(){\n\t\t\n\t\tvar obj = {\n\t\t\t\tobjPrevSlide: getSlideByNum(g_temp.numPrev),\n\t\t\t\tobjNextSlide: getSlideByNum(g_temp.numNext),\n\t\t\t\tobjCurrentSlide: getSlideByNum(g_temp.numCurrent)\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get current slide\n\t */\n\tthis.getCurrentSlide = function(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\treturn(slides.objCurrentSlide);\n\t}\n\t\n\t\n\t/**\n\t * get index of current item\n\t */\n\tthis.getCurrentItemIndex = function(){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\tif(currentIndex === null || currentIndex === undefined)\n\t\t\tcurrentIndex = -1;\n\t\t\n\t\treturn(currentIndex);\n\t}\n\t\n\t\n\t/**\n\t * get current slide item\n\t */\n\tthis.getCurrentItem = function(){\n\t\tvar currentIndex = t.getCurrentItemIndex();\n\t\tif(currentIndex == -1)\n\t\t\treturn(null);\n\t\t\n\t\tvar objItem = g_gallery.getItem(currentIndex);\n\t\t\n\t\treturn(objItem);\n\t}\n\t\t\n\t\n\t/**\n\t * get type of some slide\n\t */\n\tthis.getSlideType = function(objSlide){\n\t\t\n\t\tif(objSlide == undefined)\n\t\t\tobjSlide = t.getCurrentSlide();\n\t\t\t\n\t\tvar type = objSlide.data(\"type\");\n\t\treturn(type);\t\t\n\t}\n\n\t\n\t/**\n\t * is mouse inside slide image\n\t * get mouse position from event\n\t */\n\tthis.isMouseInsideSlideImage = function(event){\n\t\t\n\t\tvar objImage = t.getSlideImage();\n\t\t\n\t\tvar point = g_functions.getMousePosition(event);\n\t\tif(point.pageX === undefined)\n\t\t\tpoint = g_objTouchSlider.getLastMousePos();\n\t\t\n\t\tvar pointImg = g_functions.getMouseElementPoint(point, objImage);\n\t\tvar objSize = g_functions.getElementSize(objImage);\n\t\tisMouseInside = g_functions.isPointInsideElement(pointImg, objSize);\n\t\t\n\t\treturn(isMouseInside);\n\t}\n\t\n\t\n\t/**\n\t * check if current slide type is certain type\n\t */\n\tthis.isCurrentSlideType = function(type){\n\t\tvar currentSlideType = t.getSlideType();\n\t\tif(currentSlideType == type)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * check if current slide is loading image\n\t */\n\tthis.isCurrentSlideLoadingImage = function(){\n\t\tvar currentSlide = t.getCurrentSlide();\n\t\tvar isLoading = currentSlide.data(\"isLoading\");\n\t\tif(isLoading === true)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * change the slider to some item content\n\t */\n\tthis.setItem = function(objItem, forseTransition, role){\n\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\t\n\t\t//validate if the item is not selected already\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\tvar nextIndex = objItem.index;\n\t\t\n\t\tif(nextIndex == currentIndex){\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tvar isFirstSlide = (currentIndex == undefined);\n\t\t\n\t\tif(isFirstSlide){\t\t\t\n\t\t\tsetItemToSlide(slides.objCurrentSlide, objItem);\n\t\t\tt.placeNabourItems();\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tvar direction = \"left\";\t\t//move foreward\n\t\t\t\n\t\t\tvar numItems = g_gallery.getNumItems();\n\t\t\t\n\t\t\tif(role == \"next\")\n\t\t\t\tdirection = \"left\";\n\t\t\telse if(role == \"prev\" || currentIndex > nextIndex)\n\t\t\t\tdirection = \"right\";\n\t\t\telse if(currentIndex > nextIndex)\n\t\t\t\t\tdirection = \"right\";\n\t\t\t\t\t\t\n\t\t\tdoTransition(direction, objItem, forseTransition);\n\t\t}\n\t\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * when the transition complete, put the next / prev items at their place\n\t */\n\tthis.placeNabourItems = function(){\n\t\t\t\t\n\t\tvar slides = t.getSlidesReference();\n\t\tvar currentIndex = slides.objCurrentSlide.data(\"index\");\n\t\t\t\t\n\t\tvar itemPrev = g_gallery.getPrevItem(currentIndex);\n\t\tvar itemNext = g_gallery.getNextItem(currentIndex);\n\t\t\n\t\t//trace(itemPrev);\n\t\t//trace(itemNext);\n\t\t\n\t\t//trace(\"place \" + currentIndex, \"next: \"+);\n\t\t\n\t\tsetItemToSlide(slides.objNextSlide, itemNext);\n\t\tsetItemToSlide(slides.objPrevSlide, itemPrev);\n\t\t\n\t\tpositionSlides();\n\t}\n\t\n\t\n\t\n\tthis.________EXTERNAL_API___________ = function(){};\n\t\n\t\n\t/**\n\t * stop some slide action if active\n\t */\n\tthis.stopSlideAction = function(objSlide, isPause){\n\t\t\n\t\tif(!objSlide)\n\t\t\tobjSlide = t.getCurrentSlide();\n\t\t\n\t\tif(isPause === true)\n\t\t\tg_objVideoPlayer.pause();\n\t\telse\n\t\t\tg_objVideoPlayer.hide();\n\t\t\n\t//\ttrace(\"stop action\");\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * start some slide action if exists\n\t */\n\tthis.startSlideAction = function(objSlide){\n\t\t\n\t//\ttrace(\"start action\");\n\t\t\n\t\tif(!objSlide)\n\t\t\tobjSlide = t.getCurrentSlide();\n\t\t\n\t\tvar objItem = getSlideItem(objSlide);\n\t\t\n\t\tif(objItem.type == \"image\")\n\t\t\treturn(true)\n\t\t\n\t\tif(g_options.slider_video_constantsize == true)\n\t\t\tsetVideoPlayerConstantSize();\n\t\t\n\t\tsetVideoPlayerPosition();\n\t\t\n\t\tg_objVideoPlayer.show();\n\t\t\n\t\tswitch(objItem.type){\n\t\t\tcase \"youtube\":\n\t\t\t\tg_objVideoPlayer.playYoutube(objItem.videoid);\n\t\t\tbreak;\n\t\t\tcase \"vimeo\":\n\t\t\t\tg_objVideoPlayer.playVimeo(objItem.videoid);\n\t\t\tbreak;\n\t\t\tcase \"html5video\":\n\t\t\t\tg_objVideoPlayer.playHtml5Video(objItem.videoogv, objItem.videowebm, objItem.videomp4, objItem.urlImage);\n\t\t\tbreak;\n\t\t\tcase \"soundcloud\":\n\t\t\t\tg_objVideoPlayer.playSoundCloud(objItem.trackid);\n\t\t\tbreak;\t\t\t\n\t\t\tcase \"wistia\":\n\t\t\t\tg_objVideoPlayer.playWistia(objItem.videoid);\n\t\t\tbreak;\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get the scale mode according the state (normal, fullscreen).\n\t */\n\tthis.getScaleMode = function(objSlide){\n\t\t\n\t\tif(!objSlide)\n\t\t\tvar objSlide = t.getCurrentSlide();\n\t\t\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\t\t\n\t\t//return media scale mode\n\t\tif(slideType != \"image\")\n\t\t\treturn(g_options.slider_scale_mode_media);\n\t\t\n\t\tif(g_options.slider_scale_mode == g_options.slider_scale_mode_fullscreen)\n\t\t\treturn(g_options.slider_scale_mode);\n\t\t\n\t\tif(g_gallery.isFullScreen() == true)\n\t\t\treturn(g_options.slider_scale_mode_fullscreen);\n\t\telse\n\t\t\treturn(g_options.slider_scale_mode);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get slider objects\n\t */\n\tthis.getObjects = function(){\n\t\t\n\t\tvar obj = {\n\t\t\t\tg_objSlider: g_objSlider,\n\t\t\t\tg_objInner: g_objInner,\n\t\t\t\tg_options: g_options,\n\t\t\t\tg_objZoomSlider: g_objZoomSlider\n\t\t};\n\t\t\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * get zoom object\n\t */\n\tthis.getObjZoom = function(){\n\t\t\n\t\treturn(g_objZoomSlider);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get slider options\n\t */\n\tthis.getOptions = function(){\n\t\t\n\t\treturn(g_options);\n\t}\n\t\n\t\n\t/**\n\t * get slider element\n\t */\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objSlider);\n\t}\n\t\n\t/**\n\t * get video object\n\t */\n\tthis.getVideoObject = function(){\n\t\treturn(g_objVideoPlayer);\n\t}\n\t\n\t\n\t/**\n\t * return true if current slider image fit the slider\n\t * @returns\n\t */\n\tthis.isCurrentSlideImageFit = function(){\n\t\tvar objSlide = t.getCurrentSlide();\n\n\t\tvar slideType = t.getSlideType(objSlide);\n\t\t\n\t\tvalidateSlideType(\"image\", objSlide);\n\t\t\n\t\tvar objImage = t.getSlideImage(objSlide);\n\t\t\n\t\t//if image don't yet added to dom, return false\n\t\tif(objImage.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tvar isFit = g_functions.isImageFitParent(objImage);\n\t\t\n\t\treturn(isFit);\n\t}\n\t\n\t\n\t/**\n\t * check if current image in place\n\t */\n\tthis.isCurrentImageInPlace = function(){\n\t\t\n\t\tvar objImage = t.getSlideImage();\n\t\tif(objImage.length == 0)\n\t\t\treturn(false);\n\n\t\tvar scaleMode = t.getScaleMode();\n\t\tvar objPadding = t.getObjImagePadding();\n\t\tvar objItem = getSlideItem();\n\t\t\n\t\tvar objParent = objImage.parent();\n\t\t\n\t\tvar objFitSize = g_functions.getImageInsideParentData(objParent, objItem.imageWidth, objItem.imageHeight, scaleMode, objPadding);\n\t\tvar objSize = g_functions.getElementSize(objImage);\n\n\t\tvar output = false;\n\t\t\n\t\tif(objFitSize.imageWidth == objSize.width)\n\t\t\toutput = true;\n\t\t\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * if slide is bussy in some action\n\t */\n\tthis.isSlideActionActive = function(){\n\t\t\n\t\treturn g_objVideoPlayer.isVisible();\n\t}\n\t\n\t/**\n\t * return if swipe action active\n\t */\n\tthis.isSwiping = function(){\n\t\tif(!g_objTouchSlider)\n\t\t\treturn(false);\n\t\t\n\t\tvar isActive = g_objTouchSlider.isTouchActive();\n\t\t\n\t\treturn(isActive);\n\t}\n\t\n\t\n\t/**\n\t * if slider preloading image (if preloader visible)\n\t */\n\tthis.isPreloading = function(){\n\t\t\n\t\tvar objPreloader = getSlidePreloader();\n\t\tif(objPreloader.is(\":visible\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * set the options\n\t */\n\tthis.setOptions = function(objOptions){\n\n\t\t//change options by prefix\n\t\tif(g_optionsPrefix)\n\t\t\tobjOptions = g_functions.convertCustomPrefixOptions(objOptions, g_optionsPrefix, \"slider\");\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the slider size\n\t * works well on resize too.\n\t */\n\tthis.setSize = function(width, height){\n\t\t\n\t\t if(width < 0 || height < 0)\n\t\t\t return(true);\n\t\t\n\t\t var objCssSlider = {};\n\t\t objCssSlider[\"width\"] = width + \"px\";\n\t\t objCssSlider[\"height\"] = height + \"px\";\n\t\t g_objSlider.css(objCssSlider);\n\t\t \t\t \n\t\t //set inner:\n\t\t var objCssInner = {};\n\t\t objCssInner[\"height\"] = height + \"px\";\n\t\t objCssInner[\"top\"] = \"0px\";\n\t\t objCssInner[\"left\"] = \"0px\";\n\t\t g_objInner.css(objCssInner);\n\t\t \n\t\t//set slide wrapper\n\t\t var objCssSlide = {};\n\t\t objCssSlide[\"height\"] = height + \"px\";\n\t\t objCssSlide[\"width\"] = width + \"px\";\n\t\t \n\t\t g_objSlide1.css(objCssSlide);\n\t\t g_objSlide2.css(objCssSlide);\n\t\t g_objSlide3.css(objCssSlide);\n\t\t \n\t\t var itemWidth = width - g_options.slider_item_padding_left - g_options.slider_item_padding_right;\n\t\t var itemHeight = height - g_options.slider_item_padding_top - g_options.slider_item_padding_bottom;\n\t\t \t\n\t\t //set item wrapper\n\t\t var objCssItemWrapper = {};\n\t\t objCssItemWrapper[\"width\"] = itemWidth + \"px\";\n\t\t objCssItemWrapper[\"height\"] = itemHeight + \"px\";\n\t\t objCssItemWrapper[\"top\"] = g_options.slider_item_padding_top + \"px\";\n\t\t objCssItemWrapper[\"left\"] = g_options.slider_item_padding_left + \"px\";\n\t\t \n\t\t g_objSlider.find(\".ug-item-wrapper\").css(objCssItemWrapper);\t\t \n\t\t \n\t\t \n\t\t //set text panel size\n\t\t if(g_objTextPanel){\n\t\t\t g_objTextPanel.setSizeByParent();\n\t\t }\n\t\t \n\t\t positionElements();\n\t\t \n\t\t //set image to slides\n\t\t resizeSlideItem(g_objSlide1);\n\t\t resizeSlideItem(g_objSlide2);\n\t\t resizeSlideItem(g_objSlide3);\n\t\t \n\t\t positionSlides();\n\t\t \t\t \n\t\t //set video player size\n\t\t var currentSlideType = t.getSlideType();\n\t\t\n\t\t if(currentSlideType != \"image\" && g_options.slider_video_constantsize == true){\n\t\t\t \n\t\t\t setVideoPlayerConstantSize();\n\t\t }else{\t\n\t\t\t var videoWidth = width - g_options.slider_video_padding_left - g_options.slider_video_padding_right;\n\t\t\t var videoHeight = height - g_options.slider_video_padding_top - g_options.slider_video_padding_bottom;\n\t\t\t \n\t\t\t //set video player size\n\t\t\t g_objVideoPlayer.setSize(videoWidth, videoHeight);\n\t\t }\n\t\t \n\t\t setVideoPlayerPosition();\n\t\t \n\t}\n\t\n\t\n\t/**\n\t * refresh slide items after options change\n\t */\n\tthis.refreshSlideItems = function(){\n\t\t \n\t\tif(t.isAnimating() == true)\n\t\t\treturn(true);\n\t\t\n\t\t resizeSlideItem(g_objSlide1);\n\t\t resizeSlideItem(g_objSlide2);\n\t\t resizeSlideItem(g_objSlide3);\n\t\t positionSlides();\n\t\t \n\t}\n\t\n\t\n\t/**\n\t * is mouse over the slider\n\t */\n\tthis.isMouseOver = function(){\n\t\t\n\t\treturn g_objSlider.ismouseover();\n\t}\n\t\n\t/**\n\t * set slider position\n\t */\n\tthis.setPosition = function(left, top){\n\t\t\n\t\tg_functions.placeElement(g_objSlider, left, top);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomIn = function(){\n\t\tif(!g_objZoomSlider)\n\t\t\treturn(true);\n\t\t\n\t\tg_objZoomSlider.zoomIn();\n\t}\n\t\n\t/**\n\t * zoom out\n\t */\n\tthis.zoomOut = function(){\n\t\t\n\t\tif(!g_objZoomSlider)\n\t\t\treturn(true);\n\t\t\n\t\tg_objZoomSlider.zoomOut();\n\t\t\t\n\t}\n\t\n\t/**\n\t * zoom back to original\n\t */\n\tthis.zoomBack = function(){\n\t\t\n\t\tif(!g_objZoomSlider)\n\t\t\treturn(true);\n\t\t\n\t\tg_objZoomSlider.zoomBack();\t\n\t}\n\t\n\t\n}\n\n/** -------------- TextPanel class ---------------------*/\n\nfunction UGTextPanel(){\n\t\n\tvar t = this;\n\tvar g_objPanel, g_objParent, g_objTitle, g_objDesc;\n\tvar g_objBG, g_objTextWrapper, g_gallery;\n\tvar g_functions = new UGFunctions(), g_optionsPrefix = \"\";\n\t\n\tvar g_options = {\n\t\t\ttextpanel_align:\"bottom\",\t\t\t\t\t//(top , bottom), textpanel align according the parent\n\t\t\ttextpanel_margin:0,\t\t\t\t\t\t\t//margin from the textpanel position according the textpanel_align\n\t\t\ttextpanel_text_valign:\"middle\",\t\t\t\t//middle, top, bottom - text vertical align\n\t\t\ttextpanel_padding_top:10,\t\t\t\t\t//textpanel padding top \n\t\t\ttextpanel_padding_bottom:10,\t\t\t\t//textpanel padding bottom\n\t\t\ttextpanel_height: null,\t\t\t\t\t\t//textpanel height. if null it will be set dynamically\n\t\t\ttextpanel_padding_title_description: 5,\t\t//the space between the title and the description\n\t\t\ttextpanel_padding_right: 11,\t\t\t\t//cut some space for text from right\n\t\t\ttextpanel_padding_left: 11,\t\t\t\t\t//cut some space for text from left\n\t\t\ttextpanel_fade_duration: 200,\t\t\t\t//the fade duration of textpanel appear\n\t\t\ttextpanel_enable_title: true,\t\t\t\t//enable the title text\n\t\t\ttextpanel_enable_description: true,\t\t\t//enable the description text\n\t\t\ttextpanel_enable_bg: true,\t\t\t\t\t//enable the textpanel background\n\t\t\ttextpanel_bg_color:\"#000000\",\t\t\t\t//textpanel background color\n\t\t\ttextpanel_bg_opacity: 0.4,\t\t\t\t\t//textpanel background opacity\n\t\t\t\n\t\t\ttextpanel_title_color:null,\t\t\t\t\t//textpanel title color. if null - take from css\n\t\t\ttextpanel_title_font_family:null,\t\t\t//textpanel title font family. if null - take from css\n\t\t\ttextpanel_title_text_align:null,\t\t\t//textpanel title text align. if null - take from css\n\t\t\ttextpanel_title_font_size:null,\t\t\t\t//textpanel title font size. if null - take from css\n\t\t\ttextpanel_title_bold:null,\t\t\t\t\t//textpanel title bold. if null - take from css\n\t\t\ttextpanel_css_title:{},\t\t\t\t\t\t//textpanel additional css of the title\n\n\t\t\ttextpanel_desc_color:null,\t\t\t\t\t//textpanel description font family. if null - take from css\n\t\t\ttextpanel_desc_font_family:null,\t\t\t//textpanel description font family. if null - take from css\n\t\t\ttextpanel_desc_text_align:null,\t\t\t\t//textpanel description text align. if null - take from css\n\t\t\ttextpanel_desc_font_size:null,\t\t\t\t//textpanel description font size. if null - take from css\n\t\t\ttextpanel_desc_bold:null,\t\t\t\t\t//textpanel description bold. if null - take from css\n\t\t\ttextpanel_css_description:{},\t\t\t\t//textpanel additional css of the description\n\t\t\t\n\t\t\ttextpanel_desc_style_as_title: false,\t\t//set that the description style will be as title\n\t\t\t\n\t\t\ttextpanel_bg_css:{}\t\t\t\t\t\t\t//textpanel background css\n\t};\n\t\n\tvar g_temp = {\n\t\t\tisFirstTime: true,\n\t\t\tsetInternalHeight: true,\t//flag if set internal height or not\n\t\t\tlastTitleBottom: 0,\n\t\t\tlastDescHeight: 0\n\t};\n\t\n\t\n\t/**\n\t * position elements from top\n\t */\n\tfunction positionElementsTop(animateHeight, startY){\n\t\t\n\t\tif(!startY)\n\t\t\tvar startY = g_options.textpanel_padding_top;\n\t\t\n\t\t//place title\n\t\tvar maxy = startY;\n\t\t\n\t\t//place title\n\t\tif(g_objTitle){\n\t\t\tvar titleY = maxy;\n\t\t\tg_functions.placeElement(g_objTitle, 0, titleY);\n\t\t\t\n\t\t\tvar isTitleVisible = g_objTitle.is(\":visible\");\n\t\t\tif(isTitleVisible == true){\n\t\t\t\tvar objTitleSize = g_functions.getElementSize(g_objTitle);\n\t\t\t\t\n\t\t\t\tvar maxy = objTitleSize.bottom;\n\t\t\t\tif(maxy > 0)\n\t\t\t\t\tg_temp.lastTitleBottom = maxy;\n\t\t\t}else{\n\t\t\t\tvar maxy = 20;\t\t//get last or assumed maxy\n\t\t\t\t\n\t\t\t\tif(g_temp.lastTitleBottom > 0)\n\t\t\t\t\tmaxy = g_temp.lastTitleBottom;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\t\t\n\t\t//place description\n\t\tvar textDesc = \"\";\n\t\tif(g_objDesc)\n\t\t\ttextDesc = jQuery.trim(g_objDesc.text());\n\t\t\n\t\tif(textDesc != \"\"){\n\t\t\t\n\t\t\tvar descY = maxy;\n\t\t\t\t\t\t\n\t\t\tif(g_objTitle)\n\t\t\t\tdescY += g_options.textpanel_padding_title_description;\n\t\t\t\n\t\t\tg_functions.placeElement(g_objDesc, 0, descY);\n\t\t\t\n\t\t\tvar isVisible = jQuery(g_objDesc).is(\":visible\");\n\t\t\t\n\t\t\tif(isVisible == true){\n\t\t\t\tvar objDescSize = g_functions.getElementSize(g_objDesc);\n\t\t\t\tmaxy = objDescSize.bottom;\n\t\t\t\t\n\t\t\t\tif(objDescSize.height > 0)\n\t\t\t\t\tg_temp.lastDescHeight = objDescSize.height;\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvar descHeight = 16;\t\t\t//take from last saved\n\t\t\t\tif(g_temp.lastDescHeight > 0)\n\t\t\t\t\tdescHeight = g_temp.lastDescHeight;\n\t\t\t\t\n\t\t\t\tmaxy = descY + descHeight;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//change panel height\n\t\tif(!g_options.textpanel_height && g_temp.setInternalHeight == true){\n\t\t\t\n\t\t\tvar panelHeight = maxy + g_options.textpanel_padding_bottom;\t\t\n\t\t\t\n\t\t\tsetHeight(panelHeight, animateHeight);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * get total text and description height\n\t */\n\tfunction getTotalTextHeight(){\n\t\tvar totalHeight = 0;\n\t\t\n\t\tif(g_objTitle)\n\t\t\ttotalHeight += g_objTitle.outerHeight();\n\t\t\n\t\tif(g_objDesc){\n\t\t\tvar textDesc = \"\";\n\t\t\tif(g_objDesc)\n\t\t\t\ttextDesc = jQuery.trim(g_objDesc.text());\n\t\t\t\n\t\t\tif(textDesc != \"\"){\n\t\t\t\tif(g_objTitle)\n\t\t\t\t\ttotalHeight += g_options.textpanel_padding_title_description;\n\t\t\t\t\n\t\t\t\ttotalHeight += g_objDesc.outerHeight();\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\treturn(totalHeight);\n\t}\n\t\n\t\n\t/**\n\t * position elements to center\n\t */\n\tfunction positionElementsMiddle(){\n\t\t\n\t\tvar totalTextHeight = getTotalTextHeight();\n\t\tvar startY = (g_objTextWrapper.height() - totalTextHeight) / 2;\n\t\t\n\t\tpositionElementsTop(false, startY);\n\t}\n\t\n\t\n\t/**\n\t * position elements to bottom\n\t */\n\tfunction positionElementBottom(){\n\t\t\n\t\tvar totalTextHeight = getTotalTextHeight();\n\t\tvar startY = g_objTextWrapper.height() - totalTextHeight - g_options.textpanel_padding_bottom;\n\t\t\n\t\tpositionElementsTop(false, startY);\n\t}\n\t\n\t\n\t/**\n\t * position elements inside the panel\n\t */\n\tthis.positionElements = function(animateHeight){\n\n\t\t//if(g_objPanel.is(\":visible\") == false)\n\t\t\t//trace(\"the text panel is hidden. can't position elements\")\n\t\t\n\t\t//if height not set, position only top\n\t\tif(!g_options.textpanel_height || g_options.textpanel_text_valign == \"top\"){\n\t\t\tpositionElementsTop(animateHeight);\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tswitch(g_options.textpanel_text_valign){\n\t\t\tdefault:\n\t\t\tcase \"top\":\n\t\t\t\tpositionElementsTop(false);\t\t//no animation in this case\n\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tpositionElementBottom();\n\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\tcase \"middle\":\n\t\t\t\tpositionElementsMiddle();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set new panel height\n\t */\n\tfunction setHeight(height, animateHeight){\n\t\t\n\t\tif(!animateHeight)\n\t\t\tvar animateHeight = false;\n\t\t\n\t\tif(animateHeight == true){\n\t\t\t\n\t\t\tif(g_objBG){\n\t\t\t\t\n\t\t\t\t//avoid background jumps\n\t\t\t\tvar currentHeight = g_objBG.height();\n\t\t\t\tif(height > currentHeight)\n\t\t\t\t\tg_objBG.height(height);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tvar objCss = {height: height+\"px\"};\n\t\t\tg_objPanel.add(g_objTextWrapper).animate(objCss, g_options.textpanel_fade_duration);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_objBG)\n\t\t\t\tg_objBG.height(height);\t\t\n\t\t\t\n\t\t\tg_objPanel.add(g_objTextWrapper).height(height);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(objGallery, customOptions, optionsPrefix){\n\t\t\t\t\n\t\tg_gallery = objGallery;\n\t\t\n\t\t//change options by prefix\n\t\tif(optionsPrefix){\n\t\t\tg_optionsPrefix = optionsPrefix;\n\t\t\tcustomOptions = g_functions.convertCustomPrefixOptions(customOptions,g_optionsPrefix,\"textpanel\");\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tif(customOptions)\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\t//validation:\n\t\tif(g_options.textpanel_enable_title == false && g_options.textpanel_enable_description == false)\n\t\t\tthrow new Error(\"Textpanel Error: The title or description must be enabled\");\n\t\t\n\t\tif(g_options.textpanel_height && g_options.textpanel_height < 0)\n\t\t\tg_options.textpanel_height = null;\n\t\t\n\t\t//copy desc style from title\n\t\tif(g_options.textpanel_desc_style_as_title == true){\n\t\t\tif(!g_options.textpanel_desc_color)\n\t\t\t\tg_options.textpanel_desc_color = g_options.textpanel_title_color;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_bold)\n\t\t\t\tg_options.textpanel_desc_bold = g_options.textpanel_title_bold;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_font_family)\n\t\t\t\tg_options.textpanel_desc_font_family = g_options.textpanel_title_font_family;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_font_size)\n\t\t\t\tg_options.textpanel_desc_font_size = g_options.textpanel_title_font_size;\n\t\t\t\n\t\t\tif(!g_options.textpanel_desc_text_align)\n\t\t\t\tg_options.textpanel_desc_text_align = g_options.textpanel_title_text_align;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * append the bullets html to some parent\n\t */\n\tthis.appendHTML = function(objParent, addClass){\n\t\tg_objParent = objParent;\n\t\t\n\t\tif(addClass){\n\t\t\taddClass = \" \"+addClass;\n\t\t}else\n\t\t\taddClass = \"\";\n\t\t\n\t\tvar html = \"<div class='ug-textpanel\"+addClass+\"'>\";\n\t\t\n\t\tif(g_options.textpanel_enable_bg == true)\n\t\t\thtml += \"<div class='ug-textpanel-bg\"+addClass+\"'></div>\";\n\t\t\n\t\thtml += \"<div class='ug-textpanel-textwrapper\"+addClass+\"'>\";\n\t\t\n\t\tif(g_options.textpanel_enable_title == true)\n\t\t\thtml += \"<div class='ug-textpanel-title\"+addClass+\"'></div>\";\n\t\t\n\t\tif(g_options.textpanel_enable_description == true)\n\t\t\thtml += \"<div class='ug-textpanel-description\"+addClass+\"'></div>\";\n\t\t\n\t\thtml += \"</div></div>\";\n\t\t\n\t\tobjParent.append(html);\n\t\t\n\t\tg_objPanel = objParent.children(\".ug-textpanel\");\n\t\tg_objTextWrapper = g_objPanel.children(\".ug-textpanel-textwrapper\");\n\t\t\n\t\tsetCss();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set panel css according the options\n\t */\n\tfunction setCss(){\n\t\t\t\t\n\t\t//set background css\t\t\n\t\tif(g_options.textpanel_enable_bg == true){\n\t\t\tg_objBG = g_objPanel.children(\".ug-textpanel-bg\");\n\t\t\tg_objBG.fadeTo(0,g_options.textpanel_bg_opacity);\n\t\t\t\n\t\t\tvar objCssBG = {\"background-color\":g_options.textpanel_bg_color};\n\t\t\tobjCssBG = jQuery.extend(objCssBG, g_options.textpanel_bg_css);\n\t\t\t\n\t\t\tg_objBG.css(objCssBG);\n\t\t}\n\t\t\n\t\t\n\t\t//set title css from options\n\t\tif(g_options.textpanel_enable_title == true){\n\t\t\tg_objTitle = g_objTextWrapper.children(\".ug-textpanel-title\");\n\t\t\tvar objCssTitle = {};\n\t\t\t\n\t\t\tif(g_options.textpanel_title_color !== null)\n\t\t\t\tobjCssTitle[\"color\"] = g_options.textpanel_title_color;\n\t\t\t\n\t\t\tif(g_options.textpanel_title_font_family !== null)\n\t\t\t\tobjCssTitle[\"font-family\"] = g_options.textpanel_title_font_family;\n\t\t\t\n\t\t\tif(g_options.textpanel_title_text_align !== null)\n\t\t\t\tobjCssTitle[\"text-align\"] = g_options.textpanel_title_text_align;\n\t\t\t\n\t\t\tif(g_options.textpanel_title_font_size !== null)\n\t\t\t\tobjCssTitle[\"font-size\"] = g_options.textpanel_title_font_size+\"px\";\n\t\t\t\n\t\t\tif(g_options.textpanel_title_bold !== null){\n\t\t\t\t\n\t\t\t\tif(g_options.textpanel_title_bold === true)\n\t\t\t\t\tobjCssTitle[\"font-weight\"] = \"bold\";\n\t\t\t\telse\n\t\t\t\t\tobjCssTitle[\"font-weight\"] = \"normal\";\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//set additional css\n\t\t\tif(g_options.textpanel_css_title)\n\t\t\t\tobjCssTitle = jQuery.extend(objCssTitle, g_options.textpanel_css_title);\n\t\t\t\n\t\t\tg_objTitle.css(objCssTitle);\n\t\t}\n\t\t\n\t\t//set description css\n\t\tif(g_options.textpanel_enable_description == true){\n\t\t\tg_objDesc = g_objTextWrapper.children(\".ug-textpanel-description\");\n\t\t\t\n\t\t\tvar objCssDesc = {};\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_color !== null)\n\t\t\t\tobjCssDesc[\"color\"] = g_options.textpanel_desc_color;\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_font_family !== null)\n\t\t\t\tobjCssDesc[\"font-family\"] = g_options.textpanel_desc_font_family;\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_text_align !== null)\n\t\t\t\tobjCssDesc[\"text-align\"] = g_options.textpanel_desc_text_align;\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_font_size !== null)\n\t\t\t\tobjCssDesc[\"font-size\"] = g_options.textpanel_desc_font_size+\"px\";\n\t\t\t\n\t\t\tif(g_options.textpanel_desc_bold !== null){\n\t\t\t\t\n\t\t\t\tif(g_options.textpanel_desc_bold === true)\n\t\t\t\t\tobjCssDesc[\"font-weight\"] = \"bold\";\n\t\t\t\telse\n\t\t\t\t\tobjCssDesc[\"font-weight\"] = \"normal\";\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t//set additional css\n\t\t\tif(g_options.textpanel_css_title)\n\t\t\t\tobjCssDesc = jQuery.extend(objCssDesc, g_options.textpanel_css_description);\n\t\t\t\t\n\t\t\tg_objDesc.css(objCssDesc);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on item change, set the text\n\t */\n\tfunction onItemChange(){\n\t\tvar objItem = g_gallery.getSelectedItem();\n\t\tt.setText(objItem.title, objItem.description);\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//on item change, set the text in the slider.\n\t\tjQuery(g_gallery).on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t}\n\t\n\t\n\t/**\n\t * destroy the events\n\t */\n\tthis.destroy = function(){\n\t\tjQuery(g_gallery).off(g_gallery.events.ITEM_CHANGE);\n\t}\n\t\n\t/**\n\t * run the text panel\n\t */\n\tthis.run = function(){\n\t\t\n\t\tt.setSizeByParent();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t/**\n\t * set panel size\n\t */\n\tthis.setPanelSize = function(panelWidth, panelHeight){\n\t\t\n\t\tg_temp.setInternalHeight = true;\n\t\t\n\t\tif(!panelHeight)\n\t\t\tvar panelHeight = 80;\t\t//some default number\n\t\telse\n\t\t\tg_temp.setInternalHeight = false;\n\t\t\n\t\tif(g_options.textpanel_height)\t\n\t\t\tpanelHeight = g_options.textpanel_height;\n\t\t\n\t\tg_objPanel.width(panelWidth);\n\t\tg_objPanel.height(panelHeight);\n\t\t\n\t\t//set background size\n\t\tif(g_objBG){\n\t\t\tg_objBG.width(panelWidth);\n\t\t\tg_objBG.height(panelHeight);\n\t\t}\n\t\t\n\t\t//set textwrapper size and position\n\t\tvar textWrapperWidth = panelWidth - g_options.textpanel_padding_left - g_options.textpanel_padding_right;\n\t\tvar textWrapperLeft = g_options.textpanel_padding_left;\n\t\t\n\t\tg_functions.setElementSizeAndPosition(g_objTextWrapper, textWrapperLeft, 0, textWrapperWidth, panelHeight);\n\t\t\n\t\t//set text width\n\t\tif(g_objTitle)\n\t\t\tg_objTitle.width(textWrapperWidth);\n\t\t\n\t\t//set description height\n\t\tif(g_objDesc)\n\t\t\tg_objDesc.width(textWrapperWidth);\n\t\t\n\t\tif(g_temp.isFirstTime == false)\n\t\t\tt.positionElements(false);\n\t}\n\t\n\t\n\t/**\n\t * set size by parent. the height is set to default meanwhile\n\t */\n\tthis.setSizeByParent = function(){\n\t\t\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objParent);\n\t\tt.setPanelSize(objSize.width);\n\t}\n\t\n\t/**\n\t * set plain sext without other manipulations\n\t */\n\tthis.setTextPlain = function(title, description){\n\n\t\tif(g_objTitle)\n\t\t\tg_objTitle.html(title);\n\t\t\n\t\tif(g_objDesc)\n\t\t\tg_objDesc.html(description);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set html text\n\t */\n\tthis.setText = function(title, description){\n\t\t\n\t\tif(g_temp.isFirstTime == true){\n\t\t\t\n\t\t\tt.setTextPlain(title, description);\n\t\t\t\n\t\t\tg_temp.isFirstTime = false;\n\t\t\t\n\t\t\tt.positionElements(false);\n\t\t\n\t\t}else{\t\t//width animation\n\t\t\t\n\t\t\tg_objTextWrapper.stop().fadeTo(g_options.textpanel_fade_duration,0,function(){\n\t\t\t\t\n\t\t\t\tt.setTextPlain(title, description);\n\t\t\t\t\n\t\t\t\tt.positionElements(true);\n\t\t\t\t\n\t\t\t\tjQuery(this).fadeTo(g_options.textpanel_fade_duration,1);\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\t\n\t\n\t/**\n\t * position the panel\n\t */\n\tthis.positionPanel = function(customTop, customLeft){\n\t\t\n\t\tvar objCss = {};\n\t\t\n\t\tif(customTop !== undefined && customTop !== null){\n\t\t\tobjCss.top = customTop;\n\t\t\tobjCss.bottom = \"auto\";\n\t\t}else{\n\t\t\t\n\t\t\tswitch(g_options.textpanel_align){\n\t\t\t\tcase \"top\":\n\t\t\t\t\tobjCss.top = g_options.textpanel_margin + \"px\";\n\t\t\t\tbreak;\n\t\t\t\tcase \"bottom\":\n\t\t\t\t\tobjCss.top = \"auto\";\n\t\t\t\t\tobjCss.bottom = g_options.textpanel_margin + \"px\";\n\t\t\t\tbreak;\n\t\t\t\tcase \"middle\":\n\t\t\t\t\tobjCss.top = g_functions.getElementRelativePos(g_objPanel, \"middle\", g_options.textpanel_margin);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(customLeft !== undefined && customLeft !== null)\n\t\t\tobjCss.left = customLeft;\n\t\t\n\t\tg_objPanel.css(objCss);\n\t}\n\t\n\t\n\t/**\n\t * set custom options\n\t */\n\tthis.setOptions = function(objOptions){\n\t\t\n\t\tif(g_optionsPrefix)\n\t\t\tobjOptions = g_functions.convertCustomPrefixOptions(objOptions, g_optionsPrefix, \"textpanel\");\n\t\t\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get html element\n\t */\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objPanel);\n\t}\n\t\n\t/**\n\t * get element size\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objPanel);\n\t\treturn(objSize);\n\t}\n\t\n\t\n\t/**\n\t * refresh panel size, position and contents\n\t */\n\tthis.refresh = function(toShow, noPosition, panelWidth, panelHeight){\n\t\t\n\t\tsetCss();\n\t\t\n\t\tif(!panelWidth)\n\t\t\tt.setSizeByParent();\n\t\telse\n\t\t\tt.setPanelSize(panelWidth, panelHeight);\n\t\t\n\t\tt.positionElements(false);\n\t\t\n\t\tif(noPosition !== true)\n\t\t\tt.positionPanel();\n\t\t\n\t\tif(toShow === true)\n\t\t\tt.show();\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the panel\n\t */\n\tthis.hide = function(){\n\t\t\n\t\tg_objPanel.hide();\n\t}\n\t\n\t/**\n\t * show the panel\n\t */\n\tthis.show = function(){\n\t\tg_objPanel.show();\n\t}\n\t\n\t/**\n\t * get options\n\t */\n\tthis.getOptions = function(){\n\t\treturn(g_options);\n\t}\n\t\n\t/**\n\t * get text panel option\n\t */\n\tthis.getOption = function(optionName){\n\t\t\n\t\tif(g_options.hasOwnProperty(optionName) == false)\n\t\t\treturn(null);\n\t\t\n\t\treturn(g_options[optionName]);\n\t}\n\t\n\t\n}\n\n/** -------------- UGZoomButtonsPanel class ---------------------*/\n\n/**\n * zoom buttons panel class\n */\nfunction UGZoomButtonsPanel(){\n\t\n\tvar t = this;\n\tvar g_objPanel, g_objParent, g_objButtonPlus, g_objButtonMinus, g_objButtonReturn;\n\tvar g_slider = new UGSlider;\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tslider_zoompanel_skin: \"\"\t\t//skin of the zoom panel, if empty inherit from gallery skin\n\t};\n\t\n\tvar g_temp = {\n\t\t\n\t};\n\t\n\t\n\t/**\n\t * init the panel\n\t */\n\tthis.init = function(objSlider, customOptions){\n\t\t\n\t\tg_slider = objSlider;\n\t\t\n\t\tif(customOptions)\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\t\t\n\t}\n\t\n\t\n\t/**\n\t * append the bullets html to some parent\n\t */\n\tthis.appendHTML = function(objParent){\n\t\tg_objParent = objParent;\n\t\t\n\t\tvar html = \"<div class='ug-slider-control ug-zoompanel ug-skin-\"+g_options.slider_zoompanel_skin+\"'>\";\n\t\t\n\t\t\thtml += \"<div class='ug-zoompanel-button ug-zoompanel-plus'></div>\";\n\t\t\thtml += \"<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>\";\n\t\t\thtml += \"<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tobjParent.append(html);\n\t\t\n\t\tg_objPanel = objParent.children(\".ug-zoompanel\");\n\t\tg_objButtonPlus = g_objPanel.children(\".ug-zoompanel-plus\");\n\t\tg_objButtonMinus = g_objPanel.children(\".ug-zoompanel-minus\");\n\t\tg_objButtonReturn = g_objPanel.children(\".ug-zoompanel-return\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set objects - use it instead insert html\n\t */\n\tthis.setObjects = function(objButtonPlus, objButtonMinus, objButtonReturn){\n\t\t\n\t\tg_objButtonPlus = objButtonPlus;\n\t\tg_objButtonMinus = objButtonMinus;\n\t\tg_objButtonReturn = objButtonReturn;\n\t\t\n\t\tif(g_objButtonMinus)\n\t\t\tg_objButtonMinus.addClass(\"ug-zoompanel-button-disabled\");\n\t\t\n\t\tif(g_objButtonReturn)\n\t\t\tg_objButtonReturn.addClass(\"ug-zoompanel-button-disabled\");\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get buttons element\n\t*/\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objPanel);\n\t}\n\t\n\t\n\t/**\n\t * check if the button disabled\n\t */\n\tfunction isButtonDisabled(objButton){\n\t\t\n\t\tif(!objButton)\n\t\t\treturn(true);\n\t\t\n\t\tif(objButton.hasClass(\"ug-zoompanel-button-disabled\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * disable some button\n\t */\n\tfunction disableButton(objButton){\n\t\t\n\t\tif(objButton)\n\t\t\tobjButton.addClass(\"ug-zoompanel-button-disabled\");\n\t}\n\t\n\t/**\n\t * enable some button\n\t */\n\tfunction enableButton(objButton){\n\t\t\n\t\tif(objButton)\n\t\t\tobjButton.removeClass(\"ug-zoompanel-button-disabled\");\t\t\n\t}\n\t\n\t\n\t/**\n\t * on zoom change\n\t */\n\tfunction onZoomChange(){\n\t\t\n\t\t//skip not image types\n\t\tif(g_slider.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar isFit = g_slider.isCurrentSlideImageFit();\n\t\t\n\t\tif(isFit == true){\t\t//if fit, disable buttons\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonMinus) == false){\t\t\t\n\t\t\t\tdisableButton(g_objButtonMinus);\n\t\t\t\tdisableButton(g_objButtonReturn);\n\t\t\t}\n\t\t\t\n\t\t}else{\t//if not fit, enable minus buttons\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonMinus) == true){\n\t\t\t\tenableButton(g_objButtonMinus);\n\t\t\t\tenableButton(g_objButtonReturn);\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\n\t}\n\t\n\t/**\n\t * init zoompanel events\n\t */\n\tt.initEvents = function(){\n\t\t\n\t\t//add hover class on buttons\n\t\tg_functions.addClassOnHover(g_objButtonPlus, \"ug-button-hover\");\n\t\tg_functions.addClassOnHover(g_objButtonMinus, \"ug-button-hover\");\n\t\tg_functions.addClassOnHover(g_objButtonReturn, \"ug-button-hover\");\n\t\t\n\t\t//set buttons click events\n\t\t\n\t\tg_functions.setButtonOnClick(g_objButtonPlus, function(){\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonPlus) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_slider.zoomIn();\n\t\t});\n\t\t\n\t\tg_functions.setButtonOnClick(g_objButtonMinus, function(){\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonMinus) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_slider.zoomOut();\n\t\t});\n\t\t\n\t\tg_functions.setButtonOnClick(g_objButtonReturn, function(){\n\t\t\t\n\t\t\tif(isButtonDisabled(g_objButtonReturn) == true)\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tg_slider.zoomBack();\n\t\t});\n\t\t\t\t\n\t\t//on zoom change event\n\t\tjQuery(g_slider).on(g_slider.events.ZOOM_CHANGE,onZoomChange);\n\t\tjQuery(g_slider).on(g_slider.events.ITEM_CHANGED,onZoomChange);\n\t\n\t}\n\t\n\t\n}\n\n\n/** -------------- UgBullets class ---------------------*/\n\nfunction UGBullets(){\n\t\n\tvar t = this, g_numBullets = 0, g_gallery = new UniteGalleryMain();\n\tvar g_objBullets, g_objParent, g_activeIndex = -1, g_bulletWidth;\n\tvar g_functions = new UGFunctions();\n\t\n\tvar g_temp = {\n\t\tisInited:false\n\t};\n\t\n\tvar g_options = {\n\t\tbullets_skin: \"\",\t\t\t\t\t//bullets_skin: \"\"\t\t//skin of the bullets, if empty inherit from gallery skin\n\t\tbullets_addclass: \"\",\t\t\t\t\t//bullets object class addition\n\t\tbullets_space_between:-1\t\t\t//set the space between bullets. If -1 then will be set default space from the skins\n\t}\n\t\n\t\n\t/**\n\t * the events\n\t */\n\tthis.events = {\n\t\tBULLET_CLICK : \"bullet_click\"\n\t};\n\t\n\t/**\n\t * init the bullets\n\t */\n\tthis.init = function(gallery, customOptions, numBullets){\n\t\tg_gallery = gallery;\n\t\t\n\t\tif(numBullets)\n\t\t\tg_numBullets = numBullets;\n\t\telse\t\n\t\t\tg_numBullets = g_gallery.getNumItems();\n\t\t\n\t\tg_temp.isInited = true;\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tif(g_options.bullets_skin == \"\")\n\t\t\tg_options.bullets_skin = g_options.gallery_skin;\n\t\t\n\t}\n\t\n\t/**\n\t * add bullets to the html\n\t */\n\tfunction setHtmlBullets(){\n\t\tvar html = \"\";\n\t\t\n\t\tvar addHtml = \"\";\n\t\tif(g_options.bullets_space_between != -1)\n\t\t\taddHtml = \" style='margin-left:\" + g_options.bullets_space_between + \"px'\";\n\t\t\n\t\tfor(var i=0; i< g_numBullets; i++){\n\t\t\tif(i == 0)\n\t\t\t\thtml += \"<div class='ug-bullet'></div>\";\n\t\t\telse\n\t\t\t\thtml += \"<div class='ug-bullet'\"+addHtml+\"></div>\";\n\t\t}\n\t\t\n\t\tg_objBullets.html(html);\n\t\t\n\t\t//set bullet width value\n\t\tif(!g_bulletWidth){\n\t\t\tvar objBullet = g_objBullets.find(\".ug-bullet:first-child\");\n\t\t\tif(objBullet.length)\n\t\t\t\tg_bulletWidth = objBullet.width();\n\t\t}\n\t}\n\n\t/**\n\t * get total bullets width\n\t */\n\tthis.getBulletsWidth = function(){\n\t\tif(g_numBullets == 0)\n\t\t\treturn(0);\n\t\t\n\t\tif(!g_bulletWidth)\n\t\t\treturn(0);\n\t\t\n\t\tvar totalWidth = g_numBullets*g_bulletWidth+(g_numBullets-1)*g_options.bullets_space_between;\n\t\treturn(totalWidth);\n\t}\n\t\n\t\n\t/**\n\t * append the bullets html to some parent\n\t */\n\tthis.appendHTML = function(objParent){\n\t\tg_objParent = objParent;\n\t\t\n\t\tvalidateInited();\n\t\tvar addClass = \"\";\n\t\tif(g_options.bullets_addclass != \"\")\n\t\t\taddClass = \" \" + g_options.bullets_addclass;\n\t\t\t\n\t\tvar html = \"<div class='ug-slider-control ug-bullets ug-skin-\"+g_options.bullets_skin + addClass+\"'>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tg_objBullets = jQuery(html);\n\t\t\n\t\tobjParent.append(g_objBullets);\n\t\t\n\t\tsetHtmlBullets();\n\t\t\n\t\tinitEvents();\n\t}\t\n\t\n\t\n\t/**\n\t * update number of bullets\n\t */\n\tthis.updateNumBullets = function(numBullets){\n\t\t\n\t\tg_numBullets = numBullets;\n\t\tsetHtmlBullets();\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * \n\t * on bullet click\n\t */\n\tfunction onBulletClick(objBullet){\n\t\t\t\t\n\t\t//filter not active only\n\t\tif(t.isActive(objBullet) == true)\n\t\t\treturn(true);\n\t\t\n\t\tvar index = objBullet.index();\n\t\t\t\n\t\tjQuery(t).trigger(t.events.BULLET_CLICK, index);\n\t}\n\t\n\t\n\t/**\n\t * init the bullets events\n\t * trigger bullet click event\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tvar objBullets = g_objBullets.children(\".ug-bullet\");\n\t\t\n\t\tg_functions.setButtonOnClick(objBullets, onBulletClick);\n\t\t\n\t\tobjBullets.on(\"mousedown mouseup\",function(event){\n\t\t\t//event.preventDefault();\n\t\t\treturn(false);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get the bullets element\n\t */\n\tthis.getElement = function(){\n\t\treturn g_objBullets;\n\t}\n\t\n\t\n\t/**\n\t * set some item active\n\t */\n\tthis.setActive = function(index){\n\t\tvalidateInited();\n\t\tvalidateIndex(index);\n\t\t\n\t\tvar children = g_objBullets.children(\".ug-bullet\");\n\t\tchildren.removeClass(\"ug-bullet-active\");\n\t\t\n\t\tvar bullet = jQuery(children[index]);\n\t\tbullet.addClass(\"ug-bullet-active\");\n\t\t\n\t\tg_activeIndex = index;\n\t}\n\n\t\n\t/**\n\t * check if the bullet is active\n\t */\n\tthis.isActive = function(index){\n\t\tvalidateIndex(index);\n\t\t\n\t\tif(typeof index != \"number\")\n\t\t\tvar objBullet = index;\n\t\telse{\n\t\t\tvar objBullet = g_objBullets.children(\".ug-bullet\")[index];\t\t\t\n\t\t}\n\t\t\n\t\tif(objBullet.hasClass(\"ug-bullet-active\"))\n\t\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get bullets number\n\t */\n\tthis.getNumBullets = function(){\n\t\treturn(g_numBullets);\n\t}\n\t\n\t/**\n\t * validate bullets index\n\t */\n\tfunction validateIndex(index){\n\t\tif(index < 0 || index >= g_numBullets)\n\t\t\tthrow new Error(\"wrong bullet index: \" + index);\n\t}\n\t\n\t\n\t/**\n\t * validate that the bullets are inited\n\t */\n\tfunction validateInited(){\n\t\t\n\t\tif(g_temp.isInited == true)\n\t\t\treturn(true);\n\t\t\n\t\tthrow new Error(\"The bullets are not inited!\");\n\t}\n\t\n\t\n\t\n}\n\n/** -------------- UgProgressBar class ---------------------*/\n\nfunction UGProgressBar(){\n\t\n\tvar t = this, g_isInited = false;\n\tvar g_percent = 0, g_objBar, g_objInner, g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tslider_progressbar_color:\"#ffffff\",\t\t\t//progress bar color\n\t\tslider_progressbar_opacity: 0.6,\t\t\t//progress bar opacity\n\t\tslider_progressbar_line_width: 5\t\t\t//progress bar line width\n\t}\n\t\n\t\n\t/**\n\t * put progress pie to some wrapper\n\t */\n\tthis.put = function(g_objWrapper, userOptions){\n\t\t\n\t\tif(userOptions)\n\t\t\tg_options = jQuery.extend(g_options, userOptions);\n\t\t\n\t\tg_objWrapper.append(\"<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>\");\n\t\tg_objBar = g_objWrapper.children(\".ug-progress-bar\");\n\t\tg_objInner = g_objBar.children(\".ug-progress-bar-inner\");\n\t\t\n\t\t//init the objects\n\t\tg_objInner.css(\"background-color\", g_options.slider_progressbar_color);\n\t\tg_objBar.height(g_options.slider_progressbar_line_width);\n\t\tg_objInner.height(g_options.slider_progressbar_line_width);\n\t\tg_objInner.width(\"0%\");\n\t\t\n\t\t//set opacity old way (because ie bug)\n\t\tvar opacity = g_options.slider_progressbar_opacity;\n\t\t\n\t\tvar objInnerHTML = g_objInner[0];\n\t\tobjInnerHTML.style.opacity = opacity;\n\t\tobjInnerHTML.style.filter = 'alpha(opacity=' + opacity*100 + ')';\n\t}\n\t\n\t\n\t/**\n\t * put the pie hidden\n\t */\n\tthis.putHidden = function(g_objWrapper, userOptions){\n\t\tt.put(g_objWrapper, userOptions);\n\t\tg_objBar.hide();\n\t}\n\t\n\t/**\n\t * get the bar object\n\t */\n\tthis.getElement = function(){\n\t\t\n\t\treturn(g_objBar);\n\t}\n\t\n\t/**\n\t * set progress bar size\n\t */\n\tthis.setSize = function(width){\n\t\t\n\t\tg_objBar.width(width);\n\t\tg_objInner.width(width);\n\t\tt.draw();\n\t}\n\t\n\t\n\t/**\n\t * set position\n\t */\n\tthis.setPosition = function(left, top, offsetLeft, offsetTop){\n\t\t\n\t\tg_functions.placeElement(g_objBar, left, top, offsetLeft, offsetTop);\n\t}\n\t\n\t\n\t/**\n\t * draw the progress bar\n\t */\n\tthis.draw = function(){\n\t\tvar innerWidth = g_percent * 100;\n\t\t\n\t\tg_objInner.width(innerWidth + \"%\");\n\t}\n\t\n\t\n\t/**\n\t * set and draw the progress\n\t */\n\tthis.setProgress = function(percent){\n\t\t\n\t\tg_percent = g_functions.normalizePercent(percent);\n\t\t\n\t\t//debugLine(g_percent, true);\n\t\t\n\t\tt.draw();\n\t}\n\t\n\t/**\n\t * get type string\n\t */\n\tthis.getType = function(){\n\t\treturn(\"bar\");\n\t}\n\t\n}\n\n/** -------------- UgProgressPie class ---------------------*/\n\nfunction UGProgressPie(){\n\t\n\tvar t = this, g_isInited = false;\n\tvar g_percent, g_objPie, g_functions = new UGFunctions();\n\t\n\tvar g_options = {\n\t\tslider_progresspie_type_fill: false,\t\t//false is stroke, true is fill - the progress pie type, stroke of fill\n\t\tslider_progresspie_color1: \"#B5B5B5\", \t\t//the first color of the progress pie\n\t\tslider_progresspie_color2: \"#E5E5E5\",\t\t//progress pie second color \n\t\tslider_progresspie_stroke_width: 6,\t\t\t//progress pie stroke width \n\t\tslider_progresspie_width: 30,\t\t\t\t//progess pie width\n\t\tslider_progresspie_height:30\t\t\t\t//progress pie height\n\t}\n\t\n\t\n\t/**\n\t * put progress pie to some wrapper\n\t */\n\tthis.put = function(g_objWrapper, userOptions){\n\t\t\n\t\tif(userOptions)\n\t\t\tg_options = jQuery.extend(g_options, userOptions);\n\t\t\t\n\t\tg_objWrapper.append(\"<canvas class='ug-canvas-pie' width='\"+g_options.slider_progresspie_width+\"' height='\"+g_options.slider_progresspie_height+\"'></canvas>\");\n\t\tg_objPie = g_objWrapper.children(\".ug-canvas-pie\");\n\t}\n\t\n\t\n\t/**\n\t * put the pie hidden\n\t */\n\tthis.putHidden = function(g_objWrapper, userOptions){\n\t\tt.put(g_objWrapper, userOptions);\n\t\tdraw(0.1);\n\t\tg_objPie.hide();\n\t}\n\t\n\t\n\t/**\n\t * get jquery object\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objPie);\n\t}\n\t\n\t/**\n\t * set position\n\t */\n\tthis.setPosition = function(left, top){\n\t\t\n\t\tg_functions.placeElement(g_objPie, left, top);\n\t\t\n\t}\n\t\n\t/**\n\t * get the height and width of the object\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar obj = {\n\t\t\twidth: g_options.slider_progresspie_width,\n\t\t\theight: g_options.slider_progresspie_height\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\t\n\t\n\t/**\n\t * draw the progress pie\n\t */\n\tfunction draw(percent){\n\t\t\n\t\tif(!percent)\n\t\t\tvar percent = 0;\n\t\t\n\t\tvar radius = Math.min(g_options.slider_progresspie_width, g_options.slider_progresspie_height) / 2;\n\t\t\n\t\tvar ctx = g_objPie[0].getContext('2d');\n\t\t\n\t\t//init the context\n\t\tif(g_isInited == false){\n\t\t\t\n\t\t\tg_isInited = true;\n\t\t\t\n\t\t\tctx.rotate(Math.PI*(3/2));\n\t\t\tctx.translate(-2 * radius,0);\n\t\t}\t\t\n\t\t\n\t\tctx.clearRect(0,0,g_options.slider_progresspie_width, g_options.slider_progresspie_height);\n\t\t\n\t\tvar centerX = g_options.slider_progresspie_width / 2;\n\t\tvar centerY = g_options.slider_progresspie_height / 2;\n\t    \n\t\t//draw main arc\n\t\tvar startPoint = 0;\n\t\tvar endPoint = percent * Math.PI * 2;\n\t\t\t\t\n\t    \n\t\tif(g_options.slider_progresspie_type_fill == true){\t\t//fill\n\t\t\t\n\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(centerX, centerY); \n\t\t\t    ctx.arc(centerX,centerY,radius,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t\t    \n\t\t\t    ctx.fillStyle = g_options.slider_progresspie_color1;\n\t\t\t    ctx.fill();\n\t\t    ctx.closePath();\n\t\t    \n\t\t}else{\t\t//stroke\n\t\t    ctx.globalCompositeOperation = \"source-over\";\n\t\t\t\n\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(centerX, centerY); \n\t\t\t    ctx.arc(centerX,centerY,radius,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t\t    \n\t\t\t    ctx.fillStyle = g_options.slider_progresspie_color1;\n\t\t\t    ctx.fill();\n\t\t\tctx.closePath();\n\t\t    \n\t\t    ctx.globalCompositeOperation = \"destination-out\";\n\t\t\t\n\t\t\tvar radius2 = radius - g_options.slider_progresspie_stroke_width;\n\t\t    \n\t\t\tctx.beginPath();\n\t\t\t\t\t\t\t\t\n\t\t\t\tctx.moveTo(centerX, centerY); \n\t\t\t    ctx.arc(centerX,centerY,radius2,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t\t    \n\t\t\t    ctx.fillStyle = g_options.slider_progresspie_color1;\n\t\t\t    ctx.fill();\n\t\t\t    \n\t\t\tctx.closePath();\n\t\t}\n\t    \n\t    \n\t\t//draw rest arc (only on fill type):\n\t    if(g_options.slider_progresspie_type_fill == true){\n\t\t\tstartPoint = endPoint;\n\t\t\tendPoint = Math.PI * 2;\n\t\t\tctx.beginPath();\n\t\t\t    ctx.arc(centerX,centerY,radius,startPoint, endPoint);\n\t\t\t    ctx.lineTo(centerX, centerY); \n\t\t    ctx.fillStyle = g_options.slider_progresspie_color2;\n\t\t    ctx.fill();\n\t\t    ctx.closePath();\t    \t\n\t    }\n\t    \n\t}\n\t\n\t\n\t/**\n\t * set progress (0-1)\n\t */\n\tthis.setProgress = function(percent){\n\t\t\n\t\tpercent = g_functions.normalizePercent(percent);\n\t\t\n\t\tg_percent = percent;\n\t\tdraw(percent);\n\t}\n\t\n\t/**\n\t * get type string\n\t */\n\tthis.getType = function(){\n\t\treturn(\"pie\");\n\t}\n\t\n}\n\n/**f\n * touch thumbs control class\n * addon to strip gallery\n */\nfunction UGTouchSliderControl(){\n\t\n\tvar g_objSlider, g_objInner, g_parent = new UGSlider();\n\tvar g_objParent, g_options, t=this;\n\t\n\tvar g_functions = new UGFunctions();\n\t\n\t\n\tvar g_options = {\n\t\t  slider_transition_continuedrag_speed: 250,\t\t\t\t//the duration of continue dragging after drag end\n\t\t  slider_transition_continuedrag_easing: \"linear\",\t\t//easing function of continue dragging animation\n\t\t  slider_transition_return_speed: 300,\t\t\t\t\t//the duration of the \"return to place\" animation\n\t\t  slider_transition_return_easing: \"easeInOutQuad\"\t\t//easing function of the \"return to place\" animation\n\t};\n\t\n\tvar g_temp = {\n\t\ttouch_active: false,\t\t\n\t\tstartMouseX: 0,\t\t\n\t\tstartMouseY: 0,\n\t\tlastMouseX: 0,\n\t\tlastMouseY: 0,\n\t\tstartPosx:0, \n\t\tstartTime:0,\n\t\tisInitDataValid:false,\n\t\tslides: null,\n\t\tlastNumTouches:0,\n\t\tisDragging: false,\n\t\tstoredEventID: \"touchSlider\",\n\t\tvideoStartX: 0,\n\t\tisDragVideo: false,\n\t\tvideoObject: null\n\t};\n\t\n\t\n\t/**\n\t * get diff inner object position from current item pos\n\t */\n\tfunction getDiffPosFromCurrentItem(slides){\n\t\t\n\t\tif(!slides)\n\t\t\tvar slides = g_parent.getSlidesReference();\n\t\t\n\t\tvar posCurrent = g_functions.getElementSize(slides.objCurrentSlide);\n\t\tvar inPlaceX = -posCurrent.left;\n\t\tvar objInnerSize = g_functions.getElementSize(g_objInner);\n\t\tvar diffPos = inPlaceX - objInnerSize.left;\n\t\t\n\t\treturn(diffPos);\n\t}\n\t\n\t/**\n\t * check if the movement that was held is valid for slide change\n\t */\n\tfunction isMovementValidForChange(){\n\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\n\t\t//check position, if more then half, move\n\t\tvar diffPos = getDiffPosFromCurrentItem(slides);\n\t\t\n\t\tvar breakSize = Math.round(slides.objCurrentSlide.width() * 3 / 8);\n\t\t\t\t\n\t\tif(Math.abs(diffPos) >= breakSize)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//check gesture, if vertical mostly then not move\n\t\tvar diffX = Math.abs(g_temp.lastMouseX - g_temp.startMouseX);\n\t\tvar diffY = Math.abs(g_temp.lastMouseY - g_temp.startMouseY);\n\t\t\n\t\t//debugLine(\"diffx: \" + diffX, true, true);\n\t\t\n\t\tif(diffX < 20)\n\t\t\treturn(false);\n\t\t\n\t\t//if(diffY >= diffX)\n\t\t\t//return(false);\n\t\t\t\t\n\t\t//check time. Short time always move\n\t\tvar endTime = jQuery.now();\n\t\tvar diffTime = endTime - g_temp.startTime;\n\t\t\n\t\t//debugLine(\"time: \" + diffTime, true);\n\t\t\n\t\tif(diffTime < 500)\n\t\t\treturn(true);\n\t\t\n\t\t\t\t\t\n\t\treturn(false);\n\t}\n\n\t/**\n\t * check tab event occured\n\t * invokes on touchend event on the slider object\n\t */\n\tthis.isTapEventOccured = function(event){\n\t\t\n\t\t//validate one touch\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\tvar numTouches = arrTouches.length;\n\t\t\t\n\t\tif(numTouches != 0 || g_temp.lastNumTouches != 0){\n\t\t\tg_temp.lastNumTouches = numTouches;\n\t\t\treturn(false);\n\t\t}\n\t\t\t\n\t\tg_temp.lastNumTouches = numTouches;\n\t\t\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\n\t\t//check position, if more then half, move\n\t\tvar diffPos = getDiffPosFromCurrentItem(slides);\n\t\t\n\t\t//check gesture, if vertical mostly then not move\n\t\tvar diffX = Math.abs(g_temp.lastMouseX - g_temp.startMouseX);\n\t\tvar diffY = Math.abs(g_temp.lastMouseY - g_temp.startMouseY);\n\t\t\n\t\t//check by time\n\t\tvar endTime = jQuery.now();\n\t\tvar diffTime = endTime - g_temp.startTime;\n\t\t\n\t\t//combine move and time\n\t\tif(diffX < 20 && diffY < 50 && diffTime < 500)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * return the item to place\n\t */\n\tfunction returnToPlace(slides){\n\t\t\n\t\tif(g_parent.isInnerInPlace() == true)\n\t\t\treturn(false);\n\t\t\t\t\t\t\n\t\t//trigger before return event\n\t\tg_objParent.trigger(g_parent.events.BEFORE_RETURN);\n\t\t\n\t\tif(!slides)\n\t\t\tvar slides = g_parent.getSlidesReference();\n\t\t\n\t\tvar posCurrent = g_functions.getElementSize(slides.objCurrentSlide);\n\t\tvar destX = -posCurrent.left;\n\t\t\t\t\n\t\t//animate objects\t\t\n\t\tg_objInner.animate({left:destX+\"px\"},{\n\t\t\tduration: g_options.slider_transition_return_speed,\n\t\t\teasing: g_options.slider_transition_continuedrag_easing,\n\t\t\tqueue: false,\n\t\t\tprogress: function(animation, number, remainingMS){\n\t\t\t\t\t\t\t\t\n\t\t\t\t//check drag video\n\t\t\t\tif(g_temp.isDragVideo == true){\n\t\t\t\t\tvar objSize = g_functions.getElementSize(g_objInner);\n\t\t\t\t\tvar innerX = objSize.left;\n\t\t\t\t\t\n\t\t\t\t\tvar posDiff = innerX - destX;\n\t\t\t\t\t\n\t\t\t\t\tvar videoPosX = g_temp.videoStartX + posDiff;\n\t\t\t\t\tg_temp.videoObject.css(\"left\", videoPosX);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\tcomplete: function(){\n\t\t\t\tg_objParent.trigger(g_parent.events.AFTER_RETURN);\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * change the item to given direction\n\t */\n\tfunction changeItem(direction){\n\t\t\n\t\tg_parent.getVideoObject().hide();\n\t\tg_parent.switchSlideNums(direction);\n\t\tg_parent.placeNabourItems();\n\n\t}\n\t\n\t/**\n\t * continue the dragging by changing the slides to the right place.\n\t */\n\tfunction continueSlideDragChange(){\n\t\t\n\t\t//get data\n\t\tvar slides = g_parent.getSlidesReference();\n\t\t\n\t\tvar diffPos = getDiffPosFromCurrentItem(slides);\n\t\t\n\t\tif(diffPos == 0)\n\t\t\treturn(false);\n\t\t\n\t\tvar direction = (diffPos > 0) ? \"left\" : \"right\";\n\t\t\t\n\t\tvar isReturn = false;\n\t\t\t\n\t\tswitch(direction){\n\t\t\tcase \"right\":\t//change to prev item\n\t\t\t\t\n\t\t\t\tif( g_parent.isSlideHasItem(slides.objPrevSlide) ){\n\t\t\t\t\t\n\t\t\t\t\tvar posPrev = g_functions.getElementSize(slides.objPrevSlide);\n\t\t\t\t\tvar destX = -posPrev.left;\n\t\t\t\t\t\n\t\t\t\t}else\t//return current item\n\t\t\t\t\tisReturn = true;\n\t\t\t\t\n\t\t\tbreak;\t\n\t\t\tcase \"left\":\t\t//change to next item\n\t\t\t\t\n\t\t\t\tif( g_parent.isSlideHasItem(slides.objNextSlide) ){\n\t\t\t\t\t\n\t\t\t\t\tvar posNext = g_functions.getElementSize(slides.objNextSlide);\n\t\t\t\t\tvar destX = -posNext.left;\n\t\t\t\t\t\n\t\t\t\t}else\t\t\t\t\t\n\t\t\t\t\tisReturn = true;\t\t\t\t\n\t\t\tbreak;\n\t   }\n\t\t\n\t\t\n\t\tif(isReturn == true){\n\t\t\treturnToPlace(slides);\n\t\t\t\n\t\t}else{\n\t\t\t\t\t\t\n\t\t\t//animate objects\n\t\t\tg_objInner.stop().animate({left:destX+\"px\"},{\n\t\t\t\tduration: g_options.slider_transition_continuedrag_speed,\n\t\t\t\teasing: g_options.slider_transition_continuedrag_easing,\n\t\t\t\tqueue: false,\n\t\t\t\tprogress: function(){\n\t\t\t\t\t\n\t\t\t\t\t//check drag video\n\t\t\t\t\tif(g_temp.isDragVideo == true){\n\t\t\t\t\t\tvar objSize = g_functions.getElementSize(g_objInner);\n\t\t\t\t\t\tvar innerX = objSize.left;\n\t\t\t\t\t\tvar posDiff = innerX - g_temp.startPosx;\n\t\t\t\t\t\tvar videoPosX = g_temp.videoStartX + posDiff;\n\t\t\t\t\t\tg_temp.videoObject.css(\"left\", videoPosX);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\talways:function(){\n\t\t\t\t\tchangeItem(direction);\n\t\t\t\t\tg_objParent.trigger(g_parent.events.AFTER_DRAG_CHANGE);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\t\n\t}\n\n\t\n\t/**\n\t * handle slider drag on mouse drag\n\t */\n\tfunction handleSliderDrag(event){\n\t\t\n\t\tvar diff = g_temp.lastMouseX - g_temp.startMouseX;\n\t\t\n\t\tif(diff == 0)\n\t\t\treturn(true);\n\t\t\n\t\tvar direction = (diff < 0) ? \"left\":\"right\";\n\t\t\n\t\tvar objZoomSlider = g_parent.getObjZoom();\n\t\t\n\t\t//don't drag if the zoom panning enabled\n\t\t//store init position after image zoom pan end\n\t\tif(objZoomSlider){\n\t\t\t\n\t\t\tvar isPanEnabled = objZoomSlider.isPanEnabled(event,direction);\n\t\t\t\t\t\t\n\t\t\tif(isPanEnabled == true){\n\t\t\t\tg_temp.isInitDataValid = false;\n\t\t\t\treturn(true);\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(g_temp.isInitDataValid == false){\n\t\t\t\t\tstoreInitTouchData(event);\n\t\t\t\t\treturn(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\t//set inner div position\n\t\tvar currentPosx = g_temp.startPosx + diff;\n\t\t\n\t\t//check out of borders and slow down the motion:\n\t\tif(diff > 0 && currentPosx > 0)\n\t\t\tcurrentPosx = currentPosx / 3;\t\t\n\t\t\n\t\telse if(diff < 0 ){\n\t\t\t\n\t\t\tvar innerEnd = currentPosx + g_objInner.width();\n\t\t\tvar sliderWidth = g_objSlider.width();\n\t\t\t\n\t\t\tif( innerEnd <  sliderWidth ){\n\t\t\t\tcurrentPosx = g_temp.startPosx + diff/3;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(g_temp.isDragging == false){\n\t\t\tg_temp.isDragging = true;\n\t\t\tg_objParent.trigger(g_parent.events.START_DRAG);\n\t\t}\n\t\t\t\t\n\t\tg_objInner.css(\"left\", currentPosx+\"px\");\n\t\t\n\t\t//drag video\n\t\tif(g_temp.isDragVideo == true){\n\t\t\tvar posDiff = currentPosx - g_temp.startPosx;\n\t\t\tvar videoPosX = g_temp.videoStartX + posDiff;\n\t\t\t\n\t\t\tg_temp.videoObject.css(\"left\", videoPosX);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * store init touch position\n\t */\n\tfunction storeInitTouchData(event){\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tg_temp.startMouseX = mousePos.pageX;\n\t\t\n\t\t//debugLine(\"startx:\" + g_temp.startMouseX, true, true);\n\t\t\n\t\tg_temp.startMouseY = mousePos.pageY;\n\t\t\n\t\tg_temp.lastMouseX = g_temp.startMouseX;\n\t\tg_temp.lastMouseY = g_temp.startMouseY;\n\t\tg_temp.startTime = jQuery.now();\n\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\t\t\n\t\tg_temp.startArrTouches = g_functions.getArrTouchPositions(arrTouches);\n\t\t\n\t\tvar objPos = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tg_temp.startPosx = objPos.left;\n\t\t\n\t\tg_temp.isInitDataValid = true;\n\t\t\n\t\t//check if video object need to be dragged\n\t\tg_temp.isDragVideo = false;\n\t\t\t\t\t\n\t\t\n\t\tg_functions.storeEventData(event, g_temp.storedEventID);\n\t}\n\t\n\t/**\n\t * disable touch active\n\t */\n\tfunction disableTouchActive(who){\n\t\t\n\t\tg_temp.touch_active = false;\n\t\t\n\t\t//debugLine(\"disable: \" + who, true, true);\n\t}\n\t\n\t/**\n\t * enable the touch active\n\t */\n\tfunction enableTouchActive(who, event){\n\t\t\n\t\tg_temp.touch_active = true;\n\t\tstoreInitTouchData(event);\n\t\t\n\t\t//debugLine(\"enable: \" + who, true, true);\n\t}\n\n\t\n\t/**\n\t * on touch slide start\n\t * \n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tg_temp.isDragging = false;\n\t\t\n\t\t//debugLine(\"touchstart\", true, true);\n\t\t\n\t\t//check if the slides are changing from another event.\n\t\tif(g_parent.isAnimating() == true){\n\t\t\tg_objInner.stop(true, true);\n\t\t}\n\t\t\n\t\t//check num touches\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\tif(arrTouches.length > 1){\n\t\t\t\n\t\t\tif(g_temp.touch_active == true){\n\t\t\t\tdisableTouchActive(\"1\");\n\t\t\t}\n\t\t\t\n\t\t\treturn(true);\n\t\t}\n\t\t\t\t\t\t\n\t\tif(g_temp.touch_active == true){\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tenableTouchActive(\"1\", event);\n\t\t\n\t}\n\t\n\n\t/**\n\t * \n\t * on touch move event\n\t */\n\tfunction onTouchMove(event){\n\t\t\n\t\tif(g_temp.touch_active == false)\n\t\t\treturn(true);\n\t\t\n\t\t//detect moving without button press\n\t\tif(event.buttons == 0){\n\t\t\tdisableTouchActive(\"2\");\n\t\t\t\n\t\t\tcontinueSlideDragChange();\n\t\t\t\t\t\t\n\t\t\treturn(true);\n\t\t}\n\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\t\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\tg_temp.lastMouseX = mousePos.pageX;\n\t\tg_temp.lastMouseY = mousePos.pageY;\n\t\t\t\t\n\t\t//debugLine(\"lastX:\" + g_temp.lastMouseX, true, true);\n\t\t\n\t\tvar scrollDir = null;\n\t\t\n\t\tif(g_options.slider_vertical_scroll_ondrag == true)\n\t\t\tscrollDir = g_functions.handleScrollTop(g_temp.storedEventID);\n\t\t\n\t\tif(scrollDir !== \"vert\")\n\t\t\thandleSliderDrag(event);\n\t\t\t\n\t}\n\t\n\t/**\n\t * on touch end event\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\t//debugLine(\"touchend\", true, true);\n\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\tvar numTouches = arrTouches.length;\n\t\tvar isParentInPlace = g_parent.isInnerInPlace();\n\t\t\n\t\tif(isParentInPlace == true && g_temp.touch_active == false && numTouches == 0){\n\t\t\t\n\t\t\treturn(true);\n\t\t}\n\t\t\t\t\n\t\tif(numTouches == 0 && g_temp.touch_active == true){\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tdisableTouchActive(\"3\");\n\t\t\t\n\t\t\tvar isValid = false;\n\t\t\t\n\t\t\tvar wasVerticalScroll = g_functions.wasVerticalScroll(g_temp.storedEventID);\n\t\t\t\n\t\t\tif(wasVerticalScroll == false)\n\t\t\t\tisValid = isMovementValidForChange();\n\t\t\t\t\t\t\n\t\t\tif(isValid == true)\n\t\t\t\tcontinueSlideDragChange();\t\t//change the slide\n\t\t\telse\n\t\t\t\treturnToPlace();\t//return the inner object to place (if not in place)\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(numTouches == 1 && g_temp.touch_active == false){\n\t\t\t\t\t\t\t\t\n\t\t\t\tenableTouchActive(\"2\",event);\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t\t\t\t\t\n\t}\n\n\n\t/**\n\t * init touch events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//slider mouse down - drag start\n\t\tg_objSlider.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objSlider, customOptions){\n\t\t\n\t\tg_parent = objSlider;\n\t\tg_objParent = jQuery(g_parent);\n\t\tg_objects = objSlider.getObjects();\n\t\t\t\t\n\t\tg_objSlider = g_objects.g_objSlider;\n\t\tg_objInner = g_objects.g_objInner;\n\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * get last mouse position\n\t */\n\tthis.getLastMousePos = function(){\n\t\tvar obj = {\n\t\t\tpageX: g_temp.lastMouseX,\n\t\t\tpageY: g_temp.lastMouseY\n\t\t};\n\t\t\n\t\treturn(obj);\n\t}\n\t\n\t\n\t/**\n\t * is touch active\n\t */\n\tthis.isTouchActive = function(){\n\t\t\n\t\treturn(g_temp.touch_active);\n\t\t\n\t}\n\t\n\t\n}\n/**\n * touch thumbs control class\n * addon to strip gallery\n */\nfunction UGZoomSliderControl(){\n\t\n\tvar g_objSlider, g_objInner, g_parent = new UGSlider(), g_objParent;\n\t\n\tvar g_functions = new UGFunctions();\n\t\n\tvar t = this;\n\t\n\tvar g_options = {\n\t\tslider_zoom_step: 1.2,\t\t\t\t\t\t\t//the step of zooming with mouse wheel or zoom button\n\t\tslider_zoom_max_ratio: 6,\t\t\t\t\t\t//max zoom ratio\n\t\tslider_zoom_return_pan_duration: 400,\t\t\t//the return from pan animation duration \n\t\tslider_zoom_return_pan_easing: \"easeOutCubic\"\t//the return from pan wasing function\n\t};\n\t\n\tvar g_temp = {\n\t\tisPanActive:false,\n\t\tstartMouseX:0,\n\t\tstartMouseY:0,\n\t\tlastMouseX:0,\n\t\tlastMouseY:0,\n\t\tstartImageX:0,\n\t\tstartImageY:0,\n\t\tpanXActive:false,\n\t\tpanYActive:false,\n\t\tobjImage:null,\n\t\tobjImageSize:null,\n\t\tobjParent:null,\n\t\tobjParentSize:null,\n\t\tobjSlide:null,\n\t\tstoreImageLastTime:0,\n\t\t\n\t\tisZoomActive: false,\n\t\tstartDistance:0,\n\t\tstartMiddlePoint:null,\n\t\timageOrientPoint:null,\n\t\tobjFitImageSize:null,\n\t\tisZoomedOnce:false\n\t};\n\n\t\n\t/**\n\t * init the object\n\t */\n\tfunction initObject(objSlider, customOptions){\n\t\t\n\t\tg_parent = objSlider;\n\t\tg_objParent = jQuery(g_parent);\n\t\tg_objects = objSlider.getObjects();\n\t\tg_objSlider = g_objects.g_objSlider;\n\t\tg_objInner = g_objects.g_objInner;\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * get fit image to slider scale mode\n\t * the fill become fit\n\t */\n\tfunction getFitScaleMode(){\n\t\t\n\t\tvar scaleMode = g_parent.getScaleMode();\n\t\t\n\t\tif(scaleMode != \"down\")\n\t\t\tscaleMode = \"fit\";\n\t\t\n\t\treturn(scaleMode);\n\t}\n\t\n\t\n\t/**\n\t * cache current slide and image\n\t */\n\tfunction storeCurrentImage(){\t\t\n\t\t\n\t\t//prevent continious image storring\n\t\tvar currentTime = jQuery.now();\n\t\tvar diff = currentTime - g_temp.storeImageLastTime;\n\t\t\n\t\tif(diff < 20)\n\t\t\treturn(false);\n\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\t\tg_temp.objSlide = slides.objCurrentSlide;\n\t\tg_temp.objImage = slides.objCurrentSlide.find(\"img\");\n\t\t\n\t\tif(g_temp.objImage.length == 0)\n\t\t\treturn(false);\n\t\t\t\n\t\tg_temp.objImageSize = g_functions.getElementSize(g_temp.objImage);\n\t\tg_temp.objParent = g_temp.objImage.parent();\n\t\tg_temp.objParentSize = g_functions.getElementSize(g_temp.objParent);\n\t\t\n\t\tvar scaleMode = getFitScaleMode();\n\t\t\n\t\tobjPadding = g_parent.getObjImagePadding();\n\t\t\n\t\tg_temp.objFitImageSize = g_functions.getImageInsideParentDataByImage(g_temp.objImage, scaleMode, objPadding);\n\t\t\n\t\tvar currentTime = jQuery.now();\n\t\tg_temp.storeImageLastTime = currentTime;\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * zoom current image\n\t * mode: in, out, back\n\t */\n\tfunction zoomCurrentImage(mode, mousePos){\n\t\t\n\t\tvar slides = g_parent.getSlidesReference();\n\t\tvar objImage = slides.objCurrentSlide.find(\"img\");\n\t\tvar scaleMode = getFitScaleMode();\n\t\t\n\t\tg_objParent.trigger(g_parent.events.ZOOM_START);\n\t\t\n\t\t//flag if the images zoomed\n\t\tvar isZoomed = true;\n\t\t\n\t\tvar objPadding = g_parent.getObjImagePadding();\n\t\t\t\t\n\t\tif(mode == \"back\"){\t\n\t\t\tvar objOriginalSize = g_functions.getImageOriginalSize(objImage);\n\t\t\tg_functions.scaleImageFitParent(objImage, objOriginalSize.width, objOriginalSize.height, scaleMode, objPadding);\n\t\t}\n\t\telse{\t\t\t\n\t\t\tvar zoomIn = (mode == \"in\")?true:false;\n\t\t\t\n\t\t\tisZoomed = g_functions.zoomImageInsideParent(objImage, zoomIn, g_options.slider_zoom_step, mousePos, scaleMode, g_options.slider_zoom_max_ratio, objPadding);\n\t\t}\n\t\t\n\t\tif(isZoomed == true){\n\t\t\tg_objParent.trigger(g_parent.events.ZOOMING);\n\t\t\tg_objParent.trigger(g_parent.events.ZOOM_CHANGE);\n\t\t\tg_objParent.trigger(g_parent.events.ZOOM_END);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tfunction ____________PAN_____________(){};\n\t\n\t\n\t/**\n\t * check if pan is posible for the current image\n\t * check if the image is bigger then the parent\n\t */\n\tfunction isPanPosible(objImage, event, stictTouchesCheck){\n\t\t\n\t\t//check num touches, strict means that even if 0 - pan not posible\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\t\n\t\tif(stictTouchesCheck === true){\n\t\t\t\n\t\t\tif(arrTouches.length != 1)\n\t\t\t\treturn(false);\t\t\t\n\t\t}else{\n\t\t\tif(arrTouches.length > 1)\n\t\t\t\treturn(false);\t\t\t\n\t\t}\n\t\t\n\t\tif(g_functions.isElementBiggerThenParent(objImage))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * store pan values\n\t */\n\tfunction storePanInitValues(event){\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tg_temp.startMouseX = mousePos.pageX;\n\t\tg_temp.startMouseY = mousePos.pageY;\n\t\t\n\t\tg_temp.lastMouseX = g_temp.startMouseX;\n\t\tg_temp.lastMouseY = g_temp.startMouseY;\n\t\t\n\t\tg_temp.startImageX = g_temp.objImageSize.left;\n\t\tg_temp.startImageY = g_temp.objImageSize.top;\n\t\t\n\t\tg_temp.panXActive = (g_temp.objImageSize.width > g_temp.objParentSize.width);\n\t\tg_temp.panYActive = (g_temp.objImageSize.height > g_temp.objParentSize.height);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check pan start, and start if posible\n\t */\n\tfunction startPan(event){\n\t\t\t\t\n\t\tg_temp.isPanActive = true;\n\t\tstorePanInitValues(event);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * pan the image\n\t */\n\tfunction panImage(event){\n\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\t\n\t\tvar diffX = mousePos.pageX - g_temp.startMouseX;\n\t\tvar diffY = mousePos.pageY - g_temp.startMouseY;\n\t\t\n\t\t//get active direction\n\t\tvar diffLastX = mousePos.pageX - g_temp.lastMouseX;\n\t\tvar diffLastY = mousePos.pageY - g_temp.lastMouseY;\n\t\t\n\t\tvar directionX = (diffLastX < 0) ? \"left\":\"right\";\n\t\tvar directionY = (diffLastY < 0) ? \"up\":\"down\";\n\t\t\n\t\tg_temp.lastMouseX = mousePos.pageX;\n\t\tg_temp.lastMouseY = mousePos.pageY;\n\t\t\n\t\tvar posImage = g_functions.getElementSize(g_temp.objImage);\n\t\t\n\t\t//var imageX = g_temp.startImageX + diffX;\n\t\t//var imageY = g_temp.startImageY + diffY;\n\t\t\t\t\n\t\t\n\t\t//slow down if no pan available in this point\n\t\t//slow down y\n\t\t\n\t\tif(g_temp.panYActive == false){\n\t\t\t\n\t\t\tdiffLastY = 0;\n\t\t\t\n\t\t}else{\t\t//zoom enabled\n\t\t\t\n\t\t\tif(directionY == \"down\" && posImage.top > 0){\t\t\t\n\t\t\t\t\n\t\t\t\tdiffLastY = diffLastY / 3;\t\t\t\t\n\t\t\t\t\n\t\t\t}else if(directionY == \"up\" && posImage.bottom < g_temp.objParentSize.height){\n\t\t\t\t\n\t\t\t\tdiffLastY = diffLastY / 3;\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\t//slow down x (only if the pan enabled)\n\t\tif(g_temp.panXActive == false || g_parent.isInnerInPlace() == false){\n\t\t\t\n\t\t\tdiffLastX = 0;\n\t\t\n\t\t}else{\t//zoom enabled\n\t\t\t\n\t\t\tif(directionX == \"right\" && posImage.left > 0){\t\t\t\t\n\t\t\t\tdiffLastX = diffLastX / 3;\t\t\t\t\n\t\t\t}\n\t\t\telse if(directionX == \"left\" && posImage.right < g_temp.objParentSize.width){\n\t\t\t\tdiffLastX = diffLastX / 3;\n\t\t\t}\n\t    }\n\t\t\n\t\tvar imageX = posImage.left + diffLastX;\n\t\tvar imageY = posImage.top + diffLastY;\n\t\t\n\t\t\n\t\tg_functions.placeElement(g_temp.objImage, imageX, imageY);\n\t\t\n\t}\n\t\n\t\n\t\n\t\n\t/**\n\t * return the image to place if it's out of borders\n\t */\n\tfunction checkReturnAfterPan(){\n\t\t\t\t\n\t\tvar isReturnX = false, isReturnY = false, newX = 0, newY = 0;\n\t\tvar objSize = g_functions.getElementSize(g_temp.objImage);\n\t\tvar objImagePadding = g_parent.getObjImagePadding();\n\t\t\t\t\n\t\tvar objCenterPos = g_functions.getElementCenterPosition(g_temp.objImage, objImagePadding);\n\t\t\n\t\tg_temp.panXActive = (g_temp.objImageSize.width > g_temp.objParentSize.width);\n\t\tg_temp.panYActive = (g_temp.objImageSize.height > g_temp.objParentSize.height);\n\t\t\t\t\n\t\t\n\t\tif(g_temp.panYActive == true){\n\t\t\t\n\t\t\tif(objSize.top > 0){\t\t//off limit top\n\t\t\t\t\n\t\t\t\tnewY = 0;\n\t\t\t\tisReturnY = true;\n\t\t\t\t\n\t\t\t}else if(objSize.bottom < g_temp.objParentSize.height){\t\t//off limit bottom\n\t\t\t\t\n\t\t\t\tnewY = g_temp.objParentSize.height - objSize.height;\n\t\t\t\tisReturnY = true;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\t\t//pan not active y - return to center\n\t\t\t\n\t\t\tif(objSize.top != objCenterPos.top){\n\t\t\t\tisReturnY = true;\n\t\t\t\tnewY = objCenterPos.top;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//check return x to place\n\t\tif(g_temp.panXActive == true){\n\t\t\t\n\t\t\tif(objSize.left > 0){\t\t//off limit left\n\t\t\t\t\n\t\t\t\tnewX = 0;\n\t\t\t\tisReturnX = true;\n\t\t\t\t\n\t\t\t}else if(objSize.right < g_temp.objParentSize.width){\t\t//off limit right\n\t\t\t\t\t\t\t\t\n\t\t\t\tnewX = g_temp.objParentSize.width - objSize.width;\n\t\t\t\tisReturnX = true;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\t\t//pan not active x - return to center\n\t\t\t\n\t\t//\tdebugLine(\"not active\", true);\n\t\t\t\n\t\t\tif(objSize.left != objCenterPos.left){\n\t\t\t\tisReturnX = true;\n\t\t\t\tnewX = objCenterPos.left;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t//do the animation\n\t\tvar objCss = {};\n\t\tif(isReturnY == true)\n\t\t\tobjCss.top = newY + \"px\";\n\t\t\n\t\tif(isReturnX == true)\n\t\t\tobjCss.left = newX + \"px\";\n\t\t\n\t\t\n\t\tif(isReturnY == true || isReturnX == true){\n\t\t\t\t\t\t\n\t\t\tg_temp.objImage.animate(objCss,{\n\t\t\t\tduration: g_options.slider_zoom_return_pan_duration,\n\t\t\t\teasing: g_options.slider_zoom_return_pan_easing,\n\t\t\t\tqueue: false\n\t\t\t});\n\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * check if the image animating or not\n\t */\n\tfunction isImageAnimating(){\n\t\t\n\t\tif(g_temp.objImage && g_temp.objImage.is(\":animated\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\tfunction ____________END_PAN_____________(){};\n\t\n\tfunction ________TOUCH_ZOOM_____________(){};\n\t\n\t/**\n\t * start touch zoom\n\t */\n\tfunction startTouchZoom(arrTouches){\n\t\t\t\t\n\t\tg_temp.isZoomActive = true;\n\t\t\n\t\t//store init diff\n\t\tg_temp.startDistance = g_functions.getDistance(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\n\t\tif(g_temp.startDistance == 0)\n\t\t\tg_temp.startDistance = 1;\n\t\t\n\t\t\n\t\t//store init positions\n\t\tg_temp.startMiddlePoint = g_functions.getMiddlePoint(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\n\t\t\t\t\n\t\tg_temp.objImageSize = g_functions.getElementSize(g_temp.objImage);\n\t\t\t\n\t\tg_temp.startImageX = g_temp.objImageSize.left;\n\t\tg_temp.startImageY = g_temp.objImageSize.top;\n\t\t\n\t\t//set orient point\n\t\tg_temp.imageOrientPoint = g_functions.getElementLocalPoint(g_temp.startMiddlePoint, g_temp.objImage);\n\t\t\n\t\tvar isInsideImage = g_functions.isPointInsideElement(g_temp.imageOrientPoint, g_temp.objImageSize);\n\t\tif(isInsideImage == false){\n\t\t\tg_temp.imageOrientPoint = g_functions.getElementCenterPoint(g_temp.objImage);\n\t\t}\n\t\t\n\t\t//trigger start zoom event\n\t\tg_objParent.trigger(g_parent.events.ZOOM_START);\n\t}\n\t\n\t\n\t/**\n\t * check num touches, if not 2 - end zoom\n\t */\n\tfunction checkTouchZoomEnd(event){\n\t\t\t\t\n\t\tif(g_temp.isZoomActive == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\t\t\t\n\t\tif(arrTouches.length != 2){\t\t//end touch zoom\n\t\t\t\n\t\t\tg_temp.isZoomActive = false;\n\t\t\t\n\t\t\t//trigger end zoom event\n\t\t\tg_objParent.trigger(g_parent.events.ZOOM_END);\t\t\t\n\t\t}\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check start touch zoom\n\t */\n\tfunction checkTouchZoomStart(event){\n\t\t\t\t\n\t\tif(g_temp.isZoomActive == true)\n\t\t\treturn(true);\n\n\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\t\t\t\n\t\tif(arrTouches.length != 2)\n\t\t\treturn(true);\n\t\t\t\t\t\n\t\tstartTouchZoom(arrTouches);\t\t\n\t}\n\t\n\t\n\t/**\n\t * do touch zoom on touch devices\n\t */\n\tfunction doTouchZoom(event){\n\t\t\t\t\n\t\tvar arrTouches = g_functions.getArrTouches(event);\n\t\t\t\t\n\t\tvar distance = g_functions.getDistance(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\t\t\n\t\tvar zoomRatio = distance / g_temp.startDistance;\n\t\t\n\t\tvar middlePoint = g_functions.getMiddlePoint(arrTouches[0].pageX, arrTouches[0].pageY, arrTouches[1].pageX, arrTouches[1].pageY);\n\t\t\n\t\t//set zoom data:\n\t\tvar newWidth = g_temp.objImageSize.width * zoomRatio;\n\t\tvar newHeight = g_temp.objImageSize.height * zoomRatio;\n\t\t\n\t\t//check max zoom ratio:\n\t\tvar objOriginalSize = g_functions.getImageOriginalSize(g_temp.objImage);\n\t\tvar expectedZoomRatio = 1;\t\t\n\t\tif(objOriginalSize.width > 0)\n\t\t\texpectedZoomRatio = newWidth / objOriginalSize.width;\n\t\t\n\t\tif(expectedZoomRatio > g_options.slider_zoom_max_ratio)\n\t\t\treturn(true);\n\t\t\n\t\t//set pan data:\n\t\tpanX = -(g_temp.imageOrientPoint.x * zoomRatio - g_temp.imageOrientPoint.x);\n\t\tpanY = -(g_temp.imageOrientPoint.y * zoomRatio - g_temp.imageOrientPoint.y);\n\t\t\n\t\tvar diffMiddleX = (middlePoint.x - g_temp.startMiddlePoint.x);\n\t    var diffMiddleY = (middlePoint.y - g_temp.startMiddlePoint.y);\n\t\t\n\t    var posx = g_temp.startImageX + panX + diffMiddleX;\n\t\tvar posy = g_temp.startImageY + panY + diffMiddleY;\t\t\n\t\t\t\t\n\t\t\n\t\t//resize and place:\n\t\tg_functions.setElementSizeAndPosition(g_temp.objImage, posx, posy, newWidth, newHeight);\n\t\t\n\t\t//trigger zooming event\n\t\tg_objParent.trigger(g_parent.events.ZOOMING);\t\t\t\n\t\tg_objParent.trigger(g_parent.events.ZOOM_CHANGE);\t\t\t\n\n\t\t/*\n\t\tdebugLine({\n\t\t\tmiddleStartX: g_temp.startMiddlePoint.x,\n\t\t\tmiddleX: middlePoint.x,\n\t\t\tdiffMiddleX: diffMiddleX\n\t\t});\n\t\t*/\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * check return the image from zoom\n\t */\n\tfunction checkReturnFromZoom(){\n\t\t\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_temp.objImage);\n\t\t\n\t\tif(objSize.width < g_temp.objFitImageSize.imageWidth){\n\t\t\t\n\t\t\tg_temp.objImage.css({\n\t\t\t\tposition:\"absolute\",\n\t\t\t\tmargin:\"none\"\n\t\t\t});\n\t\t\t\n\t\t\tvar objCss = {\n\t\t\t\ttop: g_temp.objFitImageSize.imageTop + \"px\",\n\t\t\t\tleft: g_temp.objFitImageSize.imageLeft + \"px\",\n\t\t\t\twidth: g_temp.objFitImageSize.imageWidth + \"px\",\n\t\t\t\theight: g_temp.objFitImageSize.imageHeight + \"px\"\n\t\t\t};\n\t\t\t\n\t\t\tg_temp.objImage.animate(objCss,{\n\t\t\t\tduration: g_options.slider_zoom_return_pan_duration,\n\t\t\t\teasing: g_options.slider_zoom_return_pan_easing,\n\t\t\t\tqueue: false\n\t\t\t});\n\t\t\t\n\t\t}else{\t\t\t\n\t\t\tcheckReturnAfterPan();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tfunction ________END_TOUCH_ZOOM_____________(){};\n\t\n\t\n\t/**\n\t * \n\t * touch start event - start pan, remember start pan data\n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\t//if no image type, exit\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar isStored = storeCurrentImage();\n\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\t\t\t\t\n\t\t//stop animation if exists\n\t\tif(isImageAnimating() == true){\t\t\t\n\t\t\tg_temp.objImage.stop(true);\n\t\t}\n\t\t\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tcheckTouchZoomEnd(event);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tcheckTouchZoomStart(event);\n\t\t\t\n\t\t}\n\t\t\n\t\t//if zoom started stop panning, if not, start panning\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tg_temp.isPanActive = false;\n\t\t\n\t\t}else if(isPanPosible(g_temp.objImage, event) == true && g_temp.isZoomedOnce == true){\n\t\t\t\n\t\t\tstartPan(event);\n\t\t}\n\t\t\n\t\t/*\n\t\tdebugLine({\n\t\t\t\tpan: g_temp.isPanActive,\n\t\t\t\tzoom: g_temp.isZoomActive,\n\t\t\t\tevent: \"start\"\n\t\t\t}, true);\n\t\t*/\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * touch end event - bring the image to place\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\t//check if some gallery button clicked\n\t\tvar objTarget = jQuery(event.target);\n\t\tif(objTarget.data(\"ug-button\") == true){\n\t\t\t//event.preventDefault();\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar isStored = storeCurrentImage();\n\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tvar panWasActive = g_temp.isPanActive;\n\t\tvar zoomWasActive = g_temp.isZoomActive;\n\t\t\n\t\t//if the inner not in place, don't return noting, let the slide change\n\t\tif(g_parent.isInnerInPlace() == false){\n\t\t\tg_temp.isZoomActive = false;\n\t\t\tg_temp.isPanActive = false;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//check end zoom\n\t\tif(g_temp.isZoomActive == true){\n\t\t\tcheckTouchZoomEnd(event);\n\t\t}else{\n\t\t\tcheckTouchZoomStart(event);\n\t\t}\n\t\t\n\t\t\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tg_temp.isPanActive = false;\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tvar panPosible = isPanPosible(g_temp.objImage, event, true);\n\t\t\t\n\t\t\tif(g_temp.isPanActive == true ){\n\t\t\t\t\t\t\n\t\t\t\tg_temp.isPanActive = false;\n\t\t\t\t\n\t\t\t}else if(panPosible == true){\n\t\t\t\t\n\t\t\t\tstartPan(event);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\t/*\n\t\tdebugLine({\n\t\t\tpan:g_temp.isPanActive,\n\t\t\tzoom: g_temp.isZoomActive\n\t\t}, true);\n\t\t*/\n\t\t\n\t\tif((panWasActive || zoomWasActive) && g_temp.isZoomActive == false && g_temp.isPanActive == false){\n\t\t\tcheckReturnFromZoom();\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * touch move event - pan\n\t */\n\tfunction onTouchMove(event){\n\t\t\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//check touch zoom (pinch gesture)\n\t\tif(g_temp.isZoomActive == true){\n\t\t\t\n\t\t\tdoTouchZoom(event);\n\t\t\t\n\t\t}else if(g_temp.isPanActive == true){\n\t\t\t\n\t\t\tpanImage(event);\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on slider mousewheel event\n\t */\n\tfunction onSliderMouseWheel(event, delta, deltaX, deltaY){\n\t\t\n\t\tif(g_options.slider_zoom_mousewheel == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_parent.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\t//prevent default only if needed\n\t\t//if(zoomIn == true || zoomIn == false && g_functions.isElementBiggerThenParent(objImage))\n\t\t//event.preventDefault();\n\t\t\n\t\t\n\t\tvar zoomIn = (delta > 0);\n\t\tvar mousePos = g_functions.getMousePosition(event);\n\t\tvar\tmode = (zoomIn == true) ? \"in\":\"out\";\n\t\t\n\t\tzoomCurrentImage(mode, mousePos);\n\t}\n\t\n\t\n\t/**\n\t * init touch events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//debugLine(\"init\");\n\t\tg_objSlider.on(\"mousewheel\",onSliderMouseWheel);\n\t\t\n\t\t//slider mouse down - pan start\n\t\tg_objSlider.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - pan end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t\t//event before image returned to init position\n\t\tg_objParent.bind(g_parent.events.BEFORE_RETURN, function(){\n\t\t\t\n\t\t\tcheckReturnFromZoom();\n\t\t});\n\t\t\t\t\n\t\t//on item change update isZoomedOnce event. Allow panning only if zoomed once\n\t\tg_objParent.bind(g_parent.events.ITEM_CHANGED, function(){\n\t\t\tg_temp.isZoomedOnce = false;\n\t\t});\n\t\t\n\t\tg_objParent.bind(g_parent.events.ZOOM_CHANGE, function(){\n\t\t\tg_temp.isZoomedOnce = true;\n\t\t});\n\t\t\n\t}\n\t\n\tthis.________EXTERNAL_____________ = function(){};\n\t\n\t/**\n\t * check if the image is zoomed, and there is a place for left panning\n\t */\n\tthis.isPanEnabled = function(event, direction){\n\t\t\n\t\tstoreCurrentImage();\n\t\t\n\t\tif(g_temp.objImage == undefined || g_temp.objImage.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_temp.isZoomedOnce == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(isPanPosible(g_temp.objImage, event) == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_parent.isInnerInPlace() == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(direction == \"left\"){\n\t\t\t\n\t\t\tif(g_temp.objImageSize.right <= g_temp.objParentSize.width)\n\t\t\t\treturn(false);\n\t\t\t\n\t\t}else{\t//right direction\n\t\t\t\n\t\t\tif(g_temp.objImageSize.left >= 0)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(objSlider, customOptions){\n\t\t\n\t\tinitObject(objSlider, customOptions);\n\t}\n\t\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomIn = function(){\t\t\n\t\tzoomCurrentImage(\"in\");\t\n\t}\n\t\n\t/**\n\t * zoom out\n\t */\n\tthis.zoomOut = function(){\t\t\n\t\tzoomCurrentImage(\"out\");\t\t\n\t}\n\t\n\t/**\n\t * zoom back\n\t */\n\tthis.zoomBack = function(){\n\t\t\n\t\tzoomCurrentImage(\"back\");\t\t\n\t}\n}\n/** -------------- Wistia API ---------------------*/\n\nfunction UGWistiaAPI(){\n\t\n\tthis.isAPILoaded = false;\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player, g_isPlayerReady = false;\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\n\t\n\t/**\n\t * check if sound cloud active\n\t */\n\tfunction isWistiaActive(){\n\t\t\n\t\treturn(typeof Wistia != \"undefined\");\t\n\t}\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugWistiaAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\n\t\tif(isWistiaActive()){\n\t\t\tg_ugWistiaAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"fast.wistia.com/assets/external/E-v1.js\", true);\n\t\t\n\t\tg_ugWistiaAPI.isAPILoaded = true;\t\t\n\t}\n\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar htmlID = divID + \"_video\";\n\t\t\n\t\tvar html = \"<div id='\"+htmlID+\"' class='wistia_embed' style='width:\"+width+\";height:\"+height+\";' data-video-width='\"+width+\"' data-video-height='\"+height+\"'>&nbsp;</div>\";\n\t\t\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\tg_player = Wistia.embed(videoID, {\n\t\t\t  version: \"v1\",\n\t\t\t  videoWidth: width,\n\t\t\t  videoHeight: height,\n\t\t\t  container: htmlID,\n\t\t\t  autoPlay: isAutoplay\n\t\t});\n\t\t\t\t\n\t\tg_isPlayerReady = true;\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//set \"play\" event\n\t\t\n\t\tg_player.bind('play', function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\t//set \"pause event\"\n\t\tg_player.bind('pause', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_player.bind('end', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tg_player.play();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_player.pause();\n\t\t\tbreak;\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * do pause command\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t/**\n\t * do play command\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n\t\n\t/**\n\t * put the vimeo video\n\t */\n\tthis.putVideo = function(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tif(isWistiaActive()){\n\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isWistiaActive()){\n\t\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get if the player is ready\n\t */\n\tthis.isPlayerReady = function(){\n\t\t\t\t\n\t\tif(g_isPlayerReady && g_player)\n\t\t\treturn(true);\n\t\n\t\treturn(false);\n\t}\t\n\t\n\t\n}\n\n/** -------------- Sound Cloud API ---------------------*/\n\nfunction UGSoundCloudAPI(){\n\t\n\tthis.isAPILoaded = false;\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player, g_lastContainerID;\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\n\t/**\n\t * check if sound cloud active\n\t */\n\tfunction isSCActive(){\n\t\t\n\t\treturn(typeof SC != \"undefined\");\t\n\t}\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugSoundCloudAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tif(isSCActive()){\n\t\t\tg_ugSoundCloudAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"w.soundcloud.com/player/api.js\", true);\n\t\t\n\t\tg_ugSoundCloudAPI.isAPILoaded = true;\t\t\n\t}\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putSoundActually(divID, trackID, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar iframeID = divID+\"_iframe\";\n\t\t\n\t\tvar url = location.protocol+\"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/\"+trackID;\n\t\turl += \"&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true\";\n\t\t\n\t\tif(isAutoplay === true)\n\t\t\turl += \"&amp;auto_play=true\";\n\t\telse\n\t\t\turl += \"&amp;auto_play=false\";\n\t\t\n\t\tvar html = \"<iframe id='\"+iframeID+\"' src=\"+url+\" width='\"+width+\"' height='\"+height+\"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\";\n\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\t//get the player object\n\t\tg_player = SC.Widget(iframeID);\n\t\t\n\t\tg_player.bind(SC.Widget.Events.READY, function() {\n\t\t\t\n\t\t\tif(g_player){\n\t\t\t\tg_isPlayerReady = true;\n\t\t\t\tinitEvents();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tg_lastContainerID = divID;\n\t}\n\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t\n\t\t//set \"play\" event\n\t\tg_player.bind(SC.Widget.Events.PLAY, function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\t//set \"pause event\"\n\t\tg_player.bind(SC.Widget.Events.PAUSE, function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_player.bind(SC.Widget.Events.FINISH, function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\t\n\t\n\t/**\n\t * put the youtube video\n\t */\n\tthis.putSound = function(divID, trackID, width, height, isAutoplay){\n\t\t\n\t\tif(isSCActive()){\n\t\t\tputSoundActually(divID, trackID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isSCActive()){\n\t\t\t\tputSoundActually(divID, trackID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tg_player.play();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_player.pause();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\t\n\t\n\t\n\t/**\n\t * pause video\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t\n\t/**\n\t * play video\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n\t/**\n\t * destroy the player\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_isPlayerReady = false;\n\t\tg_player = null;\n\t\t\n\t\tif(g_lastContainerID){\n\t\t\tjQuery(\"#\" + g_lastContainerID).html(\"\");\n\t\t\tg_lastContainerID = null;\n\t\t}\n\t\t\n\t}\n\t\n}\n\n/** -------------- html5 Video API ---------------------*/\n\nfunction UGHtml5MediaAPI(){\n\t\n\tthis.isAPILoaded = false;\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player;\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugHtml5MediaAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\n\t\t\n\t\tif(isMediaElementActive()){\n\t\t\tg_ugHtml5MediaAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js\", true);\n\t\tg_ugFunctions.loadCss(\"cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css\", true);\n\t\t\n\t\tg_ugHtml5MediaAPI.isAPILoaded = true;\t\t\n\t}\n\t\n\t/**\n\t * return true if the mediaelement is active\n\t */\n\tfunction isMediaElementActive(){\n\t\t\t\t\n\t\treturn(typeof mejs != \"undefined\");\n\t}\n\t\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, data, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar urlFlash = location.protocol + \"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf\";\n\t\tvar urlSilverlight = location.protocol + \"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap\";\n\n\t\tvar htmlID = divID + \"_video\";\n\t\tvar htmlAutoplay = \"\";\n\t\tif(isAutoplay && isAutoplay === true)\n\t\t\thtmlAutoplay = \"autoplay='autoplay'\"\n\t\t\n\t\tvar htmlPoster = \"\";\n\t\tif(data.posterImage)\n\t\t\thtmlPoster = \"poster='\"+data.posterImage+\"'\";\n\t\t\n\t\tvar html = \"<video id='\"+htmlID+\"' width='\"+width+\"' height='\"+height+\"'  controls='controls' preload='none' \"+htmlAutoplay+\" \"+htmlPoster+\">\";\n\t\t\t\t\n\t\tif(data.mp4 != \"\")\n\t\t\thtml += \"<source type='video/mp4' src='\"+data.mp4+\"' />\";\n\t\t\n\t\tif(data.webm != \"\")\n\t\t\thtml += \"<source type='video/webm' src='\"+data.webm+\"' />\";\n\n\t\tif(data.ogv != \"\")\n\t\t\thtml += \"<source type='video/ogg' src='\"+data.ogv+\"' />\";\n\t\t \n\t\thtml +=  \"<object width='\"+width+\"' height='\"+height+\"' type='application/x-shockwave-flash' data='\"+urlFlash+\"'>\";\n\t\thtml +=  \"<param name='movie' value='\"+urlFlash+\"' />\";\n\t\thtml +=  \"<param name='flashvars' value='controls=true&file=\"+data.mp4+\"' />\";\n\t\thtml +=  \"</object>\";\n\t\t\n\t\thtml += \"</video>\";\n\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\tnew MediaElement(htmlID, {\t\t\t\n\t\t    enablePluginDebug: false,\n\t\t    flashName: urlFlash,\n\t\t    silverlightName: urlSilverlight,\n\t\t    success: function (mediaElement, domObject) { \n\t\t    \tg_isPlayerReady = true;\n\t\t    \tg_player = mediaElement;\n\t\t    \t\t\t    \t\n\t\t    \tif(isAutoplay == false)\n\t\t    \t\tg_player.pause();\n\t\t    \t\n\t\t    \tinitEvents();\n\t\t    },\n\t\t    error: function (objError) { \n\t\t    \ttrace(objError);\n\t\t    }\n\t\t});\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init player events function\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_ugFunctions.addEvent(g_player, \"play\", function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\tg_ugFunctions.addEvent(g_player, \"pause\", function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_ugFunctions.addEvent(g_player, \"ended\", function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * put the vimeo video\n\t */\n\tthis.putVideo = function(divID, data, width, height, isAutoplay){\n\t\t\n\t\tif(isMediaElementActive()){\n\t\t\tputVideoActually(divID, data, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isMediaElementActive()){\n\t\t\t\tputVideoActually(divID, data, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tg_player.play();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_player.pause();\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\t\n\t\n\t\n\t/**\n\t * pause video\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t\n\t/**\n\t * play video\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n}\n\n\n/** -------------- Vimeo API class ---------------------*/\n\nfunction UGVimeoAPI(){\n\t\n\tthis.isAPILoaded = false;\n\t\n\tvar t = this, g_objThis = jQuery(this), g_intHandle;\n\tvar g_player = null, g_isPlayerReady = false, g_lastCotnainerID, g_cueChangeAutoplay = false;\n\t\n\t\n\tthis.events = {\n\t\t\tSTART_PLAYING: \"start_playing\",\n\t\t\tSTOP_PLAYING: \"stop_playing\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\t/**\n\t * load vimeo API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugVimeoAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(isFroogaloopActive()){\n\t\t\tg_ugVimeoAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\n\t\tg_ugFunctions.loadJs(\"f.vimeocdn.com/js/froogaloop2.min.js\", true);\n\t\t\n\t\tg_ugVimeoAPI.isAPILoaded = true;\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * tells if the froogaloop library active\n\t */\n\tfunction isFroogaloopActive(){\n\t\t\n\t\treturn(typeof Froogaloop != \"undefined\");\n\t}\n\t\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tg_player = null;\n\t\tg_isPlayerReady = false;\n\t\t\n\t\tvar url = location.protocol+\"//player.vimeo.com/video/\"+videoID+\"?api=1\";\n\t\t\n\t\tif(isAutoplay === true)\n\t\t   url += \"&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0\";\n\t\t\n\t\tvar html = \"<iframe src=\"+url+\" width='\"+width+\"' height='\"+height+\"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\";\n\t\t\n\t\tjQuery(\"#\"+divID).html(html);\n\t\t\n\t\t//get the player object\n\t\tvar iframe = jQuery(\"#\"+divID + \" iframe\")[0];\n\t\t\n\t\tg_player = Froogaloop(iframe);\n\n\t\tg_player.addEvent('ready', function(){\n\t\t\t\n\t\t\tif(g_player){\n\t\t\t\tg_isPlayerReady = true;\n\t\t\t\tinitEvents();\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tg_lastCotnainerID = divID;\t\t\n\t}\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(!g_player)\n\t\t\treturn(false);\n\t\t\t\t\n\t\t//set \"cuechange\" event\n\t\tg_player.addEvent('cuechange', function(){\n\t\t\t\n\t\t\tif(g_cueChangeAutoplay == true)\t\t\t\n\t\t\t\tt.play();\n\t\t\t\n\t\t});\n\t\t\n\t\t//set \"play\" event\n\t\tg_player.addEvent('play', function(){\n\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t});\n\t\t\n\t\t//set \"pause event\"\n\t\tg_player.addEvent('pause', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t});\n\t\t\n\t\tg_player.addEvent('finish', function(){\n\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\n\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command){\n\t\t\n\t\tif(g_player == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tdefault:\n\t\t\t\tg_player.api(command);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * do pause command\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t/**\n\t * do play command\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\n\t}\n\t\n\t/**\n\t * desrtoy the player and empty the div\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_player){\n\t\t\tg_player.api(\"unload\");\n\t\t\tg_player = null;\n\t\t\tg_isPlayerReady = false;\n\t\t}\n\t\t\n\t\tif(g_lastCotnainerID){\n\t\t\tjQuery(\"#\" + g_lastCotnainerID).html(\"\");\t\t\t\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * put the vimeo video\n\t */\n\tthis.putVideo = function(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tif(isFroogaloopActive()){\n\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isFroogaloopActive()){\n\t\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get if the player is ready\n\t */\n\tthis.isPlayerReady = function(){\n\t\t\n\t\tif(g_isPlayerReady && g_player)\n\t\t\treturn(true);\n\t\n\t\treturn(false);\n\t}\t\n\t\n\t/**\n\t * change the video\n\t */\n\tthis.changeVideo = function(videoID, isAutoplay){\n\t\t\n\t\tif(t.isPlayerReady() == false)\n\t\t\treturn(false);\n\t\t\n\t\tg_cueChangeAutoplay = isAutoplay;\n\t\t\n\t\tg_player.api(\"loadVideo\", videoID);\n\t}\n\t\n\t\n\t/**\n\t * get video images\n\t */\n\tthis.getVideoImages = function(videoID, itemIndex, onSuccessFunction){\n\t\t\n\t\tvar url = location.protocol+\"//vimeo.com/api/v2/video/\"+videoID+\".json\";\n\t\tjQuery.get(url, {}, function(data){\n\t\t\tvar obj = {};\n\t\t\tobj.preview = data[0].thumbnail_large;\n\t\t\tobj.thumb = data[0].thumbnail_medium;\n\t\t\tonSuccessFunction(itemIndex, obj);\n\t\t});\n\t}\n\t\n\t\n}\n\n\n/** -------------- Youtube API class ---------------------*/\n\nfunction UGYoutubeAPI(){\n\t\n\tthis.isAPILoaded = false;\t\n\tvar t = this, g_player = null, g_intHandle, g_isPlayerReady = false;\n\tvar g_objThis = jQuery(this), g_prevState = -1, g_lastContainerID;\t//unstarted\n\t\n\tvar g_options = {\n\t\t\tvideo_youtube_showinfo: true\n\t}\n\t\n\tthis.events = {\n\t\tSTART_PLAYING: \"start_playing\",\n\t\tSTOP_PLAYING: \"stop_playing\",\n\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\t\n\t/**\n\t * actually put the video\n\t */\n\tfunction putVideoActually(divID, videoID, width, height, isAutoplay){\n\t\t\t\t\n\t\tif(g_player && g_isPlayerReady){\t\t\t\n\t\t\tg_player.destroy();\n\t\t}\n\t\t\n\t\tvar playerVars = {\n\t\t\tcontrols:2,\n\t\t\tshowinfo:g_options.video_youtube_showinfo, \n\t\t\trel:0\n\t\t};\n\t\t\n\t\tif(isAutoplay === true)\n\t\t\tplayerVars.autoplay = 1;\n\t\t\t\n\t\tg_isPlayerReady = false;\n\n\t\tg_player = new YT.Player(divID, {\n\t\t      height: height,\n\t\t      width: width,\n\t\t      videoId: videoID,\n\t\t      playerVars: playerVars,\n\t\t      events: {\n\t\t        'onReady': onPlayerReady,\n\t\t        'onStateChange': onPlayerStateChange\n\t\t      }\n\t\t });\n\t\t\n\t\tg_lastContainerID = divID;\n\t}\n\t\n\t\n\t/**\n\t * check if YT active\n\t */\n\tfunction isYTActive(){\n\t\t\n\t\tif(typeof YT != \"undefined\" && typeof YT.Player != \"undefined\")\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * set options\n\t */\n\tthis.setOptions = function(objOptions){\n\t\tg_options = jQuery.extend(g_options, objOptions);\n\t}\n\t\n\t\n\t/**\n\t * put the youtube video\n\t */\n\tthis.putVideo = function(divID, videoID, width, height, isAutoplay){\n\t\t\n\t\tif(isYTActive()){\n\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//if no API present, wait for the API being ready\n\t\tthis.loadAPI();\n\t\tg_intHandle = setInterval(function(){\n\t\t\t\n\t\t\tif(isYTActive()){\n\t\t\t\tputVideoActually(divID, videoID, width, height, isAutoplay);\n\t\t\t\tclearInterval(g_intHandle);\n\t\t\t}\n\t\t\t\n\t\t}, 500);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on player ready event\n\t */\n\tfunction onPlayerReady(){\n\t\tg_isPlayerReady = true;\n\t}\n\t\n\t\n\t/**\n\t * on player state change event\n\t * trigger events\n\t */\n\tfunction onPlayerStateChange(){\n\t\t\n\t\tif(typeof g_player.getPlayerState != \"function\"){\n\t\t\ttrace(\"Youtube API error: can't get player state\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tvar state = g_player.getPlayerState();\n\t\t\n\t\tswitch(state){\n\t\t\tcase YT.PlayerState.PLAYING:\n\t\t\t\tg_objThis.trigger(t.events.START_PLAYING);\n\t\t\tbreak;\n\t\t\tcase YT.PlayerState.ENDED:\n\t\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\t\t\t\t\t\n\t\t\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif(g_prevState == YT.PlayerState.PLAYING)\n\t\t\t\t\tg_objThis.trigger(t.events.STOP_PLAYING);\t\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_prevState = state;\n\t}\n\t\n\t\n\t/**\n\t * load youtube API\n\t */\n\tthis.loadAPI = function(){\n\t\t\n\t\tif(g_ugYoutubeAPI.isAPILoaded == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(typeof YT != \"undefined\"){\n\t\t\tg_ugYoutubeAPI.isAPILoaded = true;\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tg_ugFunctions.loadJs(\"https://www.youtube.com/player_api\", false);\n\t\t\n\t\tg_ugYoutubeAPI.isAPILoaded = true;\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * do some command\n\t */\n\tthis.doCommand = function(command, opt1){\n\t\t\n\t\tif(!g_player)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_isPlayerReady == false)\n\t\t\treturn(false);\n\t\t\n\t\tswitch(command){\n\t\t\tcase \"play\":\n\t\t\t\tif(typeof g_player.playVideo != \"function\")\n\t\t\t\t\treturn(false);\n\t\t\t\t\n\t\t\t\tg_player.playVideo();\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tif(typeof g_player.pauseVideo != \"function\")\n\t\t\t\t\treturn(false);\n\t\t\t\t\n\t\t\t\tg_player.pauseVideo();\n\t\t\tbreak;\n\t\t\tcase \"seek\":\n\t\t\t\tif(typeof g_player.seekTo != \"function\")\n\t\t\t\t\treturn(false);\n\n\t\t\t\tg_player.seekTo(opt1);\n\t\t\tbreak;\n\t\t\tcase \"stopToBeginning\":\n\t\t\t\tvar state = g_player.getPlayerState();\n\t\t\t\t\n\t\t\t\tg_player.pauseVideo();\n\t\t\t\t\n\t\t\t\tswitch(state){\n\t\t\t\t\tcase YT.PlayerState.PLAYING:\n\t\t\t\t\tcase YT.PlayerState.ENDED:\n\t\t\t\t\tcase YT.PlayerState.PAUSED:\n\t\t\t\t\t\tg_player.seekTo(0);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t/**\n\t * play video\n\t */\n\tthis.play = function(){\n\t\tt.doCommand(\"play\");\t\t\n\t}\n\t\n\t/**\n\t * stop the video\n\t */\n\tthis.pause = function(){\n\t\tt.doCommand(\"pause\");\n\t}\n\t\n\t/**\n\t * destroy player\n\t */\n\tthis.destroy = function(){\n\t\ttry{\n\t\t\t\n\t\t\tif(g_player){\n\t\t\t\tg_isPlayerReady = false;\t\n\t\t\t\tg_player.clearVideo();\n\t\t\t\tg_player.destroy();\n\t\t\t}\n\t\t\t\n\t\t}catch(objError){\n\t\t\t\n\t\t\tjQuery(\"#\"+g_lastContainerID).html(\"\");\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * stop the video and seek to start\n\t */\n\tthis.stopToBeginning = function(){\n\t\tt.doCommand(\"stopToBeginning\");\n\t}\n\t\n\t/**\n\t * change the video\n\t */\n\tthis.changeVideo = function(videoID, isAutoplay){\n\t\t\n\t\tif(t.isPlayerReady() == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(isAutoplay && isAutoplay == true)\n\t\t\tg_player.loadVideoById(videoID, 0, \"large\");\n\t\telse\n\t\t\tg_player.cueVideoById(videoID, 0, \"large\");\n\t}\n\t\n\t\n\t/**\n\t * get if the player is ready\n\t */\n\tthis.isPlayerReady = function(){\n\t\t\n\t\tif(g_isPlayerReady && g_player)\n\t\t\treturn(true);\n\t\n\t\treturn(false);\n\t}\n\t\n\t\t\n\t\n\t/**\n\t * get preview and thumbs images according the ID\n\t */\n\tthis.getVideoImages = function(videoID){\n\t\tvar obj = {};\n\t\tobj.preview = \"https://i.ytimg.com/vi/\"+videoID+\"/sddefault.jpg\";\n\t\tobj.thumb = \"https://i.ytimg.com/vi/\"+videoID+\"/default.jpg\";\n\t\treturn(obj);\n\t}\n\t\n\t\n}\n\n/** -------------- Video Player Class ---------------------*/\n\n\nfunction UGVideoPlayer(){\n\t\n\tvar t = this, g_galleryID, g_objThis = jQuery(this), g_functions = new UGFunctions();\n\tvar g_youtubeAPI = new UGYoutubeAPI(), g_vimeoAPI = new UGVimeoAPI();\n\tvar g_html5API = new UGHtml5MediaAPI(), g_soundCloudAPI = new UGSoundCloudAPI(), g_wistiaAPI = new UGWistiaAPI();\n\tvar g_objPlayer, g_objYoutube, g_objVimeo, g_objHtml5, g_objButtonClose, g_objSoundCloud, g_objWistia;\n\tvar g_activePlayerType = null;\n\t\n\tvar g_options = {\n\t\t\tvideo_enable_closebutton: true\n\t};\n\t\n\tthis.events = {\n\t\t\tSHOW: \"video_show\",\n\t\t\tHIDE: \"video_hide\",\n\t\t\tPLAY_START: \"video_play_start\",\n\t\t\tPLAY_STOP: \"video_play_stop\",\n\t\t\tVIDEO_ENDED: \"video_ended\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\tstandAloneMode: false,\n\t\t\tyoutubeInnerID:\"\",\n\t\t\tvimeoPlayerID:\"\",\n\t\t\thtml5PlayerID:\"\",\n\t\t\twistiaPlayerID:\"\",\n\t\t\tsoundCloudPlayerID:\"\"\n\t};\n\t\n\t\n\t/**\n\t * init the object\n\t */\n\tthis.init = function(optOptions, isStandAloneMode, galleryID){\n\t\tg_galleryID = galleryID;\n\t\t\n\t\tif(!g_galleryID)\n\t\t\tthrow new Error(\"missing gallery ID for video player, it's a must!\");\n\t\t\t\n\t\tg_options =  jQuery.extend(g_options, optOptions);\n\t\t\n\t\tg_youtubeAPI.setOptions(g_options);\n\t\t\n\t\tif(isStandAloneMode && isStandAloneMode == true)\n\t\t\tg_temp.standAloneMode = true;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set the player html\n\t */\n\tthis.setHtml = function(objParent){\n\t\t\n\t\tg_temp.youtubeInnerID = g_galleryID + \"_youtube_inner\";\n\t\tg_temp.vimeoPlayerID = g_galleryID + \"_videoplayer_vimeo\";\n\t\tg_temp.html5PlayerID = g_galleryID + \"_videoplayer_html5\";\n\t\tg_temp.wistiaPlayerID = g_galleryID + \"_videoplayer_wistia\";\n\t\tg_temp.soundCloudPlayerID = g_galleryID + \"_videoplayer_soundcloud\";\n\t\t\n\t\t\n\t\tvar html = \"<div class='ug-videoplayer' style='display:none'>\";\n\t\thtml += \"<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='\"+g_temp.youtubeInnerID+\"'></div></div>\";\n\t\thtml += \"<div id='\"+g_temp.vimeoPlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>\";\n\t\thtml += \"<div id='\"+g_temp.html5PlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>\";\n\t\thtml += \"<div id='\"+g_temp.soundCloudPlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>\";\n\t\thtml += \"<div id='\"+g_temp.wistiaPlayerID+\"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>\";\n\t\t\n\t\tif(g_temp.standAloneMode == false && g_options.video_enable_closebutton == true)\n\t\t\thtml += \"<div class='ug-videoplayer-button-close'></div>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tobjParent.append(html);\n\t\t\n\t\tg_objPlayer = objParent.children(\".ug-videoplayer\");\n\t\tg_objYoutube = g_objPlayer.children(\".ug-videoplayer-youtube\");\n\t\tg_objVimeo = g_objPlayer.children(\".ug-videoplayer-vimeo\");\n\t\tg_objHtml5 = g_objPlayer.children(\".ug-videoplayer-html5\");\n\t\tg_objSoundCloud = g_objPlayer.children(\".ug-videoplayer-soundcloud\");\n\t\tg_objWistia = g_objPlayer.children(\".ug-videoplayer-wistia\");\n\t\t\n\t\tif(g_temp.standAloneMode == false && g_options.video_enable_closebutton == true)\n\t\t\tg_objButtonClose = g_objPlayer.children(\".ug-videoplayer-button-close\")\n\t}\n\n\t\n\tfunction __________EVENTS___________(){};\t\n\t\n\t/**\n\t * on close button click event\n\t */\n\tfunction onCloseButtonClick(){\n\t\tt.hide();\n\t}\n\t\n\t/**\n\t * on some video play start\n\t */\n\tfunction onPlayStart(){\n\t\t\n\t\tg_objThis.trigger(t.events.PLAY_START);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.hide();\n\t}\n\t\n\t\n\t/**\n\t * on some video play stop\n\t */\n\tfunction onPlayStop(){\n\t\t\n\t\tg_objThis.trigger(t.events.PLAY_STOP);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.show();\n\t}\n\t\n\t/**\n\t * on video ended\n\t */\n\tfunction onVideoEnded(){\n\t\t\n\t\tg_objThis.trigger(t.events.VIDEO_ENDED);\n\t\t\n\t}\n\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//close button events\n\t\tif(g_objButtonClose){\n\t\t\tg_functions.setButtonMobileReady(g_objButtonClose);\t\t\n\t\t\tg_functions.setButtonOnClick(g_objButtonClose, onCloseButtonClick);\t\t\t\t\t\n\t\t}\n\t\t\n\t\t//youtube events\n\t\tjQuery(g_youtubeAPI).on(g_youtubeAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_youtubeAPI).on(g_youtubeAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_youtubeAPI).on(g_youtubeAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\t//vimeo events\n\t\tjQuery(g_vimeoAPI).on(g_vimeoAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_vimeoAPI).on(g_vimeoAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_vimeoAPI).on(g_vimeoAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\t//html5 video events\n\t\tjQuery(g_html5API).on(g_html5API.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_html5API).on(g_html5API.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_html5API).on(g_html5API.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\tjQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_soundCloudAPI).on(g_soundCloudAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t\tjQuery(g_wistiaAPI).on(g_wistiaAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_wistiaAPI).on(g_wistiaAPI.events.STOP_PLAYING, onPlayStop);\n\t\tjQuery(g_wistiaAPI).on(g_wistiaAPI.events.VIDEO_ENDED, onVideoEnded);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the video player events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objButtonClose){\n\t\t\tg_objButtonClose.off(\"click\");\n\t\t\tg_objButtonClose.off(\"touchend\");\n\t\t}\n\t\t\n\t\t//youtube events\n\t\tjQuery(g_youtubeAPI).off(g_youtubeAPI.events.START_PLAYING);\n\t\tjQuery(g_youtubeAPI).off(g_youtubeAPI.events.STOP_PLAYING);\n\t\t\n\t\t//vimeo events\n\t\tjQuery(g_vimeoAPI).off(g_vimeoAPI.events.START_PLAYING);\n\t\tjQuery(g_vimeoAPI).off(g_vimeoAPI.events.STOP_PLAYING);\n\t\t\n\t\t//html5 video events\n\t\tjQuery(g_html5API).off(g_html5API.events.START_PLAYING);\n\t\tjQuery(g_html5API).off(g_html5API.events.STOP_PLAYING);\n\t\t\n\t\tjQuery(g_soundCloudAPI).off(g_soundCloudAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_soundCloudAPI).off(g_soundCloudAPI.events.STOP_PLAYING, onPlayStop);\n\t\t\n\t\tjQuery(g_wistiaAPI).off(g_wistiaAPI.events.START_PLAYING, onPlayStart);\n\t\tjQuery(g_wistiaAPI).off(g_wistiaAPI.events.STOP_PLAYING, onPlayStop);\n\t\t\n\t\tg_activePlayerType = null;\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tthis.initEvents = function(){\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * set element size and position the button\n\t */\n\tthis.setSize = function(width, height){\n\t\t\n\t\tg_functions.setElementSize(g_objPlayer, width, height);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_functions.placeElement(g_objButtonClose, \"right\", \"top\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set video player position\n\t */\n\tthis.setPosition = function(left, top){\n\t\tg_functions.placeElement(g_objPlayer, left, top);\n\t}\n\t\n\t/**\n\t * get video player object for placing\n\t */\n\tthis.getObject = function(){\n\t\treturn(g_objPlayer);\n\t}\n\t\n\t\n\t/**\n\t * show the player\n\t */\n\tthis.show = function(){\t\t\n\t\t\n\t\tif(t.isVisible() == true)\n\t\t\treturn(true);\n\t\t\n\t\tg_objPlayer.show();\n\t\t\n\t\tg_objPlayer.fadeTo(0,1);\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.show();\n\t\t\t\t\n\t\tg_objThis.trigger(t.events.SHOW);\n\t}\n\t\t\n\t\n\t/**\n\t * hide the player\n\t */\n\tthis.hide = function(){\n\t\t\n\t\tif(t.isVisible() == false)\n\t\t\treturn(true);\n\t\t\n\t\t//pause all players\n\t\tstopAndHidePlayers();\n\t\t\n\t\tg_activePlayerType = null;\n\t\t\n\t\tg_objPlayer.hide();\n\t\t\n\t\tg_objThis.trigger(t.events.HIDE);\n\t}\n\t\n\t\n\t/**\n\t * get active player\n\t */\n\tthis.getActiveAPI = function(){\n\t\t\n\t\tswitch(g_activePlayerType){\n\t\t\tcase \"youtube\":\n\t\t\t\treturn g_youtubeAPI;\n\t\t\tbreak;\n\t\t\tcase \"vimeo\":\n\t\t\t\treturn g_vimeoAPI;\n\t\t\tbreak;\n\t\t\tcase \"wistia\":\n\t\t\t\treturn g_wistiaAPI;\n\t\t\tbreak;\n\t\t\tcase \"soundcloud\":\n\t\t\t\treturn g_soundCloudAPI;\n\t\t\tbreak;\n\t\t\tcase \"html5\":\n\t\t\t\treturn g_html5API;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * pause active player if playing\n\t */\n\tthis.pause = function(){\n\t\t\n\t\tvar activeAPI = t.getActiveAPI();\n\t\tif(activeAPI == null)\n\t\t\treturn(false);\n\t\t\n\t\tif(typeof activeAPI.pause == \"function\")\n\t\t\tactiveAPI.pause();\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * return if the player is visible\n\t */\n\tthis.isVisible = function(){\n\t\t\n\t\treturn g_objPlayer.is(\":visible\");\n\t}\n\t\n\t\n\t/**\n\t * stop and hide other elements except some\n\t */\n\tfunction stopAndHidePlayers(except){\n\t\t\n\t\tvar arrPlayers = [\"youtube\", \"vimeo\", \"html5\", \"soundcloud\", \"wistia\"];\n\t\tfor(var index in arrPlayers){\n\t\t\tvar player = arrPlayers[index];\n\t\t\tif(player == except)\n\t\t\t\tcontinue;\n\t\t\tswitch(player){\n\t\t\t\tcase \"youtube\":\t\t\n\t\t\t\t\tg_youtubeAPI.pause();\n\t\t\t\t\tg_youtubeAPI.destroy();\t\n\t\t\t\t\tg_objYoutube.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"vimeo\":\n\t\t\t\t\tg_vimeoAPI.pause();\n\t\t\t\t\tg_vimeoAPI.destroy();\n\t\t\t\t\tg_objVimeo.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"html5\":\n\t\t\t\t\tg_html5API.pause();\n\t\t\t\t\tg_objHtml5.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"soundcloud\":\n\t\t\t\t\tg_soundCloudAPI.pause();\n\t\t\t\t\tg_soundCloudAPI.destroy();\n\t\t\t\t\tg_objSoundCloud.hide();\n\t\t\t\tbreak;\n\t\t\t\tcase \"wistia\":\n\t\t\t\t\tg_wistiaAPI.pause();\n\t\t\t\t\tg_objWistia.hide();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * play youtube inside the video, isAutoplay - true by default\n\t */\n\tthis.playYoutube = function(videoID, isAutoplay){\n\t\t\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"youtube\");\n\t\t\n\t\tg_objYoutube.show();\n\t\t\n\t\tvar objYoutubeInner = g_objYoutube.children(\"#\"+g_temp.youtubeInnerID);\n\t\tif(objYoutubeInner.length == 0)\n\t\t\tg_objYoutube.append(\"<div id='\"+g_temp.youtubeInnerID+\"'></div>\");\n\t\t\t\n\t\t\n\t\tif(g_youtubeAPI.isPlayerReady() == true && g_temp.standAloneMode == true)\n\t\t\tg_youtubeAPI.changeVideo(videoID, isAutoplay);\n\t\telse{\n\t\t\tg_youtubeAPI.putVideo(g_temp.youtubeInnerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\t}\n\t\t\n\t\tg_activePlayerType = \"youtube\";\n\t}\n\t\n\t\n\t/**\n\t * play vimeo\n\t */\n\tthis.playVimeo = function(videoID, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"vimeo\");\n\t\t\n\t\tg_objVimeo.show();\n\n\t\tg_vimeoAPI.putVideo(g_temp.vimeoPlayerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\t\n\t\t/*\n\t\tif(g_vimeoAPI.isPlayerReady() && g_temp.standAloneMode == true){\n\t\t\tg_vimeoAPI.changeVideo(videoID, isAutoplay);\n\t\t}\n\t\telse\n\t\t\tg_vimeoAPI.putVideo(g_temp.vimeoPlayerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\t */\n\t\t\n\t\tg_activePlayerType = \"vimeo\";\n\n\t}\n\t\n\t\n\t/**\n\t * play html5 video\n\t */\n\tthis.playHtml5Video = function(ogv, webm, mp4, posterImage, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\t\t\n\t\tstopAndHidePlayers(\"html5\");\n\t\t\n\t\tg_objHtml5.show();\n\t\t\n\t\t//trace(posterImage);\n\t\t\n\t\tvar data = {\n\t\t\t\togv: ogv, \n\t\t\t\twebm: webm, \n\t\t\t\tmp4: mp4, \n\t\t\t\tposterImage: posterImage \n\t\t\t};\n\t\t\n\t\tg_html5API.putVideo(g_temp.html5PlayerID, data, \"100%\", \"100%\", isAutoplay);\n\t\t\n\t\tg_activePlayerType = \"html5\";\n\n\t}\n\n\t/**\n\t * play sound cloud\n\t */\n\tthis.playSoundCloud = function(trackID, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"soundcloud\");\n\t\t\n\t\tg_objSoundCloud.show();\n\t\t\n\t\tg_soundCloudAPI.putSound(g_temp.soundCloudPlayerID, trackID, \"100%\", \"100%\", isAutoplay);\n\n\t\tg_activePlayerType = \"soundcloud\";\n\t\n\t}\n\t\n\t\n\t/**\n\t * play sound cloud\n\t */\n\tthis.playWistia = function(videoID, isAutoplay){\n\t\t\n\t\tif(typeof isAutoplay == \"undefined\")\n\t\t\tvar isAutoplay = true;\n\t\t\n\t\tstopAndHidePlayers(\"wistia\");\n\t\t\n\t\tg_objWistia.show();\n\t\t\n\t\tg_wistiaAPI.putVideo(g_temp.wistiaPlayerID, videoID, \"100%\", \"100%\", isAutoplay);\n\t\n\t\tg_activePlayerType = \"wistia\";\n\n\t}\n\t\n}\n\n\nvar g_ugYoutubeAPI = new UGYoutubeAPI();\nvar g_ugVimeoAPI = new UGVimeoAPI();\nvar g_ugHtml5MediaAPI = new UGHtml5MediaAPI();\nvar g_ugSoundCloudAPI = new UGSoundCloudAPI();\nvar g_ugWistiaAPI = new UGWistiaAPI();\n\n\n\t/**\n\t * prototype gallery funciton\n\t */\n\tjQuery.fn.unitegallery = function(options){\n\t\tvar element = jQuery(this);\n\t\tvar galleryID = \"#\" + element.attr(\"id\");\n\t\t\n\t\tif(!options)\n\t\t\tvar options = {};\n\t\t\t\t\n\t\tvar objGallery = new UniteGalleryMain();\n\t\tobjGallery.run(galleryID, options);\n\t\t\n\t\tvar api = new UG_API(objGallery);\n\t\t\n\t\treturn(api);\n\t}\n\n\t\n\t/**\n\t * check for min jquery version\n\t */\n\tfunction ugCheckForMinJQueryVersion(){\n\t\t\n\t\tvar isMinJQuery = g_ugFunctions.checkMinJqueryVersion(\"1.8.0\");\n\t\t\n\t\tif(isMinJQuery == false)\n\t\t\tthrow new Error(\"The gallery can run from jquery 1.8 You have jQuery \"+jQuery.fn.jquery+\" Please update your jQuery library.\");\n\t}\n\t\n\t\n\t/**\n\t * check for errors function\n\t */\n\tfunction ugCheckForErrors(galleryID, type){\n\n\t\t/**\n\t\t * check for jquery presents\n\t\t */\n\t\tfunction checkForJqueryPresents(){\n\t\t\tif(typeof jQuery == \"undefined\")\n\t\t\t\tthrow new Error(\"jQuery library not included\");\n\t\t}\n\t\t\n\t\t/**\n\t\t * check for double jquery error\n\t\t */\n\t\tfunction checkForDoubleJQuery(){\n\n\t\t\tif(typeof jQuery.fn.unitegallery == \"function\")\n\t\t\t\treturn(true);\n\t\t\t\n\t\t\tvar errorMessage = \"You have some jquery.js library include that comes after the gallery files js include.\";\n\t\t\terrorMessage += \"<br> This include eliminates the gallery libraries, and make it not work.\";\n\t\t\t\n\t\t\tif(type == \"cms\"){\n\t\t\t\terrorMessage += \"<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.\";\n\t\t\t\terrorMessage += \"<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it.\";\n\t\t\t}else{\n\t\t\t\terrorMessage += \"<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.\";\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tthrow new Error(errorMessage);\n\t\t}\n\t\t\n\t\ttry{\n\t\t\tif(type == \"jquery\"){\n\t\t\t\tcheckForJqueryPresents();\n\t\t\t\tugCheckForMinJQueryVersion();\n\t\t\t}else{\n\t\t\t\tugCheckForMinJQueryVersion();\n\t\t\t\tcheckForDoubleJQuery();\n\t\t\t}\n\t\t\t\n\t\t}catch(objError){\n\t\t\t\n\t\t\tvar message = objError.message;\n\t\t\tmessage = \"Unite Gallery Error: \"+ message;\n\t\t\tmessage = \"<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>\" + message + \"</div>\"\n\t\t\t\n\t\t\tif(type == \"jquery\"){\n\t\t\t\tvar objGallery = document.getElementById(galleryID);\n\t\t\t\tobjGallery.innerHTML = message;\n\t\t\t\tobjGallery.style.display = \"block\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tjQuery(galleryID).show().html(message);\n\t\t\t\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\treturn(true);\n\t}\n\n\t\nfunction UniteGalleryMain(){\n\t\n\tvar t = this;\n\tvar g_galleryID;\n\tvar g_objGallery = jQuery(t), g_objWrapper, g_objParent;\n\tvar g_objThumbs, g_objSlider, g_functions = new UGFunctions(), g_objTabs, g_objLoadMore;\n\tvar g_arrItems = [], g_numItems, g_selectedItem = null, g_selectedItemIndex = -1;\n\tvar g_objTheme, g_objCache = {};\n\t\n\tthis.events = {\n\t\t\tITEM_CHANGE: \"item_change\",\n\t\t\tSIZE_CHANGE: \"size_change\",\n\t\t\tENTER_FULLSCREEN: \"enter_fullscreen\",\n\t\t\tEXIT_FULLSCREEN: \"exit_fullscreen\",\n\t\t\tSTART_PLAY: \"start_play\",\n\t\t\tSTOP_PLAY: \"stop_play\",\n\t\t\tPAUSE_PLAYING: \"pause_playing\",\n\t\t\tCONTINUE_PLAYING: \"continue_playing\",\n\t\t\tSLIDER_ACTION_START: \"slider_action_start\",\n\t\t\tSLIDER_ACTION_END: \"slider_action_end\",\n\t\t\tITEM_IMAGE_UPDATED: \"item_image_updated\",\n\t\t\tGALLERY_KEYPRESS: \"gallery_keypress\",\n\t\t\tGALLERY_BEFORE_REQUEST_ITEMS: \"gallery_before_request_items\",\t//before ajax load items\n\t\t\tOPEN_LIGHTBOX:\"open_lightbox\",\n\t\t\tCLOSE_LIGHTBOX:\"close_lightbox\"\t\t\t\n\t};\n\t\n\t\n\t//set the default gallery options\n\tvar g_options = {\t\t\t\t\n\t\t\tgallery_width:900,\t\t\t\t\t\t\t//gallery width\t\t\n\t\t\tgallery_height:500,\t\t\t\t\t\t\t//gallery height\n\t\t\t\n\t\t\tgallery_min_width: 150,\t\t\t\t\t\t//gallery minimal width when resizing\n\t\t\tgallery_min_height: 100,\t\t\t\t\t//gallery minimal height when resizing\n\t\t\t\n\t\t\tgallery_theme:\"default\",\t\t\t\t\t//default,compact,grid,slider - select your desired theme from the list of themes.\n\t\t\tgallery_skin:\"default\",\t\t\t\t\t\t//default, alexis etc... - the global skin of the gallery. Will change all gallery items by default.\n\t\t\t\n\t\t\tgallery_images_preload_type:\"minimal\",\t\t//all , minimal , visible - preload type of the images.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//minimal - only image nabours will be loaded each time.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//visible - visible thumbs images will be loaded each time.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//all - load all the images first time.\n\t\t\t\n\t\t\tgallery_autoplay:false,\t\t\t\t\t\t//true / false - begin slideshow autoplay on start\n\t\t\tgallery_play_interval: 3000,\t\t\t\t//play interval of the slideshow\n\t\t\tgallery_pause_on_mouseover: true,\t\t\t//true,false - pause on mouseover when playing slideshow true/false\n\t\t\t\n\t\t\tgallery_mousewheel_role:\"zoom\",\t\t\t\t//none, zoom, advance\n\t\t\tgallery_control_keyboard: true,\t\t\t\t//true,false - enable / disble keyboard controls\n\t\t\tgallery_carousel:true,\t\t\t\t\t\t//true,false - next button on last image goes to first image.\n\t\t\t\n\t\t\tgallery_preserve_ratio: true,\t\t\t\t//true, false - preserver ratio when on window resize\n\t\t\tgallery_background_color: \"\",\t\t\t\t//set custom background color. If not set it will be taken from css.\n\t\t\tgallery_debug_errors:false,\t\t\t\t\t//show error message when there is some error on the gallery area.\n\t\t\tgallery_shuffle:false,\t\t\t\t\t\t//randomise position of items at start.\n\t\t\tgallery_urlajax:null,\t\t\t\t\t\t//ajax url for requesting new items etc.\n\t\t\tgallery_enable_tabs: false,\t\t\t\t\t//enable/disable category tabs\n\t\t\tgallery_enable_loadmore: false,\t\t\t\t//enable / disable loadmore button\n\t\t\tgallery_enable_cache: true,\t\t\t\t\t//enable caching items\n\t\t\tgallery_initial_catid: \"\"\t\t\t\t\t//initial category id (for caching)\n\t};\n\t\n\t//gallery_control_thumbs_mousewheel\n\t\n\tvar g_temp = {\t\t\t\t\t//temp variables\n\t\tobjCustomOptions:{},\n\t\tisAllItemsPreloaded:false,\t//flag that tells that all items started preloading\n\t\tisFreestyleMode:false,\t\t//no special html additions\n\t\tlastWidth:0,\n\t\tlastHeigh:0,\n\t\thandleResize: null,\n\t\tisInited: false,\n\t\tisPlayMode: false,\n\t\tisPlayModePaused: false,\n\t\tplayTimePassed: 0,\n\t\tplayTimeLastStep: 0,\n\t\tplayHandle: \"\",\n\t\tplayStepInterval: 33,\n\t\tobjProgress: null,\n\t\tisFakeFullscreen: false,\n\t\tthumbsType:null,\n\t\tisYoutubePresent:false,\t\t\t//flag if present youtube items\n\t\tisVimeoPresent:false,\t\t\t//flag if present vimeo items\n\t\tisHtml5VideoPresent:false,\t\t//flag if present html5 video items\n\t\tisSoundCloudPresent:false,\t\t//flag if present soundcloud items\n\t\tisWistiaPresent: false,\t\t\t//flag if some wistia movie present\n\t\tresizeDelay: 100,\n\t\tisRunFirstTime: true,\n\t\toriginalOptions: {},\n\t\tfuncCustomHeight: null\t\t\t//custom height function, set by the theme if needed\n\t};\n\t\n\t\n\t\n\tfunction __________INIT_GALLERY_______(){};\n\t\n\t/**\n\t * get theme function from theme name\n\t */\n\tfunction getThemeFunction(themeName){\n\t\t var themeFunction = themeName;\n\t\tif(themeFunction.indexOf(\"UGTheme_\") == -1)\n\t\t\t themeFunction = \"UGTheme_\" + themeFunction;\n\t\t\n\t\treturn(themeFunction);\n\t}\n\n\t/**\n\t * init the theme\n\t */\n\tfunction initTheme(objCustomOptions){\n\t\t \n\t\t//set theme function:\n\t\t if(objCustomOptions.hasOwnProperty(\"gallery_theme\"))\n\t\t\t g_options.gallery_theme = objCustomOptions.gallery_theme;\n\t\t else{\n\t\t\t var defaultTheme = g_options.gallery_theme;\n\t\t\t if(g_ugFunctions.isThemeRegistered(defaultTheme) == false)\n\t\t\t\t g_options.gallery_theme = g_ugFunctions.getFirstRegisteredTheme();\n\t\t }\n\t\t \n\t\t var themeFunction = getThemeFunction(g_options.gallery_theme);\n\t\t \n\t\t try{\n\t\t\t g_options.gallery_theme = eval(themeFunction);\n\t\t }catch(e){\n\t\t\t //check registered themes\n\t\t };\n\t\t \n\t\t g_options.gallery_theme = eval(themeFunction);\n\t\t \n\t\t //init the theme\n\t\t g_objTheme = new g_options.gallery_theme();\n\t\t g_objTheme.init(t, objCustomOptions);\n\t}\n\t\n\t\n\t/**\n\t * reset all the options for the second time run\n\t */\n\tfunction resetOptions(){\n\t   \t \n\t\t g_options = jQuery.extend({}, g_temp.originalOptions);\n\t\t \n\t\t g_selectedItemIndex = -1;\n\t\t g_selectedItem = null;\n\t\t g_objSlider = undefined;\n\t\t g_objThumbs = undefined;\n\t\t g_objSlider = undefined; \n\t}\n\t\n\t\n\t/**\n\t * check for some errors and fire error if needed\n\t */\n\tfunction checkForStartupErrors(){\n\t\t\n\t\t//protection agains old jquery version\n\t\ttry{\n\t\t\tugCheckForMinJQueryVersion();\n\t\t}catch(e){\n\t\t\tthrowErrorShowMessage(e.message);\n\t\t}\n\t\t\n\t\t//protection against some jquery ui function change\n\t     if(typeof g_objWrapper.outerWidth() == \"object\")\n\t    \t throwErrorShowMessage(\"You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version.\");\n\t     \n\t     //check for late jquery include\n\t     setTimeout(function(){ugCheckForErrors(g_galleryID, \"cms\")} , 5000);\n\t     \n\t}\n\t\n\t\n\t\n\t/**\n\t *  the gallery\n\t */\n\tfunction runGallery(galleryID, objCustomOptions, htmlItems, cacheID){\n\t\t\t\n\t\t\tvar isCustomOptions = (typeof objCustomOptions == \"object\");\n\t\t\t\n\t\t\tif(isCustomOptions)\n\t\t      g_temp.objCustomOptions = objCustomOptions;\n\t\t\t \t\t\t \n\t\t     if(g_temp.isRunFirstTime == true){\n\t\t\t\t\n\t\t    \t g_galleryID = galleryID;\n\t\t\t\t g_objWrapper = jQuery(g_galleryID);\n\t\t\t\t if(g_objWrapper.length == 0){\n\t\t\t\t\t trace(\"div with id: \"+g_galleryID+\" not found\");\n\t\t\t\t\t return(false);\n\t\t\t\t }\n\n\t\t\t\t g_objParent = g_objWrapper.parent();\n\t\t\t\t \n\t\t\t\t checkForStartupErrors();\n\t\t\t\t \n\t\t\t\t g_temp.originalOptions = jQuery.extend({}, g_options);\n\t\t\t\t \n\t\t\t\t //merge options\n\t\t\t\t if(isCustomOptions)\n\t\t\t\t\t g_options = jQuery.extend(g_options, objCustomOptions);\n\t\t\t\t \n\t\t\t\t //cache items\n\t\t\t\t if(g_options.gallery_enable_cache == true && g_options.gallery_initial_catid)\n\t\t\t\t\t cacheItems(g_options.gallery_initial_catid);\n\t\t\t\t\n\t\t\t\t //set size class\n\t\t\t\t t.setSizeClass();\n\t\t\t\t \n\t\t\t\t //fill arrItems\n\t\t\t\t var objItems = g_objWrapper.children();\n\t\t\t\t \n\t\t\t\t fillItemsArray(objItems);\n\t\t\t\t loadAPIs();\n\t\t\t\t \n\t\t\t\t //hide images:\n\t\t\t\t g_objWrapper.find(\"img\").fadeTo(0,0).hide();\n\t\t\t\t g_objWrapper.show();\n\t\t\n\t\t\t\t clearInitData();\n\t\t    \t \n\t\t     }else{\t\t//reset options - not first time run\n\t\t    \t \n\t\t    \t t.destroy();\n\t\t    \t \n\t\t    \t resetOptions();\n\n\t\t    \t g_options = jQuery.extend(g_options, g_temp.objCustomOptions);\n\t    \t\t \n\t\t    \t if(htmlItems){\n\t\t    \t\t \n\t\t    \t\t //cache items\n\t\t    \t\t if(cacheID && g_options.gallery_enable_cache == true)\n\t\t    \t\t\t cacheItems(cacheID, htmlItems);\n\t\t    \t\t \n\t\t    \t\t if(htmlItems == \"noitems\"){\n\t\t    \t\t\t showErrorMessage(\"No items in this category\",\"\");\n\t\t    \t\t\t return(false);\n\t\t\t    \t }\n\t\t    \t\t \n\t\t    \t\t g_objWrapper.html(htmlItems);\n\t\t    \t\t \n\t\t    \t\t var objItems = g_objWrapper.children();\n\t\t    \t\t fillItemsArray(objItems);\n\t\t\t\t\t \n\t\t    \t\t loadAPIs();\n\t\t\t\t\t \n\t\t\t\t\t g_objWrapper.children().fadeTo(0,0).hide();\n\t\t\t\t\t \n\t\t\t\t\t g_objWrapper.show();\n\t\t\t\t\t clearInitData();\n\t\t    \t }\n\t\t     \n\t\t     }\n\t\t     \n\t\t\t //init tabs\n\t\t\t if(g_temp.isRunFirstTime == true && g_options.gallery_enable_tabs == true){\n\t\t\t\t g_objTabs = new UGTabs();\n\t\t\t\t g_objTabs.init(t, g_options);\n\t\t\t }\n\t\t\t \n\t\t\t //init loadmore button\n\t\t\t if(g_temp.isRunFirstTime == true && g_options.gallery_enable_loadmore == true){\n\t\t\t\t g_objLoadMore = new UGLoadMore();\n\t\t\t\t g_objLoadMore.init(t, g_options);\n\t\t\t }\n\t\t\t \n\t\t\t //modify and verify the params\n\t\t\t if(isCustomOptions)\n\t\t\t\t modifyInitParams(g_temp.objCustomOptions);\n\t\t\t \t\t\t \n\t\t\t validateParams();\n\t\t\t \n\t\t\t //shuffle items\n\t\t\t if(g_options.gallery_shuffle == true)\n\t\t\t\t t.shuffleItems();\n\t\t\t \n\t\t\t //init the theme\n\t\t\t initTheme(g_temp.objCustomOptions);\n\t\t\t \t\t\t \t\t\t\t \n\t\t\t //set gallery html elements\n\t\t\t setGalleryHtml();\n\n\t\t\t //set html properties to all elements\n\t\t\t setHtmlObjectsProperties();\n\t\t\t \n\t\t\t var galleryWidth = g_objWrapper.width();\n\t\t\t \n\t\t\t if(galleryWidth == 0){\n\t\t\t\t g_functions.waitForWidth(g_objWrapper, runGalleryActually);\n\t\t\t }else\n\t\t\t\t runGalleryActually();\n\t\t\t \n\t}\n\t\n\t\n\t/**\n\t * actually run the gallery\n\t */\n\tfunction runGalleryActually(){\n\t\t \n\t\tt.setSizeClass();\n\t\t\n\t\tif(g_temp.isFreestyleMode == false){\n\t\t\t \t\n\t\t\t if(g_options.gallery_preserve_ratio == true)\n\t\t\t\t setHeightByOriginalRatio();\n\t\t }\n\t\t \n\t\t g_objTheme.run();\n\t\t \n\t\t if(g_objTabs && g_temp.isRunFirstTime)\n\t\t\t g_objTabs.run();\n\t\t \n\t\t \n\t\t preloadBigImages();\n\t\t \n\t\t initEvents();\n\t\t \n\t\t //select first item\n\t\t if(g_numItems > 0) \n\t\t\t t.selectItem(0);\n\t\t \n\t\t \n\t\t //set autoplay\n\t\t if(g_options.gallery_autoplay == true)\n\t\t\t t.startPlayMode();\n\t\t \n\t\t g_temp.isRunFirstTime = false;\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * \n\t * show error message\n\t */\n\tfunction showErrorMessage(message, prefix){\n\n\t\tif(typeof prefix == \"undefined\")\n\t\t\tvar prefix = \"<b>Unite Gallery Error: </b>\";\t\t\t\n\t\telse\n\t\t\tprefix = \"<b>\"+prefix+\": </b>\";\n\t\t\n\t\tmessage = prefix + message;\n\t\t\n\t\tvar html = \"<div class='ug-error-message-wrapper'><div class='ug-error-message'>\" + message + \"</div></div>\";\n\t\t\n\t\tg_objWrapper.children().remove();\n\t\t\n\t\tg_objWrapper.html(html);\n\t\tg_objWrapper.show();\t\t\n\t}\n\t\n\t/**\n\t * show error message and throw error\n\t */\n\tfunction throwErrorShowMessage(message){\n\t\tshowErrorMessage(message);\n\t\tthrow new Error(message);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * @param objParams\n\t */\n\t function modifyInitParams(){\n\t\t \n\t\t //set default for preloading\n\t\t if(!g_options.gallery_images_preload_type)\n\t\t\t g_options.gallery_images_preload_type = \"minimal\";\n\t\t \n\t\t //normalize gallery min height and width\n\t\t if(g_options.gallery_min_height == undefined || g_options.gallery_height < g_options.gallery_min_height){\n\t\t\t g_options.gallery_min_height = 0;\n\t\t }\n\t\t \n\t\t if(g_options.gallery_min_width == undefined || g_options.gallery_width < g_options.gallery_min_width){\n\t\t\t g_options.gallery_min_width = 0;\n\t\t }\n\t\t \n\t }\n\n\t\n\t/**\n\t * validate the init parameters\n\t */\n\t function validateParams(){\n\t\t \n\t\t //validate theme:\n\t\t if(!g_options.gallery_theme)\n\t\t\t throw new Error(\"The gallery can't run without theme\");\n\t\t \t\t \n\t\t //if(typeof g_options.theme != \"function\")\n\t\t\t //throw new Error(\"Wrong theme function: \" + g_options.theme.toString());\n\t\t \n\t\t //validate height and width\n\t\t if(jQuery.isNumeric(g_options.gallery_height) && g_options.gallery_height < g_options.gallery_min_height)\n\t\t\t throw new Error(\"The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>\");\n\t\t \n\t\t if(g_options.gallery_width < g_options.gallery_min_width)\n\t\t\t throw new Error(\"The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>\");\n\t\t \n\t\t \n\t }\n\t \n\t \n\t /**\n\t * set gallery html\n\t */\n\tfunction setGalleryHtml(){\n\t\t\n\t\t //add classes and divs\n\t\t g_objWrapper.addClass(\"ug-gallery-wrapper\");\n\t\t \n\t\t g_objWrapper.append(\"<div class='ug-overlay-disabled' style='display:none'></div>\");\n\t\t \n\t\t t.setSizeClass();\n\t}\n\t\n\t\n\t/**\n\t * if the thumbs panel don't exists, delete initial images from dom\n\t */\n\tfunction clearInitData(){\n\t\t\n\t\tvar objItems = g_objWrapper.children().remove();\n\t}\n\t\n\t\n\t/**\n\t * store last gallery size\n\t */\n\tfunction storeLastSize(){\n\t\tvar objSize = t.getSize();\n\t\t\n\t\tg_temp.lastWidth = objSize.width;\n\t\tg_temp.lastHeight = objSize.height;\n\t}\n\t\n\t\n\t/**\n\t * set gallery height by original ratio\n\t */\n\tfunction setHeightByOriginalRatio(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\t\t\n\t\tvar ratio = objSize.width / objSize.height;\n\t\t\n\t\tif(ratio != objSize.orig_ratio){\n\t\t\t\n\t\t\tvar newHeight = objSize.width / objSize.orig_ratio;\n\t\t\tnewHeight = Math.round(newHeight);\n\t\t\t\n\t\t\tif(newHeight < g_options.gallery_min_height)\n\t\t\t\tnewHeight = g_options.gallery_min_height;\n\t\t\t\n\t\t\tg_objWrapper.height(newHeight);\n\t\t}\n\t\n\t}\n\n\t\n\t/**\n\t * set properties of the html objects\n\t */\n\tfunction setHtmlObjectsProperties(){\n\t\t   \n\t\t\tvar optionWidth = g_functions.getCssSizeParam(g_options.gallery_width);\n\t\t\t\n\t\t   //set size\t\t\n\t\t   var objCss = {\n\t\t\t\t    //\"width\":optionWidth,\t\t//make it work within tabs\n\t\t\t\t    \"max-width\":optionWidth,\n\t\t\t\t\t\"min-width\":g_functions.getCssSizeParam(g_options.gallery_min_width)\n\t\t\t};\n\t\t   \n\t\t   if(g_temp.isFreestyleMode == false){\n\t\t\t   \n\t\t\t   var galleryHeight = g_functions.getCssSizeParam(g_options.gallery_height);\n\t\t\t   objCss[\"height\"] = galleryHeight;\n\t\t   \n\t\t   }else{\n\t\t\t   objCss[\"overflow\"] = \"visible\";\t\t\t   \n\t\t   }\n\t\t   \n\t\t   //set background color\n\t\t   if(g_options.gallery_background_color)\n\t\t\t   objCss[\"background-color\"] = g_options.gallery_background_color;\n\t\t   \n\t\t   \n\t\t   g_objWrapper.css(objCss);\n\t\t   \n\t}\n\n\t\n\t/**\n\t * fill item by html child\n\t */\n\tfunction fillItemByChild(objChild){\n\t\t\n\t\tvar isMobile = t.isMobileMode();\n\t\t\n\t\t var tagname = objChild.prop(\"tagName\").toLowerCase();\n\t\t \n\t\t //handle link wrapper\n\t\t var itemLink = \"\";\n\t\t if(tagname == \"a\"){\n\t\t\t itemLink = objChild.attr(\"href\");\n\t\t\t objChild = objChild.children();\n\t\t\t var tagname = objChild.prop(\"tagName\").toLowerCase();\t\t\t\t \n\t\t }\n\t\t \n\t\t var itemType = objChild.data(\"type\");\n\t\t if(itemType == undefined)\n\t\t\t itemType = \"image\";\n\t\t \n\t\t var objItem = {};\n\t\t objItem.type = itemType;\n\t\t \n\t\t if(tagname == \"img\"){\n\t\t\t \n\t\t\t //protection agains lasy load\n\t\t\t var lasyLoadSrc = objChild.data(\"lazyload-src\");\n\t\t\t if(lasyLoadSrc && lasyLoadSrc != \"\"){\n\t\t\t\t objChild.attr(\"src\", lasyLoadSrc);\n\t\t\t\t jQuery.removeData(objChild, \"lazyload-src\");\n\t\t\t }\n\t\t\t \n\t\t\t //src is thumb\n\t\t\t var urlImage = objChild.data(\"image\");\n\t\t\t var urlThumb = objChild.data(\"thumb\");\n\t\t\t \n\t\t\t if(typeof(urlImage) == \"undefined\")\n\t\t\t\t urlImage = null;\n\t\t\t \n\t\t\t if(typeof(urlThumb) == \"undefined\")\n\t\t\t\t urlThumb = null;\n\t\t\t \n\t\t\t var imageSrc = objChild.attr(\"src\");\n\t\t\t \n\t\t\t if(!urlImage)\n\t\t\t\t urlImage = imageSrc;\n\t\t\t\t \n\t\t\t if(!urlThumb)\n\t\t\t\t urlThumb = imageSrc;\n\t\t\t \n\t\t\t if(!urlThumb)\n\t\t\t\t urlThumb = urlImage;\n\t\t\t \n\t\t\t if(!urlImage)\n\t\t\t\t urlImage = urlThumb;\n\t\t\t \n\t\t\t objItem.urlThumb = urlThumb;\n\t\t\t objItem.urlImage = urlImage;\n\t\t\t \t\t\t\t \n\t\t\t objItem.title = objChild.attr(\"alt\");\n\t\t\t \n\t\t\t //always set thumb image to object\n\t\t\t objItem.objThumbImage = objChild;\n\t\t\t \n\t\t\t objItem.objThumbImage.attr(\"src\", objItem.urlThumb);\n\t\t\t \n\t\t }else{\n\t\t\t \n\t\t\t if(itemType == \"image\"){\n\t\t\t\t trace(\"Problematic gallery item found:\");\n\t\t\t\t trace(objChild);\n\t\t\t\t trace(\"Please look for some third party js script that could add this item to the gallery\");\n\t\t\t\t throw new Error(\"The item should not be image type\");\n\t\t\t }\n\t\t\t \n\t\t\t objItem.urlThumb = objChild.data(\"thumb\");\n\t\t\t objItem.title = objChild.data(\"title\");\n\t\t\t objItem.objThumbImage = null;\n\t\t\t objItem.urlImage = objChild.data(\"image\");\n\t\t }\n\t\t \n\t\t //trace(isMobile);\n\t\t \n\t\t //check mobile version images\n\t\t if(isMobile == true){\n\t\t\t \n\t\t\t var urlThumbMobile = objChild.data(\"thumb-mobile\");\n\t\t\t if(typeof urlThumbMobile != \"undefined\" && urlThumbMobile != \"\"){\n\t\t\t\t objItem.urlThumb = urlThumbMobile;\n \t\t\t \t \n\t\t\t\t if(tagname == \"img\")\n \t\t\t\t\t objChild.attr(\"src\",objItem.urlThumb);\n\t\t\t }\n\t\t\t \n\t\t\t var urlImageMobile = objChild.data(\"image-mobile\");\n\t\t\t if(typeof urlImageMobile != \"undefined\" && urlImageMobile != \"\")\n\t\t\t\t objItem.urlImage = urlImageMobile;\n\t\t }\n\t\t \n\t\t objItem.link = itemLink;\n\t\t \n\t\t //get description:\n\t\t objItem.description = objChild.attr(\"title\");\n\t\t if(!objItem.description)\t\t\t\t \n\t\t\t objItem.description = objChild.data(\"description\");\n\t\t \n\t\t if(!objItem.description)\n\t\t\t objItem.description = \"\";\n\t\t \n\t\t objItem.isNewAdded = false;\t\t//fill outside\n\t\t objItem.isLoaded = false;\n\t\t objItem.isThumbImageLoaded = false;\t//if the image loaded or error load\n\t\t objItem.objPreloadImage = null;\n\t\t objItem.isBigImageLoadStarted = false;\n\t\t objItem.isBigImageLoaded = false;\n\t\t objItem.isBigImageLoadError = false;\t\t\t \n\t\t objItem.imageWidth = 0;\n\t\t objItem.imageHeight = 0;\n\t\t \n\t\t //set thumb size\n\t\t objItem.thumbWidth = 0;\n\t\t objItem.thumbHeight = 0;\n\t\t objItem.thumbRatioByWidth = 0;\n\t\t objItem.thumbRatioByHeight = 0;\n\t\t \n\t\t var dataWidth = objChild.data(\"width\");\n\t\t var dataHeight = objChild.data(\"height\");\n\t\t if(dataWidth && typeof dataWidth == \"number\" && dataHeight && typeof dataHeight == \"number\"){\n\t\t\t objItem.thumbWidth = dataWidth;\n\t\t\t objItem.thumbHeight = dataHeight;\n\t\t\t objItem.thumbRatioByWidth = dataWidth / dataHeight;\n\t\t\t objItem.thumbRatioByHeight = dataHeight / dataWidth;\n\t\t }\n\t\t \n\t\t objItem.addHtml = null;\n\t\t \n\t\t var isImageMissing = (objItem.urlImage == undefined || objItem.urlImage == \"\");\n\t\t var isThumbMissing = (objItem.urlThumb == undefined || objItem.urlThumb == \"\");\n\t\t \n\t\t switch(objItem.type){\n\t\t \tcase \"youtube\":\t\t\t \t\t\n\t\t\t\t objItem.videoid = objChild.data(\"videoid\");\n\t\t \t\t \n\t\t\t\t if(isImageMissing || isThumbMissing){\n\t\t\t\t\t \n\t\t\t\t\t var objImages = g_ugYoutubeAPI.getVideoImages(objItem.videoid);\n\t\t\t\t \t\t\n\t\t\t \t\t //set preview image\n\t\t\t \t\t if(isImageMissing)\n\t\t\t \t\t\tobjItem.urlImage = objImages.preview;\n\t\t\t \t\t\n\t\t\t \t\t //set thumb image\n\t\t\t \t\t if(isThumbMissing){\n\t\t\t \t\t\t \tobjItem.urlThumb = objImages.thumb;\n\t\t\t \t\t\t\t\n\t\t\t \t\t\t \t if(tagname == \"img\")\n\t\t\t \t\t\t\t\t objChild.attr(\"src\",objItem.urlThumb);\n\t\t\t \t\t }\n\t\t\t\t\t \n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t g_temp.isYoutubePresent = true;\n\t\t\tbreak;\n\t\t \tcase \"vimeo\":\n\t\t \t\t\n\t\t\t\tobjItem.videoid = objChild.data(\"videoid\");\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tg_temp.isVimeoPresent = true;\n\t\t \tbreak;\n\t\t \tcase \"html5video\":\n\t\t \t\tobjItem.videoogv = objChild.data(\"videoogv\");\n\t\t \t\tobjItem.videowebm = objChild.data(\"videowebm\");\n\t\t \t\tobjItem.videomp4 = objChild.data(\"videomp4\");\n\t\t \t\t\n\t\t \t\tg_temp.isHtml5VideoPresent = true;\n\t\t \tbreak;\n\t\t \tcase \"soundcloud\":\n\t\t \t\tobjItem.trackid = objChild.data(\"trackid\");\n\t\t \t\tg_temp.isSoundCloudPresent = true;\n\t\t \tbreak;\n\t\t \tcase \"wistia\":\n\t\t\t\t objItem.videoid = objChild.data(\"videoid\");\n\t\t\t\t g_temp.isWistiaPresent = true;\n\t\t \tbreak;\n\t\t \tcase \"custom\":\n\t\t\t\tvar objChildImage = objChild.children(\"img\");\n\t\t \t\t\n\t\t\t\tif(objChildImage.length){\n\t\t\t\t\tobjChildImage = jQuery(objChildImage[0]);\n\t\t\t\t\t\n\t\t\t\t    objItem.urlThumb = objChildImage.attr(\"src\");\n\t\t\t\t    objItem.title = objChildImage.attr(\"alt\");\n\t\t\t\t    objItem.objThumbImage = objChildImage;\n\t\t \t\t}\n\t\t \t\t\n\t\t\t\t//add additional html\n\t\t\t\tvar objChildren = objChild.children().not(\"img:first-child\");\n\t\t \t\t\n\t\t\t\tif(objChildren.length)\n\t\t\t\t\tobjItem.addHtml = objChildren.clone();\n\t\t \t\t\n\t\t \tbreak;\n\t\t }\n\t\t\n\t\t //clear not needed attributes\n\t\t if(objItem.objThumbImage){\n\t\t\t objItem.objThumbImage.removeAttr(\"data-description\", \"\");\n\t\t\t objItem.objThumbImage.removeAttr(\"data-image\", \"\");\t\t\t\t \n\t\t\t objItem.objThumbImage.removeAttr(\"data-thumb\", \"\");\t\t\t\t \n\t\t\t objItem.objThumbImage.removeAttr(\"title\", \"\");\t\t\t\t \n\t\t }\n\t\t \n\t\t \n\t\t return(objItem);\n\t}\n\t\n\t\n\t/**\n\t * fill items array from images object\n\t */\n\tfunction fillItemsArray(arrChildren, isAppend){\n\t\t\n\t\tif(isAppend !== true){\n\t\t\tg_arrItems = [];\n\t\t}else{\t //append\n\t\t\t\n\t\t\t//clear last new added items\n\t\t\tfor(var i=0;i<g_numItems;i++)\n\t\t\t\tg_arrItems[i].isNewAdded = false;\n\t\t\n\t\t}\n\t\t \n\t\t for(var i=0;i<arrChildren.length;i++){\n\t\t\t var objChild = jQuery(arrChildren[i]);\n\t\t\t \t\t\t \n\t\t\t var objItem = fillItemByChild(objChild);\n\t\t\t numIndex = g_arrItems.length;\t\t\t \n\t\t\t objItem.index = numIndex;\n\t\t\t \n\t\t\t if(isAppend === true){\n\t\t\t\t objItem.isNewAdded = true;\n\t\t\t }\n\t\t\t \n\t\t\t g_arrItems.push(objItem);\n\t\t }\n\t\t \n\t\t g_numItems = g_arrItems.length;\n\t\t \n\t}\n\t\n\t\n\t/**\n\t * load api's according presented item types\n\t */\n\tfunction loadAPIs(){\n\t\t\n\t\t//load youtube api\n\t\tif(g_temp.isYoutubePresent)\n\t\t\tg_ugYoutubeAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isVimeoPresent)\n\t\t\tg_ugVimeoAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isHtml5VideoPresent)\n\t\t\tg_ugHtml5MediaAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isSoundCloudPresent)\n\t\t\tg_ugSoundCloudAPI.loadAPI();\n\t\t\n\t\tif(g_temp.isWistiaPresent)\n\t\t\tg_ugWistiaAPI.loadAPI();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * preload big images\n\t */\n\tfunction preloadBigImages(){\n\t\t\n\t\t//check and fix preload type\n\t\tif(g_options.gallery_images_preload_type == \"visible\" && !g_objThumbs)\n\t\t\tg_options.gallery_images_preload_type = \"minimal\";\n\t\t\n\t\tif(g_temp.isAllItemsPreloaded == true)\n\t\t\treturn(true);\n\t\t\n\t\tswitch(g_options.gallery_images_preload_type){\n\t\t\tdefault:\n\t\t\tcase \"minimal\":\n\t\t\tbreak;\n\t\t\tcase \"all\":\n\t\t\t\t\n\t\t\t\tjQuery(g_arrItems).each(function(){\t\n\t\t\t\t\tpreloadItemImage(this);\t\t\t\n\t\t\t\t});\t\t\t\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"visible\":\n\t\t\t\tjQuery(g_arrItems).each(function(){\t\t\n\t\t\t\t\tvar objItem = this;\n\t\t\t\t\tvar isVisible = g_objThumbs.isItemThumbVisible(objItem);\n\t\t\t\t\t\n\t\t\t\t\tif(isVisible == true)\n\t\t\t\t\t\tpreloadItemImage(objItem);\n\t\t\t\t});\n\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t/**\n\t * check if item needed to preload and preload it\n\t */\n\tfunction checkPreloadItemImage(objItem){\n\t\t\n\t\tif(objItem.isBigImageLoadStarted == true ||\n\t\t\t\t   objItem.isBigImageLoaded == true || \n\t\t\t\t   objItem.isBigImageLoadError == true){\n\t\t\t\t\treturn(false);\t\t\t\n\t\t}\n\t\t\n\t\tswitch(g_options.gallery_images_preload_type){\n\t\t\tdefault:\n\t\t\tcase \"minimal\":\n\t\t\tbreak;\n\t\t\tcase \"all\":\t\t\t\n\t\t\t\t\tpreloadItemImage(objItem);\t\t\t\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"visible\":\n\t\t\t\tvar isVisible = g_objThumbs.isItemThumbVisible(objItem);\t\t\t\t\t\n\t\t\t\t\tif(isVisible == true)\n\t\t\t\t\t\tpreloadItemImage(objItem);\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * preload item image\n\t */\n\tfunction preloadItemImage(objItem){\n\t\t\n\t\tif(objItem.isBigImageLoadStarted == true ||\n\t\t   objItem.isBigImageLoaded == true || \n\t\t   objItem.isBigImageLoadError == true){\n\t\t\treturn(true);\t\t\t\n\t\t}\n\t\t\n\t\tvar imageUrl = objItem.urlImage;\n\t\tif(imageUrl == \"\" || imageUrl == undefined){\n\t\t\tobjItem.isBigImageLoadError = true;\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tobjItem.isBigImageLoadStarted = true;\n\t\t\t\t\n\t\tobjItem.objPreloadImage = jQuery('<img/>').attr(\"src\", imageUrl);\n\t\tobjItem.objPreloadImage.data(\"itemIndex\", objItem.index);\n\t\t\n\t\t//set image load event (not that reliable)\n\t\tobjItem.objPreloadImage.on(\"load\", t.onItemBigImageLoaded);\n\t\t\n\t\t//set load error event\n\t\tobjItem.objPreloadImage.on( \"error\", function(){\n\t\t\tvar objImage = jQuery(this);\n\t\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\tvar objItem = g_arrItems[itemIndex];\n\t\t\t\n\t\t\t//update error:\n\t\t\tobjItem.isBigImageLoadError = true;\n\t\t\tobjItem.isBigImageLoaded = false;\n\t\t\t\n\t\t\t//print error\n\t\t\tvar imageUrl = jQuery(this).attr(\"src\");\n\t\t\tconsole.log(\"Can't load image: \"+ imageUrl);\n\t\t\t\n\t\t\t//try to load the image again\n\t\t\tg_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED, [itemIndex, objItem.urlImage]);\n\t\t\tobjItem.objThumbImage.attr(\"src\", objItem.urlThumb);\n\t\t\t\n\t\t});\n\t\t\n\t\t//check the all items started preloading flag\n\t\tcheckAllItemsStartedPreloading();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on item big image loaded event function. \n\t * Update image size and that the image has been preloaded\n\t * can be called from another objects like the slider\n\t */\n\tthis.onItemBigImageLoaded = function(event, objImage){\n\t\t\t\t\n\t\tif(!objImage)\n\t\t\tvar objImage = jQuery(this);\n\t\t\n\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\n\t\tvar objItem = g_arrItems[itemIndex];\n\t\t\n\t\tobjItem.isBigImageLoaded = true;\n\t\t\n\t\t//get size with fallback function\n\t\tvar objSize = g_functions.getImageOriginalSize(objImage);\n\t\t\n\t\tobjItem.imageWidth = objSize.width;\n\t\tobjItem.imageHeight = objSize.height;\t\t\n\t}\n\t\n\t/**\n\t * check and fill image size in item object\n\t */\n\tthis.checkFillImageSize = function(objImage, objItem){\n\t\t\n\t\tif(!objItem){\n\t\t\tvar itemIndex = objImage.data(\"itemIndex\");\n\t\t\tif(itemIndex === undefined)\n\t\t\t\tthrow new Error(\"Wrong image given to gallery.checkFillImageSize\");\n\t\t\t\n\t\t\tvar objItem = g_arrItems[itemIndex];\n\t\t}\n\t\t\n\t\tvar objSize = g_functions.getImageOriginalSize(objImage);\n\t\t\n\t\tobjItem.imageWidth = objSize.width;\n\t\tobjItem.imageHeight = objSize.height;\t\t\n\t}\n\t\n\t\n\t/**\n\t * preload next images near current item\n\t */\n\tfunction preloadNearBigImages(objItem){\n\t\t\n\t\tif(g_temp.isAllItemsPreloaded == true)\n\t\t\treturn(false);\n\t\t\n\t\tif(!objItem)\n\t\t\tvar objItem = g_selectedItem;\n\t\t\n\t\tif(!objItem)\n\t\t\treturn(true);\n\t\t\t\n\t\tvar currentIndex = objItem.index;\n\t\tvar lastItemIndex = currentIndex - 1;\n\t\tvar nextItemIndex = currentIndex + 1;\n\t\t\n\t\tif(lastItemIndex > 0)\n\t\t\tpreloadItemImage(g_arrItems[lastItemIndex]);\n\t\t\n\t\tif(nextItemIndex < g_numItems)\n\t\t\tpreloadItemImage(g_arrItems[nextItemIndex]);\n\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * check that all items started preloading, if do, set \n\t * flag g_temp.isAllItemsPreloaded to true\n\t */\n\tfunction checkAllItemsStartedPreloading(){\n\t\t\n\t\tif(g_temp.isAllItemsPreloaded == true)\n\t\t\treturn(false);\n\t\t\n\t\t//if some of the items not started, exit function:\n\t\tfor(var index in g_arrItems){\n\t\t\tif(g_arrItems[index].isBigImageLoadStarted == false)\n\t\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//if all started, set flag to true\n\t\tg_temp.isAllItemsPreloaded = true;\t\n\t}\n\t\n\t\n\t/**\n\t * set freestyle mode\n\t */\n\tthis.setFreestyleMode = function(){\n\t\t\n\t\tg_temp.isFreestyleMode = true;\n\t\n\t}\n\t\n\t\n\t/**\n\t * attach thumbs panel to the gallery\n\t */\n\tthis.attachThumbsPanel = function(type, objThumbs){\n\t\tg_temp.thumbsType = type;\n\t\tg_objThumbs = objThumbs;\n\t}\n\t\n\t\n\t/**\n\t * init the slider\n\t */\t\n\tthis.initSlider = function(customOptions, optionsPrefix){\n\t\t \n\t\t //mix options with user options\n\t\t if(!customOptions)\n\t\t\t var customOptions = {};\n\t\t \t\t \n\t\t customOptions = jQuery.extend(g_temp.objCustomOptions, customOptions);\n\t\t \n\t\t g_objSlider = new UGSlider();\t\t \n\t\t g_objSlider.init(t, customOptions, optionsPrefix);\n\t}\n\t\n\t\n\tfunction __________END_INIT_GALLERY_______(){};\n\t\n\tfunction __________EVENTS_____________(){};\n\n\t\n\t/**\n\t * on gallery mousewheel event handler, advance the thumbs\n\t */\n\tthis.onGalleryMouseWheel = function(event, delta, deltaX, deltaY){\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tif(delta > 0)\n\t\t\tt.prevItem();\n\t\telse\n\t\t\tt.nextItem();\n\t}\n\t\n\t\n\t/**\n\t * on mouse enter event\n\t */\n\tfunction onSliderMouseEnter(event){\n\t\t\n\t\tif(g_options.gallery_pause_on_mouseover == true && t.isFullScreen() == false && g_temp.isPlayMode == true && g_objSlider && g_objSlider.isSlideActionActive() == false)\n\t\t\tt.pausePlaying();\n\t}\n\t\n\t\n\t/**\n\t * on mouse move event\n\t */\n\tfunction onSliderMouseLeave(event){\n\t\t\n\t\tif(g_options.gallery_pause_on_mouseover == true && g_temp.isPlayMode == true && g_objSlider && g_objSlider.isSlideActionActive() == false){\n\t\t\t\n\t\t\tvar isStillLoading = g_objSlider.isCurrentSlideLoadingImage();\n\t\t\t\n\t\t\tif(isStillLoading == false)\n\t\t\t\tt.continuePlaying();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on keypress - keyboard control\n\t */\n\tfunction onKeyPress(event){\n\t\t \n\t\tvar obj = jQuery(event.target);\n\t\tif(obj.is(\"textarea\") || obj.is(\"select\") || obj.is(\"input\"))\n\t\t\treturn(true);\n\t\t\t\t\t\t\n\t\t var keyCode = (event.charCode) ? event.charCode :((event.keyCode) ? event.keyCode :((event.which) ? event.which : 0));\n\t\t \n\t\t var wasAction = true;\n\t\t \n\t\t switch(keyCode){\n\t\t\t case 39:\t//right key\n\t\t\t\t t.nextItem();\n\t\t\t break;\n\t\t\t case 37:\t//left key\n\t\t\t\t t.prevItem();\n\t\t\t break;\n\t\t\t default:\n\t\t\t\t wasAction = false;\n\t\t\t break; \n\t\t }\n\t\t \n\t\t //only first page gallery affected\n\t\t \n\t\t if(wasAction == true){\n\t\t\t event.preventDefault();\n\t\t\t event.stopPropagation();\n\t\t\t event.stopImmediatePropagation();\n\t\t }\n\t\t \n\t\tg_objGallery.trigger(t.events.GALLERY_KEYPRESS, [keyCode,event]);\n\t}\n\t\n\t\n\t/**\n\t * check that the gallery resized, if do, trigger onresize event\n\t */\n\tfunction onGalleryResized(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\n\t\tif(objSize.width == 0)\t//fix hidden gallery change\n\t\t\treturn(true);\n\t\t\n\t\tt.setSizeClass();\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\n\t\tif(objSize.width != g_temp.lastWidth || (g_temp.isFreestyleMode == false && objSize.height != g_temp.lastHeight)){\n\t\t\t\n\t\t\tvar heightWasSet = false;\n\t\t\t\n\t\t\t//set height with custom function (if exists)\n\t\t\tif(g_temp.funcCustomHeight){\n\t\t\t\tvar newHeight = g_temp.funcCustomHeight(objSize);\n\t\t\t\tif(newHeight){\n\t\t\t\t\tg_objWrapper.height(newHeight);\n\t\t\t\t\theightWasSet = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(heightWasSet == false && g_options.gallery_preserve_ratio == true && g_temp.isFreestyleMode == false)\n\t\t\t\tsetHeightByOriginalRatio();\n\t\t\t\n\t\t\tstoreLastSize();\n\t\t\tg_objGallery.trigger(t.events.SIZE_CHANGE);\n\t\t\t\n\t\t}\n\t\t\n\t}\n\n\t\n\t/**\n\t * on strip move event\n\t * preload visible images if that option selected\n\t */\n\tfunction onThumbsChange(event){\n\t\t\n\t\t//preload visible images \n\t\tif(g_options.gallery_images_preload_type == \"visible\" && g_temp.isAllItemsPreloaded == false){\n\t\t\tpreloadBigImages();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on full screen change event\n\t */\n\tfunction onFullScreenChange(){\n\t\t\n\t\t\n\t\tvar isFullscreen = g_functions.isFullScreen();\n\t\tvar event = isFullscreen ? t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN; \n\n\t\t var fullscreenID = g_functions.getGlobalData(\"fullscreenID\");\n\t\t \n\t\t //check if this gallery was affected\n\t\t if(g_galleryID !== fullscreenID)\n\t\t\t return(true);\n\t\t \t\t \n\t\t //add classes for the gallery\n\t\t if(isFullscreen){\n\t\t\t g_objWrapper.addClass(\"ug-fullscreen\");\n\t\t }else{\n\t\t\t g_objWrapper.removeClass(\"ug-fullscreen\");\n\t\t }\n\n\t\t g_objGallery.trigger(event);\n\t\t \n\t\t onGalleryResized();\n\t}\n\t\n\t/**\n\t * on big image updated, if needed - preload this item image\n\t */\n\tfunction onItemImageUpdated(event, index){\n\t\t\n\t\tvar objItem = t.getItem(index);\t\t\n\t\tcheckPreloadItemImage(objItem);\t\t\n\t}\n\t\n\t/**\n\t * on current slide image load end. If playing mode, begin playing again\n\t */\n\tfunction onCurrentSlideImageLoadEnd(){\n\t\t\n\t\tif(t.isPlayMode() == true)\n\t\t\tt.continuePlaying();\n\t}\n\t\t\n\t\n\t/**\n\t * init all events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\t//avoid annoyong firefox image dragging\n\t\tg_objWrapper.on(\"dragstart\",function(event){\n\t\t\tevent.preventDefault();\n\t\t});\n\t\t\n\t\t//on big image updated, if needed - preload this item image\n\t\tg_objGallery.on(t.events.ITEM_IMAGE_UPDATED, onItemImageUpdated);\n\t\t\n\t\t//init custom event on strip moving\n\t\tif(g_objThumbs){\n\t\t\tswitch(g_temp.thumbsType){\n\t\t\t\tcase \"strip\":\n\t\t\t\t\tjQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE, onThumbsChange);\n\t\t\t\tbreak;\n\t\t\t\tcase \"grid\":\n\t\t\t\t\tjQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE, onThumbsChange);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//init mouse wheel\n\t\tif(g_options.gallery_mousewheel_role == \"advance\" && g_temp.isFreestyleMode == false)\n\t\t\tg_objWrapper.on(\"mousewheel\", t.onGalleryMouseWheel);\n\t\t\n\t\t //on resize event\n\t\t storeLastSize();\n\t\t \n\t\t jQuery(window).resize(function(){\n\t\t\t g_objWrapper.css(\"width\",\"auto\");\n\t\t\t g_functions.whenContiniousEventOver(\"gallery_resize\", onGalleryResized, g_temp.resizeDelay);\n\t\t });\n\t\t \n\t\t //check resize once in a time, start from 10 seconds\n\t\t setTimeout(function(){\n\t\t\t setInterval(onGalleryResized, 2000);\n\t\t }, 10000);\n\t\t \n\t\t //fullscreen:\n\t\t g_functions.addFullScreenChangeEvent(onFullScreenChange);\n\t\t \n\t\t //on slider item changed event\n\t\t if(g_objSlider){\n\t\t\t \n\t\t\t jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED, function(){\n\t\t\t\t var sliderIndex = g_objSlider.getCurrentItemIndex();\n\t\t\t\t \t\t\t\t \n\t\t\t\t if(sliderIndex != -1)\n\t\t\t\t\t t.selectItem(sliderIndex);\n\t\t\t });\n\t\t\t \n\t\t\t //add slider onmousemove event\n\t\t\t if(g_options.gallery_pause_on_mouseover == true){\n\t\t\t\t var sliderElement = g_objSlider.getElement();\n\t\t\t\t sliderElement.hover(onSliderMouseEnter, onSliderMouseLeave);\n\t\t\t\t \n\t\t\t\t //on full screen, run on mouse leave\n\t\t\t\t g_objGallery.on(t.events.ENTER_FULLSCREEN, function(){\n\t\t\t\t\t\t onSliderMouseLeave();\n\t\t\t\t });\n\t\t\t\t \n\t\t\t }\n\t\t\t \n\t\t\t //retrigger slider events\n\t\t\t retriggerEvent(g_objSlider, g_objSlider.events.ACTION_START, t.events.SLIDER_ACTION_START);\n\t\t\t retriggerEvent(g_objSlider, g_objSlider.events.ACTION_END, t.events.SLIDER_ACTION_END);\n\t\t\t \n\t\t\t jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END, onCurrentSlideImageLoadEnd);\n\t\t\t \n\t\t }\n\t\t  \n\t\t //add keyboard events\n\t\t if(g_options.gallery_control_keyboard == true)\n\t\t\t jQuery(document).keydown(onKeyPress);\n\t\t \t\t \n\t}\n\t\n\t\n\t/**\n\t * destroy all gallery events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tg_objWrapper.off(\"dragstart\");\n\t\tg_objGallery.off(t.events.ITEM_IMAGE_UPDATED);\n\t\t\n\t\t//init custom event on strip moving\n\t\tif(g_objThumbs){\n\t\t\tswitch(g_temp.thumbsType){\n\t\t\t\tcase \"strip\":\n\t\t\t\t\tjQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);\n\t\t\t\tbreak;\n\t\t\t\tcase \"grid\":\n\t\t\t\t\tjQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t g_objWrapper.off(\"mousewheel\");\n\t\t\n\t\t jQuery(window).off(\"resize\");\n\t\t \n\t\t //fullscreen:\n\t\t g_functions.destroyFullScreenChangeEvent();\n\t\t \n\t\t //on slider item changed event\n\t\t if(g_objSlider){\n\t\t\t \n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);\n\t\t\t \n\t\t\t //add slider onmousemove event\n\t\t\t var sliderElement = g_objSlider.getElement();\n\t\t\t sliderElement.off(\"mouseenter\");\n\t\t\t sliderElement.off(\"mouseleave\");\n\t\t\t \n\t\t\t g_objGallery.off(t.events.ENTER_FULLSCREEN);\n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.ACTION_START);\n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.ACTION_END);\n\t\t\t jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END);\n\t\t }\n\t\t \t\t \n\t\t //add keyboard events\n\t\t if(g_options.gallery_control_keyboard == true)\n\t\t\t jQuery(document).off(\"keydown\");\n\t\t\n\t\t //destroy theme\n\t\t if(g_objTheme && typeof g_objTheme.destroy == \"function\"){\n\t\t\t g_objTheme.destroy();\n\t\t }\n\t\t \n\t\t g_objWrapper.html(\"\");\n\t\t \n\t}\n\t\n\t\n\tfunction __________GENERAL_______(){};\n\t\n\t/**\n\t * get items array\n\t */\n\tthis.getArrItems = function(){\n\t\treturn g_arrItems;\n\t}\n\t\n\t/**\n\t * get gallery objects\n\t */\n\tthis.getObjects = function(){\n\t\t\t\n\t\tvar objects = {\n\t\t\tg_galleryID:g_galleryID,\n\t\t\tg_objWrapper:g_objWrapper,\n\t\t\tg_objThumbs:g_objThumbs,\n\t\t\tg_objSlider:g_objSlider,\n\t\t\tg_options:g_options,\n\t\t\tg_arrItems:g_arrItems,\n\t\t\tg_numItems:g_numItems\n\t\t};\n\t\t\n\t\treturn(objects);\n\t}\n\t\n\t/**\n\t * get slider object\n\t */\n\tthis.getObjSlider = function(){\n\t\t\n\t\treturn(g_objSlider);\n\t}\n\t\n\t\n\t/**\n\t * \n\t * get item by index, if the index don't fit, trace error\n\t */\n\tthis.getItem = function(index){\n\t\tif(index < 0){\n\t\t\tthrow new Error(\"item with index: \" + index + \" not found\");\n\t\t\treturn(null);\n\t\t}\n\t\tif(index >= g_numItems){\n\t\t\tthrow new Error(\"item with index: \" + index + \" not found\");\n\t\t\treturn(null);\t\t\t\n\t\t}\n\t\t\n\t\treturn(g_arrItems[index]);\n\t}\n\t\n\t\n\t/**\n\t * get gallery width\n\t */\n\tthis.getWidth = function(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\t\t\n\t\treturn(objSize.width);\n\t}\n\t\n\t/**\n\t * get gallery height\n\t */\n\tthis.getHeight = function(){\n\t\t\n\t\tvar objSize = t.getSize();\n\t\t\n\t\treturn(objSize.height);\n\t}\n\t\n\t\n\t/**\n\t * get gallery size\n\t */\n\tthis.getSize = function(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objWrapper);\n\t\t\n\t\tobjSize.orig_width = g_options.gallery_width;\n\t\tobjSize.orig_height = g_options.gallery_height;\n\t\tobjSize.orig_ratio = objSize.orig_width / objSize.orig_height;\n\t\t\n\t\treturn(objSize);\n\t}\n\t\n\t/**\n\t * get gallery ID\n\t */\n\tthis.getGalleryID = function(){\n\t\t\n\t\tvar id = g_galleryID.replace(\"#\",\"\");\n\t\t\t\n\t\treturn(id);\n\t}\n\t\n\t/**\n\t * get next item by current index (or current object)\n\t */\n\tthis.getNextItem = function(index, forceCarousel){\n\t\t\n\t\tif(typeof index == \"object\")\n\t\t\tindex = index.index;\n\t\t\n\t\tvar nextIndex = index + 1;\n\t\t\n\t\tif(forceCarousel !== true && g_numItems == 1)\n\t\t\treturn(null);\n\t\t\n\t\tif(nextIndex >= g_numItems){\n\t\t\t\n\t\t\tif(g_options.gallery_carousel == true || forceCarousel === true)\n\t\t\t\tnextIndex = 0;\n\t\t\telse\n\t\t\t\treturn(null);\n\t\t}\n\t\t\n\t\tvar objItem = g_arrItems[nextIndex];\n\t\t\n\t\treturn(objItem);\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * get previous item by index (or item object)\n\t */\n\tthis.getPrevItem = function(index, forceCarousel){\n\t\t\n\t\tif(typeof index == \"object\")\n\t\t\tindex = index.index;\n\t\t\n\t\tvar prevIndex = index - 1;\n\t\t\n\t\tif(prevIndex < 0){\n\t\t\tif(g_options.gallery_carousel == true || forceCarousel === true)\n\t\t\t\tprevIndex = g_numItems - 1;\n\t\t\telse\n\t\t\t\treturn(null);\n\t\t}\n\t\t\n\t\tvar objItem = g_arrItems[prevIndex];\n\t\t\n\t\treturn(objItem);\n\t}\n\t\n\t\n\t\n\t/**\n\t * get selected item\n\t */\n\tthis.getSelectedItem = function(){\n\t\t\n\t\treturn(g_selectedItem);\n\t}\n\t\n\t/**\n\t * get selected item index\n\t */\n\tthis.getSelectedItemIndex = function(){\n\t\t\n\t\treturn(g_selectedItemIndex);\n\t}\n\t\n\t\n\t/**\n\t * get number of items\n\t */\n\tthis.getNumItems = function(){\n\t\treturn g_numItems;\n\t}\n\t\n\t/**\n\t * get true if the current item is last\n\t */\n\tthis.isLastItem = function(){\n\t\tif(g_selectedItemIndex == g_numItems - 1)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get true if the current item is first\n\t */\n\tthis.isFirstItem = function(){\n\t\tif(g_selectedItemIndex == 0)\n\t\t\treturn(true);\n\t\treturn(false);\n\t}\n\t\n\t\t\n\t/**\n\t * get gallery options\n\t */\n\tthis.getOptions = function(){\n\t\treturn g_options;\n\t}\n\t\n\t\n\t/**\n\t * get the gallery wrapper element\n\t */\n\tthis.getElement = function(){\n\t\treturn(g_objWrapper);\n\t}\n\t\n\t\n\tthis.___________SET_CONTROLS___________ = function(){}\n\t\n\t/**\n\t * set next button element\n\t * set onclick event\n\t */\n\tthis.setNextButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.nextItem);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * set prev button element\n\t * set onclick event\n\t */\n\tthis.setPrevButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.prevItem);\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * set fullscreen button to enter / exit fullscreen.\n\t * on fullscreen mode ug-fullscreenmode class wil be added\n\t */\n\tthis.setFullScreenToggleButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\n\t\tg_functions.setButtonOnTap(objButton, t.toggleFullscreen);\n\t\t\n\t\tg_objGallery.on(t.events.ENTER_FULLSCREEN,function(){\n\t\t\tobjButton.addClass(\"ug-fullscreenmode\");\n\t\t});\n\t\t\n\t\tg_objGallery.on(t.events.EXIT_FULLSCREEN,function(){\n\t\t\tobjButton.removeClass(\"ug-fullscreenmode\");\n\t\t});\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy full screen button\n\t */\n\tthis.destroyFullscreenButton = function(objButton){\n\t\t\n\t\tg_functions.destroyButton(objButton);\n\t\t\n\t\tg_objGallery.off(t.events.ENTER_FULLSCREEN);\n\t\tg_objGallery.off(t.events.EXIT_FULLSCREEN);\n\t}\n\t\n\t\n\t/**\n\t * set play button event\n\t */\n\tthis.setPlayButton = function(objButton){\n\t\t\n\t\t//register button as a unite gallery belong\n\t\tobjButton.data(\"ug-button\", true);\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, t.togglePlayMode);\n\t\t\n\t\tg_objGallery.on(t.events.START_PLAY,function(){\n\t\t\tobjButton.addClass(\"ug-stop-mode\");\n\t\t});\n\t\t\n\t\tg_objGallery.on(t.events.STOP_PLAY, function(){\n\t\t\tobjButton.removeClass(\"ug-stop-mode\");\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * destroy the play button\n\t */\n\tthis.destroyPlayButton = function(objButton){\n\t\tg_functions.destroyButton(objButton);\n\t\tg_objGallery.off(t.events.START_PLAY);\n\t\tg_objGallery.off(t.events.STOP_PLAY);\n\t}\n\t\n\t/**\n\t * set playing progress indicator\n\t */\n\tthis.setProgressIndicator = function(objProgress){\n\t\t\n\t\tg_temp.objProgress = objProgress;\t\t\n\t}\n\t\n\t\n\t/**\n\t * set title and descreiption containers\n\t */\n\tthis.setTextContainers = function(objTitle, objDescription){\n\t\t\n\t\tg_objGallery.on(t.events.ITEM_CHANGE, function(){\n\t\t\t\n\t\t\tvar objItem = t.getSelectedItem();\t\t\t\n\t\t\tobjTitle.html(objItem.title);\n\t\t\tobjDescription.html(objItem.description);\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * show overlay disabled\n\t */\n\tthis.showDisabledOverlay = function(){\n\t\tg_objWrapper.children(\".ug-overlay-disabled\").show();\n\t}\n\n\t/**\n\t * show overlay disabled\n\t */\n\tthis.hideDisabledOverlay = function(){\n\t\tg_objWrapper.children(\".ug-overlay-disabled\").hide();\n\t}\n\t\n\tthis.___________END_SET_CONTROLS___________ = function(){}\n\n\t\n\t/**\n\t * cache items, put to cache array by id\n\t * the items must be unprocessed yet\n\t */\n\tfunction cacheItems(cacheID, htmlItemsArg){\n\t\t\t\n\t\tif(htmlItemsArg){\n\t\t\tvar htmlItems = htmlItemsArg;\n\t\t\tif(htmlItems != \"noitems\")\n\t\t\t\thtmlItems = jQuery(htmlItemsArg).clone();\n\t\t}else{\n\t\t\tvar htmlItems = g_objWrapper.children().clone();\n\t\t}\n\t\t\n\t\tg_objCache[cacheID] = htmlItems;\n\t}\n\t\n\t\n\t/**\n\t * remove all size classes\n\t */\n\tfunction removeAllSizeClasses(objWrapper){\n\t\t\n\t\tif(!objWrapper)\n\t\t\tobjWrapper = g_objWrapper;\n\t\t\n\t\tobjWrapper.removeClass(\"ug-under-480\");\n\t\tobjWrapper.removeClass(\"ug-under-780\");\n\t\tobjWrapper.removeClass(\"ug-under-960\");\n\t}\n\t\n\t\n\t/**\n\t * retrigger event from another objects\n\t * the second parameter will be the second object\n\t */\n\tfunction retriggerEvent(object, originalEvent, newEvent){\n\t\t\n\t\tjQuery(object).on(originalEvent, function(event){\n\t\t\tg_objGallery.trigger(newEvent, [this]);\n\t\t});\n\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * advance next play step\n\t */\n\tfunction advanceNextStep(){\n\t\t\n\t\tvar timeNow = jQuery.now();\n\t\tvar timeDiff = timeNow - g_temp.playTimeLastStep;\n\t\tg_temp.playTimeLastStep = timeNow;\n\t\t\n\t\tvar isVisible = t.isGalleryVisible();\n\t\tif(isVisible == false){\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tg_temp.playTimePassed += timeDiff;\n\t\t\n\t\t//set the progress\n\t\tif(g_temp.objProgress){\n\t\t\tvar percent = g_temp.playTimePassed / g_options.gallery_play_interval;\n\t\t\tg_temp.objProgress.setProgress(percent);\n\t\t}\n\t\t\n\t\t//if interval passed - proceed to next item\n\t\tif(g_temp.playTimePassed >= g_options.gallery_play_interval){\n\t\t\t\n\t\t\tt.nextItem();\n\t\t\tg_temp.playTimePassed = 0;\t\t\t\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\tthis.___________PLAY_MODE___________ = function(){}\n\t\n\t\n\t/**\n\t * start play mode\n\t */\n\tthis.startPlayMode = function(){\n\t\t\n\t\tg_temp.isPlayMode = true;\n\t\tg_temp.isPlayModePaused = false;\n\t\t\n\t\tg_temp.playTimePassed = 0;\n\t\tg_temp.playTimeLastStep = jQuery.now();\n\t\t\n\t\tg_temp.playHandle = setInterval(advanceNextStep, g_temp.playStepInterval);\n\t\t\n\t\t//show and reset progress indicator\n\t\tif(g_temp.objProgress){\n\t\t\tvar objElement = g_temp.objProgress.getElement();\n\t\t\tg_temp.objProgress.setProgress(0);\n\t\t\tobjElement.show();\n\t\t}\n\t\t\n\t\tg_objGallery.trigger(t.events.START_PLAY);\n\t\t\n\t\t//check if there is a need to pause\n\t\tif(g_objSlider && g_objSlider.isCurrentSlideLoadingImage() == true){\n\t\t\tt.pausePlaying();\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * reset playing - set the timer to 0\n\t */\n\tthis.resetPlaying = function(){\n\t\t\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.playTimePassed = 0;\n\t\tg_temp.playTimeLastStep = jQuery.now();\n\t}\n\t\n\t\n\t/**\n\t * pause playing slideshow\n\t */\n\tthis.pausePlaying = function(){\n\t\t\n\t\tif(g_temp.isPlayModePaused == true)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPlayModePaused = true;\n\t\tclearInterval(g_temp.playHandle);\n\t\t\n\t\tg_objGallery.trigger(t.events.PAUSE_PLAYING);\n\t}\n\t\n\t\n\t/**\n\t * continue playing slideshow\n\t */\n\tthis.continuePlaying = function(){\n\t\t\n\t\tif(g_temp.isPlayModePaused == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPlayModePaused = false;\n\t\tg_temp.playTimeLastStep = jQuery.now();\n\t\tg_temp.playHandle = setInterval(advanceNextStep, g_temp.playStepInterval);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * stop play mode\n\t */\n\tthis.stopPlayMode = function(){\n\t\tg_temp.isPlayMode = false;\n\t\tclearInterval(g_temp.playHandle);\n\t\t\t\n\t\tg_temp.playTimePassed = 0;\n\t\t\n\t\t//hide progress indicator\n\t\tif(g_temp.objProgress){\n\t\t\tvar objElement = g_temp.objProgress.getElement();\n\t\t\tobjElement.hide();\n\t\t}\n\t\t\n\t\tg_objGallery.trigger(t.events.STOP_PLAY);\n\t}\n\t\n\t\n\t/**\n\t * tells if the play mode are active\n\t */\n\tthis.isPlayMode = function(){\n\t\t\n\t\treturn(g_temp.isPlayMode);\n\t}\n\t\n\t\n\t/**\n\t * start / stop play mode\n\t */\n\tthis.togglePlayMode = function(){\n\t\t\n\t\tif(t.isPlayMode() == false)\n\t\t\tt.startPlayMode();\n\t\telse\n\t\t\tt.stopPlayMode();\n\t}\n\n\t\n\t/**\n\t * unselect all items\n\t */\n\tfunction unselectSeletedItem(){\n\t\t\n\t\tif(g_selectedItem == null)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_objThumbs)\n\t\t\tg_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper);\n\t\t\n\t\tg_selectedItem = null;\n\t\tg_selectedItemIndex = -1;\n\t}\t\n\t\n\t\n\tthis.___________GENERAL_EXTERNAL___________ = function(){}\n\t\n\t/**\n\t * shuffle items - usually before theme start\n\t */\n\tthis.shuffleItems = function(){\n\n\t\tg_arrItems = g_functions.arrayShuffle(g_arrItems);\n\t\t\n\t\tfor(var index in g_arrItems)\t\t//fix index\n\t\t\tg_arrItems[index].index = parseInt(index);\n\t\t\n\t}\n\t\n\t/**\n\t * set main gallery params, extend current params\n\t */\n\tthis.setOptions = function(customOptions){\n\t\t\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\t\t\n\t}\n\t\n\t\n\t/**\n\t * select some item\n\t * the input can be index or object\n\t * role - the role of the object who selected the item\n\t */\n\tthis.selectItem = function(objItem, role){\n\t\t\n\t\tif(typeof objItem == \"number\")\n\t\t\tobjItem = t.getItem(objItem);\n\t\t\n\t\tvar itemIndex = objItem.index;\n\t\tif(itemIndex == g_selectedItemIndex)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tunselectSeletedItem();\n\t\t\t\t\n\t\t//set selected item\n\t\tg_selectedItem = objItem;\t\t\n\t\tg_selectedItemIndex = itemIndex;\n\t\t\n\t\tg_objGallery.trigger(t.events.ITEM_CHANGE, [objItem,role]);\n\t\t\n\t\t//reset playback, if playing\n\t\tif(g_temp.isPlayMode == true){\n\t\t\t\tt.resetPlaying();\n\t\t\t\n\t\t\tvar stillLoading = g_objSlider.isCurrentSlideLoadingImage();\n\t\t\tif(stillLoading == true)\n\t\t\t\tt.pausePlaying();\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * go to next item\n\t */\n\tthis.nextItem = function(){\n\t\t\n\t\tvar newItemIndex = g_selectedItemIndex + 1;\n\t\t\n\t\tif(g_numItems == 0)\n\t\t\treturn(true);\t\t\n\t\t\n\t\tif(g_options.gallery_carousel == false && newItemIndex >= g_numItems)\n\t\t\treturn(true);\n\t\t\n\t\tif(newItemIndex >= g_numItems)\n\t\t\tnewItemIndex = 0;\n\t\t\n\t\t//debugLine(newItemIndex,true);\n\t\t\n\t\tt.selectItem(newItemIndex, \"next\");\n\t}\n\t\n\t\n\t/**\n\t * go to previous item\n\t */\n\tthis.prevItem = function(){\n\t\t\n\t\tvar newItemIndex = g_selectedItemIndex - 1;\n\t\t\n\t\tif(g_selectedItemIndex == -1)\n\t\t\tnewItemIndex = 0;\n\t\t\n\t\tif(g_numItems == 0)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_options.gallery_carousel == false && newItemIndex < 0)\n\t\t\treturn(true);\n\t\t\n\t\tif(newItemIndex < 0)\n\t\t\tnewItemIndex = g_numItems - 1;\n\t\t\n\t\tt.selectItem(newItemIndex, \"prev\");\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * expand gallery to body size\n\t */\n\tfunction toFakeFullScreen(){\n\t\t\n\t\tjQuery(\"body\").addClass(\"ug-body-fullscreen\");\n\t\tg_objWrapper.addClass(\"ug-fake-fullscreen\");\n\t\t\n\t\tg_temp.isFakeFullscreen = true;\n\t\t\n\t\tg_objGallery.trigger(t.events.ENTER_FULLSCREEN);\n\t\tg_objGallery.trigger(t.events.SIZE_CHANGE);\n\t}\n\t\n\t\n\t/**\n\t * exit fake fullscreen\n\t */\n\tfunction exitFakeFullscreen(){\n\t\t\n\t\tjQuery(\"body\").removeClass(\"ug-body-fullscreen\");\n\t\tg_objWrapper.removeClass(\"ug-fake-fullscreen\");\n\t\t\n\t\tg_temp.isFakeFullscreen = false;\n\t\t\n\t\tg_objGallery.trigger(t.events.EXIT_FULLSCREEN);\n\t\tg_objGallery.trigger(t.events.SIZE_CHANGE);\n\t\t\n\t}\n\t\n\t/**\n\t * return if the fullscreen mode is available\n\t */\n\tthis.isFullScreen = function(){\n\t\t\n\t\tif(g_temp.isFakeFullscreen == true)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_functions.isFullScreen() == true)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\t\t\n\t}\n\t\n\t\n\t/**\n\t * tells if it's fake fullscreen\n\t */\n\tthis.isFakeFullscreen = function(){\n\t\t\n\t\treturn(g_temp.isFakeFullscreen);\n\t}\n\t\n\t\n\t/**\n\t * go to fullscreen mode\n\t */\n\tthis.toFullScreen = function(){\n\t\t\n\t\tg_functions.setGlobalData(\"fullscreenID\", g_galleryID);\n\t\t\n\t\tvar divGallery = g_objWrapper.get(0);\n\t\t\n\t\tvar isSupported = g_functions.toFullscreen(divGallery);\n\t\t\t\t\n\t\tif(isSupported == false)\n\t\t\ttoFakeFullScreen();\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * exit full screen\n\t */\n\tthis.exitFullScreen = function(){\n\t\t\n\t\tif(g_temp.isFakeFullscreen == true)\n\t\t\texitFakeFullscreen();\n\t\telse\n\t\t\tg_functions.exitFullscreen();\n\t\t\t\t\t\t\n\t}\n\t\n\t/**\n\t * toggle fullscreen\n\t */\n\tthis.toggleFullscreen = function(){\n\t\t\n\t\tif(t.isFullScreen() == false){\n\t\t\tt.toFullScreen();\n\t\t}else{\n\t\t\tt.exitFullScreen();\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * resize the gallery\n\t * noevent - initally false\n\t */\n\tthis.resize = function(newWidth, newHeight, noevent){\n\t\t\n\t\tg_objWrapper.css(\"width\", \"auto\");\n\t\tg_objWrapper.css(\"max-width\",newWidth+\"px\");\n\t\t\n\t\tif(newHeight)\n\t\t\tg_objWrapper.height(newHeight);\n\t\t\n\t\tif(!noevent && noevent !== true)\n\t\t\tonGalleryResized();\n\t\t\n\t}\n\n\t\n\t/**\n\t * set size class to the wrapper\n\t * this can work to any other wrapper too\n\t */\n\tthis.setSizeClass = function(objWrapper, width){\n\t\t\n\t\tif(!objWrapper)\n\t\t\tvar objWrapper = g_objWrapper;\n\t\t\n\t\tif(!width){\n\t\t\tvar objSize = t.getSize();\n\t\t\tvar width = objSize.width;\t\t\t\n\t\t}\n\t\t\n\t\tif(width == 0)\n\t\t\tvar width = jQuery(window).width();\n\t\t\n\t\tvar addClass = \"\";\n\t\t\n\t\tif(width <= 480){\n\t\t\taddClass = \"ug-under-480\";\t\t\t\n\t\t}else\n\t\tif(width <= 780){\n\t\t\taddClass = \"ug-under-780\";\t\t\t\n\t\t}else\n\t\tif(width < 960){\n\t\t\taddClass = \"ug-under-960\";\n\t\t}\n\t\t\n\t\tif(objWrapper.hasClass(addClass) == true)\n\t\t\treturn(true);\n\t\t\n\t\tremoveAllSizeClasses(objWrapper);\n\t\tif(addClass != \"\")\n\t\t\tobjWrapper.addClass(addClass);\n\t}\n\t\n\t\n\t/**\n\t * return if the size is suited for mobile\n\t */\n\tthis.isMobileMode = function(){\n\t\t\n\t\tif(g_objWrapper.hasClass(\"ug-under-480\"))\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * get if small screen\n\t */\n\tthis.isSmallWindow = function(){\n\t\t\n\t\tvar windowWidth = jQuery(window).width();\n\t\t\n\t\t\n\t\tif(!windowWidth)\n\t\t\treturn(true);\n\t\t\n\t\tif(windowWidth <= 480)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * check if the gallery is visible\n\t */\n\tthis.isGalleryVisible = function(){\n\t\t\n\t\tvar isVisible = g_objWrapper.is(\":visible\");\n\t\t\n\t\treturn(isVisible);\n\t}\n\t\n\t\n\t/**\n\t * change gallery items\n\t */\n\tthis.changeItems = function(itemsContent, cacheID){\n\t\t\n\t\tif(!itemsContent)\n\t\t\tvar itemsContent = \"noitems\";\n\t\t\n\t\trunGallery(g_galleryID, \"nochange\", itemsContent, cacheID);\n\t}\n\t\n\t\n\t\n\t/**\n\t * add items\n\t */\n\tthis.addItems = function(itemsContent){\n\t\t \n\t\t if(!itemsContent || itemsContent.length == 0)\n\t\t\t return(false);\n\t\t \n\t\t //add new items wrapper\n\t\t var objNewItemsWrapper = g_objWrapper.children(\".ug-newitems-wrapper\");\n\t\t if(objNewItemsWrapper.length == 0)\n\t\t\t g_objWrapper.append(\"<div class='ug-newitems-wrapper' style='display:none'></div>\");\n\t\t \n\t\t objNewItemsWrapper = g_objWrapper.children(\".ug-newitems-wrapper\");\n\t\t \n\t\t //add the items\n\t\t objNewItemsWrapper.append(itemsContent);\n\t\t \n\t\t var objChildren = jQuery(objNewItemsWrapper.children());\n\t\t  \n\t\t fillItemsArray(objChildren, true);\n\t\t \n\t\t loadAPIs();\n\t\t \n\t\t if(!g_objTheme || typeof g_objTheme.addItems != \"function\")\n\t\t\t throw new Error(\"addItems function not found in the theme\");\n\t\t \n\t\t objNewItemsWrapper.remove();\n\t\t \n\t\t g_objTheme.addItems();\n\t}\n\t\n\t\n\t/**\n\t * get new added items indexes array\n\t */\n\tthis.getNewAddedItemsIndexes = function(){\n\t\t\n\t\tvar arrIndexes = [];\n\t\t\n\t\tjQuery.each(g_arrItems, function(index, objItem){\n\t\t\t\n\t\t\tif(objItem.isNewAdded == true)\n\t\t\t\tarrIndexes.push(index);\n\t\t});\n\t\t\n\t\treturn(arrIndexes);\n\t}\n\t\n\t\n\t/**\n\t * show error message, replace whole gallery div\n\t */\n\tthis.showErrorMessageReplaceGallery = function(message){\n\t\tshowErrorMessage(message);\n\t}\n\t\n\t/**\n\t * set custom height function by width\n\t */\n\tthis.setFuncCustomHeight = function(func){\n\t\tg_temp.funcCustomHeight = func;\n\t}\n\t\n\t\n\tthis.__________EXTERNAL_EVENTS_______ = function(){};\n\t\n\t\n\t/**\n\t * trigger event\n\t */\n\tthis.triggerEvent = function(event, arrParams){\n\t\t\n\t\tif(!arrParams)\n\t\t\tg_objGallery.trigger(event);\n\t\telse{\n\t\t\tif(jQuery.type(arrParams) != \"array\")\n\t\t\t\tarrParams = [arrParams];\n\t\t\t\n\t\t\tg_objGallery.trigger(event, arrParams);\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on event\n\t */\n\tthis.onEvent = function(event, func){\n\t\t\n\t\tg_objGallery.on(event, func);\n\t}\n\t\n\t\n\t/**\n\t * destroy event\n\t */\n\tthis.destroyEvent = function(event){\n\t\t\n\t\tg_objGallery.off(event);\n\t}\n\t\n\t\n\tthis.__________AJAX_REQUEST_______ = function(){};\n\t\n\t\n\t/**\n\t * ajax request\n\t */\n\tthis.ajaxRequest = function(action, data, successFunction, errorFunction){\n\t\t\n\t\tif(!successFunction || typeof successFunction != \"function\")\n\t\t\tthrow new Error(\"ajaxRequest error: success function should be passed\");\n\t\t\t\t\n\t\tvar urlAjax = g_options.gallery_urlajax;\n\t\tif(!urlAjax || urlAjax == \"\")\n\t\t\tthrow new Error(\"ajaxRequest error: Ajax url don't passed\");\n\t\t\n\t\tif(typeof data == \"undefined\")\n\t\t\tvar data = {};\n\n\t\t//add galleryID to data\n\t\tvar objData = {\n\t\t\t\taction:\"unitegallery_ajax_action\",\n\t\t\t\tclient_action:action,\n\t\t\t\tgalleryID: g_galleryID,\n\t\t\t\tdata:data\n\t\t};\n\t\t\n\t\tjQuery.ajax({\n\t\t\ttype:\"post\",\n\t\t\turl:g_options.gallery_urlajax,\n\t\t\tdataType: 'json',\n\t\t\tdata:objData,\n\t\t\tsuccess:function(response){\n\t\t\t\t\n\t\t\t\tif(!response){\n\t\t\t\t\tthrow new Error(\"Empty ajax response!\");\n\t\t\t\t}\n\n\t\t\t\tif(response == -1 || response === 0)\n\t\t\t\t\tthrow new Error(\"ajax error!!!\");\n\t\t\t\t\n\n\t\t\t\tif(typeof response.success == \"undefined\")\n\t\t\t\t\tthrow new Error(\"ajax error!!!\");\n\t\t\t\t\n\t\t\t\tif(response.success == false){\n\t\t\t\t\tshowErrorMessage(response.message, \"ajax error\");\n\t\t\t\t\treturn(false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsuccessFunction(response);\n\t\t\t},\n\t\t\terror:function(jqXHR, textStatus, errorThrown){\n\t\t\t\tconsole.log(\"Ajax Error!!! \" + textStatus);\n\t\t\t\tresponseText = jqXHR.responseText;\n\t\t\t\tif(errorFunction && typeof errorFunction == \"function\"){\n\t\t\t\t\terrorFunction(responseText);\n\t\t\t\t}else\n\t\t\t\t\ttrace(responseText);\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * request new items\n\t * isForce - don't take from cache\n\t */\n\tthis.requestNewItems = function(catID, isForce, cacheID){\n\t\t\n\t\tvar checkCache = g_options.gallery_enable_cache;\n\t\t\n\t\tif(!cacheID)\n\t\t\tcacheID = catID;\n\t\t\n\t\tif(isForce == true)\n\t\t\tcheckCache = false;\n\t\t\n\t\t//get items from cache\n\t\tif(checkCache == true && g_objCache.hasOwnProperty(cacheID)){\n\t\t\t\n\t\t\tvar htmlItems = g_objCache[cacheID];\n\t\t\t\n\t\t\tt.changeItems(htmlItems, cacheID);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tg_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS);\n\t\t\t\n\t\t\tt.ajaxRequest(\"front_get_cat_items\",{catid:catID}, function(response){\n\t\t\t\t\n\t\t\t\tvar htmlItems = response.html;\n\t\t\t\t\n\t\t\t\tt.changeItems(htmlItems, cacheID);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * run the gallery\n\t */\n\t this.run = function(galleryID, objParams){\n\t\t \n\t\t \n\t\t var debug_errors = g_options.gallery_debug_errors;\n\t\t if(objParams && objParams.hasOwnProperty(\"gallery_debug_errors\"))\n\t\t\t g_options.gallery_debug_errors = objParams.gallery_debug_errors;\n\n\t\t \n\t\t if(g_options.gallery_debug_errors == true){\n\t\t\t \n\t\t\t try{\n\t\t\t\t \n\t\t\t\t runGallery(galleryID, objParams);\n\t\t\t\t \n\t\t\t\t \n\t\t\t }catch(objError){\n\t\t\t\t if(typeof objError == \"object\"){\n\t\t\t\t\t \n\t\t\t\t\t var message = objError.message;\n\t\t\t\t\t var lineNumber = objError.lineNumber;\n\t\t\t\t\t var fileName = objError.fileName;\n\t\t\t\t\t var stack = objError.stack;\n\t\t\t\t\t \n\t\t\t\t\t message += \" <br><br> in file: \"+fileName;\n\t\t\t\t\t message += \" <b> line \" + lineNumber + \"</b>\";\n\t\t\t\t\t \n\t\t\t\t\t trace(objError);\n\t\t\t\t\t \n\t\t\t\t }else{\n\t\t\t\t\t var message = objError;\n\t\t\t\t }\n\t\t\t\t \n\t\t\t\t //remove double \"error:\" text\n\t\t\t\t message = message.replace(\"Error:\",\"\");\n\t\t\t\t \n\t\t\t\t showErrorMessage(message);\n\t\t\t }\n\t\t\t \n\t\t }else{\n\t\t\t runGallery(galleryID, objParams);\n\t\t }\n\t\t \n\t\t \t\t \n\t\t \n\t }\n\t \t \t \n}\t//unitegallery object end\n\n\n/**\n * tiles class\n */\nfunction UGLightbox(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper;\n\tvar g_objSlider = new UGSlider(), g_objOverlay, g_objArrowLeft, g_objArrowRight, g_objButtonClose;\n\tvar g_functions = new UGFunctions(), g_objTextPanel = new UGTextPanel(), g_objNumbers;\n\tvar g_objTopPanel;\n\t\n\tvar g_options = {\n\t\t\tlightbox_type: \"wide\",\t\t\t\t\t\t\t//compact / wide - lightbox type\n\t\t\t\n\t\t\tlightbox_show_textpanel: true,\t\t\t\t\t//show the text panel\n\t\t\tlightbox_textpanel_width: 550,\t\t\t\t\t//the width of the text panel.\n\t\t\t\n\t\t\tlightbox_hide_arrows_onvideoplay: true,\t\t\t//hide the arrows when video start playing and show when stop\n\t\t\tlightbox_arrows_position: \"sides\",\t\t\t\t//sides, inside: position of the arrows, used on compact type\t\t\t\n\t\t\tlightbox_arrows_offset: 10,\t\t\t\t\t\t//The horizontal offset of the arrows\n\t\t\tlightbox_arrows_inside_offset: 10,\t\t\t\t//The offset from the image border if the arrows placed inside\n\t\t\tlightbox_arrows_inside_alwayson: false,\t\t\t//Show the arrows on mouseover, or always on.\n\t\t\t\n\t\t\tlightbox_overlay_color:null,\t\t\t\t\t//the color of the overlay. if null - will take from css\n\t\t\tlightbox_overlay_opacity:1,\t\t\t\t\t\t//the opacity of the overlay. if null - will take from css\n\t\t\tlightbox_top_panel_opacity: null,\t\t\t\t//the opacity of the top panel\n\t\t\t\n\t\t\tlightbox_show_numbers: true,\t\t\t\t\t//show numbers on the right side\n\t\t\tlightbox_numbers_size: null,\t\t\t\t\t//the size of the numbers string\n\t\t\tlightbox_numbers_color: null,\t\t\t\t\t//the color of the numbers\n\t\t\tlightbox_numbers_padding_top:null,\t\t\t\t//the top padding of the numbers (used in compact mode)\n\t\t\tlightbox_numbers_padding_right:null,\t\t\t//the right padding of the numbers (used in compact mode)\n\t\t\t\n\t\t\tlightbox_compact_closebutton_offsetx: 1,\t\t//the offsetx of the close button. Valid only for compact mode\n\t\t\tlightbox_compact_closebutton_offsety: 1,\t\t//the offsetx of the close button. Valid only for compact mode\n\t\t\t\n\t\t\tlightbox_close_on_emptyspace:true\t\t\t\t//close the lightbox on empty space\n\t};\n\t\n\tthis.events = {\n\t\t\tLIGHTBOX_INIT: \"lightbox_init\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\ttopPanelHeight: 44,\n\t\t\tinitTextPanelHeight: 26,\t\t//init height for compact mode\n\t\t\tisOpened: false, \n\t\t\tisRightNowOpened:false,\n\t\t\tputSlider: true,\n\t\t\tisCompact: false,\n\t\t\tfadeDuration: 300,\n\t\t\tpositionFrom: null,\n\t\t\ttextPanelTop: null,\n\t\t\ttextPanelLeft: null,\n\t\t\tisArrowsInside: false,\n\t\t\tisArrowsOnHoverMode: false,\n\t\t\tlastMouseX: null,\n\t\t\tlastMouseY: null,\n\t\t\toriginalOptions: null,\n\t\t\tisSliderChangedOnce:false,\n\t\t\tisTopPanelEnabled:true\n\t};\n\t\n\tvar g_defaults = {\n\t\t\tlightbox_slider_controls_always_on: true,\n\t\t\tlightbox_slider_enable_bullets: false,\n\t\t\tlightbox_slider_enable_arrows: false,\n\t\t\tlightbox_slider_enable_progress_indicator: false,\n\t\t\tlightbox_slider_enable_play_button: false,\n\t\t\tlightbox_slider_enable_fullscreen_button: false,\n\t\t\tlightbox_slider_enable_zoom_panel: false,\n\t\t\tlightbox_slider_enable_text_panel: false,\n\t\t\tlightbox_slider_scale_mode_media: \"down\",\n\t\t\tlightbox_slider_scale_mode: \"down\",\n\t\t\tlightbox_slider_loader_type: 3,\n\t\t\tlightbox_slider_loader_color: \"black\",\n\t\t\tlightbox_slider_transition: \"fade\",\n\t\t\t\n\t\t\tlightbox_slider_image_padding_top: g_temp.topPanelHeight,\n\t\t\tlightbox_slider_image_padding_bottom: 0,\n\t\t\t\n\t\t\tlightbox_slider_video_padding_top: 0,\n\t\t\tlightbox_slider_video_padding_bottom: 0,\n\t\t\t\n\t\t\tlightbox_textpanel_align: \"middle\",\n\t\t\tlightbox_textpanel_padding_top: 5,\n\t\t\tlightbox_textpanel_padding_bottom: 5,\n\t\t\t\n\t\t\tslider_video_constantsize: false,\n\t\t\tlightbox_slider_image_border: false,\n\t\t\t\n\t\t\tlightbox_textpanel_enable_title: true,\n\t\t\tlightbox_textpanel_enable_description: false,\n\t\t\tlightbox_textpanel_desc_style_as_title: true,\n\t\t\t\n\t\t\tlightbox_textpanel_enable_bg:false,\n\t\t\t\n\t\t\tvideo_enable_closebutton: false,\n\t\t\tlightbox_slider_video_enable_closebutton: false,\n\t\t\tvideo_youtube_showinfo: false,\n\t\t\tlightbox_slider_enable_links:false\n\t};\n\t\n\tvar g_defaultsCompact = {\n\t\t\tlightbox_overlay_opacity:0.6,\n\t\t\t\n\t\t\tlightbox_slider_image_border: true,\n\t\t\tlightbox_slider_image_shadow:true,\n\t\t\tlightbox_slider_image_padding_top: 30,\n\t\t\tlightbox_slider_image_padding_bottom: 30,\n\t\t\t\n\t\t\tslider_video_constantsize: true,\n\t\t\t\t\t\t\n\t\t\tlightbox_textpanel_align: \"bottom\",\n\t\t\tlightbox_textpanel_title_text_align: \"left\",\n\t\t\tlightbox_textpanel_desc_text_align: \"left\",\n\t\t\tlightbox_textpanel_padding_left: 10,\t\t\t//the padding left of the textpanel\n\t\t\tlightbox_textpanel_padding_right: 10\n\t};\n\t\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction initLightbox(gallery, customOptions){\n\t\t\n\t\tg_gallery = gallery;\n\t\tg_objGallery = jQuery(gallery);\n\t\t\n\t\tg_options = jQuery.extend(g_options, g_defaults);\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tg_temp.originalOptions = jQuery.extend({}, g_options);\n\t\t\n\t\tif(g_options.lightbox_type == \"compact\"){\n\t\t\tg_temp.isCompact = true;\n\t\t\tg_options = jQuery.extend(g_options, g_defaultsCompact);\n\t\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t}\n\t\t\n\t\t//modify some options\n\t\tmodifyOptions();\n\t\t\n\t\tif(g_temp.putSlider == true){\n\t\t\t\n\t\t\tg_gallery.initSlider(g_options, \"lightbox\");\n\t\t\tg_objects = gallery.getObjects();\n\t\t\tg_objSlider = g_objects.g_objSlider;\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\tg_objSlider = null;\n\t\t}\n\t\t\n\t\tif(g_options.lightbox_show_textpanel == true){\n\t\t\tg_objTextPanel.init(g_gallery, g_options, \"lightbox\");\n\t\t}\n\t\telse\n\t\t\tg_objTextPanel = null;\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * modify some options according user options\n\t */\n\tfunction modifyOptions(){\n\t\t\n\t\tif(g_temp.isCompact == true && g_options.lightbox_show_textpanel == true){\n\t\t\tg_options.lightbox_slider_image_padding_bottom = g_temp.initTextPanelHeight;\n\t\t}\n\t\t\n\t\tif(g_temp.isCompact == true && g_options.lightbox_arrows_position == \"inside\"){\n\t\t\tg_temp.isArrowsInside = true;\n\t\t}\n\n\t\tif(g_temp.isArrowsInside == true && g_options.lightbox_arrows_inside_alwayson == false)\n\t\t\tg_temp.isArrowsOnHoverMode = true;\n\t\t\n\t\t//disable top panel if no text panel enabled\n\t\tif(g_options.lightbox_show_textpanel == false){\n\t\t\tg_temp.isTopPanelEnabled = false;\n\t\t\tg_temp.topPanelHeight = 0;\n\t\t\tg_options.lightbox_slider_image_padding_top = 0;\n\t\t}\n\t\t\n\t\t//modify slider image border width\n\t\t\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * put the lightbox html\n\t */\n\tfunction putLightboxHtml(){\n\t\t\n\t\tvar html = \"\";\n\t\tvar classAddition = \"\";\n\t\tif(g_temp.isCompact == true){\n\t\t\tclassAddition = \" ug-lightbox-compact\";\n\t\t}\n\t\t\n\t\thtml += \"<div class='ug-gallery-wrapper ug-lightbox\"+classAddition+\"'>\";\n\t\thtml += \"<div class='ug-lightbox-overlay'></div>\";\n\t\t\n\t\t//set top panel only on wide mode\n\t\tif(g_temp.isCompact == false && g_temp.isTopPanelEnabled){\n\t\t\thtml += \"<div class='ug-lightbox-top-panel'>\";\n\t\t\thtml += \t\"<div class='ug-lightbox-top-panel-overlay'></div>\";\n\t\t\t\n\t\t\tif(g_options.lightbox_show_numbers)\n\t\t\t\thtml += \t\"<div class='ug-lightbox-numbers'></div>\";\n\t\t\t\n\t\t\thtml += \"</div>\";\t//top panel\n\t\t}else{\n\t\t\t\n\t\t\t//put numbers without top panel\n\t\t\tif(g_options.lightbox_show_numbers)\n\t\t\t\thtml += \t\"<div class='ug-lightbox-numbers'></div>\";\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\thtml += \t\"<div class='ug-lightbox-button-close'></div>\";\n\t\t\n\t\thtml += \"<div class='ug-lightbox-arrow-left'></div>\";\t\t\n\t\thtml += \"<div class='ug-lightbox-arrow-right'></div>\";\n\t\t\n\t\thtml += \"</div>\";\n\t\t\n\t\tg_objWrapper = jQuery(html);\n\t\t\n\t\tjQuery(\"body\").append(g_objWrapper);\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.setHtml(g_objWrapper);\n\t\t\n\t\tg_objOverlay = g_objWrapper.children(\".ug-lightbox-overlay\");\n\t\t\n\t\tif(g_temp.isCompact == false && g_temp.isTopPanelEnabled == true){\n\t\t\tg_objTopPanel = g_objWrapper.children(\".ug-lightbox-top-panel\");\n\t\t\tif(g_objTopPanel.length == 0)\n\t\t\t\tg_objTopPanel = null;\n\t\t}\n\t\t\n\t\tg_objButtonClose = g_objWrapper.find(\".ug-lightbox-button-close\");\n\t\t\n\t\tif(g_options.lightbox_show_numbers)\n\t\t\tg_objNumbers = g_objWrapper.find(\".ug-lightbox-numbers\");\n\t\t\n\t\tg_objArrowLeft = g_objWrapper.children(\".ug-lightbox-arrow-left\");\n\t\tg_objArrowRight = g_objWrapper.children(\".ug-lightbox-arrow-right\");\n\t\t\t\t\n\t\tif(g_objTextPanel){\n\t\t\tif(g_objTopPanel)\n\t\t\t\tg_objTextPanel.appendHTML(g_objTopPanel);\n\t\t\telse\n\t\t\t\tg_objTextPanel.appendHTML(g_objWrapper);\n\t\t}\n\n\t}\n\t\n\t\n\t/**\n\t * set lightbox properties\n\t */\n\tfunction setProperties(){\n\t\t\n\t\tif(g_options.lightbox_overlay_color !== null)\n\t\t\tg_objOverlay.css(\"background-color\", g_options.lightbox_overlay_color);\n\t\t\n\t\tif(g_options.lightbox_overlay_opacity !== null)\n\t\t\tg_objOverlay.fadeTo(0, g_options.lightbox_overlay_opacity);\n\t\t\n\t\tif(g_objTopPanel && g_options.lightbox_top_panel_opacity !== null){\n\t\t\tg_objTopPanel.children(\".ug-lightbox-top-panel-overlay\").fadeTo(0, g_options.lightbox_top_panel_opacity);\n\t\t}\n\t\t\t\n\t\t//set numbers properties\n\t\tif(g_objNumbers){\n\t\t\tvar cssNumbers = {};\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_size !== null)\n\t\t\t\tcssNumbers[\"font-size\"] = g_options.lightbox_numbers_size+\"px\";\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_color)\n\t\t\t\tcssNumbers[\"color\"] = g_options.lightbox_numbers_color;\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_padding_right !== null)\n\t\t\t\tcssNumbers[\"padding-right\"] = g_options.lightbox_numbers_padding_right + \"px\";\n\t\t\t\n\t\t\tif(g_options.lightbox_numbers_padding_top !== null)\n\t\t\t\tcssNumbers[\"padding-top\"] = g_options.lightbox_numbers_padding_top + \"px\";\n\t\t\t\n\t\t\t\n\t\t\tg_objNumbers.css(cssNumbers);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * refresh slider item with new height\n\t */\n\tfunction refreshSliderItem(newHeight){\n\t\t\n\t\tif(!g_objSlider)\n\t\t\treturn(true);\n\t\t\t\t\n\t\t//set slider new image position\n\t\tvar objOptions = {\n\t\t\t\tslider_image_padding_top: newHeight\n\t\t};\n\t\t\n\t\tg_objSlider.setOptions(objOptions);\n\t\tg_objSlider.refreshSlideItems();\n\t\n\t}\n\t\n\tfunction __________WIDE_ONLY_________(){};\n\t\n\t\n\t/**\n\t * handle panel height according text height\n\t */\n\tfunction handlePanelHeight(fromWhere){\n\t\t\n\t\tif(!g_objTopPanel)\n\t\t\treturn(false);\n\t\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\t//check text panel size, get the panel bigger then\n\t\tvar panelHeight = g_objTopPanel.height();\n\t\tif(panelHeight == 0)\n\t\t\treturn(false);\n\t\t\n\t\tif(g_objTopPanel.is(\":visible\") == false)\n\t\t\treturn(false);\n\t\t\n\t\tvar newPanelHeight = panelHeight;\n\t\t\n\t\tvar objTextPanelSize = g_objTextPanel.getSize();\n\t\t\n\t\tvar textPanelHeight = objTextPanelSize.height;\n\t\t\n\t\tif(panelHeight != g_temp.topPanelHeight)\n\t\t\tnewPanelHeight = g_temp.topPanelHeight;\n\t\t\t\t\n\t\tif(textPanelHeight > newPanelHeight)\n\t\t\tnewPanelHeight = textPanelHeight;\n\t\t\t\t\n\t\tif(panelHeight != newPanelHeight){\n\t\t\tg_objTopPanel.height(newPanelHeight);\n\t\t\t\n\t\t\tif(g_objSlider && g_objSlider.isAnimating() == false)\n\t\t\t\trefreshSliderItem(newPanelHeight);\n\t\t}\n\t\t\t\t\n\t}\n\n\n\t/**\n\t * position text panel for wide\n\t * size - wrapper size\n\t */\n\tfunction positionTextPanelWide(size){\n\n\t\tvar objOptions = {};\n\t\t\n\t\tvar textWidth = g_options.lightbox_textpanel_width;\n\t\tvar minPaddingLeft = 47;\n\t\tvar minPaddingRight = 40;\n\t\tvar maxTextPanelWidth = size.width - minPaddingLeft - minPaddingRight;\n\t\t\n\t\tif(textWidth > maxTextPanelWidth){\t\t//mobile mode\n\t\t\t\n\t\t\tobjOptions.textpanel_padding_left = minPaddingLeft;\n\t\t\tobjOptions.textpanel_padding_right = minPaddingRight;\n\t\t\t\n\t\t\tobjOptions.textpanel_title_text_align = \"center\";\n\t\t\tobjOptions.textpanel_desc_text_align = \"center\";\t\t\t\n\t\t}else{\n\t\t\tobjOptions.textpanel_padding_left = Math.floor((size.width - textWidth) / 2);\n\t\t\tobjOptions.textpanel_padding_right = objOptions.textpanel_padding_left;\n\t\t\tobjOptions.textpanel_title_text_align = \"left\";\n\t\t\tobjOptions.textpanel_desc_text_align = \"left\";\n\t\t\t\n\t\t\tif(g_options.lightbox_textpanel_title_text_align)\n\t\t\t\t\tobjOptions.textpanel_title_text_align = g_options.lightbox_textpanel_desc_text_align;\n\t\t\t\n\t\t\tif(g_options.lightbox_textpanel_desc_text_align)\n\t\t\t\tobjOptions.textpanel_desc_text_align = g_options.lightbox_textpanel_desc_text_align;\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\tg_objTextPanel.setOptions(objOptions);\n\t\t\n\t\tg_objTextPanel.refresh(true, true);\n\t\t\n\t\thandlePanelHeight(\"positionTextPanelWide\");\n\t\tg_objTextPanel.positionPanel();\n\t}\n\t\n\t/**\n\t * hide top panel\n\t */\n\tfunction hideTopPanel(){\n\t\t\t\t\n\t\tif(!g_objTopPanel)\n\t\t\treturn(false);\n\t\t\n\t\tg_objTopPanel.hide();\n\t}\n\t\n\t\n\t/**\n\t * show top panel\n\t */\n\tfunction showTopPanel(){\n\t\t\n\t\tif(!g_objTopPanel)\n\t\t\treturn(false);\n\t\t\n\t\tg_objTopPanel.show();\n\t}\n\t\n\t\n\tfunction __________COMPACT_ONLY_________(){};\n\n\t/**\n\t * handle slider image height according the textpanel height\n\t * refresh the slider if the height is not in place\n\t */\n\tfunction handleCompactHeight(objImageSize){\n\t\t\t\t\n\t\tif(g_temp.isOpened == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(!g_objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tvar wrapperSize = g_functions.getElementSize(g_objWrapper);\n\t\tvar textPanelSize = g_objTextPanel.getSize();\n\t\t\n\t\tif(textPanelSize.width == 0 || textPanelSize.height > 120)\n\t\t\treturn(false);\n\t\t\n\t\tif(!objImageSize){\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t}\n\t\t\n\t\tif(objImageSize.height == 0 || objImageSize.width == 0)\n\t\t\treturn(false);\n\t\t\n\t\t//check elements end size\n\t\tvar totalBottom = objImageSize.bottom + textPanelSize.height;\n\t\t\n\t\tif(totalBottom < wrapperSize.height)\n\t\t\treturn(false);\n\t\t\n\t\tvar sliderOptions = g_objSlider.getOptions();\n\t\t\n\t\tvar imagePaddingBottom = textPanelSize.height;\n\t\t\n\t\tif(imagePaddingBottom != sliderOptions.slider_image_padding_bottom){\n\t\t\t\n\t\t\tvar objOptions = {\n\t\t\t\t\tslider_image_padding_bottom: imagePaddingBottom\n\t\t\t};\n\t\t\t\n\t\t\tif(g_objSlider.isAnimating() == false){\n\t\t\t\tg_objSlider.setOptions(objOptions);\n\t\t\t\tg_objSlider.refreshSlideItems();\n\t\t\t\treturn(true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * set text panel top of compact mode\n\t */\n\tfunction setCompactTextpanelTop(objImageSize, positionPanel){\n\t\t\n\t\tif(!objImageSize){\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t}\n\t\t\n\t\tg_temp.textPanelTop = objImageSize.bottom;\n\t\t\n\t\tif(positionPanel === true)\n\t\t\tg_objTextPanel.positionPanel(g_temp.textPanelTop, g_temp.textPanelLeft);\n\t}\n\t\n\t\n\t/**\n\t * handle text panel width on compact mode, \n\t * run when the image is ready. \n\t * Set top position of the panel as well\n\t * position numbers as well\n\t */\n\tfunction handleCompactTextpanelSizes(showTextpanel){\n\t\t\t\n\t\tvar wrapperSize = g_functions.getElementSize(g_objWrapper);\n\t\tvar objImage = g_objSlider.getSlideImage();\n\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t\n\t\tif(objImageSize.width == 0)\n\t\t\treturn(false);\n\t\t\n\t\t\n\t\tg_temp.textPanelLeft = objImageSize.left;\n\t\tg_temp.textPanelTop = objImageSize.bottom;\n\n\t\tvar textPanelWidth = objImageSize.width;\n\t\t\n\t\tif(g_objNumbers){\n\t\t\t\n\t\t\tvar objNumbersSize = g_functions.getElementSize(g_objNumbers);\n\t\t\ttextPanelWidth -= objNumbersSize.width;\n\t\t\t\n\t\t\t//place numbers object\n\t\t\tvar numbersLeft = objImageSize.right - objNumbersSize.width;\n\t\t\tg_functions.placeElement(g_objNumbers, numbersLeft, g_temp.textPanelTop);\n\t\t}\n\t\t\t\n\t\t\t\n\t\tif(g_objTextPanel){\n\t\t\tg_objTextPanel.show();\n\t\t\tg_objTextPanel.refresh(true, true, textPanelWidth);\n\t\t\tsetCompactTextpanelTop(objImageSize);\n\t\t}\n\t\t\n\t\tvar isChanged = handleCompactHeight(objImageSize);\n\t\t\n\t\tif(isChanged == false){\n\t\t\t\n\t\t\tg_temp.positionFrom = \"handleCompactTextpanelSizes\";\n\t\t\t\n\t\t\tif(g_objTextPanel){\n\t\t\t\tg_objTextPanel.positionPanel(g_temp.textPanelTop, g_temp.textPanelLeft);\n\t\t\t\tif(showTextpanel === true){\n\t\t\t\t\tshowTextpanel();\n\t\t\t\t\tshowNumbers();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * return that current slider image is in place\n\t */\n\tfunction isSliderImageInPlace(){\n\n\t\tif(g_objSlider.isCurrentSlideType(\"image\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar isImageInPlace = (g_objSlider.isCurrentImageInPlace() == true);\n\t\t\t\t\n\t\treturn(isImageInPlace);\n\t}\n\t\n\t\n\t/**\n\t * position the arrows inside mode\n\t */\n\tfunction positionArrowsInside(toShow, isAnimation){\n\t\t\t\t\n\t\tif(g_temp.isArrowsInside == false)\n\t\t\treturn(false);\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(false);\n\t\t\n\t\tvar isImageInPlace = isSliderImageInPlace();\n\t\t\n\t\tg_objArrowLeft.show();\n\t\tg_objArrowRight.show();\n\t\t\n\t\tg_temp.positionFrom = \"positionArrowsInside\";\n\t\t\n\t\tif(g_temp.isArrowsOnHoverMode == true && isImageInPlace == true && isMouseInsideImage() == false)\n\t\t\thideArrows(true);\n\t\t\n\t\tif(isImageInPlace == false){\n\t\t\tvar leftArrowLeft = g_functions.getElementRelativePos(g_objArrowLeft, \"left\", g_options.lightbox_arrows_offset);\n\t\t\tvar leftArrowTop = g_functions.getElementRelativePos(g_objArrowLeft, \"middle\");\n\t\t\t\t\t\t\n\t\t\tvar rightArrowLeft = g_functions.getElementRelativePos(g_objArrowRight, \"right\", g_options.lightbox_arrows_offset);\n\t\t\tvar rightArrowTop = leftArrowTop;\n\n\t\t}else{\n\t\t\t\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t\tvar objSliderSize = g_functions.getElementSize(g_objSlider.getElement());\n\t\t\t\t\t\t\n\t\t\tvar leftArrowLeft = g_functions.getElementRelativePos(g_objArrowLeft, \"left\", 0, objImage) + objImageSize.left + g_options.lightbox_arrows_inside_offset;\n\t\t\tvar leftArrowTop = g_functions.getElementRelativePos(g_objArrowLeft, \"middle\", 0, objImage) + objImageSize.top;\n\t\t\tvar rightArrowLeft = g_functions.getElementRelativePos(g_objArrowLeft, \"right\", 0, objImage) + objImageSize.left - g_options.lightbox_arrows_inside_offset;\n\t\t\tvar rightArrowTop = leftArrowTop;\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//place the image with animation or not\n\t\tif(isAnimation === true){\n\n\t\t\tvar objCssLeft = {\n\t\t\t\t\tleft: leftArrowLeft,\n\t\t\t\t\ttop: leftArrowTop\n\t\t\t};\n\t\t\t\n\t\t\tvar objCssRight = {\n\t\t\t\t\tleft: rightArrowLeft,\n\t\t\t\t\ttop: rightArrowTop\n\t\t\t};\n\t\t\t\n\t\t\tg_objArrowLeft.stop().animate(objCssLeft,{\n\t\t\t\tduration: g_temp.fadeDuration\n\t\t\t});\n\t\t\t\n\t\t\tg_objArrowRight.stop().animate(objCssRight,{\n\t\t\t\tduration: g_temp.fadeDuration\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\tg_objArrowLeft.stop();\n\t\t\tg_objArrowRight.stop();\n\t\t\t\n\t\t\tg_functions.placeElement(g_objArrowLeft, leftArrowLeft, leftArrowTop);\n\t\t\tg_functions.placeElement(g_objArrowRight, rightArrowLeft, rightArrowTop);\n\t\t}\n\t\t\n\t\t\n\t\tif(toShow == true)\n\t\t\tshowArrows(isAnimation);\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * position close button for compact type\n\t */\n\tfunction positionCloseButton(toShow, isAnimation){\n\t\t\n\t\tg_temp.positionFrom = null;\n\t\t\n\t\tvar isImageInPlace = isSliderImageInPlace();\n\t\t\n\t\tvar minButtonTop = 2;\n\t\tvar maxButtonLeft = g_functions.getElementRelativePos(g_objButtonClose, \"right\", 2, g_objWrapper);\n\t\t\n\t\tif(isImageInPlace == false){\t//put image to corner\n\t\t\t\n\t\t\tvar closeButtonTop = minButtonTop;\n\t\t\tvar closeButtonLeft = maxButtonLeft;\n\t\t\t\n\t\t}else{\n\t\t\tvar objImage = g_objSlider.getSlideImage();\n\t\t\tvar objImageSize = g_functions.getElementSize(objImage);\n\t\t\tvar objSliderSize = g_functions.getElementSize(g_objSlider.getElement());\n\t\t\tvar objButtonSize = g_functions.getElementSize(g_objButtonClose);\n\t\t\t\n\t\t\t//some strange bug\n\t\t\tif(objSliderSize.top == objSliderSize.height)\t\n\t\t\t\tobjSliderSize.top = 0;\n\t\t\t\n\t\t\tvar closeButtonLeft = objSliderSize.left + objImageSize.right - objButtonSize.width / 2 + g_options.lightbox_compact_closebutton_offsetx;\n\t\t\tvar closeButtonTop = objSliderSize.top + objImageSize.top - objButtonSize.height / 2 - g_options.lightbox_compact_closebutton_offsety;\n\t\t\t\n\t\t\tif(closeButtonTop < minButtonTop)\n\t\t\t\tcloseButtonTop = minButtonTop;\n\t\t\t\n\t\t\tif(closeButtonLeft > maxButtonLeft)\n\t\t\t\tcloseButtonLeft = maxButtonLeft;\n\t\t\t\n\t\t}\n\t\t\n\t\t//place the image with animation or not\n\t\tif(isAnimation === true){\n\t\t\tvar objCss = {\n\t\t\t\t\tleft: closeButtonLeft,\n\t\t\t\t\ttop: closeButtonTop\n\t\t\t};\n\t\t\t\n\t\t\tg_objButtonClose.stop().animate(objCss,{\n\t\t\t\tduration: g_temp.fadeDuration\n\t\t\t});\n\t\t\t\n\t\t}else{\n\t\t\tg_objButtonClose.stop();\n\t\t\tg_functions.placeElement(g_objButtonClose, closeButtonLeft, closeButtonTop);\n\t\t}\n\t\t\n\t\tif(toShow === true)\n\t\t\tshowCloseButton(isAnimation);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide close button\n\t */\n\tfunction hideCompactElements(){\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t\n\t\thideTextPanel();\n\t\t\n\t\thideNumbers();\n\t\t\n\t\tg_temp.positionFrom = \"hideCompactElements\";\n\t\tif(g_temp.isArrowsInside == true)\n\t\t\thideArrows();\n\t}\n\n\t\n\t/**\n\t * actual hide all compact type elements\n\t */\n\tfunction actualHideCompactElements(){\n\t\t\n\t\tif(g_objButtonClose)\n\t\t\tg_objButtonClose.hide();\n\t\t\n\t\tif(g_objArrowLeft && g_temp.isArrowsInside == true){\n\t\t\tg_objArrowLeft.hide();\n\t\t\tg_objArrowRight.hide();\n\t\t}\n\t\t\n\t\tif(g_objNumbers)\n\t\t\tg_objNumbers.hide();\n\t\t\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.hide();\n\t\t\n\t}\n\t\n\t\n\tfunction __________COMMON_________(){};\n\t\n\t\n\t/**\n\t * position the elements\n\t */\n\tfunction positionElements(){\n\t\t\t\t\t\t\n\t\tvar size = g_functions.getElementSize(g_objWrapper);\n\t\t\n\t\t//position top panel:\n\t\tif(g_objTopPanel)\n\t\t\tg_functions.setElementSizeAndPosition(g_objTopPanel, 0, 0, size.width, g_temp.topPanelHeight);\n\t\t\n\t\t//position arrows\n\t\tif(g_objArrowLeft && g_temp.isArrowsInside == false){\n\t\t\t\n\t\t\tif(g_options.lightbox_hide_arrows_onvideoplay == true){\n\t\t\t\tg_objArrowLeft.show();\n\t\t\t\tg_objArrowRight.show();\n\t\t\t}\n\t\t\t\n\t\t\tg_functions.placeElement(g_objArrowLeft, \"left\", \"middle\", g_options.lightbox_arrows_offset);\n\t\t\tg_functions.placeElement(g_objArrowRight, \"right\", \"middle\", g_options.lightbox_arrows_offset);\n\t\t}\t\t\n\t\t\n\t\tif(g_temp.isCompact == false)\n\t\t\tg_functions.placeElement(g_objButtonClose, \"right\", \"top\", 2, 2);\n\t\t\n\t\t//place text panel\n\t\tif(g_objTextPanel){\n\t\t\t\n\t\t\tg_temp.positionFrom = \"positionElements\";\n\t\t\t\n\t\t\tif(g_temp.isCompact == false)\n\t\t\t\tpositionTextPanelWide(size);\n\t\t\telse{\n\t\t\t\tshowTextPanel();\n\t\t\t\tshowNumbers();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tvar sliderWidth = size.width;\n\t\tvar sliderHeight = size.height;\t\n\t\tvar sliderTop = 0;\n\t\tvar sliderLeft = 0;\n\t\t\n\t\tif(g_objSlider){\n\t\t\t\n\t\t\tif(g_objTopPanel){\n\t\t\t\tvar topPanelHeight = g_objTopPanel.height();\n\t\t\t\tvar objOptions = {\n\t\t\t\t\t\tslider_image_padding_top: topPanelHeight\n\t\t\t\t};\n\t\t\t\tg_objSlider.setOptions(objOptions);\n\t\t\t}\n\t\t\t\n\t\t\tg_objSlider.setSize(sliderWidth, sliderHeight);\n\t\t\tg_objSlider.setPosition(sliderLeft, sliderTop);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the text panel\n\t */\n\tfunction hideTextPanel(){\n\t\t\n\t\tif(g_objTextPanel)\n\t\t\tg_objTextPanel.getElement().stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * hide the numbers text\n\t */\n\tfunction hideNumbers(){\n\t\t\n\t\tif(g_objNumbers)\n\t\t\tg_objNumbers.stop().fadeTo(g_temp.fadeDuration, 0);\n\t}\n\t\n\t\n\t/**\n\t * is mouse inside image\n\t */\n\tfunction isMouseInsideImage(){\n\t\tif(!g_temp.lastMouseX)\n\t\t\treturn(true);\n\t\tvar obj = {\n\t\t\t\tpageX: g_temp.lastMouseX, \n\t\t\t\tpageY: g_temp.lastMouseY\n\t\t\t};\n\t\n\t\tvar isMouseInside = g_objSlider.isMouseInsideSlideImage(obj);\n\t\t\n\t\treturn(isMouseInside);\n\t}\n\t\n\t\n\t/**\n\t * hide the arrows\n\t */\n\tfunction hideArrows(noAnimation, isForce){\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(false);\n\t\t\t\t\n\t\t//don't hide the arrows if mouse inside image\n\t\tif(g_temp.isArrowsOnHoverMode == true && isForce === false){\n\t\t\tif(isMouseInsideImage() == true);\n\t\t\t\treturn(true);\n\t\t}\n\t\t\n\t\tif(noAnimation === true){\n\t\t\tg_objArrowLeft.stop().fadeTo(0, 0);\n\t\t\tg_objArrowRight.stop().fadeTo(0, 0);\n\t\t}else{\n\t\t\tg_objArrowLeft.stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t\tg_objArrowRight.stop().fadeTo(g_temp.fadeDuration, 0);\n\t\t}\n\t\t\t\t\n\t}\n\t\n\t/**\n\t * get if the arrows are hidden\n\t */\n\tfunction isArrowsHidden(){\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(true);\n\t\tif(g_objArrowLeft.is(\":visible\") == false)\n\t\t\treturn(true);\n\t\t\n\t\tvar opacity = g_objArrowLeft.css(\"opacity\");\n\t\tif(opacity != 1)\n\t\t\treturn(true);\n\t\t\n\t\treturn(false);\n\t}\n\t\n\t/**\n\t * show the arrows\n\t */\n\tfunction showArrows(noStop, fromHover){\n\t\t\n\t\tif(!g_objArrowLeft)\n\t\t\treturn(false);\n\t\t\n\t\t//don't show every time on arrowsonhover mode\n\t\tif(g_temp.isArrowsOnHoverMode == true && fromHover !== true && isSliderImageInPlace() == true)\n\t\t\treturn(true);\n\t\t\n\t\t//don't show if swiping\n\t\tif(g_objSlider.isSwiping() == true)\n\t\t\treturn(true);\n\t\t\t\n\t\tif(noStop !== true){\n\t\t\tg_objArrowLeft.stop();\n\t\t\tg_objArrowRight.stop();\n\t\t}\n\t\t\n\t\tg_objArrowLeft.fadeTo(g_temp.fadeDuration, 1);\n\t\tg_objArrowRight.fadeTo(g_temp.fadeDuration, 1);\n\t\t\n\t}\n\n\t\n\t\n\t\n\t\n\t/**\n\t * show close button\n\t */\n\tfunction showCloseButton(noStop){\n\t\t\n\t\tif(noStop !== true)\n\t\t\tg_objButtonClose.stop();\n\t\t\n\t\tg_objButtonClose.fadeTo(g_temp.fadeDuration, 1);\n\t}\n\t\n\t\n\t/**\n\t * update text panel text of the curren item\n\t */\n\tfunction updateTextPanelText(currentItem){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tif(!currentItem)\n\t\t\tvar currentItem = g_objSlider.getCurrentItem();\n\t\t\n\t\tg_objTextPanel.setTextPlain(currentItem.title, currentItem.description);\n\t}\n\n\t\n\t/**\n\t * update numbers text\n\t */\n\tfunction updateNumbersText(currentItem){\n\t\t\n\t\tif(!g_objNumbers)\n\t\t\treturn(false);\n\t\t\n\t\tif(!currentItem)\n\t\t\tvar currentItem = g_objSlider.getCurrentItem();\n\t\t\n\t\tvar numItems = g_gallery.getNumItems();\n\t\tvar numCurrentItem = currentItem.index + 1;\n\t\tg_objNumbers.html(numCurrentItem + \" / \" + numItems);\n\t}\n\t\n\t\n\t/**\n\t * show the text panel\n\t */\n\tfunction showTextPanel(){\n\t\t\n\t\tif(!g_objTextPanel)\n\t\t\treturn(false);\n\t\t\n\t\tg_objTextPanel.getElement().show().stop().fadeTo(g_temp.fadeDuration, 1);\n\t\t\n\t}\n\n\t\n\t/**\n\t * Show the numbers object\n\t */\n\tfunction showNumbers(){\n\t\t\n\t\tif(g_objNumbers)\n\t\t\tg_objNumbers.stop().fadeTo(g_temp.fadeDuration, 1);\n\t}\n\t\n\t\n\tfunction __________EVENTS_________(){};\n\t\n\t\n\t/**\n\t * on start dragging slider item event. hide the elements\n\t */\n\tfunction onSliderDragStart(){\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\t\t\n\t\thideCompactElements();\n\t}\n\n\t\n\t/**\n\t * on zoom change\n\t * move the assets of compact to their places\n\t */\n\tfunction onZoomChange(){\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.positionFrom = \"onZoomChange\";\n\t\n\t\tpositionCloseButton(false, true);\n\t\tpositionArrowsInside(false, true);\n\t\t\n\t\t//handle compact text panel mode\n\t\tif(g_temp.isCompact == true){\n\t\t\tvar isImageInPlace = (g_objSlider.isCurrentSlideType(\"image\") && g_objSlider.isCurrentImageInPlace() == true);\n\t\t\tif(isImageInPlace == false){\n\t\t\t\thideTextPanel();\n\t\t\t\thideNumbers();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tg_temp.positionFrom = \"onZoomChange\";\n\t\t\t\tshowTextPanel();\n\t\t\t\tshowNumbers();\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\n\t/**\n\t * after return slider to it's place\n\t * show close button\n\t */\n\tfunction onSliderAfterReturn(){\n\t\t\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.positionFrom = \"onSliderAfterReturn\";\n\t\t\n\t\tpositionCloseButton(true);\n\t\tpositionArrowsInside(true);\n\t\t\n\t\tvar isChanged = handleCompactHeight();\n\t\tif(isChanged == false)\n\t\t\thandleCompactTextpanelSizes();\n\t\t\n\t\tshowTextPanel();\n\t\tshowNumbers();\n\t}\n\t\n\t\n\t/**\n\t * after put image to the slide\n\t * position compact elements\n\t */\n\tfunction onSliderAfterPutImage(data, objSlide){\n\t\t\t\t\n\t\tobjSlide = jQuery(objSlide);\n\t\t\t\t\n\t\tif(g_temp.isCompact == false)\n\t\t\treturn(true);\n\n\t\tif(g_objSlider.isSlideCurrent(objSlide) == false)\n\t\t\treturn(true);\n\t\t\t\t\n\t\tg_temp.positionFrom = \"onSliderAfterPutImage\";\n\t\t\n\t\tpositionCloseButton(true);\n\t\t\n\t\tpositionArrowsInside(true);\n\t\t\n\t\thandleCompactTextpanelSizes();\n\t}\n\t\n\t\n\t/**\n\t * on slider transition end, handle panel height\n\t */\n\tfunction onSliderTransitionEnd(){\n\t\t\n\t\tvar sliderOptions = g_objSlider.getOptions();\n\t\tvar imagePaddingTop = sliderOptions.slider_image_padding_top;\n\t\t\n\t\t//handle wide\n\t\tif(g_objTopPanel){\n\t\t\tvar panelHeight = g_objTopPanel.height();\n\t\t\t\n\t\t\tif(panelHeight != imagePaddingTop)\n\t\t\t\trefreshSliderItem(panelHeight);\n\t\t}\n\t\t\n\t\t//handle compact\n\t\tif(g_temp.isCompact == true){\n\t\t\t\n\t\t\tupdateTextPanelText();\n\t\t\tupdateNumbersText();\n\t\t\t\n\t\t\tg_temp.positionFrom = \"onSliderTransitionEnd\";\n\t\t\t\n\t\t\tpositionCloseButton(true);\n\t\t\tpositionArrowsInside(true);\n\n\t\t\tif(g_objSlider.isSlideActionActive() == false){\n\t\t\t\tvar isChanged = handleCompactHeight();\n\t\t\t\tif(isChanged == false)\n\t\t\t\t\thandleCompactTextpanelSizes();\n\t\t\t}\n\t\t\t\n\t\t\tshowTextPanel();\n\t\t\tshowNumbers();\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\t\n\t/**\n\t * on item change\n\t * update numbers text and text panel text/position\n\t */\n\tfunction onItemChange(data, currentItem){\n\t\t\n\t\tif(g_temp.isCompact == false){\t//wide mode\n\t\t\t\n\t\t\tif(g_objNumbers)\n\t\t\t\tupdateNumbersText(currentItem);\n\t\t\t\n\t\t\tif(g_objTextPanel){\n\t\t\t\tupdateTextPanelText(currentItem);\n\t\t\t\t\n\t\t\t\t//update panel height only if the lightbox is already opened, and the items changed within it.\n\t\t\t\tif(g_temp.isRightNowOpened == false){\n\t\t\t\t\tg_objTextPanel.positionElements(false);\n\t\t\t\t\thandlePanelHeight(\"onchange\");\n\t\t\t\t\tg_objTextPanel.positionPanel();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(g_objSlider.isAnimating() == false){\n\t\t\t\t\n\t\t\t\tif(g_objTextPanel)\n\t\t\t\t\tupdateTextPanelText(currentItem);\n\t\t\t\t\n\t\t\t\tif(g_objNumbers)\n\t\t\t\t\tupdateNumbersText(currentItem);\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//trigger lightbox init event\n\t\tif(g_temp.isSliderChangedOnce == false){\n\t\t\tg_temp.isSliderChangedOnce = true;\n\t\t\tg_objThis.trigger(t.events.LIGHTBOX_INIT);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on slider click\n\t */\n\tfunction onSliderClick(data, event){\n\t\t\n\t\tvar slideType = g_objSlider.getSlideType();\n\t\tif(slideType != \"image\" && g_temp.isCompact == false && g_objSlider.isSlideActionActive() )\n\t\t\treturn(true);\n\t\t\n\t\tvar isPreloading = g_objSlider.isPreloading();\n\t\tif(isPreloading == true){\n\t\t\tt.close(\"slider\");\n\t\t\treturn(true);\n\t\t}\n\t\t\n\t\t//close the lightbox on empty space click\n\t\tif(g_options.lightbox_close_on_emptyspace == true){\n\t\t\t\n\t\t\tvar isInside = g_objSlider.isMouseInsideSlideImage(event);\n\t\t\t\n\t\t\tif(isInside == false)\n\t\t\t\tt.close(\"slider_inside\");\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on lightbox resize\n\t */\n\tfunction onResize(){\n\t\t\n\t\tpositionElements();\n\t}\n\t\n\t\n\t\n\t/**\n\t * on start play - hide the side buttons\n\t */\n\tfunction onPlayVideo(){\n\t\t\n\t\tif(g_objTopPanel){\n\t\t\thideTopPanel();\n\t\t}else{\n\t\t\tif(g_objNumbers)\n\t\t\t\tg_objNumbers.hide();\n\t\t}\n\t\t\n\t\tif(g_objArrowLeft && g_options.lightbox_hide_arrows_onvideoplay == true){\n\t\t\tg_objArrowLeft.hide();\t\t\t\n\t\t\tg_objArrowRight.hide();\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on stop video - show the side buttons\n\t */\n\tfunction onStopVideo(){\n\n\t\tif(g_objTopPanel){\n\t\t\tshowTopPanel();\n\t\t\thandlePanelHeight(\"onStopVideo\");\n\t\t}else{\n\t\t\t\n\t\t\tif(g_objNumbers)\n\t\t\t\tg_objNumbers.show();\n\t\t}\n\t\t\n\t\tif(g_objArrowLeft && g_options.lightbox_hide_arrows_onvideoplay == true){\n\t\t\tg_objArrowLeft.show();\n\t\t\tg_objArrowRight.show();\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * on gallery keypres, do operations\n\t */\n\tfunction onKeyPress(data, key, event){\n\t\t\n\t\tvar isScrollKey = false;\n\t\t\n\t\tswitch(key){\n\t\t\tcase 27:\t\t//escape - close lightbox\n\t\t\t\tif(g_temp.isOpened == true)\n\t\t\t\t\tt.close(\"keypress\");\n\t\t\tbreak;\n\t\t\tcase 38:\t//up and down arrows\n\t\t\tcase 40:\n\t\t\tcase 33:\t//page up and down\n\t\t\tcase 34:\n\t\t\t\tisScrollKey = true;\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(g_temp.isOpened == true && isScrollKey == true)\n\t\t\tevent.preventDefault();\n\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * on image mouse enter event\n\t */\n\tfunction onImageMouseEnter(){\n\t\t\n\t\tif(g_temp.isArrowsOnHoverMode == true)\n\t\t\tshowArrows(false, true);\n\t\t\n\t}\n\t\n\t/**\n\t * on image mouse leave\n\t */\n\tfunction onImageMouseLeave(event){\n\t\t\n\t\tg_temp.positionFrom = \"hideCompactElements\";\n\t\t\n\t\tif(g_temp.isArrowsOnHoverMode == true && isSliderImageInPlace() == true)\n\t\t\thideArrows(false, true);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on mouse move event\n\t * show arrows if inside image\n\t */\n\tfunction onMouseMove(event){\n\t\t g_temp.lastMouseX = event.pageX;\n\t\t g_temp.lastMouseY = event.pageY;\n\t\t\n\t\t var isHidden = isArrowsHidden()\n\t\t \n\t\t \n\t\t if(isHidden == true && isMouseInsideImage() && g_objSlider.isAnimating() == false){\n\t\t\t g_temp.positionFrom = \"onMouseMove\";\n\t\t\t if(g_objArrowLeft && g_objArrowLeft.is(\":animated\") == false)\n\t\t\t\t showArrows(false, true);\n\t\t }\n\t\t \n\t}\n\n\t\n\t/**\n\t * on mouse wheel\n\t */\n\tfunction onMouseWheel(event, delta, deltaX, deltaY){\n\t\t\n\t\tif(g_temp.isOpened == false)\n\t\t\treturn(true);\n\t\t\n\t\tswitch(g_options.gallery_mousewheel_role){\n\t\t\tdefault:\n\t\t\tcase \"zoom\":\n\t\t\t\tvar slideType = g_objSlider.getSlideType();\n\t\t\t\tif(slideType != \"image\")\n\t\t\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\t\t\tcase \"none\":\n\t\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\t\t\tcase \"advance\":\n\t\t\t\tg_gallery.onGalleryMouseWheel(event, delta, deltaX, deltaY);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_objOverlay.on(\"touchstart\", function(event){\n\t\t\tevent.preventDefault();\n\t\t});\n\t\t\n\t\tg_objOverlay.on(\"touchend\", function(event){\n\t\t\tt.close(\"overlay\");\n\t\t});\n\t\t\n\t\t\n\t\tg_functions.addClassOnHover(g_objArrowRight, \"ug-arrow-hover\");\n\t\tg_functions.addClassOnHover(g_objArrowLeft, \"ug-arrow-hover\");\n\t\t\n\t\tg_functions.addClassOnHover(g_objButtonClose);\n\t\t\n\t\tg_gallery.setNextButton(g_objArrowRight);\n\t\tg_gallery.setPrevButton(g_objArrowLeft);\n\t\t\n\t\tg_objButtonClose.click(function(){\n\t\t\tt.close(\"button\");\n\t\t});\n\t\t\n\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, onItemChange);\n\t\t\n\t\tif(g_objSlider){\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.TRANSITION_END, onSliderTransitionEnd);\n\t\t\t\n\t\t\t//on slider click event\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.CLICK, onSliderClick);\n\t\t\t\n\t\t\t//on slider video \n\t\t\tvar objVideo = g_objSlider.getVideoObject();\n\t\t\t\t\t\n\t\t\tjQuery(objVideo).on(objVideo.events.PLAY_START, onPlayVideo);\n\t\t\tjQuery(objVideo).on(objVideo.events.PLAY_STOP, onStopVideo);\n\t\t\t\n\t\t\t//handle close button hide / appear\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.START_DRAG, onSliderDragStart);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.TRANSITION_START, onSliderDragStart);\n\t\t\t\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.AFTER_DRAG_CHANGE, onSliderAfterReturn);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.AFTER_RETURN, onSliderAfterReturn);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.AFTER_PUT_IMAGE, onSliderAfterPutImage);\n\t\t\t\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.ZOOM_CHANGE, onZoomChange);\n\t\t\t\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSEENTER, onImageMouseEnter);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSELEAVE, onImageMouseLeave);\n\n\t\t}\n\t\t\n\t\t//on resize\n\t\t jQuery(window).resize(function(){\n\t\t\t \n\t\t\t if(g_temp.isOpened == false)\n\t\t\t\t return(true);\n\t\t\t \n\t\t\t g_functions.whenContiniousEventOver(\"lightbox_resize\", onResize, 100);\n\t\t });\n\t\t \n\t\t g_objGallery.on(g_gallery.events.GALLERY_KEYPRESS, onKeyPress);\n\t\t \n\t\t //store last mouse x and y\n\t\t if(g_temp.isArrowsOnHoverMode == true){\n\t\t\t \n\t\t\t jQuery(document).bind('mousemove', onMouseMove);\n\t\t \n\t\t }\n\t\t\n\t\t//on mouse wheel - disable functionality if video\n\t\tg_objWrapper.on(\"mousewheel\", onMouseWheel);\n\n\t}\n\n\t\n\t/**\n\t * destroy the lightbox events and the html it created\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tjQuery(document).unbind(\"mousemove\");\n\t\t\n\t\tg_objOverlay.off(\"touchstart\");\n\t\tg_objOverlay.off(\"touchend\");\n\t\tg_objButtonClose.off(\"click\");\n\t\tg_objGallery.off(g_gallery.events.ITEM_CHANGE);\n\t\t\n\t\tif(g_objSlider){\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.TRANSITION_END);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.CLICK);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.START_DRAG);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.TRANSITION_START);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.AFTER_DRAG_CHANGE);\n\t\t\tjQuery(g_objSlider).off(g_objSlider.events.AFTER_RETURN);\n\t\t\t\n\t\t\tvar objVideo = g_objSlider.getVideoObject();\n\t\t\tjQuery(objVideo).off(objVideo.events.PLAY_START);\n\t\t\tjQuery(objVideo).off(objVideo.events.PLAY_STOP);\n\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSEENTER, onImageMouseEnter);\n\t\t\tjQuery(g_objSlider).on(g_objSlider.events.IMAGE_MOUSELEAVE, onImageMouseLeave);\n\t\t\t\n\t\t\tg_objSlider.destroy();\n\t\t}\n\t\t\n\t\tjQuery(window).unbind(\"resize\");\n\t\tg_objGallery.off(g_gallery.events.GALLERY_KEYPRESS, onKeyPress);\n\t\t\n\t\tg_objWrapper.off(\"mousewheel\");\n\t\t\n\t\t//remove the html\n\t\tg_objWrapper.remove();\n\t}\n\t\n\t\n\t/**\n\t * open the lightbox with some item index\n\t */\n\tthis.open = function(index){\n\t\t\n\t\tvar objItem = g_gallery.getItem(index);\n\t\t\n\t\tg_temp.isOpened = true;\n\t\t\n\t\t//set if the panel right now opened\n\t\tg_temp.isRightNowOpened = true;\n\t\tsetTimeout(function(){g_temp.isRightNowOpened = false},100);\n\t\t\n\t\tif(g_objSlider){\n\t\t\tg_objSlider.setItem(objItem, \"lightbox_open\");\n\t\t}\n\t\t\n\t\tif(g_objTextPanel){\n\t\t\tg_objTextPanel.setTextPlain(objItem.title, objItem.description);\n\t\t}\n\t\t\n\t\tg_objOverlay.stop().fadeTo(0,0);\n\t\tg_objWrapper.show();\n\t\tg_objWrapper.fadeTo(0,1);\n\t\t\n\t\t//show the overlay\n\t\tg_objOverlay.stop().fadeTo(g_temp.fadeDuration, g_options.lightbox_overlay_opacity);\n\t\t\n\t\tpositionElements();\n\t\t\n\t\tif(g_temp.isCompact == true){\n\t\t\t\n\t\t\tvar isPreloading = g_objSlider.isPreloading();\n\t\t\tif(isPreloading == true){\n\t\t\t\t\n\t\t\t\tactualHideCompactElements();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\t//hide only arrows if they are inside\n\t\t\t\tif(g_temp.isArrowsInside == true){\n\t\t\t\t\tg_objArrowLeft.hide();\n\t\t\t\t\tg_objArrowRight.hide();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.startSlideAction();\n\t\t\n\t\t//trigger gallery event\n\t\tg_objGallery.trigger(g_gallery.events.OPEN_LIGHTBOX, objItem);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * close the lightbox\n\t */\n\tthis.close = function(fromWhere){\n\t\t\t\t\n\t\tg_temp.isOpened = false;\n\t\t\n\t\tif(g_temp.isCompact == true)\n\t\t\thideCompactElements();\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.stopSlideAction();\n\t\t\n\t\tvar slideType = g_objSlider.getSlideType();\n\t\t\t\t\n\t\tif(slideType != \"image\")\n\t\t\tg_objWrapper.hide();\n\t\telse{\n\t\t\tg_objWrapper.fadeTo(g_temp.fadeDuration,0,function(){\n\t\t\t\tg_objWrapper.hide();\n\t\t\t});\n\t\t}\n\n\t\tg_objGallery.trigger(g_gallery.events.CLOSE_LIGHTBOX);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * external init function\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\t\n\t\tinitLightbox(gallery, customOptions);\n\t}\n\t\n\t\n\t/**\n\t * switch to wide mode from compact mode\n\t */\n\tfunction switchToWide(){\n\t\tg_temp.isCompact = false;\n\t\tmodifyOptions();\n\t\t\n\t\tg_temp.isArrowsInside = false;\n\t\tg_temp.isArrowsOnHoverMode = false;\n\t\n\t\tg_options = jQuery.extend({}, g_temp.originalOptions);\n\t\t\n\t\tg_options.lightbox_arrows_position = \"sides\";\n\t\t\n\t\tg_objSlider.setOptions(g_options);\n\t}\n\t\n\t\n\t/**\n\t * external put html function\n\t */\n\tthis.putHtml = function(){\n\t\t\n\t\t//check if switch to wide mode\n\t\tvar isSmallWindow = g_gallery.isSmallWindow();\n\t\t\n\t\tif(isSmallWindow && g_temp.isCompact == true)\n\t\t\tswitchToWide();\n\t\t\n\t\tputLightboxHtml();\n\t}\n\t\n\t\n\t/**\n\t * run lightbox elements\n\t */\n\tthis.run = function(){\n\t\t\n\t\tsetProperties();\n\t\t\n\t\tif(g_objSlider)\n\t\t\tg_objSlider.run();\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t\n}\n\n\n\n/**\n * carousel class\n */\nfunction UGCarousel(){\n\n\tvar t = this, g_objThis = jQuery(this);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery, g_objWrapper;\t\n\tvar g_functions = new UGFunctions(), g_arrItems, g_objTileDesign = new UGTileDesign();\n\tvar g_thumbs = new UGThumbsGeneral(), g_objCarouselWrapper, g_objInner, arrOrigTiles = [];\n\t\n\tvar g_options = {\n\t\t\tcarousel_padding: 8,\t\t\t\t\t\t\t//padding at the sides of the carousel\n\t\t\tcarousel_space_between_tiles: 20,\t\t\t\t//space between tiles\n\t\t\tcarousel_navigation_numtiles:3,\t\t\t\t\t//number of tiles to scroll when user clicks on next/prev button\n\t\t\tcarousel_scroll_duration:500,\t\t\t\t\t//duration of scrolling to tile\n\t\t\tcarousel_scroll_easing:\"easeOutCubic\",\t\t\t//easing of scrolling to tile animation\n\t\t\t\n\t\t\tcarousel_autoplay: true,\t\t\t\t\t\t//true,false - autoplay of the carousel on start\n\t\t\tcarousel_autoplay_timeout: 3000,\t\t\t\t//autoplay timeout\n\t\t\tcarousel_autoplay_direction: \"right\",\t\t\t//left,right - autoplay direction\n\t\t\tcarousel_autoplay_pause_onhover: true,\t\t\t//pause the autoplay on mouse over\n\t\t\tcarousel_vertical_scroll_ondrag: false\t\t\t//vertical screen scroll on carousel drag\n\t};\n\t\n\tthis.events = {\n\t\t\tSTART_PLAY: \"carousel_start_play\",\n\t\t\tPAUSE_PLAY: \"carousel_pause_play\",\n\t\t\tSTOP_PLAY: \"carousel_stop_play\"\n\t};\n\t\n\tvar g_temp = {\n\t\t\teventSizeChange: \"thumb_size_change\",\n\t\t\tisFirstTimeRun:true,  //if run once\n\t\t\tcarouselMaxWidth: null,\n\t\t\ttileWidth:0,\n\t\t\tinitTileWidth:0,\n\t\t\tinitTileHeight:0,\n\t\t\tsideSpace:1500,\t\t\t\t//the space that must be filled with items\n\t\t\tspaceActionSize:500,\n\t\t\tnumCurrent:0,\n\t\t\ttouchActive: false,\n\t\t\tstartInnerPos: 0,\n\t\t\tlastTime:0,\n\t\t\tstartTime:0,\n\t\t\tstartMousePos:0,\n\t\t\tlastMousePos:0,\n\t\t\tscrollShortDuration: 200,\n\t\t\tscrollShortEasing: \"easeOutQuad\",\n\t\t\thandle:null,\n\t\t\tisPlayMode: false,\n\t\t\tisPaused: false,\n\t\t\tstoredEventID: \"carousel\"\n\t};\n\n\t\n\tfunction __________GENERAL_________(){};\n\t\n\t/**\n\t * init the gallery\n\t */\n\tfunction init(gallery, customOptions){\n\t\t\n\t\tg_objects = gallery.getObjects();\n\t\tg_gallery = gallery;\n\t\tg_objGallery = jQuery(gallery);\n\t\tg_objWrapper = g_objects.g_objWrapper;\n\t\tg_arrItems = g_objects.g_arrItems;\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tg_objTileDesign.setFixedMode();\t\t\n\t\tg_objTileDesign.setApproveClickFunction(isApproveTileClick);\n\t\tg_objTileDesign.init(gallery, g_options);\n\t\t\n\t\tg_thumbs = g_objTileDesign.getObjThumbs();\n\t\tg_options = g_objTileDesign.getOptions();\n\t\t\n\t\tg_temp.initTileWidth = g_options.tile_width;\n\t\tg_temp.initTileHeight = g_options.tile_height;\n\t\t\n\t\tg_temp.tileWidth = g_options.tile_width;\n\t}\n\t\n\t\n\t/**\n\t * set the grid panel html\n\t */\n\tfunction setHtml(objParent){\n\t\t\n\t\tif(!objParent)\n\t\t\tvar objParent = g_objWrapper;\n\t\t\n\t\tvar html = \"<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>\";\n\t\tg_objWrapper.append(html);\n\t\t\n\t\tg_objCarouselWrapper = g_objWrapper.children(\".ug-carousel-wrapper\");\n\t\tg_objInner = g_objCarouselWrapper.children(\".ug-carousel-inner\");\n\t\t\n\t\tg_objTileDesign.setHtml(g_objInner);\n\t\t\n\t\tg_thumbs.getThumbs().fadeTo(0,1);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * resize tiles to new width / height\n\t */\n\tfunction resizeTiles(newTileWidth, newTileHeight){\n\t\t\n\t\tif(!newTileHeight){\n\t\t\t\n\t\t\tvar newTileHeight = g_temp.initTileHeight / g_temp.initTileWidth * newTileWidth;\n\t\t\t\n\t\t}\n\t\t\n\t\tg_temp.tileWidth = newTileWidth;\n\t\t\n\t\t//update all options\n\t\tvar optUpdate = {\n\t\t\t\ttile_width: newTileWidth, \n\t\t\t\ttile_height: newTileHeight\n\t\t};\n\t\t\n\t\tg_objTileDesign.setOptions(optUpdate);\n\t\t\n\t\tg_options.tile_width = newTileWidth;\n\t\tg_options.tile_height = newTileHeight;\n\t\t\n\t\t//resize all tiles\n\t\tg_objTileDesign.resizeAllTiles(newTileWidth);\n\t\t\n\t\t//reposition tiles\n\t\tpositionTiles(true);\t\t//must to position tiles right after size change, for inner size change\n\t}\n\t\n\t/**\n\t * run the gallery after init and set html\n\t */\n\tfunction run(){\n\t\t\n\t\t//validation\n\t\tif(g_temp.carouselMaxWidth === null){\n\t\t\tthrow new Error(\"The carousel width not set\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\t//if the size changed, change it anyway\n\t\tif(g_temp.tileWidth < g_temp.initTileWidth){\n\t\t\t\t\t\t\n\t\t\tvar newTileWidth = g_temp.carouselMaxWidth - g_options.carousel_padding * 2;\n\t\t\tif(newTileWidth > g_temp.initTileWidth)\n\t\t\t\tnewTileWidth = g_temp.initTileWidth;\n\t\t\t\n\t\t\tresizeTiles(newTileWidth);\n\t\t\t\n\t\t\tvar numTiles = g_functions.getNumItemsInSpace(g_temp.carouselMaxWidth, newTileWidth, g_options.carousel_space_between_tiles);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\t//check if need to lower tiles size\n\t\t\tvar numTiles = g_functions.getNumItemsInSpace(g_temp.carouselMaxWidth, g_temp.tileWidth, g_options.carousel_space_between_tiles);\n\t\t\t\n\t\t\t//if no tiles fit, resize the tiles\n\t\t\tif(numTiles <= 0){\n\t\t\t\tnumTiles = 1;\n\t\t\t\t\n\t\t\t\tvar newTileWidth = g_temp.carouselMaxWidth - g_options.carousel_padding * 2;\n\t\t\t\t\n\t\t\t\tresizeTiles(newTileWidth);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\t\t\n\t\t//set wrapper width\n\t\tvar realWidth = g_functions.getSpaceByNumItems(numTiles, g_temp.tileWidth, g_options.carousel_space_between_tiles);\n\t\trealWidth += g_options.carousel_padding * 2;\n\t\t\n\t\tg_objCarouselWrapper.width(realWidth);\n\t\t\n\t\tif(g_temp.isFirstTimeRun == true){\n\t\t\t\n\t\t\tinitEvents();\n\t\t\t\n\t\t\tg_objTileDesign.run();\n\t\t\t\n\t\t\t//set data indexes to tiles\n\t\t\tjQuery.each(g_arrItems, function(index, item){\n\t\t\t\titem.objThumbWrapper.data(\"index\", index);\n\n\t\t\t\tg_objWrapper.trigger(g_temp.eventSizeChange, [item.objThumbWrapper,true]);\n\t\t\t\titem.objTileOriginal = item.objThumbWrapper.clone(true, true);\n\t\t\t});\n\t\t\t\t\t\t\n\t\t\tpositionTiles(true);\t\t//set heights at first time\n\t\t\t\n\t\t\tif(g_options.carousel_autoplay == true)\n\t\t\t\tt.startAutoplay();\n\t\t}else{\n\t\t\t\n\t\t\tif(g_options.carousel_autoplay == true)\n\t\t\t\tt.pauseAutoplay();\n\t\t\t\n\t\t\tscrollToTile(0, false);\n\t\t\t\n\t\t\tif(g_options.carousel_autoplay == true)\n\t\t\t\tt.startAutoplay();\n\t\t}\n\t\t\n\t\tpositionElements();\n\t\t\n\t\tg_temp.isFirstTimeRun = false;\n\t}\n\t\n\t\n\t\n\tfunction __________GETTERS_______(){};\n\t\n\t/**\n\t * get inner position\n\t */\n\tfunction getInnerPos(){\n\t\treturn g_functions.getElementSize(g_objInner).left;\n\t}\n\t\n\t/**\n\t * get mouse position\n\t */\n\tfunction getMousePos(event){\n\t\treturn g_functions.getMousePosition(event).pageX;\n\t}\n\t\n\t\n\t/**\n\t * get all tiles\n\t */\n\tfunction getTiles(){\n\t\t\n\t\tvar objTiles = g_objInner.children(\".ug-thumb-wrapper\");\n\t\t\n\t\treturn(objTiles);\n\t}\n\t\n\t\n\t/**\n\t * get num tiles in some space\n\t */\n\tfunction getNumTilesInSpace(space){\n\t\t\n\t\tvar numItems = g_functions.getNumItemsInSpace(space, g_temp.tileWidth, g_options.carousel_space_between_tiles)\n\t\t\t\t\n\t\treturn(numItems);\n\t}\n\t\n\t\n\t/**\n\t * get num tiles\n\t */\n\tfunction getNumTiles(){\n\t\treturn getTiles().length;\n\t}\n\t\n\t\n\t/**\n\t * get tile\n\t */\n\tfunction getTile(numTile){\n\t\tvalidateTileNum(numTile);\n\t\tvar objTiles = getTiles();\n\t\tvar objTile = jQuery(objTiles[numTile]);\n\t\t\n\t\treturn(objTile);\n\t}\n\t\n\t\n\t/**\n\t * get first tile in the inner object\n\t */\n\tfunction getFirstTile(){\n\t\t\t\t\n\t\treturn g_objInner.children(\".ug-thumb-wrapper\").first();\n\t}\n\t\n\t/**\n\t * get last tile in the inner object\n\t */\n\tfunction getLastTile(){\n\t\t\n\t\treturn g_objInner.children(\".ug-thumb-wrapper\").last();\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * get clone of the time next or prev the given\n\t */\n\tfunction getTileClones(objTile, numClones, dir){\n\t\t\n\t\tvar index = objTile.data(\"index\");\n\t\tif(index == undefined){\n\t\t\tthrow new Error(\"every tile should have index!\");\t\t\t\n\t\t}\n\t\t\n\t\tvar arrClonedItems = [];\n\t\t\n\t\tfor(var i=0;i<numClones;i++){\t\t\t\n\t\t\t\n\t\t\tif(dir == \"prev\")\n\t\t\t\tvar itemToAdd = g_gallery.getPrevItem(index, true);\n\t\t\telse\n\t\t\t\tvar itemToAdd = g_gallery.getNextItem(index, true);\n\t\t\t\n\t\t\tif(!itemToAdd){\n\t\t\t\tthrow new Error(\"the item to add is empty\");\n\t\t\t}\n\t\t\t\n\t\t\tvar clonedTile = itemToAdd.objTileOriginal.clone(true, true);\n\t\t\t\n\t\t\t\n\t\t\tindex = itemToAdd.index;\t\n\t\t\t\n\t\t\tclonedTile.addClass(\"cloned\");\n\t\t\tarrClonedItems.push(clonedTile);\n\t\t}\n\t\t\n\t\treturn(arrClonedItems);\n\t}\n\t\n\t\n\t/**\n\t * get space left from the right\n\t */\n\tfunction getRemainSpaceRight(){\n\t\tvar wrapperSize = g_functions.getElementSize(g_objCarouselWrapper);\n\t\tvar innerSize = g_functions.getElementSize(g_objInner);\n\t\t\n\t\tvar spaceTaken = innerSize.width - wrapperSize.width + innerSize.left;\n\t\tvar spaceRemain = g_temp.sideSpace - spaceTaken;\n\t\t\t\t\n\t\treturn(spaceRemain);\n\t}\n\t\n\t\n\t/**\n\t * get remain space on the left\n\t */\n\tfunction getRemainSpaceLeft(){\n\t\tvar spaceTaken = -getInnerPos();\n\t\tvar spaceRemain = g_temp.sideSpace - spaceTaken;\n\t\treturn(spaceRemain);\n\t}\n\t\n\t/**\n\t * get carousel width\n\t */\n\tfunction getCarouselWidth(){\n\t\t\n\t\tvar objSize = g_functions.getElementSize(g_objCarouselWrapper);\n\t\treturn(objSize.width);\n\t}\n\t\n\t/**\n\t * get num tiles in the carousel\n\t */\n\tfunction getNumTilesInCarousel(){\n\t\t\n\t\tvar width = getCarouselWidth();\n\t\t\n\t\tvar numTiles = getNumTilesInSpace(width);\n\t\t\n\t\treturn(numTiles);\n\t}\n\t\n\t\n\tfunction __________OTHER_METHODS_______(){};\n\t\n\t\n\t/**\n\t * position existing tiles\n\t */\n\tfunction positionTiles(setHeight){\n\t\t\n\t\tif(!setHeight)\n\t\t\tvar setHeight = false;\n\t\t\n\t\tvar objTiles = getTiles();\n\t\t\t\t\n\t\tvar posx = 0;\n\t\tvar maxHeight = 0, totalWidth;\n\t\t\n\t\tjQuery.each(objTiles, function(index, objTile){\n\t\t\tobjTile = jQuery(objTile);\n\t\t\tg_functions.placeElement(objTile, posx, 0);\n\t\t\tvar tileSize = g_functions.getElementSize(objTile);\n\t\t\tposx += tileSize.width + g_options.carousel_space_between_tiles;\n\t\t\tmaxHeight = Math.max(maxHeight, tileSize.height);\n\t\t\tif(index == (objTiles.length-1))\n\t\t\t\ttotalWidth = tileSize.right;\n\t\t});\n\t\t\n\t\t//set heights and widths\n\t\tg_objInner.width(totalWidth);\n\t\t\t\t\n\t\tmaxHeight += g_options.carousel_padding * 2;\n\t\t\n\t\tif(setHeight === true){\n\t\t\tg_objInner.height(maxHeight);\n\t\t\tg_objCarouselWrapper.height(maxHeight);\n\t\t}\n\t\t\t\t\n\t\tscrollToTile(g_temp.numCurrent, false);\n\n\t\treturn(totalWidth);\n\t}\n\t\n\t\n\t/**\n\t * validate that the num not more then num tiles\n\t */\n\tfunction validateTileNum(numTile){\n\n\t\tif(numTile > (getTiles().length-1))\n\t\t\tthrow new Error(\"Wrogn tile number: \" + numTile);\n\t}\n\t\n\t\n\t/**\n\t * add tile to left\n\t */\n\tfunction addTiles(numTiles, dir){\n\t\t\n\t\tif(dir == \"left\")\n\t\t\tvar anchorTile = getFirstTile();\n\t\telse\n\t\t\tvar anchorTile = getLastTile();\n\t\t\n\t\tvar clonesType = (dir == \"left\")?\"prev\":\"next\";\n\t\t\n\t\tvar arrNewTiles = getTileClones(anchorTile, numTiles, clonesType);\n\t\t\t\t\n\t\tjQuery.each(arrNewTiles, function(index, objTile){\t\t\n\t\t\t\n\t\t\tif(dir == \"left\")\n\t\t\t\tg_objInner.prepend(objTile);\n\t\t\telse\n\t\t\t\tg_objInner.append(objTile);\n\t\t\t\n\t\t\tg_objWrapper.trigger(g_temp.eventSizeChange, objTile);\n\t\t\tg_objTileDesign.loadTileImage(objTile);\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * remove some tiles\n\t */\n\tfunction removeTiles(numTilesToRemove, direction){\n\t\t\n\t\tvalidateTileNum(numTiles);\n\t\t\n\t\tvar arrTiles = getTiles();\n\t\tvar numTiles = arrTiles.length;\n\t\t\n\t\tfor(var i=0; i<numTilesToRemove; i++){\n\t\t\t\n\t\t\tif(direction == \"left\")\n\t\t\t\tjQuery(arrTiles[i]).remove();\n\t\t\telse{\n\t\t\t\tjQuery(arrTiles[numTiles-1-i]).remove();\n\t\t\t}\n\t\t}\n\t}\n\n\t\n\t/**\n\t * set inner strip position\n\t */\n\tfunction setInnerPos(pos){\n\t\tvar objCss = {\n\t\t\t\t\"left\":pos+\"px\"\n\t\t};\n\t\t\n\t\tg_objInner.css(objCss);\n\t}\n\t\n\t\n\t/**\n\t * scroll to tile by number\n\t */\n\tfunction scrollToTile(numTile, isAnimation, isShort){\n\t\t\n\t\tif(isAnimation === undefined){\n\t\t\tvar isAnimation = true;\n\t\t\tif(g_objInner.is(\":animated\"))\n\t\t\t\treturn(true);\n\t\t}\n\t\t\t\t\n\t\tvar objTile = getTile(numTile);\n\t\tvar objSize = g_functions.getElementSize(objTile);\n\t\tvar posScroll = -objSize.left + g_options.carousel_padding;\n\t\t\n\t\tvar objCss = {\n\t\t\t\t\"left\":posScroll+\"px\"\n\t\t};\n\t\t\t\t\t\t\n\t\tif(isAnimation === true){\n\t\t\t\n\t\t\tvar duration = g_options.carousel_scroll_duration;\n\t\t\tvar easing = g_options.carousel_scroll_easing;\n\t\t\t\n\t\t\tif(isShort === true){\n\t\t\t\tduration = g_temp.scrollShortDuration;\n\t\t\t\teasing = g_temp.scrollShortEasing;\n\t\t\t}\n\t\t\t\n\t\t\tg_objInner.stop(true).animate(objCss ,{\n\t\t\t\tduration: duration,\n\t\t\t\teasing: easing,\n\t\t\t\tqueue: false,\n\t\t\t\t//progress:function(){t.triggerStripMoveEvent()},\n\t\t\t\tcomplete: function(){\n\t\t\t\t\tg_temp.numCurrent = numTile;\n\t\t\t\t\t\n\t\t\t\t\tfillSidesWithTiles(true);\n\t\t\t\t}\n\t\t\t});\t\t\t\t\t\n\t\t\t\n\t\t}else{\n\t\t\tg_temp.numCurrent = numTile;\n\t\t\t\t\t\t\n\t\t\tg_objInner.css(objCss);\n\t\t}\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * get number of neerest tile\n\t */\n\tfunction getNeerestTileNum(){\n\t\tvar innerPos = -getInnerPos();\n\t\tvar numTiles = getNumTilesInSpace(innerPos);\n\t\tvar tile1Pos = g_functions.getElementSize(getTile(numTiles)).left;\n\t\tvar tile2Pos = g_functions.getElementSize(getTile(numTiles+1)).left;\n\t\t\t\t\n\t\tif(Math.abs(tile1Pos - innerPos) < Math.abs(tile2Pos - innerPos))\n\t\t\treturn(numTiles);\n\t\telse\t\t\t\n\t\t\treturn(numTiles+1);\n\t}\n\t\n\t\n\t/**\n\t * get neerest tile to inner position\n\t */\n\tfunction scrollToNeerestTile(){\n\t\t\n\t\tvar tileNum = getNeerestTileNum();\n\t\tscrollToTile(tileNum, true, true);\n\t}\n\t\n\t\n\t/**\n\t * fill the sides with tiles till it fil the sideSpace\n\t */\n\tfunction fillSidesWithTiles(){\n\t\t\t\t\n\t\tvar spaceLeft = getRemainSpaceLeft();\n\t\tvar spaceRight = getRemainSpaceRight();\n\t\t\n\t\tvar numItemsLeft = 0, numItemsRight = 0, numItemsRemoveLeft = 0, numItemsRemoveRight = 0;\n\t\t\n\t\t//trace(\"left: \" + spaceLeft+ \" right: \" + spaceRight);\n\t\t\n\t\tvar numTiles = getNumTiles();\n\t\t\n\t\t//add tiles to left\n\t\tif(spaceLeft > g_temp.spaceActionSize){\n\t\t\tnumItemsLeft = getNumTilesInSpace(spaceLeft);\t\t\n\t\t\taddTiles(numItemsLeft, \"left\");\n\t\t\t\n\t\t\tg_temp.numCurrent += numItemsLeft;\n\t\t\t\n\t\t}else if(spaceLeft < -g_temp.spaceActionSize){\n\t\t\tvar numItemsRemoveLeft = getNumTilesInSpace(Math.abs(spaceLeft));\n\t\t\tremoveTiles(numItemsRemoveLeft, \"left\");\n\t\t\tg_temp.numCurrent -= numItemsRemoveLeft;\n\t\t}\n\t\t\n\t\t//add tiles to right\n\t\tif(spaceRight > g_temp.spaceActionSize){\n\t\t\tnumItemsRight = getNumTilesInSpace(spaceRight);\n\t\t\taddTiles(numItemsRight, \"right\");\t\t\t\n\t\t}else if(spaceRight < -g_temp.spaceActionSize){\n\t\t\tnumItemsRemoveRight = getNumTilesInSpace(Math.abs(spaceRight));\n\t\t\tremoveTiles(numItemsRemoveRight, \"right\");\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//small validation\n\t\tif(numItemsRemoveRight > numTiles){\n\t\t\t\n\t\t\tthrow new Error(\"Can't remove more then num tiles\");\n\t\t}\n\t\t\t\n\t\t//trace(numItemsRemoveRight);\n\t\t//trace(\"numItems: \" + getNumTiles());\n\t\t\n\t\t//scroll to tile and position inner object\n\t\tvar isPositioned = false;\n\t\tif(numItemsLeft || numItemsRight || numItemsRemoveLeft || numItemsRemoveRight){\n\t\t\t\n\t\t\t/*\n\t\t\tdebugLine({\n\t\t\t\tnumItemsLeft:numItemsLeft,\n\t\t\t\tnumItemsRight:numItemsRight,\n\t\t\t\tnumItemsRemoveLeft:numItemsRemoveLeft,\n\t\t\t\tnumItemsRemoveRight: numItemsRemoveRight\n\t\t\t});\n\t\t\t*/\n\t\t\t//trace(\"do something\");\n\t\t\t\n\t\t\tpositionTiles();\t\t\t\n\t\t\tisPositioned = true\n\t\t}\n\t\t\n\t\treturn(isPositioned);\n\t}\n\t\n\t\n\t/**\n\t * position tiles\n\t */\n\tfunction positionElements(isFirstTime){\n\t\t\t\t\n\t\t//position inner strip\n\t\tg_functions.placeElement(g_objInner, 0, g_options.carousel_padding);\n\t\t\n\t\t//position sides\n\t\tfillSidesWithTiles();\n\t\t\n\t}\n\t\n\t\n\t\n\tfunction __________AUTOPLAY_______(){};\n\n\t/**\n\t * start autoplay\n\t */\n\tthis.startAutoplay = function(){\n\t\t\n\t\tg_temp.isPlayMode = true;\n\t\tg_temp.isPaused = false;\n\t\t\n\t\tg_objThis.trigger(t.events.START_PLAY);\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_temp.handle = setInterval(autoplayStep, g_options.carousel_autoplay_timeout);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * unpause autoplay after pause\n\t */\n\tthis.unpauseAutoplay = function(){\n\t\t\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isPaused == false)\n\t\t\treturn(true);\n\t\t\n\t\tt.startAutoplay();\n\t}\n\t\n\t\n\t/**\n\t * pause the autoplay\n\t */\n\tthis.pauseAutoplay = function(){\n\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPaused = true;\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_objThis.trigger(t.events.PAUSE_PLAY);\n\t\t\n\t}\n\n\t\n\t/**\n\t * stop autoplay\n\t */\n\tthis.stopAutoplay = function(){\n\t\t\n\t\tif(g_temp.isPlayMode == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.isPaused = false;\n\t\tg_temp.isPlayMode = false;\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_objThis.trigger(t.events.STOP_PLAY);\n\t}\n\t\n\t\n\t/**\n\t * autoplay step, advance the carousel by 1\n\t */\n\tfunction autoplayStep(){\n\t\t\n\t\tif(g_options.carousel_autoplay_direction == \"left\"){\n\t\t\tt.scrollRight(1);\n\t\t}else{\n\t\t\tt.scrollLeft(1);\n\t\t}\n\t\t\n\t}\n\t\n\tfunction __________EVENTS_______(){};\n\t\t\n\t\n\t/**\n\t * on touch start\n\t */\n\tfunction onTouchStart(event){\n\t\t\n\t\tif(g_temp.touchActive == true)\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.touchActive = true;\n\t\t\n\t\tt.pauseAutoplay();\n\t\t\n\t\tg_temp.startTime = jQuery.now();\t\n\t\tg_temp.startMousePos = getMousePos(event);\n\t\tg_temp.startInnerPos = getInnerPos();\n\t\tg_temp.lastTime = g_temp.startTime;\n\t\tg_temp.lastMousePos = g_temp.startMousePos;\n\t\t\n\t\tg_functions.storeEventData(event, g_temp.storedEventID);\n\t}\n\n\t\n\t/**\n\t * on touch move\n\t */\n\tfunction onTouchMove(event){\n\t\t\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\tg_functions.updateStoredEventData(event, g_temp.storedEventID);\n\t\t\n\t\tevent.preventDefault();\n\t\t\n\t\tvar scrollDir = null;\n\t\t\n\t\tif(g_options.carousel_vertical_scroll_ondrag == true)\n\t\t\tscrollDir = g_functions.handleScrollTop(g_temp.storedEventID);\n\t\t\n\t\tif(scrollDir === \"vert\")\n\t\t\treturn(true);\n\t\t\n\t\tg_temp.lastMousePos = getMousePos(event);\n\t\t\n\t\tvar diff = g_temp.lastMousePos - g_temp.startMousePos;\n\t\tvar innerPos = g_temp.startInnerPos + diff;\n\t\tvar direction = (diff > 0) ? \"prev\":\"next\";\n\t\tvar innerSize = g_functions.getElementSize(g_objInner).width;\n\t\t\n\t\t//slow down when off limits\n\t\tif(innerPos > 0 && direction == \"prev\"){\n\t\t\tinnerPos = innerPos / 3;\n\t\t}\n\t\t\n\t\tif(innerPos < -innerSize && direction == \"next\"){\n\t\t\tinnerPos = g_temp.startInnerPos + diff / 3;\n\t\t}\n\t\t\n\t\tsetInnerPos(innerPos);\n\t}\n\t\n\t\n\t/**\n\t * on touch end\n\t * change panes or return to current pane\n\t */\n\tfunction onTouchEnd(event){\n\t\t\n\t\tif(g_temp.touchActive == false)\n\t\t\treturn(true);\n\t\t\n\t\t//event.preventDefault();\n\t\tg_temp.touchActive = false;\n\t\t\n\t\tscrollToNeerestTile();\n\t\t\n\t\tt.unpauseAutoplay();\n\t}\n\t\n\t/**\n\t * pause the playing\n\t */\n\tfunction onMouseEnter(event){\n\t\t\n\t\tif(g_options.carousel_autoplay_pause_onhover == false)\n\t\t\treturn(true);\n\t\t\n\t\tif(g_temp.isPlayMode == true && g_temp.isPaused == false)\n\t\t\tt.pauseAutoplay();\n\t}\n\t\n\t/**\n\t * start the playing again\n\t */\n\tfunction onMouseLeave(event){\n\t\t\n\t\tif(g_options.carousel_autoplay_pause_onhover == false)\n\t\t\treturn(true);\n\t\t\n\t\tt.unpauseAutoplay();\n\t}\n\t\n\t\n\t/**\n\t * init panel events\n\t */\n\tfunction initEvents(){\n\t\t\t\t\n\t\tg_objTileDesign.initEvents();\n\t\t\n\t\t//touch drag events\n\t\t//slider mouse down - drag start\n\t\tg_objCarouselWrapper.bind(\"mousedown touchstart\",onTouchStart);\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").bind(\"mousemove touchmove\",onTouchMove);\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").bind(\"mouseup touchend\", onTouchEnd);\n\t\t\n\t\tg_objCarouselWrapper.hover(onMouseEnter, onMouseLeave);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the carousel events\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_temp.handle)\n\t\t\tclearInterval(g_temp.handle);\n\t\t\n\t\tg_objThis.off(t.events.START_PLAY);\t\t\n\t\tg_objThis.off(t.events.STOP_PLAY);\t\t\n\t\t\n\t\t//touch drag events\n\t\t//slider mouse down - drag start\n\t\tg_objCarouselWrapper.unbind(\"mousedown\");\n\t\tg_objCarouselWrapper.unbind(\"touchstart\");\n\t\t\n\t\t//on body move\n\t\tjQuery(\"body\").unbind(\"mousemove\");\n\t\tjQuery(\"body\").unbind(\"touchmove\");\n\t\t\n\t\t//on body mouse up - drag end\n\t\tjQuery(window).add(\"body\").unbind(\"mouseup\").unbind(\"touchend\");\n\t\t\n\t\tg_objCarouselWrapper.off(\"mouseenter\").off(\"mouseleave\");\n\t\t\n\t\tg_objTileDesign.destroy();\n\t}\n\n\t\n\t/**\n\t * init function for avia controls\n\t */\n\tthis.init = function(gallery, customOptions, width){\n\t\tif(width)\n\t\t\tthis.setMaxWidth(width);\n\t\t\n\t\tinit(gallery, customOptions);\n\t}\n\n\t\n\t/**\n\t * set the width\n\t */\n\tthis.setMaxWidth = function(width){\n\t\t\n\t\tg_temp.carouselMaxWidth = width;\n\t}\n\t\n\t\n\t/**\n\t * set html\n\t */\n\tthis.setHtml = function(objParent){\n\t\tsetHtml(objParent);\n\t}\n\t\n\t/**\n\t * get the carousel element\n\t */\n\tthis.getElement = function(){\n\t\treturn g_objCarouselWrapper;\n\t}\n\t\n\t/**\n\t * get tile design object\n\t */\n\tthis.getObjTileDesign = function(){\n\t\treturn(g_objTileDesign);\n\t}\n\t\n\t\n\t/**\n\t * get estimated height\n\t */\n\tthis.getEstimatedHeight = function(){\n\t\tvar height = g_options.tile_height + g_options.carousel_padding * 2;\n\t\treturn(height);\n\t}\n\t\n\t\n\t/**\n\t * set html and properties\n\t */\t\n\tthis.run = function(){\n\t\trun();\n\t}\n\t\n\t\n\t/**\n\t * scroll to right\n\t */\n\tthis.scrollRight = function(tilesToScroll){\n\t\t\n\t\tif(!tilesToScroll || typeof tilesToScroll == \"object\")\n\t\t\tvar tilesToScroll = g_options.carousel_navigation_numtiles;\n\n\t\tvar numTilesInCarousel = getNumTilesInCarousel();\n\t\tif(tilesToScroll > numTilesInCarousel)\n\t\t\ttilesToScroll = numTilesInCarousel;\n\t\t\n\t\tvar numPrev = g_temp.numCurrent - tilesToScroll;\n\t\tif(numPrev <=0)\n\t\t\tnumPrev = 0;\n\t\t\n\t\tscrollToTile(numPrev);\n\t}\n\t\n\t\n\t/**\n\t * scroll to left\n\t */\n\tthis.scrollLeft = function(tilesToScroll){\n\t\t\t\t\n\t\tif(!tilesToScroll || typeof tilesToScroll == \"object\")\n\t\t\tvar tilesToScroll = g_options.carousel_navigation_numtiles;\n\t\t\n\t\tvar numTilesInCarousel = getNumTilesInCarousel();\n\t\tif(tilesToScroll > numTilesInCarousel)\n\t\t\ttilesToScroll = numTilesInCarousel;\n\t\t\n\t\tvar numTiles = getNumTiles();\n\t\t\n\t\tvar numNext = g_temp.numCurrent + tilesToScroll;\n\t\tif(numNext >= numTiles)\n\t\t\tnumNext = numTiles-1;\n\t\n\t\tscrollToTile(numNext);\n\t}\n\t\n\t/**\n\t * set scroll left button\n\t */\n\tthis.setScrollLeftButton = function(objButton){\n\t\tg_functions.setButtonMobileReady(objButton);\n\t\tg_functions.setButtonOnClick(objButton, t.scrollLeft);\n\t}\n\t\n\t\n\t/**\n\t * set scroll right button\n\t */\n\tthis.setScrollRightButton = function(objButton){\n\t\tg_functions.setButtonMobileReady(objButton);\n\t\tg_functions.setButtonOnClick(objButton, t.scrollRight);\n\t}\n\t\n\t\n\t/**\n\t * set scroll right button\n\t */\n\tthis.setPlayPauseButton = function(objButton){\n\t\tg_functions.setButtonMobileReady(objButton);\n\t\t\n\t\tif(g_temp.isPlayMode == true && g_temp.isPaused == false){\n\t\t\tobjButton.addClass(\"ug-pause-icon\");\t\t\t\n\t\t}\n\t\t\n\t\tg_objThis.on(t.events.START_PLAY, function(){\n\t\t\tobjButton.addClass(\"ug-pause-icon\");\n\t\t});\n\t\t\n\t\tg_objThis.on(t.events.STOP_PLAY, function(){\n\t\t\tobjButton.removeClass(\"ug-pause-icon\");\n\t\t});\n\t\t\n\t\tg_functions.setButtonOnClick(objButton, function(){\n\t\t\t\t\n\t\t\t\tif(g_temp.isPlayMode == false || g_temp.isPaused == true)\t\t\t\t\t\n\t\t\t\t\tt.startAutoplay();\n\t\t\t\telse\n\t\t\t\t\tt.stopAutoplay();\n\t\t\t\t\n\t\t});\n\t}\n\t\n\t\n\t/**\n\t * return if passed some significant movement\n\t */\n\tfunction isApproveTileClick(){\n\t\t\n\t\tvar passedTime = g_temp.lastTime - g_temp.startTime;\t\t\n\t\tvar passedDistanceAbs = Math.abs(g_temp.lastMousePos - g_temp.startMousePos);\n\t\t\n\t\tif(passedTime > 300)\n\t\t\treturn(false);\n\t\t\n\t\tif(passedDistanceAbs > 30)\n\t\t\treturn(false);\n\t\t\n\t\treturn(true);\n\t}\n\t\n\t\n}\n\n\n\n/**\n tabs panel class addon to unite gallery\n */\nfunction UGTabs(){\n\t\n\tvar t = this, g_objThis = jQuery(this),g_objGallery;\n\tvar g_gallery = new UniteGalleryMain(), g_functions = new UGFunctions();\n\tvar g_objTabs, g_objSelect;\n\t\n\n\tvar g_options = {\n\t\ttabs_type:\"tabs\",\t\t\t\t\t//tabs type: tabs, select\n\t\ttabs_container: \"#ug_tabs\",\t\t\t//tabs container\n\t\ttabs_class_selected: \"ug-tab-selected\"\n\t};\n\t\n\tthis.events = {\n\t\t\n\t};\n\t\n\t\n\t/**\n\t * init tabs function\n\t */\n\tfunction initTabs(gallery, customOptions){\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_objGallery = jQuery(g_gallery);\n\t\t\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tif(g_options.tabs_type == \"select\")\n\t\t\tg_objSelect = jQuery(g_options.tabs_container);\n\t\telse\n\t\t\tg_objTabs = jQuery(g_options.tabs_container + \" .ug-tab\");\n\t\t\n\t}\n\t\n\t\n\t\n\t/**\n\t * run the tabs\n\t */\n\tfunction runTabs(){\n\t\t\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n\t/**\n\t * request new gallery items\n\t */\n\tfunction requestGalleryItems(catid){\n\t\t\n\t\tg_gallery.requestNewItems(catid);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on tab click\n\t */\n\tfunction onTabClick(){\n\t\t\n\t\tvar classSelected = g_options.tabs_class_selected;\n\t\t\n\t\tvar objTab = jQuery(this);\n\t\tif(objTab.hasClass(classSelected))\n\t\t\treturn(true);\n\t\t\n\t\tg_objTabs.not(objTab).removeClass(classSelected);\n\t\tobjTab.addClass(classSelected);\n\t\t\n\t\tvar catID = objTab.data(\"catid\");\n\t\tif(!catID)\n\t\t\treturn(true);\n\t\t\n\t\trequestGalleryItems(catID);\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * on select change\n\t */\n\tfunction onSelectChange(){\n\t\tvar objSelect = jQuery(this);\n\t\tvar catID = objSelect.val();\n\t\t\n\t\tif(!catID)\n\t\t\treturn(true);\n\t\t\n\t\trequestGalleryItems(catID);\n\t}\n\t\n\t\n\t/**\n\t * init tabs events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tif(g_options.tabs_type == \"select\")\n\t\t\tg_objSelect.change(onSelectChange);\n\t\telse\n\t\t\tg_objTabs.click(onTabClick);\n\t}\n\t\n\t/**\n\t * destroy\n\t */\n\tthis.destroy = function(){\n\t\t\n\t\tif(g_objSelect)\n\t\t\tg_objSelect.off(\"change\");\n\t\t\n\t\tif(g_objTabs)\n\t\t\tg_objTabs.off(\"click\");\n\t}\n\t\n\t\n\t/**\n\t * outer init function, move to inner init\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\tinitTabs(gallery, customOptions);\n\t}\n\t\n\t\n\t/**\n\t * run the tabs\n\t */\n\tthis.run = function(){\n\t\t\n\t\trunTabs();\n\t}\n\t\n\t\n}\n\n\n/**\n * API Class\n * addon to Unite gallery\n */\nfunction UG_API(gallery){\n\t\n\tvar t = this, g_objThis = jQuery(t);\n\tvar g_gallery = new UniteGalleryMain(), g_objGallery;\n\tvar g_arrEvents = [];\n\t\n\tg_gallery = gallery;\n\tg_objGallery = jQuery(gallery);\n\t\n\t\n\tthis.events = {\n\t\t\tAPI_INIT_FUNCTIONS:\"api_init\",\n\t\t\tAPI_ON_EVENT:\"api_on_event\"\n\t}\n\t\n\t\n\t/**\n\t * get item data for output\n\t */\n\tfunction convertItemDataForOutput(item){\n\t\t\n\t\tvar output = {\n\t\t\t\tindex: item.index,\n\t\t\t\ttitle: item.title,\n\t\t\t\tdescription: item.description,\n\t\t\t\turlImage: item.urlImage,\n\t\t\t\turlThumb: item.urlThumb\n\t\t\t};\n\t\t\t\n\t\t\t//add aditional variables to the output\n\t\t\tvar addData = item.objThumbImage.data();\n\t\t\t\n\t\t\tfor(var key in addData){\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"image\":\n\t\t\t\t\tcase \"description\":\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toutput[key] = addData[key];\n\t\t\t}\n\t\t\t\n\t\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * event handling function\n\t */\n\tthis.on = function(event, handlerFunction, notCache){\n\t\t\n\t\t//remember cache\n\t\tif(notCache !== true){\n\t\t\tg_arrEvents.push({event:event,func:handlerFunction});\n\t\t}\n\t\t\n\t\tswitch(event){\n\t\t\tcase \"item_change\":\n\t\t\t\t\n\t\t\t\tg_objGallery.on(g_gallery.events.ITEM_CHANGE, function(){\n\t\t\t\t\t\tvar currentItem = g_gallery.getSelectedItem();\n\t\t\t\t\t\tvar output = convertItemDataForOutput(currentItem);\n\t\t\t\t\t\thandlerFunction(output.index, output);\n\t\t\t\t});\n\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"resize\":\n\t\t\t\tg_objGallery.on(g_gallery.events.SIZE_CHANGE, handlerFunction);\n\t\t\tbreak;\n\t\t\tcase \"enter_fullscreen\":\n\t\t\t\tg_objGallery.on(g_gallery.events.ENTER_FULLSCREEN, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"exit_fullscreen\":\n\t\t\t\tg_objGallery.on(g_gallery.events.EXIT_FULLSCREEN, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"play\":\n\t\t\t\tg_objGallery.on(g_gallery.events.START_PLAY, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"stop\":\n\t\t\t\tg_objGallery.on(g_gallery.events.STOP_PLAY, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"pause\":\n\t\t\t\tg_objGallery.on(g_gallery.events.PAUSE_PLAYING, handlerFunction);\t\t\t\t\n\t\t\tbreak;\n\t\t\tcase \"continue\":\n\t\t\t\tg_objGallery.on(g_gallery.events.CONTINUE_PLAYING, handlerFunction);\n\t\t\tbreak;\n\t\t\tcase \"open_lightbox\":\n\t\t\t\tg_objGallery.on(g_gallery.events.OPEN_LIGHTBOX, handlerFunction);\n\t\t\tbreak;\n\t\t\tcase \"close_lightbox\":\n\t\t\t\tg_objGallery.on(g_gallery.events.CLOSE_LIGHTBOX, handlerFunction);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif(console)\n\t\t\t\t\tconsole.log(\"wrong api event: \" + event);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tg_objGallery.trigger(t.events.API_ON_EVENT, [event, handlerFunction]);\n\t}\n\t\n\t\n\t/**\n\t * start playing \n\t */\n\tthis.play = function(){\t\t\n\t\tg_gallery.startPlayMode();\t\t\n\t}\n\t\n\t\n\t/**\n\t * stop playing\n\t */\n\tthis.stop = function(){\n\t\tg_gallery.stopPlayMode();\n\t}\n\t\n\t\n\t/**\n\t * toggle playing\n\t */\n\tthis.togglePlay = function(){\n\t\tg_gallery.togglePlayMode();\n\t}\n\t\n\t\n\t/**\n\t * enter fullscreen\n\t */\n\tthis.enterFullscreen = function(){\n\t\tg_gallery.toFullScreen();\n\t}\n\t\n\t/**\n\t * exit fullscreen\n\t */\n\tthis.exitFullscreen = function(){\n\t\tg_gallery.exitFullScreen();\n\t}\n\t\n\t/**\n\t * toggle fullscreen\n\t */\n\tthis.toggleFullscreen = function(){\n\t\t\n\t\tg_gallery.toggleFullscreen();\t\t\n\t}\n\t\n\t\n\t/**\n\t * reset zoom\n\t */\n\tthis.resetZoom = function(){\n\t\tvar objSlider = g_gallery.getObjSlider();\n\t\tif(!objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tobjSlider.zoomBack();\n\t}\n\t\n\t\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomIn = function(){\n\t\t\n\t\tvar objSlider = g_gallery.getObjSlider();\n\t\tif(!objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tobjSlider.zoomIn();\t\t\n\t}\n\n\t/**\n\t * zoom in\n\t */\n\tthis.zoomOut = function(){\n\t\t\n\t\tvar objSlider = g_gallery.getObjSlider();\n\t\tif(!objSlider)\n\t\t\treturn(false);\n\t\t\n\t\tobjSlider.zoomOut();\t\t\n\t}\n\t\n\t/**\n\t * next item\n\t */\n\tthis.nextItem = function(){\n\t\tg_gallery.nextItem();\n\t}\n\t\n\t\n\t/**\n\t * prev item\n\t */\n\tthis.prevItem = function(){\n\t\tg_gallery.prevItem();\n\t}\n\t\n\t/**\n\t * go to some item by index (0-numItems)\n\t */\n\tthis.selectItem = function(numItem){\n\t\t\n\t\tg_gallery.selectItem(numItem);\n\t\n\t}\n\t\n\t\n\t/**\n\t * resize the gallery to some width (height).\n\t */\n\tthis.resize = function(width, height){\n\t\t\n\t\tif(height)\n\t\t\tg_gallery.resize(width, height);\n\t\telse\n\t\t\tg_gallery.resize(width);\n\t}\n\t\n\t\n\t/**\n\t * get some item by index\n\t */\n\tthis.getItem = function(numItem){\n\t\t\n\t\tvar data = g_gallery.getItem(numItem);\n\t\tvar output = convertItemDataForOutput(data);\n\t\t\n\t\treturn(output);\n\t}\n\t\n\t\n\t/**\n\t * get number of items in the gallery\n\t */\n\tthis.getNumItems = function(){\n\t\tvar numItems = g_gallery.getNumItems();\n\t\treturn(numItems);\n\t}\n\t\n\t/**\n\t * refresh gallery with another options\n\t */\n\tthis.reloadGallery = function(customOptions){\n\t\tif(!customOptions)\n\t\t\tvar customOptions = {};\n\t\t\n\t\tg_gallery.run(null, customOptions);\n\t\t\n\t\t//restore events:\n\t\tg_arrEvents.map(function(obj){\n\t\t\tt.on(obj.event,obj.func,true);\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * destroy the gallery\n\t */\n\tthis.destroy = function(){\n\t\tg_gallery.destroy();\n\t}\n\t\n\t//trigger api on init event\n\tg_objGallery.trigger(t.events.API_INIT_FUNCTIONS, t);\n\t\n}\n\n/**\n loadmore panel class addon to unite gallery\n */\nfunction UGLoadMore(){\n\t\n\tvar t = this, g_objThis = jQuery(this),g_objGallery;\n\tvar g_gallery = new UniteGalleryMain(), g_functions = new UGFunctions();\n\tvar g_objWrapper, g_objButton, g_objLoader, g_objError;\n\t\n\tvar g_temp = {\n\t\t\tisInited:false\n\t}\n\t\n\tvar g_options = {\n\t\tloadmore_container: \"ug_loadmore_wrapper\"\t\t\t//tabs container\n\t};\n\t\n\t\n\tthis.events = {\n\t\t\n\t};\n\t\n\t\n\t/**\n\t * init wrapper\n\t */\n\tfunction initObjects(){\n\t\t\n\t\tg_objWrapper = jQuery(\"#\"+g_options.loadmore_container);\n\t\tif(g_objWrapper.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tg_objButton = g_objWrapper.find(\".ug-loadmore-button\");\n\t\tif(g_objButton.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tg_objLoader = g_objWrapper.find(\".ug-loadmore-loader\");\n\t\tif(g_objLoader.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tg_objError = g_objWrapper.find(\".ug-loadmore-error\");\n\t\tif(g_objError.length == 0)\n\t\t\treturn(false);\n\t\t\n\t\tg_temp.isInited = true;\n\t}\n\t\n\t\n\t/**\n\t * show loadmore\n\t */\n\tfunction showLoadmore(){\n\t\t\n\t\tg_objWrapper.show();\n\t}\n\t\n\t\n\t/**\n\t * on loadore click event\n\t */\n\tfunction onLoadmoreClick(){\n\t\t\n\t\tg_objButton.hide();\n\t\tg_objLoader.show();\n\t\t\n\t\tvar data = {\n\t\t\t\tnumitems:g_gallery.getNumItems()\n\t\t};\n\t\t\n\t\tg_gallery.ajaxRequest(\"front_loadmore\", data, function(response){\n\t\t\t\n\t\t\tg_objLoader.hide();\n\t\t\t\n\t\t\tvar htmlItems = response.html_items;\n\t\t\tvar showLoadmore = response.show_loadmore;\n\t\t\t\n\t\t\tif(showLoadmore == true){\n\t\t\t\tg_objButton.blur().show();\n\t\t\t\tg_objLoader.hide();\n\t\t\t}else{\n\t\t\t\tg_objWrapper.hide();\n\t\t\t}\n\t\t\t\n\t\t\tg_gallery.addItems(htmlItems);\n\t\t\t\t\t\t\n\t\t},function(errorText){\n\t\t\terrorText = \"Ajax Error!\" + errorText;\n\t\t\t\n\t\t\tg_objLoader.hide();\n\t\t\tg_objError.show();\n\t\t\tg_objError.html(errorText);\n\t\t\t\n\t\t});\n\t\t\n\t}\n\t\n\t\n\t/**\n\t * init events\n\t */\n\tfunction initEvents(){\n\t\t\n\t\tg_gallery.onEvent(\"tiles_first_placed\", showLoadmore);\n\t\t\n\t\tg_objButton.click(onLoadmoreClick);\n\t}\n\t\n\t\n\t/**\n\t * destroy\n\t */\n\tthis.destroy = function(){\n\t\tif(g_temp.isInited == false)\n\t\t\treturn(false);\n\t}\n\t\n\t\n\t/**\n\t * init the loadmore button\n\t */\n\tthis.init = function(gallery, customOptions){\n\t\tg_gallery = gallery;\n\t\t\n\t\tg_objGallery = jQuery(g_gallery);\n\t\tg_options = jQuery.extend(g_options, customOptions);\n\t\t\n\t\tinitObjects();\n\t\t\n\t\tif(g_temp.isInited == false){\n\t\t\ttrace(\"load more not inited, something is wrong\");\n\t\t\treturn(false);\n\t\t}\n\t\t\n\t\tinitEvents();\n\t}\n\t\n\t\n}\n"],"sourceRoot":"scripts/"}
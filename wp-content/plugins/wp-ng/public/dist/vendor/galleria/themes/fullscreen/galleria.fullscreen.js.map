{"version":3,"sources":["galleria.fullscreen.js"],"names":["$","Galleria","addTheme","name","version","author","css","defaults","transition","imageCrop","thumbCrop","easing","trueFullscreen","_hideDock","TOUCH","_closeOnClick","init","options","requires","this","addElement","appendChild","tab","loader","thumbs","list","infotext","info","OPEN","POS","IE","zIndex","position","backgroundColor","hasVariation","opacity","top","thumbnails","hide","fixCaption","proxy","img","w","width","Math","min","window","getOptions","outerWidth","height","outerHeight","bind","getStageHeight","getActiveImage","e","cached","show","fadeTo","thumbTarget","parent","siblings","children","fadeOut","toggle","hasInfo","imageTarget","on","trigger","addIdleState","get","hover","animate","toggleClass","not","stop","enterFullscreen","attachKeyboard","escape","up","preventDefault","down","jQuery"],"mappings":"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","file":"galleria.fullscreen.js","sourcesContent":["/**\n * Galleria Classic Theme 2017-02-27\n * http://galleria.io\n *\n * Copyright (c) 2010 - 2017 worse is better UG\n * Licensed 2017-02-27 under the MIT license\n * https://raw.github.com/worseisbetter/galleria/master/LICENSE\n *\n */\n\n(function($) {\n\n/*global jQuery, Galleria, window */\n\nGalleria.addTheme({\n    name: 'fullscreen',\n    version: '1.5.4',\n    author: 'Galleria',\n    css: 'galleria.fullscreen.css',\n    // begin site script\n    defaults: {\n        transition: 'none',\n        imageCrop: true,\n        thumbCrop: 'height',\n        easing: 'galleriaOut',\n        trueFullscreen: false,\n\n        // set this to false if you want to keep the thumbnails:\n        _hideDock: Galleria.TOUCH ? false : true,\n\n        // set this to true if you want to shrink the carousel when clicking a thumbnail:\n        _closeOnClick: false\n    },\n    init: function(options) {\n\n        Galleria.requires( 1.5, 'This version of Fullscreen theme requires Galleria version 1.5 or later');\n\n        this.addElement('thumbnails-tab');\n        this.appendChild('thumbnails-container', 'thumbnails-tab');\n\n        var tab      = this.$('thumbnails-tab'),\n            loader   = this.$('loader'),\n            thumbs   = this.$('thumbnails-container'),\n            list     = this.$('thumbnails-list'),\n            infotext = this.$('info-text'),\n            info     = this.$('info'),\n            OPEN     = !options._hideDock,\n            POS      = 0;\n            \n        if (Galleria.IE) {\n            this.addElement('iefix');\n            this.appendChild('container', 'iefix');\n            this.$('iefix').css({\n                zIndex: 3,\n                position: 'absolute',\n                backgroundColor: this.hasVariation('light') ? '#fff' : '#000',\n                opacity: 0.4,\n                top: 0\n            });\n        }\n\n        if ( options.thumbnails === false ) {\n            thumbs.hide();\n        }\n\n        var fixCaption = this.proxy(function(img) {\n\n            var w = img.width || $(img).width();\n\n            if (!(img || w)) {\n                return;\n            }\n            w = Math.min(w, $(window).width());\n            infotext.width(w - 40);\n            if (Galleria.IE && this.getOptions('showInfo')) {\n                this.$('iefix').width(info.outerWidth()).height(info.outerHeight());\n            }\n        });\n\n        this.bind('rescale', function() {\n            POS = this.getStageHeight() - tab.height() - 2;\n            thumbs.css('top', OPEN ? POS - list.outerHeight() + 2 : POS);\n            var img = this.getActiveImage();\n            if (img) {\n                fixCaption(img);\n            }\n        });\n\n        this.bind('loadstart', function(e) {\n            if (!e.cached) {\n                loader.show().fadeTo(100, 1);\n            }\n            $(e.thumbTarget).css('opacity', 1).parent().siblings().children().css('opacity', 0.6);\n        });\n\n        this.bind('loadfinish', function(e) {\n            loader.fadeOut(300);\n            this.$('info, iefix').toggle(this.hasInfo());\n        });\n\n        this.bind('image', function(e) {\n            e.imageTarget && fixCaption(e.imageTarget);\n        });\n\n        this.bind('thumbnail', function(e) {\n            $(e.thumbTarget).parent(':not(.active)').children().css('opacity', 0.6);\n            $(e.thumbTarget).on('click:fast', function() {\n                if (OPEN && options._closeOnClick) {\n                    tab.trigger('click:fast');\n                }\n            });\n        });\n\n        this.trigger('rescale');\n\n        if ( !Galleria.TOUCH ) {\n\n            this.addIdleState(thumbs, { opacity: 0 });\n            this.addIdleState(this.get('info'), { opacity: 0 });\n\n            this.$('image-nav-left, image-nav-right').css('opacity', 0.01).hover(function() {\n                $(this).animate({opacity: 1}, 100);\n            }, function() {\n                $(this).animate({opacity: 0});\n            }).show();\n\n        }\n\n        if (Galleria.IE) {\n            this.addIdleState(this.get('iefix'), { opacity: 0 });\n        }\n\n        if (options._hideDock) {\n            tab.on('click:fast', this.proxy(function() {\n                tab.toggleClass('open', !OPEN);\n                if (!OPEN) {\n                    thumbs.animate({\n                        top: POS - list.outerHeight() + 2\n                    }, 400, options.easing);\n                } else {\n                    thumbs.animate({\n                        top: POS\n                    }, 400, options.easing);\n                }\n                OPEN = !OPEN;\n            }));\n        } else {\n            this.bind('thumbnail', function() {\n                thumbs.css('top', POS - list.outerHeight() + 2);\n            });\n            tab.css('visibility', 'hidden');\n        }\n\n        this.$('thumbnails').children().hover(function() {\n            $(this).not('.active').children().stop().fadeTo(100, 1);\n        }, function() {\n            $(this).not('.active').children().stop().fadeTo(400, 0.6);\n        });\n\n        this.enterFullscreen();\n        this.attachKeyboard({\n            escape: function(e) {\n                return false;\n            },\n            up: function(e) {\n                if (!OPEN) {\n                    tab.trigger('click:fast');\n                }\n                e.preventDefault();\n            },\n            down: function(e) {\n                if (OPEN) {\n                    tab.trigger('click:fast');\n                }\n                e.preventDefault();\n            }\n        });\n    }\n    // end site script\n});\n\n}(jQuery));\n"],"sourceRoot":"scripts/"}
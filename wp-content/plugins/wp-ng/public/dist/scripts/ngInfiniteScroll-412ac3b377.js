!function(n,e){if("function"==typeof define&&define.amd)define(["module","exports","angular"],e);else if("undefined"!=typeof exports)e(module,exports,require("angular"));else{var t={exports:{}};e(t,t.exports,n.angular),n.infiniteScroll=t.exports}}(this,function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,L=(i=t)&&i.__esModule?i:{default:i};var l="infinite-scroll";L.default.module(l,[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(E,T,y,C){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(i,l,n){var o=L.default.element(T),r=null,c=null,u=null,f=null,e=!0,a=!1,t=null,d=!1;function s(n){var e=n[0]||n;return isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function m(n){var e=n[0]||n;return isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function S(n){if(n[0].getBoundingClientRect&&!n.css("none"))return n[0].getBoundingClientRect().top+m(n)}function p(){var n=void 0,e=void 0;if(f===o)n=s(f)+m(f[0].document.documentElement),e=S(l)+s(l);else{n=s(f);var t=0;void 0!==S(f)&&(t=S(f)),e=S(l)-t+s(l)}a&&(e=s((l[0].ownerDocument||l[0].document).documentElement)),e-n<=s(f)*r+1?(u=!0,c&&(i.$$phase||E.$$phase?i.infiniteScroll():i.$apply(i.infiniteScroll))):(d&&y.cancel(d),u=!1)}var v=null!=C?function(t,i){var l=null,o=0;function r(){return o=(new Date).getTime(),y.cancel(l),l=null,t.call()}return function(){var n=(new Date).getTime(),e=i-(n-o);e<=0?(y.cancel(l),l=null,o=n,t.call()):l||(l=y(r,e,1))}}(p,C):p;function g(n){r=parseFloat(n)||0}function $(n){(c=!n)&&u&&(u=!1,v())}function h(n){a=n}function w(n){null!=f&&f.unbind("scroll",v),null!=(f=n)&&f.bind("scroll",v)}function D(n){if(null!=n&&0!==n.length){var e=void 0;if(null==(e=n.nodeType&&1===n.nodeType?L.default.element(n):"function"==typeof n.append?L.default.element(n[n.length-1]):"string"==typeof n?L.default.element(document.querySelector(n)):n))throw new Error("invalid infinite-scroll-container attribute.");w(e)}}return i.$on("$destroy",function(){f.unbind("scroll",v),null!=t&&(t(),t=null),d&&y.cancel(d)}),i.$watch("infiniteScrollDistance",g),g(i.infiniteScrollDistance),i.$watch("infiniteScrollDisabled",$),$(i.infiniteScrollDisabled),i.$watch("infiniteScrollUseDocumentBottom",h),h(i.infiniteScrollUseDocumentBottom),w(o),i.infiniteScrollListenForEvent&&(t=E.$on(i.infiniteScrollListenForEvent,v)),i.$watch("infiniteScrollContainer",D),D(i.infiniteScrollContainer||[]),null!=n.infiniteScrollParent&&w(L.default.element(l.parent())),null!=n.infiniteScrollImmediateCheck&&(e=i.$eval(n.infiniteScrollImmediateCheck)),d=y(function(){return e&&v(),y.cancel(d)})}}}]),e.default=l,n.exports=e.default});
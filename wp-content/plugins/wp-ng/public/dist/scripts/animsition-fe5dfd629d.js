!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(f){"use strict";var h="animsition",v={init:function(o){o=f.extend({inClass:"fade-in",outClass:"fade-out",inDuration:1500,outDuration:800,linkElement:".animsition-link",loading:!0,loadingParentElement:"body",loadingClass:"animsition-loading",loadingInner:"",timeout:!1,timeoutCountdown:5e3,onLoadEvent:!0,browser:["animation-duration","-webkit-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"body",transition:function(t){window.location.href=t}},o),v.settings={timer:!1,data:{inClass:"animsition-in-class",inDuration:"animsition-in-duration",outClass:"animsition-out-class",outDuration:"animsition-out-duration",overlay:"animsition-overlay"},events:{inStart:"animsition.inStart",inEnd:"animsition.inEnd",outStart:"animsition.outStart",outEnd:"animsition.outEnd"}};var t=v.supportCheck.call(this,o);return t||!(0<o.browser.length)||t&&this.length?(v.optionCheck.call(this,o)&&f("."+o.overlayClass).length<=0&&v.addOverlay.call(this,o),o.loading&&f("."+o.loadingClass).length<=0&&v.addLoading.call(this,o),this.each(function(){var a=this,t=f(this),n=f(window),i=f(document);t.data(h)||(o=f.extend({},o),t.data(h,{options:o}),o.timeout&&v.addTimer.call(a),o.onLoadEvent&&n.on("load."+h,function(){v.settings.timer&&clearTimeout(v.settings.timer),v.in.call(a)}),n.on("pageshow."+h,function(t){t.originalEvent.persisted&&v.in.call(a)}),n.on("unload."+h,function(){}),i.on("click."+h,o.linkElement,function(t){t.preventDefault();var n=f(this),i=n.attr("href");2===t.which||t.metaKey||t.shiftKey||-1!==navigator.platform.toUpperCase().indexOf("WIN")&&t.ctrlKey?window.open(i,"_blank"):v.out.call(a,n,i)}))})):("console"in window||(window.console={},window.console.log=function(t){return t}),this.length||console.log("Animsition: Element does not exist on page."),t||console.log("Animsition: Does not support this browser."),v.destroy.call(this))},addOverlay:function(t){f(t.overlayParentElement).prepend('<div class="'+t.overlayClass+'"></div>')},addLoading:function(t){f(t.loadingParentElement).append('<div class="'+t.loadingClass+'">'+t.loadingInner+"</div>")},removeLoading:function(){var t=f(this).data(h).options;f(t.loadingParentElement).children("."+t.loadingClass).fadeOut().remove()},addTimer:function(){var t=this,n=f(this).data(h).options;v.settings.timer=setTimeout(function(){v.in.call(t),f(window).off("load."+h)},n.timeoutCountdown)},supportCheck:function(t){var n=f(this),i=t.browser,a=i.length,o=!1;0===a&&(o=!0);for(var e=0;e<a;e++)if("string"==typeof n.css(i[e])){o=!0;break}return o},optionCheck:function(t){var n=f(this);return!(!t.overlay&&!n.data(v.settings.data.overlay))},animationCheck:function(t,n,i){var a=f(this).data(h).options,o=typeof t,e=!n&&"number"===o,s=n&&"string"===o&&0<t.length;return e||s?t=t:n&&i?t=a.inClass:!n&&i?t=a.inDuration:n&&!i?t=a.outClass:n||i||(t=a.outDuration),t},in:function(){var t=this,n=f(this),i=n.data(h).options,a=n.data(v.settings.data.inDuration),o=n.data(v.settings.data.inClass),e=v.animationCheck.call(t,a,!1,!0),s=v.animationCheck.call(t,o,!0,!0),l=v.optionCheck.call(t,i),r=n.data(h).outClass;i.loading&&v.removeLoading.call(t),r&&n.removeClass(r),l?v.inOverlay.call(t,s,e):v.inDefault.call(t,s,e)},inDefault:function(t,n){var i=f(this);i.css({"animation-duration":n+"ms"}).addClass(t).trigger(v.settings.events.inStart).animateCallback(function(){i.removeClass(t).css({opacity:1}).trigger(v.settings.events.inEnd)})},inOverlay:function(t,n){var i=f(this),a=i.data(h).options;i.css({opacity:1}).trigger(v.settings.events.inStart),f(a.overlayParentElement).children("."+a.overlayClass).css({"animation-duration":n+"ms"}).addClass(t).animateCallback(function(){i.trigger(v.settings.events.inEnd)})},out:function(t,n){var i=this,a=f(this),o=a.data(h).options,e=t.data(v.settings.data.outClass),s=a.data(v.settings.data.outClass),l=t.data(v.settings.data.outDuration),r=a.data(v.settings.data.outDuration),d=e||s,u=l||r,c=v.animationCheck.call(i,d,!0,!1),m=v.animationCheck.call(i,u,!1,!1),g=v.optionCheck.call(i,o);a.data(h).outClass=c,g?v.outOverlay.call(i,c,m,n):v.outDefault.call(i,c,m,n)},outDefault:function(t,n,i){var a=f(this),o=a.data(h).options;a.css({"animation-duration":n+1+"ms"}).addClass(t).trigger(v.settings.events.outStart).animateCallback(function(){a.trigger(v.settings.events.outEnd),o.transition(i)})},outOverlay:function(t,n,i){var a=f(this),o=a.data(h).options,e=a.data(v.settings.data.inClass),s=v.animationCheck.call(this,e,!0,!0);f(o.overlayParentElement).children("."+o.overlayClass).css({"animation-duration":n+1+"ms"}).removeClass(s).addClass(t).trigger(v.settings.events.outStart).animateCallback(function(){a.trigger(v.settings.events.outEnd),o.transition(i)})},destroy:function(){return this.each(function(){var t=f(this);f(window).off("."+h),t.css({opacity:1}).removeData(h)})}};f.fn.animateCallback=function(n){var i="animationend webkitAnimationEnd";return this.each(function(){var t=f(this);t.on(i,function(){return t.off(i),n.call(this)})})},f.fn.animsition=function(t){return v[t]?v[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void f.error("Method "+t+" does not exist on jQuery."+h):v.init.apply(this,arguments)}});
!function(u){"use strict";function e(o,s){return{restrict:"EA",require:"^vPages",transclude:!0,controller:t,scope:{isDisabled:"=?ngDisabled",id:"@?"},link:function(n,i,e,t,a){function c(){o.addClass(i,s.states.active)}a(n.$parent.$new(),function(e,t){t.$page=n.internalControl,n.id&&(t.$page.id=n.id),i.append(e)}),e.$set("role","tabpanel"),n.pagesCtrl=t,n.pageElement=i,t.addPage(n),u.isDefined(e.disabled)&&(n.isDisabled=!0),n.$watch("isActive",function(e,t){if(e===t)return!1;e?c():o.removeClass(i,s.states.active)}),n.$evalAsync(function(){n.isActive&&c()})}}}function t(e){var t=this;t.isActive=function(){return!!e.isActive},t.activate=function(){e.pagesCtrl.activate(e)},e.internalControl={activate:t.activate,isActive:t.isActive}}function n(c){var i=this;c.pages=[],i.getPagesId=function(){return c.id},i.getPageByIndex=function(e){return c.pages[e]},i.getPageIndex=function(e){return c.pages.indexOf(e)},i.getPageIndexById=function(e){for(var t=c.pages.length,n=null,i=0;i<t;i++){var a=c.pages[i];a.id&&a.id===e&&(n=i)}return n},i.addPage=function(e){c.pages.push(e),c.activeIndex===i.getPageIndex(e)&&i.activate(e)},i.next=function(){var e=c.activeIndex+1;e>c.pages.length-1&&(e=0),c.activeIndex=e},i.previous=function(){var e=c.activeIndex-1;e<0&&(e=c.pages.length-1),c.activeIndex=e},i.activate=function(t){t&&(t.isActive||(t.isActive=!0,u.forEach(c.pages,function(e){e!==t&&e.isActive&&(e.isActive=!1)})))},c.$watch("activeIndex",function(e,t){if(e!==t){var n=i.getPageByIndex(e);if(n.isDisabled)return c.activeIndex=u.isDefined(t)?t:0,!1;i.activate(n)}}),c.internalControl={next:function(){i.next()},previous:function(){i.previous()},activate:function(e){u.isString(e)?c.activeIndex=i.getPageIndexById(e):c.activeIndex=e}}}function i(d,v){return{restrict:"EA",require:"^vTabs",transclude:!0,controller:a,scope:{isDisabled:"=?ngDisabled",id:"@?"},link:function(n,i,e,t,a){function c(){d.addClass(i,v.states.active),i.attr({"aria-selected":"true",tabindex:"0"})}function o(){d.removeClass(i,v.states.active),i.attr({"aria-selected":"false",tabindex:"-1"})}function s(){if(n.isDisabled||n.isInactive)return!1;n.$apply(function(){t.activate(n)})}function r(e){if(n.isDisabled)return!1;32===e.keyCode||13===e.keyCode?(n.$apply(function(){t.activate(n)}),e.preventDefault()):39===e.keyCode?(t.focusNext(),e.preventDefault()):37===e.keyCode&&(t.focusPrevious(),e.preventDefault())}a(n.$parent.$new(),function(e,t){t.$tab=n.internalControl,n.id&&(t.$tab.id=n.id),i.append(e)}),e.$set("role","tab"),n.isInactive=u.isDefined(e.inactive),n.tabsCtrl=t,n.tabElement=i,n.focus=function(){i[0].focus()},t.addTab(n),u.isDefined(e.disabled)&&(n.isDisabled=!0),n.$watch("isActive",function(e,t){if(e===t)return!1;e?c():o()}),i.on("click",s),i.on("keydown",r),i[0].onfocus=function(){n.$apply(function(){n.isFocused=!0})},i[0].onblur=function(){n.$apply(function(){n.isFocused=!1})},n.$on("$destroy",function(){i.off("click",s),i.off("keydown",r),i[0].onfocus=null,i[0].onblur=null}),n.$evalAsync(function(){n.isActive?c():o()})}}}function a(e){this.isActive=function(){return!!e.isActive},this.activate=function(){e.tabsCtrl.activate(e)},e.internalControl={activate:this.activate,isActive:this.isActive}}function c(c){var i=this;c.tabs=[],i.getTabsId=function(){return c.id},i.getTabByIndex=function(e){return c.tabs[e]},i.getTabIndex=function(e){return c.tabs.indexOf(e)},i.getTabIndexById=function(e){for(var t=c.tabs.length,n=null,i=0;i<t;i++){var a=c.tabs[i];a.id&&a.id===e&&(n=i)}return n},i.addTab=function(e){c.tabs.push(e),c.activeIndex===i.getTabIndex(e)&&i.activate(e)},i.focusNext=function(){for(var e=c.tabs.length,t=0;t<e;t++){if(c.tabs[t].isFocused){var n=t+1;n>c.tabs.length-1&&(n=0),c.tabs[n].focus();break}}},i.focusPrevious=function(){for(var e=c.tabs.length,t=0;t<e;t++){if(c.tabs[t].isFocused){var n=t-1;n<0&&(n=c.tabs.length-1),c.tabs[n].focus();break}}},i.next=function(){var e=c.activeIndex+1;e>c.tabs.length-1&&(e=0),c.activeIndex=e},i.previous=function(){var e=c.activeIndex-1;e<0&&(e=c.tabs.length-1),c.activeIndex=e},i.activate=function(t){t&&(t.isActive||(t.isActive=!0,c.activeIndex=i.getTabIndex(t),u.forEach(c.tabs,function(e){e!==t&&e.isActive&&(e.isActive=!1)})))},c.$watch("activeIndex",function(e,t){if(e!==t){var n=i.getTabByIndex(e);if(n.isDisabled)return c.activeIndex=u.isDefined(t)?t:0,!1;i.activate(n)}}),c.internalControl={next:function(){i.next()},previous:function(){i.previous()},activate:function(e){u.isString(e)?c.activeIndex=i.getTabIndexById(e):c.activeIndex=e}}}u.module("vTabs.config",[]).constant("tabsConfig",{states:{active:"is-active"}}).constant("pagesConfig",{states:{active:"is-active"}}),u.module("vTabs.directives",[]),u.module("vTabs",["vTabs.config","vTabs.directives"]),u.module("vTabs.directives").directive("vPage",e),e.$inject=["$animate","pagesConfig"],t.$inject=["$scope"],u.module("vTabs.directives").directive("vPages",function(){return{restrict:"EA",transclude:!0,scope:{activeIndex:"=?active",control:"=?",id:"@?"},controller:n,controllerAs:"pagesCtrl",link:function(n,i,e,t,a){if(a(n.$parent.$new(),function(e,t){t.$pages=n.internalControl,n.id&&(t.$pages.id=n.id),i.append(e)}),u.isDefined(n.control)){u.forEach(["next","previous","activate"],function(e){if(n.control[e])throw new Error("The `"+e+"` method can not be overwritten")});var c=u.extend({},n.internalControl,n.control);n.control=n.internalControl=c}else n.control=n.internalControl;u.isDefined(n.activeIndex)&&u.isNumber(n.activeIndex)||(n.activeIndex=0),n.$applyAsync(function(){var e=u.isDefined(t.getPagesId())?t.getPagesId()+":onReady":"vPages:onReady";n.$emit(e)})}}}),n.$inject=["$scope"],u.module("vTabs.directives").directive("vTab",i),i.$inject=["$animate","tabsConfig"],a.$inject=["$scope"],u.module("vTabs.directives").directive("vTabs",function(){return{restrict:"EA",transclude:!0,scope:{activeIndex:"=?active",control:"=?",id:"@?"},controller:c,controllerAs:"tabsCtrl",link:function(n,i,e,t,a){if(a(n.$parent.$new(),function(e,t){t.$tabs=n.internalControl,n.id&&(t.$tabs.id=n.id),i.append(e)}),u.isDefined(n.activeIndex)&&u.isNumber(n.activeIndex)||(n.activeIndex=0),u.isDefined(n.control)){u.forEach(["next","previous","activate"],function(e){if(n.control[e])throw new Error("The `"+e+"` method can not be overwritten")});var c=u.extend({},n.internalControl,n.control);n.control=n.internalControl=c}else n.control=n.internalControl;n.$applyAsync(function(){var e=u.isDefined(t.getTabsId())?t.getTabsId()+":onReady":"vTabs:onReady";n.$emit(e)})}}}),c.$inject=["$scope"]}(angular);
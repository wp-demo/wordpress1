!function(h){"use strict";var e=h.module("rc-videogular.plugins.youtube",[]);e.run(["$rootScope","$window",function(e,t){e.youtubeApiReady=!1,t.onYouTubeIframeAPIReady=function(){e.$apply(function(){e.youtubeApiReady=!0})};var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}]),e.directive("vgYoutube",["$rootScope","$window","$timeout","$interval","VG_UTILS","VG_STATES","VG_VOLUME_KEY",function(y,p,v,e,E,g,S){return{restrict:"A",require:"^videogular",link:function(e,t,n,r){var a,i,o,u,l=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;function c(e){return e.match(l)[2]}function d(){r.onUpdateTime({target:r.mediaElement[0]})}function m(){i&&clearInterval(i)}function s(){if(r.mediaElement[0].__defineGetter__("currentTime",function(){return a.getCurrentTime()}),r.mediaElement[0].__defineSetter__("currentTime",function(e){return a.seekTo(e,!0)}),r.mediaElement[0].__defineGetter__("duration",function(){return a.getDuration()}),r.mediaElement[0].__defineGetter__("paused",function(){return a.getPlayerState()!=YT.PlayerState.PLAYING}),r.mediaElement[0].__defineGetter__("videoWidth",function(){return a.a.width}),r.mediaElement[0].__defineGetter__("videoHeight",function(){return a.a.height}),r.mediaElement[0].__defineGetter__("volume",function(){return a.getVolume()/100}),r.mediaElement[0].__defineSetter__("volume",function(e){return a.setVolume(100*e)}),r.mediaElement[0].__defineGetter__("playbackRate",function(){return a.getPlaybackRate()}),r.mediaElement[0].__defineSetter__("playbackRate",function(e){return a.setPlaybackRate(e)}),r.mediaElement[0].play=function(){a.playVideo()},r.mediaElement[0].pause=function(){a.pauseVideo()},d(),h.element(a.getIframe()).css({width:"100%",height:"100%"}),E.supportsLocalStorage()&&r.setVolume(parseFloat(p.localStorage.getItem(S)||"1")),r.currentState!==g.PLAY){var e=new CustomEvent("canplay");r.mediaElement[0].dispatchEvent(e),!0===r.autoPlay&&v(function(){r.play()})}else a.playVideo()}function f(e){var t;e.target;switch(e.data){case YT.PlayerState.ENDED:m(),r.onComplete();break;case YT.PlayerState.PLAYING:var n=new CustomEvent("playing");r.mediaElement[0].dispatchEvent(n),r.setState(g.PLAY),t=600,i&&m(),i=setInterval(d,t);break;case YT.PlayerState.PAUSED:r.currentState==g.PLAY&&r.setState(g.PAUSE),m();break;case YT.PlayerState.BUFFERING:var a=new CustomEvent("waiting");r.mediaElement[0].dispatchEvent(a);break;case YT.PlayerState.CUED:}}function _(e){var t,n;(n=e)&&n.match(l)?(t=e,a?a.cueVideoById({videoId:c(t)}):y.$watch("youtubeApiReady",function(e){e&&(a=new YT.Player(r.mediaElement[0],{videoId:c(t),playerVars:u,events:{onReady:s,onStateChange:f}}))})):a&&a.destroy()}o=null!==n.vgYoutube?n.vgYoutube.split(";"):null,u={controls:0,showinfo:0,rel:0,autoplay:0,start:0,iv_load_policy:1},null!==o&&o.forEach(function(e){var t=e.split("=");u.hasOwnProperty(t[0])&&(u[t[0]]=t[1]||0)}),e.$watch(function(){return r.sources},function(e,t){e&&0<e.length&&e[0].src?_(e[0].src.toString()):_(null)}),e.$on("$destroy",function(){m()})}}}])}(angular);
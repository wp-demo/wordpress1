!function(e){"use strict";angular.module("rcGallery",[])}(),function(a){"use strict";a.module("rcGallery").directive("rcgMedia",[function(){return{restrict:"EA",require:"^rc-gallery",transclude:!0,priority:100,scope:{id:"@rcgId",width:"@rcgWidth",height:"@rcgHeight",theme:"@rcgTheme",options:"&rcgOptions",sources:"=?rcgSources"},templateUrl:function(e,t){return t.templateUrl||"rcg-media.tpl.html"},link:function(r,e,t,n,i){var l=a.element(e).find("[rcg-transclude]");r.id=a.isDefined(r.id)?r.id:"rcg_media_"+Math.random().toString(36).substr(2,10),r.options=a.isObject(r.options())?r.options():{},r.onChangeSources=function(e,t){e!==t&&a.isArray(e)&&(r.sources=e,n.sources=e)},n.mediaElement=a.element(e),n.mediaId=r.id,n.theme=r.theme,n.width=r.width,n.height=r.height,n.options=r.options,n.sources=r.sources,r.rcGalleryApi=n,t.id||a.element(e).find("[rcg-transclude]").attr("id",r.id),i(r,function(e,t){l.append(e)}),n.onMediaReady(),r.$watchCollection("sources",r.onChangeSources),r.$watchCollection("rcGalleryApi.sources",r.onChangeSources)}}}])}(angular),function(i){"use strict";i.module("rcGallery").directive("rcgSource",[function(){return{restrict:"A",link:function(e,t,n){if(n.rcgSource){var r=e.$eval(n.rcgSource);i.isObject(r)&&i.forEach(r,function(e,t){if(0!==t.indexOf("$")){var r=t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});0<r.length&&!n[r]&&n.$set(r,e)}})}}}}])}(angular),function(i){"use strict";i.module("rcGallery").directive("rcGallery",[function(){return{restrict:"EA",scope:{loadUrls:"&rcgLoadUrls",onGalleryReady:"&rcgOnGalleryReady"},controller:"rcGalleryCtrl",controllerAs:"rcGalleryApi",link:{pre:function(e,t,r,n){e.rcGalleryApi.rcGalleryElement=i.element(t)}}}}])}(angular),function(l){"use strict";l.module("rcGallery").controller("rcGalleryCtrl",["$scope","$log","rcGallery","rcGalleryLazyload",function(t,r,e,n){var i=this;this.rcGalleryElement=null,this.init=function(){this.isReady=!1,this.isMediaReady=!1,this.mediaElement=null,this.mediaGalleryElement=null,this.mediaId=null,this.loadUrls=e.getLoadUrls(),t.loadUrls=l.isDefined(t.loadUrls())?t.loadUrls():void 0,t.loadUrls&&this.addLoadUrls(t.loadUrls)},this.onMediaReady=function(){0!==i.mediaElement.length?n.get(i.loadUrls).then(function(e){r.debug("rcGallery Ready: "+i.mediaId),i.mediaGalleryElement=i.mediaElement.find("#"+i.mediaId),i.isReady=!0,t.onGalleryReady({$rcGalleryApi:i})},function(e){r.error("rcGallery Error to load urls")}):r.error("rcGallery Media Element ID not found")},this.addLoadUrls=function(e){if(e&&0<e.length){this.loadUrls;l.isArray(e)?l.forEach(e,function(e,t){-1===this.indexOf(e)&&this.push(e)},this.loadUrls):l.isString(e)&&-1===this.loadUrls.indexOf(e)&&this.loadUrls.push(e)}},this.setMediaReady=function(){this.isMediaReady=!0},this.vwTOpx=function(e){var t=window,r=document,n=r.documentElement,i=r.getElementsByTagName("body")[0],l=t.innerWidth||n.clientWidth||i.clientWidth;t.innerHeight||n.clientHeight||i.clientHeight;return l*e/100},this.vhTOpx=function(e){var t=window,r=document,n=r.documentElement,i=r.getElementsByTagName("body")[0];t.innerWidth||n.clientWidth||i.clientWidth;return(t.innerHeight||n.clientHeight||i.clientHeight)*e/100},this.init()}])}(angular),function(o){"use strict";var e=o.module("rcGallery");e.provider("rcGallery",[function(){this.loadUrls=[],this.setUrls=function(e){o.isArray(e)&&(this.loadUrls=e)},this.$get=[function(){var e=this.loadUrls;return{getLoadUrls:function(){return e}}}]}]),e.factory("rcGalleryLazyload",["$q",function(l){function a(e){if("function"==typeof Event)return new Event(e);var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}return{get:function(e){var t=[];return o.forEach(e,function(e){var t,r=l.defer();switch(e.split(".").pop()){case"css":(t=o.element('link[href="'+e+'"]'))[0]||((t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.async=!1,t.href=e);break;case"js":(t=o.element('script[src="'+e+'"]'))[0]||((t=document.createElement("script")).type="text/javascript",t.async=!1,t.src=e)}if(!t[0]){var n=a("onRcGalleryLazyloadComplete"),i=a("onRcGalleryLazyloadError");t.onload=function(){t.setAttribute("loaded","true"),t.dispatchEvent(n),r.resolve(t)},t.onError=function(){t.setAttribute("loaded","false"),t.dispatchEvent(i),r.reject(t)},document.head.appendChild(t)}1<t.lenght&&!t.getAttribute("loaded")?(t[0].addEventListener("onRcGalleryLazyloadComplete",function(){t[0].removeEventListener("onRcGalleryLazyloadComplete",this),r.resolve(t)}),t[0].addEventListener("onRcGalleryLazyloadError",function(){t[0].removeEventListener("onRcGalleryLazyloadError",this),r.reject(t)})):r.resolve(t),this.push(r.promise)},t),l.all(t)}}}])}(angular),angular.module("rcGallery").run(["$templateCache",function(e){e.put("rcg-media.tpl.html",'<div data-ng-show="rcGalleryApi.isMediaReady" class="rcg-media" rcg-transclude ></div>')}]);
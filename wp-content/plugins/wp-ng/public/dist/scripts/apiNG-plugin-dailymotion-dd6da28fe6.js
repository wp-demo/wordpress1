"use strict";angular.module("jtt_aping_dailymotion",["jtt_dailymotion"]).directive("apingDailymotion",["apingDailymotionHelper","apingUtilityHelper","dailymotionFactory",function(o,n,l){return{require:"?aping",restrict:"A",replace:"false",link:function(t,e,i,a){var r=a.getAppSettings();n.parseJsonFromAttributes(i.apingDailymotion,o.getThisPlattformString(),r).forEach(function(t){var e={model:r.model};angular.isDefined(r.getNativeData)?e.getNativeData=r.getNativeData:e.getNativeData=!1,"http"===t.protocol||"https"===t.protocol?e.protocol=t.protocol+"://":"http"===r.protocol||"https"===r.protocol?e.protocol=r.protocol+"://":e.protocol="//";var i={};if(angular.isDefined(t.items)?i.limit=t.items:i.limit=r.items,0===i.limit||"0"===i.limit)return!1;(i.limit<0||isNaN(i.limit))&&(i.limit=void 0),100<i.limit&&(i.limit=100),angular.isDefined(t.search)&&(i.search=t.search),angular.isDefined(t.tags)&&(i.tags=t.tags),t.userId?(i.id=t.userId,i.sort="recent",angular.isDefined(t.channelId)&&(i.channel=t.channelId),l.getVideosFromUserById(i).then(function(t){t&&a.concatToResults(o.getObjectByJsonData(t,e))})):t.channelId?(i.id=t.channelId,i.sort="recent",l.getVideosFromChannelById(i).then(function(t){t&&a.concatToResults(o.getObjectByJsonData(t,e))})):t.playlistId?(i.id=t.playlistId,i.sort="recent",l.getVideosFromPlaylistById(i).then(function(t){t&&a.concatToResults(o.getObjectByJsonData(t,e))})):(angular.isDefined(t.genre)&&(i.genre=t.genre),angular.isDefined(t.country)&&(i.country=t.country),angular.isDefined(t.language)&&(i.detected_language=t.language),l.getVideosByParams(i).then(function(t){t&&a.concatToResults(o.getObjectByJsonData(t,e))}))})}}}]),angular.module("jtt_aping_dailymotion").service("apingDailymotionHelper",["apingModels","apingTimeHelper","apingUtilityHelper",function(a,t,r){this.getThisPlattformString=function(){return"dailymotion"},this.getThisPlatformLink=function(){return"https://dailymotion.com/"},this.getObjectByJsonData=function(t,a){var r=[];if(t){var o=this;t&&angular.forEach(t.data.list,function(t,e){var i;(i=!0===a.getNativeData||"true"===a.getNativeData?t:o.getItemByJsonData(t,a))&&r.push(i)})}return r},this.getItemByJsonData=function(t,e){var i={};if(t&&e.model)switch(e.model){case"social":i=this.getSocialItemByJsonData(t);break;case"video":i=this.getVideoItemByJsonData(t,e);break;default:return!1}return i},this.getSocialItemByJsonData=function(t){var e=a.getNew("social",this.getThisPlattformString());return angular.extend(e,{blog_name:t["owner.screenname"]||void 0,blog_id:t["owner.id"]||void 0,blog_link:t["owner.url"]||void 0,type:t.item_type||t.media_type||void 0,timestamp:1e3*t.created_time,source:t.embed_html||void 0,post_url:t.url,intern_id:t.id,text:r.getTextFromHtml(t.description),caption:t.title,img_url:t.thumbnail_720_url,thumb_url:t.thumbnail_240_url,native_url:t.thumbnail_url,likes:t.bookmarks_total,comments:t.comments_total}),e.date_time=new Date(e.timestamp),e},this.getVideoItemByJsonData=function(t,e){var i=a.getNew("video",this.getThisPlattformString());return angular.extend(i,{blog_name:t["owner.screenname"]||void 0,blog_id:t["owner.id"]||void 0,blog_link:t["owner.url"]||void 0,type:t.item_type||t.media_type||void 0,timestamp:1e3*t.created_time,markup:t.embed_html||void 0,post_url:t.url,intern_id:t.id,text:r.getTextFromHtml(t.description),caption:t.title,img_url:t.thumbnail_720_url,thumb_url:t.thumbnail_240_url,native_url:t.thumbnail_url,likes:t.bookmarks_total,comments:t.comments_total,duration:t.duration}),e.protocol&&(i.markup=i.markup.replace('src="//','src="'+e.protocol)),i.date_time=new Date(i.timestamp),i}}]),angular.module("jtt_dailymotion",[]).factory("dailymotionFactory",["$http","dailymotionSearchDataService",function(i,a){var t={getVideosFromUserById:function(t){if(!t.id)return!1;var e=a.getNew("videosFromUserById",t);return i({method:"GET",url:e.url,params:e.object})},getVideosFromChannelById:function(t){if(!t.id)return!1;var e=a.getNew("videosFromChannelById",t);return i({method:"GET",url:e.url,params:e.object})},getVideosFromPlaylistById:function(t){if(!t.id)return!1;var e=a.getNew("videosFromPlaylistById",t);return i({method:"GET",url:e.url,params:e.object})},getVideosByParams:function(t){var e=a.getNew("videosByParams",t);return i({method:"GET",url:e.url,params:e.object})}};return t}]).service("dailymotionSearchDataService",function(){this.getApiBaseUrl=function(t){return"https://api.dailymotion.com/"},this.fillDataInObjectByList=function(i,a,t){return angular.forEach(t,function(t,e){void 0!==a[t]&&(i.object[t]=a[t])}),i},this.getNew=function(t,e){var i={object:{},url:""};switch(t){case"videosFromUserById":i.object.fields="bookmarks_total,comments_total,created_time,description,duration,embed_html,id,item_type,media_type,owner.id,owner.screenname,owner.url,thumbnail_240_url,thumbnail_720_url,thumbnail_url,title,updated_time,url,",(i=this.fillDataInObjectByList(i,e,["fields","channel","created_after","created_before","genre","nogenre","page","limit","search","tags"])).url=this.getApiBaseUrl()+"user/"+e.id+"/videos";break;case"videosFromChannelById":i.object.fields="bookmarks_total,comments_total,created_time,description,duration,embed_html,id,item_type,media_type,owner.id,owner.screenname,owner.url,thumbnail_240_url,thumbnail_720_url,thumbnail_url,title,updated_time,url,",(i=this.fillDataInObjectByList(i,e,["fields","channel","created_after","created_before","search","sort","tags","page","limit"])).url=this.getApiBaseUrl()+"channel/"+e.id+"/videos";break;case"videosFromPlaylistById":i.object.fields="bookmarks_total,comments_total,created_time,description,duration,embed_html,id,item_type,media_type,owner.id,owner.screenname,owner.url,thumbnail_240_url,thumbnail_720_url,thumbnail_url,title,updated_time,url,",(i=this.fillDataInObjectByList(i,e,["fields","search","sort","tags","page","limit"])).url=this.getApiBaseUrl()+"playlist/"+e.id+"/videos";break;case"videosByParams":i.object.fields="bookmarks_total,comments_total,created_time,description,duration,embed_html,id,item_type,media_type,owner.id,owner.screenname,owner.url,thumbnail_240_url,thumbnail_720_url,thumbnail_url,title,updated_time,url,",(i=this.fillDataInObjectByList(i,e,["fields","channel","country","created_after","created_before","detected_language","exclude_ids","featured","genre","has_game","hd","ids","in_history","languages","list","live","live_offair","live_onair","live_upcoming","longer_than","no_live","no_premium","nogenre","owners","partner","poster","premium","private","search","shorter_than","sort","svod","tags","tvod","ugc","verified","page","limit"])).url=this.getApiBaseUrl()+"videos"}return i}});
!function(g,c){"use strict";g.isDefined(c.config.modules["ui.router"])&&(c.app.config(["$locationProvider","$stateProvider","$urlRouterProvider","WP_NG_CONFIG",function(e,t,r,o){var i=g.injector(["ng"]).get("$log"),n=o.modules["ui.router"];r.otherwise("/");var a={name:"base",url:"/",template:n.templates.base};t.state(a),n.states&&g.forEach(n.states,function(l,e){l.templateUrl||l.template||!l.post||(l.resolve=g.extend({},l.resolve,{postObj:{service:"wpNgRouterPostService"}}),(l=g.extend({},l,{templateProvider:["postObj",function(e){var t=n.templates.notFound;return g.isDefined(e.content)&&(t=e.content.rendered),t}]})).controller&&0!==l.controller.length||(l.controller="wpNgRouterPostController")),l.resolve=l.resolve&&g.isObject(l.resolve)?l.resolve:{},g.forEach(l.resolve,function(s,e){l.resolve[e]=["$injector","$timeout","$location","$window","$state",function(e,t,o,n,a){var r=e.get(s.service)(l);return g.isFunction(r.then)&&r.then(function(e){},function(e){t(function(){var e=s.redirect;if(g.isString(e)&&0<e.length){i.debug("UI Router redirect resolve error"),i.debug(e);var t=e.split("/#")[1]||!1;if(t){var r=t.split(/\?|#/);o.path(r[0]),r[1]&&o.search(r[1]),r[2]&&o.hash(r[2]),o.replace()}else c.isUrl(e)?n.location.href=e:a.go(e)}else a.go("base")})}),r}]}),t.state(l)})}]),c.app.run(["$rootScope","$window","$location","$log","WP_NG_CONFIG","$state",function(i,c,e,u,p,d){u.debug("WP NG Router Run"),u.debug(d.get());var t=p.modules["ui.router"],r="";t.wrap_exclude&&0<t.wrap_exclude.length&&(r=g.element(t.wrap).find(t.wrap_exclude)),0===r.length&&t.wrap&&0<t.wrap.length&&g.element(t.wrap).html(t.templates.wrapperStart+g.element(t.wrap).html()+t.templates.wrapperEnd),i.preventState={enable:!1,change:!1},g.isDefined(t.preventState)&&g.extend(i.preventState,t.preventState),i.selectView="",i.stateIsLoading=!1,i.$on("$stateChangeStart",function(e,t,r,o,n){i.stateIsLoading=!0;var a=t.baseUrl&&0<t.baseUrl.length?t.baseUrl:p.baseUrl;if(i.preventState.enable){var s=c.location.protocol+"//"+c.location.host+c.location.pathname,l=d.href(t.name);u.debug(l),u.debug(s),u.debug(a),s!==a&&"#/"!==l&&(e.preventDefault(),i.preventState.change=!0,c.location.replace(a+l))}}),i.$on("$stateChangeSuccess",function(e,t,r,o,n){i.selectView=t.name,i.stateIsLoading=!1}),i.$on("$locationChangeStart",function(e,t,r){!0===i.preventState.change&&e.preventDefault()})}]),c.app.factory("wpNgRouterPostService",["$injector","$log","WP_NG_CONFIG",function(t,r,e){var o=e.rest.url+e.rest.namespace;return function(e){try{return t.get("$resource")(o+"/:base/:id",{base:"@base",id:"@id"},{get:{method:"GET",isArray:!1,cache:!0}}).get({base:e.post.restBase,id:e.post.id}).$promise}catch(e){return r.debug('Angular module "ngResource" is not loaded !'),!1}}}]),c.app.controller("wpNgRouterPostController",["$scope","WP_NG_CONFIG","postObj",function(e,t,r){g.extend(this,r)}]))}(angular,wpNg);
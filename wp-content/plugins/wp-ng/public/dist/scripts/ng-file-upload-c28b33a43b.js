!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(r){return function(e,t){if("__setXHR_"===e){var n=t(this);n instanceof Function&&n(this)}else r.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(l,e,s){var u=this;u.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var f=this.isResumeSupported();function t(n){n.method=n.method||"POST",n.headers=n.headers||{};var r=n._deferred=n._deferred||e.defer(),i=r.promise;function a(e){r.notify&&r.notify(e),i.progressFunc&&s(function(){i.progressFunc(e)})}function t(e){return null!=n._start&&f?{loaded:e.loaded+n._start,total:n._file&&n._file.size||e.total,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function o(){l(n).then(function(e){if(f&&n._chunkSize&&!n._finished&&n._file){var t=n._file&&n._file.size||0;a({loaded:Math.min(n._end,t),total:t,config:n,type:"progress"}),u.upload(n,!0)}else n._finished&&delete n._finished,r.resolve(e)},function(e){r.reject(e)},function(e){r.notify(e)})}return n.disableProgress||(n.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,a(t(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,a(t(e)))},!1))}}),f?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,o()):n.resumeSizeUrl?l.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),o()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,n._chunkSize&&(n._end=n._start+n._chunkSize),o()},function(e){throw e}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),o()):o(),i.success=function(t){return i.then(function(e){t(e.data,e.status,e.headers,n)}),i},i.error=function(t){return i.then(null,function(e){t(e.data,e.status,e.headers,n)}),i},i.progress=function(t){return i.progressFunc=t,i.then(null,null,function(e){t(e)}),i},i.abort=i.pause=function(){return n.__XHR&&s(function(){n.__XHR.abort()}),i},i.xhr=function(e){var t;return n.xhrFn=(t=n.xhrFn,function(){t&&t.apply(i,arguments),e.apply(i,arguments)}),i},u.promisesCount++,i.finally&&i.finally instanceof Function&&i.finally(function(){u.promisesCount--}),i}function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}this.isUploadInProgress=function(){return 0<u.promisesCount},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(l,e){function s(e,t,n){if(void 0!==t)if(angular.isDate(t)&&(t=t.toISOString()),angular.isString(t))e.append(n,t);else if(u.isFile(t)){var r=function(e,t){if(e._ngfBlob)return e;if(l._file=l._file||e,null!=l._start&&f){l._end&&l._end>=e.size&&(l._finished=!0,l._end=e.size);var n=e.slice(l._start,l._end||e.size);return n.name=e.name,n.ngfName=e.ngfName,l._chunkSize&&(t.append("_chunkSize",l._chunkSize),t.append("_currentChunkSize",l._end-l._start),t.append("_chunkNumber",Math.floor(l._start/l._chunkSize)),t.append("_totalSize",l._file.size)),n}return e}(t,e),i=n.split(",");i[1]&&(r.ngfName=i[1].replace(/^\s+|\s+$/g,""),n=i[0]),l._fileKey=l._fileKey||n,e.append(n,r,r.ngfName||r.name)}else if(angular.isObject(t)){if(t.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+n;t.$$ngfCircularDetection=!0;try{for(var a in t)if(t.hasOwnProperty(a)&&"$$ngfCircularDetection"!==a){var o=null==l.objectKey?"[i]":l.objectKey;t.length&&-1<parseInt(a)&&(o=null==l.arrayKey?o:l.arrayKey),s(e,t[a],n+o.replace(/[ik]/g,a))}}finally{delete t.$$ngfCircularDetection}}else e.append(n,t)}return e||(l=n(l)),l._isDigested||(l._isDigested=!0,l._chunkSize=u.translateScalars(l.resumeChunkSize),l._chunkSize=l._chunkSize?parseInt(l._chunkSize.toString()):null,l.headers=l.headers||{},l.headers["Content-Type"]=void 0,l.transformRequest=l.transformRequest?angular.isArray(l.transformRequest)?l.transformRequest:[l.transformRequest]:[],l.transformRequest.push(function(e){var t,n=new window.FormData;for(t in e=e||l.fields||{},l.file&&(e.file=l.file),e)if(e.hasOwnProperty(t)){var r=e[t];l.formDataAppender?l.formDataAppender(n,t,r):s(n,r,t)}return n})),t(l)},this.http=function(e){return(e=n(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:l.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=u.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,t(e)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(a){var o=e.defer();return l({url:a,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),n=e.headers("content-type")||"image/WebP",r=new window.Blob([t],{type:n}),i=a.match(/.*\/(.+?)(\?.*)?$/);1<i.length&&(r.name=i[1]),o.resolve(r)},function(e){o.reject(e)}),o.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function($,A,e,F,t){var x=t;function U(r,i,a,o,l){var s=[x.emptyPromise()];function e(n,t){if(0===n.type.indexOf("image")){if(r.pattern&&!x.validatePattern(n,r.pattern))return;r.resizeIf=function(e,t){return x.attrGetter("ngfResizeIf",a,o,{$width:e,$height:t,$file:n})};var e=x.resize(n,r);s.push(e),e.then(function(e){i.splice(t,1,e)},function(e){n.$error="resize",(n.$errorMessages=n.$errorMessages||{}).resize=!0,n.$errorParam=(e?(e.message?e.message:e)+": ":"")+(n&&n.name),l.$ngfValidations.push({name:"resize",valid:!1}),x.applyModelValidation(l,i)})}}for(var t=0;t<i.length;t++)e(i[t],t);return F.all(s)}return x.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=x.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},x.attrGetter=function(t,e,n,r){var i=this.getAttrWithDefaults(e,t);if(!n)return i;try{return r?$(i)(n,r):$(i)(n)}catch(e){if(t.search(/min|max|pattern/i))return i;throw e}},x.shouldUpdateOn=function(e,t,n){var r=x.attrGetter("ngfModelOptions",t,n);return!r||!r.updateOn||-1<r.updateOn.split(" ").indexOf(e)},x.emptyPromise=function(){var e=F.defer(),t=arguments;return A(function(){e.resolve.apply(e,t)}),e.promise},x.rejectPromise=function(){var e=F.defer(),t=arguments;return A(function(){e.reject.apply(e,t)}),e.promise},x.happyPromise=function(e,t){var n=F.defer();return e.then(function(e){n.resolve(e)},function(e){A(function(){throw e}),n.resolve(t)}),n.promise},x.updateModel=function(s,u,f,c,o,d,t){function l(e,t,n,r,i){u.$$ngfPrevValidFiles=e,u.$$ngfPrevInvalidFiles=t;var a=e&&e.length?e[0]:null,o=t&&t.length?t[0]:null;s&&(x.applyModelValidation(s,e),s.$setViewValue(i?a:e)),c&&$(c)(f,{$files:e,$file:a,$newFiles:n,$duplicateFiles:r,$invalidFiles:t,$invalidFile:o,$event:d});var l=x.attrGetter("ngfModelInvalid",u);l&&A(function(){$(l).assign(f,i?o:t)}),A(function(){})}var p,a,g,e,h=[],v=[],m=[];function _(){function r(){A(function(){l(n?a.concat(m):m,n?g.concat(v):v,o,h,y)},w&&w.debounce?w.debounce.change||w.debounce:0)}var i=b?p:m;(function(t,n,r,i){var e=x.attrGetter("ngfResize",n,r);if(!e||!x.isResizeSupported()||!t.length)return x.emptyPromise();if(e instanceof Function){var a=F.defer();return e(t).then(function(e){U(e,t,n,r,i).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})}return U(e,t,n,r,i)})(i,u,f,s).then(function(){b?x.validate(p,n?a.length:0,s,u,f).then(function(e){m=e.validsFiles,v=e.invalidsFiles,r()}):r()},function(){for(var e=0;e<i.length;e++){var t=i[e];if("resize"===t.$error){var n=m.indexOf(t);-1<n&&(m.splice(n,1),v.push(t)),r()}}})}a=u.$$ngfPrevValidFiles||[],g=u.$$ngfPrevInvalidFiles||[],s&&s.$modelValue&&(e=s.$modelValue,a=angular.isArray(e)?e:[e]);var n=x.attrGetter("ngfKeep",u,f);p=(o||[]).slice(0),"distinct"!==n&&!0!==x.attrGetter("ngfKeepDistinct",u,f)||function(){function n(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function e(e){var t;for(t=0;t<a.length;t++)if(n(e,a[t]))return!0;for(t=0;t<g.length;t++)if(n(e,g[t]))return!0;return!1}if(o){p=[],h=[];for(var t=0;t<o.length;t++)e(o[t])?h.push(o[t]):p.push(o[t])}}();var y=!n&&!x.attrGetter("ngfMultiple",u,f)&&!x.attrGetter("multiple",u);if(!n||p.length){x.attrGetter("ngfBeforeModelChange",u,f,{$files:o,$file:o&&o.length?o[0]:null,$newFiles:p,$duplicateFiles:h,$event:d});var b=x.attrGetter("ngfValidateAfterResize",u,f),w=x.attrGetter("ngfModelOptions",u,f);x.validate(p,n?a.length:0,s,u,f).then(function(e){var n,r,i,a;t?l(p,[],o,h,y):(w&&w.allowInvalid||b?m=p:(m=e.validFiles,v=e.invalidFiles),x.attrGetter("ngfFixOrientation",u,f)&&x.isExifSupported()?(n=m,r=u,i=f,a=[x.emptyPromise()],angular.forEach(n,function(e,t){0===e.type.indexOf("image/jpeg")&&x.attrGetter("ngfFixOrientation",r,i,{$file:e})&&a.push(x.happyPromise(x.applyExifRotation(e),e).then(function(e){n.splice(t,1,e)}))}),F.all(a)).then(function(){_()}):_())})}},x}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,i,t,m){var _=[];function a(i,a,o,l,e,t,n,s){var r=function(e,t){return s.attrGetter(e,o,t)};function u(){return"input"===a[0].tagName.toLowerCase()&&o.type&&"file"===o.type.toLowerCase()}function f(){return r("ngfChange")||r("ngfSelect")}function c(e){if(s.shouldUpdateOn("change",o,i)){var t=e.__files_||e.target&&e.target.files,n=[];if(!t)return;for(var r=0;r<t.length;r++)n.push(t[r]);s.updateModel(l,o,i,f(),n.length?n:null,e)}}s.registerModelChangeValidator(l,o,i);var d=[];r("ngfMultiple")&&d.push(i.$watch(r("ngfMultiple"),function(){h.attr("multiple",r("ngfMultiple",i))})),r("ngfCapture")&&d.push(i.$watch(r("ngfCapture"),function(){h.attr("capture",r("ngfCapture",i))})),r("ngfAccept")&&d.push(i.$watch(r("ngfAccept"),function(){h.attr("accept",r("ngfAccept",i))})),d.push(o.$observe("accept",function(){h.attr("accept",r("accept"))}));var p=0,g=0;var h=a;function v(e){s.shouldUpdateOn("click",o,i)&&h.val()&&(h.val(null),s.updateModel(l,o,i,f(),null,e,!0))}u()||(h=function(){if(u())return a;var e=angular.element('<input type="file">'),t=angular.element("<label>upload</label>");return t.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),function(t,n){function e(e){t.attr("id","ngf-"+e),n.attr("id","ngf-label-"+e)}for(var r=0;r<a[0].attributes.length;r++){var i=a[0].attributes[r];"type"!==i.name&&"class"!==i.name&&"style"!==i.name&&("id"===i.name?(e(i.value),d.push(o.$observe("id",e))):t.attr(i.name,i.value||"required"!==i.name&&"multiple"!==i.name?i.value:i.name))}}(e,t),_.push({el:a,ref:t}),document.body.appendChild(t.append(e)[0]),e}()),h.bind("change",c),u()?a.bind("click",v):a.bind("click touchstart touchend",function(e){if(a.attr("disabled"))return!1;if(!r("ngfSelectDisabled",i)){var t=function(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return g=t[0].clientX,p=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,r=t[0].clientY;if(20<Math.abs(n-g)||20<Math.abs(r-p))return e.stopPropagation(),e.preventDefault(),!1}return!0}}(e);if(null!=t)return t;v(e);try{u()||document.body.contains(h[0])||(_.push({el:a,ref:h.parent()}),document.body.appendChild(h.parent()[0]),h.bind("change",c))}catch(e){}return function(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&2<t.length){var n=m.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}(navigator.userAgent)?setTimeout(function(){h[0].click()},0):h[0].click(),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&h.bind("click",function e(t){if(h&&!h.attr("__ngf_ie10_Fix_")){if(!h[0].parentNode)return void(h=null);t.preventDefault(),t.stopPropagation(),h.unbind("click");var n=h.clone();return h.replaceWith(n),(h=n).attr("__ngf_ie10_Fix_","true"),h.bind("change",c),h.bind("click",e),h[0].click(),!1}h.removeAttr("__ngf_ie10_Fix_")}),l&&l.$formatters.push(function(e){return null!=e&&0!==e.length||h.val()&&h.val(null),e}),i.$on("$destroy",function(){u()||h.parent().remove(),angular.forEach(d,function(e){e()})}),t(function(){for(var e=0;e<_.length;e++){var t=_[e];document.body.contains(t.el[0])||(_.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(a,h,c)}return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){a(e,t,n,r,0,i,0,m)}}}]),function(){function o(i,e,a,o,l,s,u,f){function c(t){var n=i.attrGetter("ngfNoObjectUrl",l,a);i.dataUrl(t,n).finally(function(){e(function(){var e=(n?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl;f?o.css("background-image","url('"+(e||"")+"')"):o.attr("src",e),e?o.removeClass("ng-hide"):o.addClass("ng-hide")})})}e(function(){var e=a.$watch(l[s],function(n){var e,t=u;if("ngfThumbnail"===s&&(t||(t={width:o[0].naturalWidth||o[0].clientWidth,height:o[0].naturalHeight||o[0].clientHeight}),0===t.width&&window.getComputedStyle)){var r=getComputedStyle(o[0]);r.width&&-1<r.width.indexOf("px")&&r.height&&-1<r.height.indexOf("px")&&(t={width:parseInt(r.width.slice(0,-2)),height:parseInt(r.height.slice(0,-2))})}if(angular.isString(n))return o.removeClass("ng-hide"),f?o.css("background-image","url('"+n+"')"):o.attr("src",n);!n||!n.type||0!==n.type.search("img"===(e=o[0]).tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./)||f&&0!==n.type.indexOf("image")?o.addClass("ng-hide"):t&&i.isResizeSupported()?(t.resizeIf=function(e,t){return i.attrGetter("ngfResizeIf",l,a,{$width:e,$height:t,$file:n})},i.resize(n,t).then(function(e){c(e)},function(e){throw e})):c(n)});a.$on("$destroy",function(){e()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,l){var s=e;return s.base64DataUrl=function(n){if(angular.isArray(n)){var r=l.defer(),i=0;return angular.forEach(n,function(e){s.dataUrl(e,!0).finally(function(){if(++i===n.length){var t=[];angular.forEach(n,function(e){t.push(e.$ngfDataUrl)}),r.resolve(t,n)}})}),r.promise}return s.dataUrl(n,!0)},s.dataUrl=function(a,t){if(!a)return s.emptyPromise(a,a);if(t&&null!=a.$ngfDataUrl||!t&&null!=a.$ngfBlobUrl)return s.emptyPromise(t?a.$ngfDataUrl:a.$ngfBlobUrl,a);var e=t?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(e)return e;var o=l.defer();return n(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var r=window.URL||window.webkitURL;if(r&&r.createObjectURL&&!t){var i;try{i=r.createObjectURL(a)}catch(e){return void n(function(){a.$ngfBlobUrl="",o.reject()})}n(function(){if(a.$ngfBlobUrl=i){o.resolve(i,a),s.blobUrls=s.blobUrls||[],s.blobUrlsTotalSize=s.blobUrlsTotalSize||0,s.blobUrls.push({url:i,size:a.size}),s.blobUrlsTotalSize+=a.size||0;for(var e=s.defaults.blobUrlsMaxMemory||268435456,t=s.defaults.blobUrlsMaxQueueSize||200;(s.blobUrlsTotalSize>e||s.blobUrls.length>t)&&1<s.blobUrls.length;){var n=s.blobUrls.splice(0,1)[0];r.revokeObjectURL(n.url),s.blobUrlsTotalSize-=n.size}}})}else{var e=new FileReader;e.onload=function(e){n(function(){a.$ngfDataUrl=e.target.result,o.resolve(e.target.result,a),n(function(){delete a.$ngfDataUrl},1e3)})},e.onerror=function(){n(function(){a.$ngfDataUrl="",o.reject()})},e.readAsDataURL(a)}}else n(function(){a[t?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()})}),(e=t?a.$$ngfDataUrlPromise=o.promise:a.$$ngfBlobUrlPromise=o.promise).finally(function(){delete a[t?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),e},s}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){o(r,i,e,t,n,"ngfSrc",r.attrGetter("ngfResize",n,e),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){o(r,i,e,t,n,"ngfBackground",r.attrGetter("ngfResize",n,e),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(i,a){return{restrict:"AE",link:function(e,t,n){var r=i.attrGetter("ngfSize",n,e);o(i,a,e,t,n,"ngfThumbnail",r,i.attrGetter("ngfAsBackground",n,e))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(i,a){return function(e,t,n){if(angular.isString(e))return a.trustAsResourceUrl(e);var r=e&&((t?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl);return e&&!r?(!e.$ngfDataUrlFilterInProgress&&angular.isObject(e)&&(e.$ngfDataUrlFilterInProgress=!0,i.dataUrl(e,t)),""):(e&&delete e.$ngfDataUrlFilterInProgress,(e&&r?n?a.trustAsResourceUrl(r):r:e)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,m,l){var _=e;return _.validatePattern=function(e,t){if(!t)return!0;var n=function e(t){var n="",r=[];if(2<t.length&&"/"===t[0]&&"/"===t[t.length-1])n=t.substring(1,t.length-1);else{var i=t.split(",");if(1<i.length)for(var a=0;a<i.length;a++){var o=e(i[a]);o.regexp?(n+="("+o.regexp+")",a<i.length-1&&(n+="|")):r=r.concat(o.excludes)}else 0===t.indexOf("!")?r.push("^((?!"+e(t.substring(1)).regexp+").)*$"):(0===t.indexOf(".")&&(t="*"+t),n=(n="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:n,excludes:r}}(t),r=!0;if(n.regexp&&n.regexp.length){var i=new RegExp(n.regexp,"i");r=null!=e.type&&i.test(e.type)||null!=e.name&&i.test(e.name)}for(var a=n.excludes.length;a--;){var o=new RegExp(n.excludes[a],"i");r=r&&(null==e.type||o.test(e.type))&&(null==e.name||o.test(e.name))}return r},_.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=-1<n?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},_.registerModelChangeValidator=function(n,r,i){n&&n.$formatters.push(function(e){if(n.$dirty){var t=e;e&&!angular.isArray(e)&&(t=[e]),_.validate(t,0,n,r,i).then(function(){_.applyModelValidation(n,t)})}return e})},_.applyModelValidation=function(t,e){var n;n=t,null==e||n.$dirty||(n.$setDirty?n.$setDirty():n.$dirty=!0),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},_.getValidationAttr=function(e,t,n,r,i){var a="ngf"+n[0].toUpperCase()+n.substr(1),o=_.attrGetter(a,e,t,{$file:i});if(null==o&&(o=_.attrGetter("ngfValidate",e,t,{$file:i}))){var l=(r||n).split(".");o=o[l[0]],1<l.length&&(o=o&&o[l[1]])}return o},_.validate=function(u,r,f,c,d){(f=f||{}).$ngfValidations=f.$ngfValidations||[],angular.forEach(f.$ngfValidations,function(e){e.valid=!0});var p=function(e,t){return _.attrGetter(e,c,d,t)},g=(_.attrGetter("ngfIgnoreInvalid",c,d)||"").split(" "),h=_.attrGetter("ngfRunAllValidations",c,d);if(null==u||0===u.length)return _.emptyPromise({validFiles:u,invalidFiles:[]});u=void 0===u.length?[u]:u.slice(0);var v=[];function t(e,t,n){if(u){for(var r=u.length,i=null;r--;){var a=u[r];if(a){var o=_.getValidationAttr(c,d,e,t,a);null!=o&&(n(a,o,r)||(-1===g.indexOf(e)?(a.$error=e,(a.$errorMessages=a.$errorMessages||{})[e]=!0,a.$errorParam=o,-1===v.indexOf(a)&&v.push(a),h||u.splice(r,1),i=!1):u.splice(r,1)))}}null!==i&&f.$ngfValidations.push({name:e,valid:i})}}t("pattern",null,_.validatePattern),t("minSize","size.min",function(e,t){return e.size+.1>=_.translateScalars(t)}),t("maxSize","size.max",function(e,t){return e.size-.1<=_.translateScalars(t)});var n=0;if(t("maxTotalSize",null,function(e,t){return!((n+=e.size)>_.translateScalars(t))||(u.splice(0,u.length),!1)}),t("validateFn",null,function(e,t){return!0===t||null===t||""===t}),!u.length)return _.emptyPromise({validFiles:[],invalidFiles:v});function e(o,e,r,n,l){function i(r,i,a){function t(e){if(e())if(-1===g.indexOf(o)){if(i.$error=o,(i.$errorMessages=i.$errorMessages||{})[o]=!0,i.$errorParam=a,-1===v.indexOf(i)&&v.push(i),!h){var t=u.indexOf(i);-1<t&&u.splice(t,1)}r.resolve(!1)}else{var n=u.indexOf(i);-1<n&&u.splice(n,1),r.resolve(!0)}else r.resolve(!0)}null!=a?n(i,a).then(function(e){t(function(){return!l(e,a)})},function(){t(function(){return p("ngfValidateForce",{$file:i})})}):r.resolve(!0)}var a=[_.emptyPromise(!0)];u&&(u=void 0===u.length?[u]:u,angular.forEach(u,function(t){var n=m.defer();a.push(n.promise),!r||null!=t.type&&0===t.type.search(r)?"dimensions"===o&&null!=_.attrGetter("ngfDimensions",c)?_.imageDimensions(t).then(function(e){i(n,t,p("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){n.resolve(!1)}):"duration"===o&&null!=_.attrGetter("ngfDuration",c)?_.mediaDuration(t).then(function(e){i(n,t,p("ngfDuration",{$file:t,$duration:e}))},function(){n.resolve(!1)}):i(n,t,_.getValidationAttr(c,d,o,e,t)):n.resolve(!0)}));var s=m.defer();return m.all(a).then(function(e){for(var t=!0,n=0;n<e.length;n++)if(!e[n]){t=!1;break}f.$ngfValidations.push({name:o,valid:t}),s.resolve(t)}),s.promise}var i=m.defer(),a=[];return a.push(e("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),a.push(e("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),a.push(e("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),a.push(e("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),a.push(e("dimensions",null,/image/,function(e,t){return _.emptyPromise(t)},function(e){return e})),a.push(e("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-_.ratioToFloat(n[i]))<.01&&(r=!0);return r})),a.push(e("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-_.ratioToFloat(t)<1e-4})),a.push(e("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return-1e-4<e.width/e.height-_.ratioToFloat(t)})),a.push(e("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=_.translateScalars(t)})),a.push(e("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=_.translateScalars(t)})),a.push(e("duration",null,/audio|video/,function(e,t){return _.emptyPromise(t)},function(e){return e})),a.push(e("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),m.all(a).then(function(){if(h)for(var e=0;e<u.length;e++){u[e].$error&&u.splice(e--,1)}h=!1,t("maxFiles",null,function(e,t,n){return r+n<t}),i.resolve({validFiles:u,invalidFiles:v})}),i.promise},_.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var e=m.defer();return l(function(){e.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),e.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var o=m.defer();return l(function(){0===a.type.indexOf("image")?_.dataUrl(a).then(function(e){var n=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function t(){var e=n[0].naturalWidth||n[0].clientWidth,t=n[0].naturalHeight||n[0].clientHeight;n.remove(),a.$ngfWidth=e,a.$ngfHeight=t,o.resolve({width:e,height:t})}function r(){n.remove(),o.reject("load error")}n.on("load",t),n.on("error",r);var i=0;!function e(){l(function(){n[0].parentNode&&(n[0].clientWidth?t():10<i++?r():e())},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(n)},function(){o.reject("load error")}):o.reject("not image")}),a.$ngfDimensionPromise=o.promise,a.$ngfDimensionPromise.finally(function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},_.mediaDuration=function(a){if(a.$ngfDuration){var e=m.defer();return l(function(){e.resolve(a.$ngfDuration)}),e.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var o=m.defer();return l(function(){0===a.type.indexOf("audio")||0===a.type.indexOf("video")?_.dataUrl(a).then(function(e){var t=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function n(){var e=t[0].duration;a.$ngfDuration=e,t.remove(),o.resolve(e)}function r(){t.remove(),o.reject("load error")}t.on("loadedmetadata",n),t.on("error",r);var i=0;!function e(){l(function(){t[0].parentNode&&(t[0].duration?n():10<i?r():e())},1e3)}(),angular.element(document.body).append(t)},function(){o.reject("load error")}):o.reject("not media")}),a.$ngfDurationPromise=o.promise,a.$ngfDurationPromise.finally(function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},_}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var y=e,o=function(e,u,f,c,d,p,g,h){var v=t.defer(),m=document.createElement("canvas"),_=document.createElement("img");return _.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(_),_.onload=function(){var e,t,n,r,i,a=_.width,o=_.height;if(_.parentNode.removeChild(_),null==h||!1!==h(a,o))try{if(p){var l=y.ratioToFloat(p);a/o<l?f=(u=a)/l:u=(f=o)*l}u||(u=a),f||(f=o);var s=(e=a,t=o,n=u,r=f,i=g?Math.max(n/e,r/t):Math.min(n/e,r/t),{width:e*i,height:t*i,marginX:e*i-n,marginY:t*i-r});m.width=Math.min(s.width,u),m.height=Math.min(s.height,f),m.getContext("2d").drawImage(_,Math.min(0,-s.marginX/2),Math.min(0,-s.marginY/2),s.width,s.height),v.resolve(m.toDataURL(d||"image/WebP",c||.934))}catch(e){v.reject(e)}else v.reject("resizeIf")},_.onerror=function(){_.parentNode.removeChild(_),v.reject()},_.src=e,v.promise};return y.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,l=new Uint8Array(o);o--;)l[o]=a.charCodeAt(o);var s=new window.Blob([l],{type:i});return s.name=t,s.$ngfOrigSize=n,s},y.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},y.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),y.resize=function(r,i){if(0!==r.type.indexOf("image"))return y.emptyPromise(r);var a=t.defer();return y.dataUrl(r,!0).then(function(n){o(n,i.width,i.height,i.quality,i.type||r.type,i.ratio,i.centerCrop,i.resizeIf).then(function(e){if("image/jpeg"===r.type&&!1!==i.restoreExif)try{e=y.restoreExif(n,e)}catch(e){setTimeout(function(){throw e},1)}try{var t=y.dataUrltoBlob(e,r.name,r.size);a.resolve(t)}catch(e){a.reject(e)}},function(e){"resizeIf"===e&&a.resolve(r),a.reject(e)})},function(e){a.reject(e)}),a.promise},y}]),function(){function p(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(i,a,o,l,e,s){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){!function(m,n,_,r,e,i,y,b,t,w){var a=p(),$=function(e,t,n){return b.attrGetter(e,_,t,n)};$("dropAvailable")&&i(function(){m[$("dropAvailable")]?m[$("dropAvailable")].value=a:m[$("dropAvailable")]=a});if(!a)return!0===$("ngfHideOnDropNotAvailable",m)&&n.css("display","none");function o(){return n.attr("disabled")||$("ngfDropDisabled",m)}null==$("ngfSelect")&&b.registerModelChangeValidator(r,_,m);var l,s=null,u=e($("ngfStopPropagation")),f=1;n[0].addEventListener("dragover",function(t){if(!o()&&b.shouldUpdateOn("drop",_,m)){if(t.preventDefault(),u(m)&&t.stopPropagation(),-1<navigator.userAgent.indexOf("Chrome")){var e=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}i.cancel(s),l||(l="C",function(e,t,n,r){var i=$("ngfDragOverClass",e,{$event:n}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&(f=i.delay),i.accept||i.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var l=i.pattern||$("ngfPattern",e,{$event:n}),s=o.length;s--;){if(!b.validatePattern(o[s],l)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}(m,0,t,function(e){l=e,n.addClass(l),$("ngfDrag",m,{$isDragging:!0,$class:l,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(e){!o()&&b.shouldUpdateOn("drop",_,m)&&(e.preventDefault(),u(m)&&e.stopPropagation())},!1),n[0].addEventListener("dragleave",function(e){!o()&&b.shouldUpdateOn("drop",_,m)&&(e.preventDefault(),u(m)&&e.stopPropagation(),s=i(function(){l&&n.removeClass(l),l=null,$("ngfDrag",m,{$isDragging:!1,$event:e})},f||100))},!1),n[0].addEventListener("drop",function(e){!o()&&b.shouldUpdateOn("drop",_,m)&&(e.preventDefault(),u(m)&&e.stopPropagation(),l&&n.removeClass(l),l=null,c(e.dataTransfer,e,"dropUrl"))},!1),n[0].addEventListener("paste",function(e){-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&$("ngfEnableFirefoxPaste",m)&&e.preventDefault(),!o()&&b.shouldUpdateOn("paste",_,m)&&c(e.clipboardData||e.originalEvent.clipboardData,e,"pasteUrl")},!1),-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&$("ngfEnableFirefoxPaste",m)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}));function c(e,t,n){if(e){var r;try{r=e&&e.getData&&e.getData("text/html")}catch(e){}(function(e,t,n,r){var s=b.getValidationAttr(_,m,"maxFiles");null==s&&(s=Number.MAX_VALUE);var u=b.getValidationAttr(_,m,"maxTotalSize");null==u&&(u=Number.MAX_VALUE);var f=$("ngfIncludeDir",m),c=[],d=0;function p(t,n){var r=w.defer();if(null!=t)if(t.isDirectory){var i=[b.emptyPromise()];if(f){var e={type:"directory"};e.name=e.path=(n||"")+t.name,c.push(e)}var a=t.createReader(),o=[],l=function(){a.readEntries(function(e){try{e.length?(o=o.concat(Array.prototype.slice.call(e||[],0)),l()):(angular.forEach(o.slice(0),function(e){c.length<=s&&d<=u&&i.push(p(e,(n||"")+t.name+"/"))}),w.all(i).then(function(){r.resolve()},function(e){r.reject(e)}))}catch(e){r.reject(e)}},function(e){r.reject(e)})};l()}else t.file(function(e){try{e.path=(n||"")+e.name,f&&(e=b.rename(e,e.path)),c.push(e),d+=e.size,r.resolve()}catch(e){r.reject(e)}},function(e){r.reject(e)});return r.promise}var i=[b.emptyPromise()];if(e&&0<e.length&&"file:"!==y.location.protocol)for(var a=0;a<e.length;a++){if(e[a].webkitGetAsEntry&&e[a].webkitGetAsEntry()&&e[a].webkitGetAsEntry().isDirectory){var o=e[a].webkitGetAsEntry();if(o.isDirectory&&!n)continue;null!=o&&i.push(p(o))}else{var l=e[a].getAsFile();null!=l&&(c.push(l),d+=l.size)}if(c.length>s||u<d||!r&&0<c.length)break}else if(null!=t)for(var g=0;g<t.length;g++){var h=t.item(g);if((h.type||0<h.size)&&(c.push(h),d+=h.size),c.length>s||u<d||!r&&0<c.length)break}var v=w.defer();return w.all(i).then(function(){if(r||f||!c.length)v.resolve(c);else{for(var e=0;c[e]&&"directory"===c[e].type;)e++;v.resolve([c[e]])}},function(e){v.reject(e)}),v.promise})(e.items,e.files,!1!==$("ngfAllowDir",m),$("multiple")||$("ngfMultiple",m)).then(function(e){e.length?d(e,t):function(e,t){if(!b.shouldUpdateOn(e,_,m)||"string"!=typeof t)return b.rejectPromise([]);var r=[];t.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){r.push(n)});var n=[],i=[];if(r.length){angular.forEach(r,function(e){n.push(b.urlToBlob(e).then(function(e){i.push(e)}))});var a=w.defer();return w.all(n).then(function(){a.resolve(i)},function(e){a.reject(e)}),a.promise}return b.emptyPromise()}(n,r).then(function(e){d(e,t)})})}}function d(e,t){b.updateModel(r,_,m,$("ngfChange")||$("ngfDrop"),e,t)}}(e,t,n,r,i,a,o,l,0,s)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){p()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(i,a,o){return function(e,t,n){if(p()){var r=i(o.attrGetter("ngfDropAvailable",n));a(function(){r(e),r.assign&&r.assign(e,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,r){var s=e;return s.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&s.isResizeSupported()},s.readOrientation=function(e){var f=r.defer(),t=new FileReader,n=e.slice?e.slice(0,65536):e;return t.readAsArrayBuffer(n),t.onerror=function(e){return f.reject(e)},t.onload=function(e){var t={orientation:1},n=new DataView(this.result);if(65496!==n.getUint16(0,!1))return f.resolve(t);for(var r=n.byteLength,i=2;i<r;){var a=n.getUint16(i,!1);if(i+=2,65505===a){if(1165519206!==n.getUint32(i+=2,!1))return f.resolve(t);var o=18761===n.getUint16(i+=6,!1);i+=n.getUint32(i+4,o);var l=n.getUint16(i,o);i+=2;for(var s=0;s<l;s++)if(274===n.getUint16(i+12*s,o)){var u=n.getUint16(i+12*s+8,o);return 2<=u&&u<=8&&(n.setUint16(i+12*s+8,1,o),t.fixedArrayBuffer=e.target.result),t.orientation=u,f.resolve(t)}}else{if(65280!=(65280&a))break;i+=n.getUint16(i,!1)}}return f.resolve(t)},f.promise},s.applyExifRotation=function(o){if(0!==o.type.indexOf("image/jpeg"))return s.emptyPromise(o);var l=r.defer();return s.readOrientation(o).then(function(a){if(a.orientation<2||8<a.orientation)return l.resolve(o);s.dataUrl(o,!0).then(function(e){var r=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){try{r.width=4<a.orientation?i.height:i.width,r.height=4<a.orientation?i.width:i.height;var e=r.getContext("2d");!function(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:e.transform(0,-1,1,0,0,n)}}(e,a.orientation,i.width,i.height),e.drawImage(i,0,0);var t=r.toDataURL(o.type||"image/WebP",.934);t=s.restoreExif(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(a.fixedArrayBuffer),t);var n=s.dataUrltoBlob(t,o.name);l.resolve(n)}catch(e){return l.reject(e)}},i.onerror=function(){l.reject()},i.src=e},function(e){l.reject(e)})},function(e){l.reject(e)}),l.promise},s.restoreExif=function(e,t){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){for(var t,n,r,i,a,o="",l="",s="",u=0;r=(t=e[u++])>>2,i=(3&t)<<4|(n=e[u++])>>4,a=(15&n)<<2|(l=e[u++])>>6,s=63&l,isNaN(n)?a=s=64:isNaN(l)&&(s=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s),t=n=l="",r=i=a=s="",u<e.length;);return o},restore:function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},exifManipulation:function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),a=r.slice(0,i),o=r.slice(i),l=a;return l=(l=l.concat(t)).concat(o)},slice2Segments:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n},decode64:function(e){var t,n,r,i,a="",o="",l=0,s=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(l++))<<2|(r=this.KEY_STR.indexOf(e.charAt(l++)))>>4,n=(15&r)<<4|(i=this.KEY_STR.indexOf(e.charAt(l++)))>>2,a=(3&i)<<6|(o=this.KEY_STR.indexOf(e.charAt(l++))),s.push(t),64!==i&&s.push(n),64!==o&&s.push(a),t=n=a="",r=i=o="",l<e.length;);return s}};return n.restore(e,t)},s}]),function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function o(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(e){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var i=function(n){if(!n.__listeners){n.upload||(n.upload={}),n.__listeners=[];var r=n.upload.addEventListener;n.upload.addEventListener=function(e,t){n.__listeners[e]=t,r&&r.apply(this,arguments)}}};e("open",function(r){return function(t,e,n){i(this),this.__url=e;try{r.apply(this,[t,e,n])}catch(e){-1<e.message.indexOf("Access is denied")&&(this.__origError=e,r.apply(this,[t,"_fix_for_ie_crossdomain__",n]))}}}),e("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(r){return function(e,t){if("__setXHR_"===e){i(this);var n=t(this);n instanceof Function&&n(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=t,r.apply(this,arguments)}}),e("send",function(a){return function(){var r=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var e=arguments[0],t={url:r.__url,jsonp:!1,cache:!0,complete:function(e,t){e&&angular.isString(e)&&-1!==e.indexOf("#2174")&&(e=null),r.__completed=!0,!e&&r.__listeners.load&&r.__listeners.load({type:"load",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),!e&&r.__listeners.loadend&&r.__listeners.loadend({type:"loadend",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),"abort"===e&&r.__listeners.abort&&r.__listeners.abort({type:"abort",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),void 0!==t.status&&o(r,"status",function(){return 0===t.status&&e&&"abort"!==e?500:t.status}),void 0!==t.statusText&&o(r,"statusText",function(){return t.statusText}),o(r,"readyState",function(){return 4}),void 0!==t.response&&o(r,"response",function(){return t.response});var n=t.responseText||(e&&0===t.status&&"abort"!==e?e:void 0);o(r,"responseText",function(){return n}),o(r,"response",function(){return n}),e&&o(r,"err",function(){return e}),r.__fileApiXHR=t,r.onreadystatechange&&r.onreadystatechange(),r.onload&&r.onload()},progress:function(e){if((e.target=r).__listeners.progress&&r.__listeners.progress(e),r.__total=e.total,r.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){r.__completed||(r.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:r.__requestHeaders,data:{},files:{}},n=0;n<e.data.length;n++){var i=e.data[n];null!=i.val&&null!=i.val.name&&null!=i.val.size&&null!=i.val.type?t.files[i.key]=i.val:t.data[i.key]=i.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';r.__fileApiXHR=FileAPI.upload(t)},1)}else{if(this.__origError)throw this.__origError;a.apply(r,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function o(e){var t=0,n=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)for(;t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;);return{left:t,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=e(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var t,n,r,i,a,l=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)t=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)n=window.FileAPI.jsPath;else for(r=0;r<s.length;r++)if(-1<(i=(a=s[r].src).search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/))){n=a.substring(0,i+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=n),l.setAttribute("src",t||n+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(l)}FileAPI.ngfFixIE=function(n,r,i){if(!e())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.bind("mouseenter",function(){var e,t=r.parent();n.attr("disabled")?t&&t.removeClass("js-fileapi-wrapper"):(r.attr("__ngf_flash_")||(r.unbind("change"),r.unbind("click"),r.bind("change",function(e){a.apply(this,[e]),i.apply(this,[e])}),r.attr("__ngf_flash_","true")),t.addClass("js-fileapi-wrapper"),"input"===(e=n)[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()||(t.css("position","absolute").css("top",o(n[0]).top+"px").css("left",o(n[0]).left+"px").css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",n.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),r.css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))});var a=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!==e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var r=this,n=!1;this.listeners={},this.addEventListener=function(e,t){r.listeners[e]=r.listeners[e]||[],r.listeners[e].push(t)},this.removeEventListener=function(e,t){r.listeners[e]&&r.listeners[e].splice(r.listeners[e].indexOf(t),1)},this.dispatchEvent=function(e){var t=r.listeners[e.type];if(t)for(var n=0;n<t.length;n++)t[n].call(r,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var i=function(e,t){var n={type:e,target:r,loaded:t.loaded,total:t.total,error:t.error};return null!=t.result&&(n.target.result=t.result),n},t=function(e){var t;n||(n=!0,r.onloadstart&&r.onloadstart(i("loadstart",e))),"load"===e.type?(r.onloadend&&r.onloadend(i("loadend",e)),t=i("load",e),r.onload&&r.onload(t)):"progress"===e.type?(t=i("progress",e),r.onprogress&&r.onprogress(t)):(t=i("error",e),r.onerror&&r.onerror(t)),r.dispatchEvent(t)};this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,t)},this.readAsText=function(e){FileAPI.readAsText(e,t)}});
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return r[e].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}return o.m=r,o.c=n,o.p="",o(0)}([function(e,t,r){"use strict";var n=r(1),o=r(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",n)},function(e,t){"use strict";var r=function(o){return{restrict:"A",link:function(e,t,r){var n=e.$eval(r.dragular)||function(e){try{return JSON.parse(e)}catch(e){return}}(r.dragular)||{};r.dragularModel&&(n.containersModel=r.dragularModel,n.scope||(n.scope=e)),r.dragularNameSpace&&(n.nameSpace=r.dragularNameSpace.split(" ")),r.dragularOnInit&&(n.onInit=e.$eval(r.dragularOnInit)),o(t[0],n)}}};r.$inject=["dragularService"],e.exports=r},function(e,t){"use strict";var le={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},r=function(D,F){var j=document,H=j.documentElement,P=Array.isArray,k=angular.isFunction;return e.cleanEnviroment=function(){le.classesCache={},le.containersCtx={},le.containers={},le.mirror=void 0},e.shared=le,e;function e(e,t){var m,r=e||[],n=t||{},g=ae,o={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},i={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},a={copyOptions:!1,classes:o,eventNames:i,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:R,isContainerModel:V,isContainerAccepts:W,moves:W,accepts:W,canBeAccepted:W,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:R,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:j.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},u={containers:le.containers,containersCtx:le.containersCtx,sanitizeContainersModel:function(e){console.warn("Deprecated method drake.sanitizeContainersModel! Will be removed in next major release! Please use sanitizeContainers instead."),L(e,!0,m.scope)},sanitizeContainers:L,isContainer:N,start:function(e){var t=p(e);t&&(le.grabbed=t,d())},end:v,cancel:O,remove:B,destroy:function(){l(!0),t=m.containers,D.$applyAsync(function(){var e=P(t)?t:K(t);e.forEach(function(r){angular.forEach(m.nameSpace,function(e){var t;t=le.containers[e].indexOf(r),le.containers[e].splice(t,1),le.containersCtx[e].splice(t,1)})})}),T({});var t},dragging:!1};return function(){1!==arguments.length||P(e)||angular.isElement(e)||e[0]||"string"==typeof e?"string"==typeof e&&(r=document.querySelectorAll(e)):(n=e||{},r=[]);m=n.copyOptions?angular.copy(n):n}(),function(){var e=angular.extend({},a,m);angular.extend(m,e),m.classes&&(e=angular.extend({},o,m.classes),angular.extend(m.classes,e));m.eventNames&&(e=angular.extend({},i,m.eventNames),angular.extend(m.eventNames,e))}(),function(){e=m.boundingBox,("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)||(m.boundingBox=!1);var e;m.containers&&(r=m.containers);m.containers=L(r,!1,m.scope),m.containersModel=L(m.containersModel,!0,m.scope),P(m.containersFilteredModel)?m.containersFilteredModel=P(m.containersFilteredModel[0])?m.containersFilteredModel:[m.containersFilteredModel]:m.containersFilteredModel=[];m.nameSpace||(m.nameSpace=["dragularCommon"]);P(m.nameSpace)||(m.nameSpace=[m.nameSpace]);m.nameSpace.forEach(function(e){le.containers[e]||(le.containers[e]=[],le.containersCtx[e]=[]);for(var t,r=I(m).length,n=0;n<r;n++){if(!(t=I(m)[n]))throw new Error("Container element must be defined!");if(-1!==le.containers[e].indexOf(t))throw new Error("Cannot register container element more than once! Container element: ");le.containers[e].push(t),le.containersCtx[e].push({o:m,m:X(m)[n],fm:m.containersFilteredModel[n]})}})}(),l(),m.onInit&&m.onInit(u,m),u;function l(e){z(H,e?"off":"on","mouseup",T),I(m).forEach(function(e){z(e,"on","mousedown",c)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var t=m.eventNames[e];le.dragOverEvents[t]||(j.createEvent?(le.dragOverEvents[t]=j.createEvent("HTMLEvents"),le.dragOverEvents[t].initEvent(t,!0,!0)):(le.dragOverEvents[t]=j.createEventObject(),le.dragOverEvents[t].eventType=t))})}function c(e){if(1===U(e)&&!e.metaKey&&!e.ctrlKey){le.moveX=e.clientX,le.moveY=e.clientY;var t=p(e.target);t&&t.item&&(le.grabbed=t,d(),"mousedown"===e.type&&(ne(e.target)?e.target.focus():e.preventDefault()))}}function d(e){z(H,e?"off":"on","mousemove",s)}function s(e){if(le.grabbed&&!u.dragging)if(e.originalEvent&&(e=e.originalEvent),0!==U(e)){if(!e.clientX||e.clientX!==le.moveX||!e.clientY||e.clientY!==le.moveY){if(g(m.ignoreInputTextSelection)){var t=te("clientX",e),r=te("clientY",e);if(ne(j.elementFromPoint(t,r)))return}var n=le.grabbed;if(d("remove"),f(),v(),function(e){le.sourceItem=le.item=e.item,le.source=e.source,le.initialSibling=le.currentSibling=Z(e.item),g(m.copy,[e.item,e.source])?(le.item=e.item.cloneNode(!0),le.copy=!0,m.scope&&m.scope.$emit(m.eventNames.dragularcloned,le.item,e.item)):le.copy=!1;var t=I(m).indexOf(e.source);le.sourceModel=X(m)[t],le.sourceFilteredModel=m.containersFilteredModel[t],le.initialIndex=oe(e.item,e.source),u.dragging=!0,m.scope&&m.scope.$emit(m.eventNames.dragulardrag,le.sourceItem,le.source)}(n),le.item){if(!m.direction&&re(le.sourceItem)){var o=le.sourceItem.parentNode,i=o.offsetHeight,a=o.offsetWidth,l=le.sourceItem.clientHeight,c=le.sourceItem.clientWidth;m.direction=i/l<a/c?"horizontal":"vertical"}var s=J(le.sourceItem);le.offsetX=te("pageX",e)-s.left,le.offsetY=te("pageY",e)-s.top,le.clientX=te("clientX",e),le.clientY=te("clientY",e),m.boundingBox&&(le.offsetXr=te("pageX",e)-s.right,le.offsetYb=te("pageY",e)-s.bottom),e.preventDefault(),function(){if(le.mirror)return;var e=le.sourceItem.getBoundingClientRect();le.mirror=le.sourceItem.cloneNode(!0),le.mirrorWidth=e.width,le.mirrorHeight=e.height,le.mirror.style.width=G(e)+"px",le.mirror.style.height=Q(e)+"px",_(le.mirror,m.classes.mirror),m.mirrorContainer.appendChild(le.mirror),z(H,"on","mousemove",x),_(j.body,m.classes.unselectable),z(le.mirror,"on","wheel",A),m.scope&&m.scope.$emit(m.eventNames.dragularcloned,le.mirror,le.sourceItem)}(),_(le.item,m.classes.transit),le.mirror.style.left=le.clientX-le.offsetX+"px",le.mirror.style.top=le.clientY-le.offsetY+"px",x(e)}}}else T({})}function f(e){var t=e?"off":"on";z(H,t,"selectstart",q),z(H,t,"click",q),z(H,t,"touchmove",q)}function p(e){if(!u.dragging||!le.mirror){for(var t=e;re(e)&&!N(re(e));){if(m.invalid(e,t))return;if(!(e=re(e)))return}var r=re(e);if(r&&!m.invalid(e,t)&&m.moves(e,r,t,Z(e)))return{item:e,source:r}}}function v(){u.dragging&&le.item&&w(le.item,re(le.item))}function h(){le.grabbed=!1,d("remove"),f("remove")}function x(r){if(le.mirror){r.originalEvent&&(r=r.originalEvent),le.clientX=te("clientX",r),le.clientY=te("clientY",r);var e,t,n,o=le.clientX-le.offsetX,i=le.clientY-le.offsetY;m.boundingBox&&(e=te("pageX",r),t=te("pageY",r),n=J(m.boundingBox)),m.lockY||(!m.boundingBox||e>n.left+le.offsetX&&e<n.right+le.offsetXr?le.mirror.style.left=o+"px":m.boundingBox&&(e<n.left+le.offsetX?le.mirror.style.left=le.clientX-(e-n.left)+"px":le.mirror.style.left=le.clientX-le.mirrorWidth-(e-n.right)+"px")),m.lockX||(!m.boundingBox||t>n.top+le.offsetY&&t<n.bottom+le.offsetYb?le.mirror.style.top=i+"px":m.boundingBox&&(t<n.top+le.offsetY?le.mirror.style.top=le.clientY-(t-n.top)+"px":le.mirror.style.top=le.clientY-le.mirrorHeight-(t-n.bottom)+"px"));var a=S(le.mirror,le.clientX,le.clientY),l=y(a,le.clientX,le.clientY),c=l!==le.lastDropTarget;if(a!==le.lastElementBehindCursor&&(ie(a,le.dragOverEvents.dragularenter,!!l),le.lastElementBehindCursor&&ie(le.lastElementBehindCursor,le.dragOverEvents.dragularleave,a),le.lastElementBehindCursor=a),c&&(le.lastDropTarget&&d("out"),le.lastDropTarget=l,d("over")),l!==le.source||!le.copy||g(m.copySortSource)){var s,u=b(l,a);if(null!==u)s=E(l,u,le.clientX,le.clientY);else{if(!0!==g(m.revertOnSpill)||le.copy)return void(le.copy&&re(le.item)&&le.item.parentNode.removeChild(le.item));s=le.initialSibling,l=le.source}(null===s||s!==le.item&&s!==Z(le.item)&&s!==le.currentSibling)&&(le.currentSibling=s,l.insertBefore(le.item,s),m.scope&&m.scope.$emit(m.eventNames.dragularshadow,le.item,l,r))}else re(le.item)&&le.item.parentNode.removeChild(le.item)}function d(t){function e(e){e.$emit(m.eventNames["dragular"+t],le.item,le.lastDropTarget,le.source,r)}m.scope&&e(m.scope),le.targetCtx&&le.targetCtx.o.scope&&le.targetCtx.o.scope!==m.scope&&e(le.targetCtx.o.scope),!0===g(m.removeOnSpill)&&("over"===t?ee(le.item,m.classes.hide):M())}}function y(i,a,l){for(var c=i,s=null;c&&!e();)c=re(c);return c&&s&&(le.targetCtx=s),c;function e(){if(!N(c))return!1;for(var e,t=b(c,i),r=E(c,t,a,l),n=C(c,r),o=m.nameSpace.length;o--;)if(e=m.nameSpace[o],-1!==le.containers[e].indexOf(c)){s=u(e);break}return le.target=c,!!n||(s||(s=u("dragularCommon")),s&&k(s.o.containersModel)&&(s.m=X(s.o)[I(s.o).indexOf(c)]),!(s&&s.o.accepts&&!s.o.accepts(le.item,c,le.source,r,le.sourceModel,le.initialIndex))&&(!(m.isContainer&&m.isContainerAccepts&&!m.isContainerAccepts(le.item,c,le.source,r,le.sourceModel,le.initialIndex))&&(!m.canBeAccepted||m.canBeAccepted(le.item,c,le.source,r,le.sourceModel,le.initialIndex))))}function u(e){return le.containersCtx[e]&&le.containersCtx[e][le.containers[e].indexOf(c)]}}function M(){u.dragging&&_(le.item,m.classes.hide)}function C(e,t){var r=void 0!==t?t:le.mirror?le.currentSibling:Z(le.item);return e===le.source&&r===le.initialSibling}function b(e,t){for(var r=t;r!==e&&re(r)!==e;)r=re(r);return r===H?null:r}function E(o,t,i,a){var l="horizontal"===m.direction;return t!==o?function(){var e=t.getBoundingClientRect();if(l)return r(i>e.left+G(e)/2);return r(a>e.top+Q(e)/2)}():function(){var e,t,r,n=o.children.length;for(e=0;e<n;e++){if(t=o.children[e],r=t.getBoundingClientRect(),l&&r.left>i)return t;if(!l&&r.top>a)return t}return null}();function r(e){return e?Z(t):t}}function S(e,t,r){var n,o=e||{},i=o.className;return o.className+=" "+m.classes.hide,n=j.elementFromPoint(t,r),o.className=i,n}function N(e){if(!e)return!1;for(var t=m.nameSpace.length;t--;)if(-1!==le.containers[m.nameSpace[t]].indexOf(e))return!0;return m.isContainer(e)?(le.tempModel=m.isContainerModel(e),!0):(le.tempModel=null,!1)}function I(e){return Y("containers",e)}function X(e){return Y("containersModel",e,!0)}function Y(e,t,r){return k(t[e])?L(t[e](t===m?u:null,le),r,t.scope):t[e]}function O(e){if(u.dragging){var t=0<arguments.length?e:g(m.revertOnSpill),r=re(le.item),n=C(r);n||le.copy||!t||le.source.insertBefore(le.item,le.initialSibling),!le.sourceModel||le.copy||t?m.scope&&(n||t)&&m.scope.$emit(m.eventNames.dragularcancel,le.item,le.source,le.sourceModel,le.initialIndex):w(le.item,r),(!le.sourceModel||le.copy||t||n)&&$()}}function T(e){if(h(),u.dragging){e.originalEvent&&(e=e.originalEvent),le.clientX=te("clientX",e),le.clientY=te("clientY",e);var t=S(le.mirror,le.clientX,le.clientY),r=y(t,le.clientX,le.clientY);r&&(le.copy&&g(m.copySortSource)||!le.copy||r!==le.source)?w(le.item,r):g(m.removeOnSpill)?B():O(),le.target=null,le.lastElementBehindCursor&&ie(le.lastElementBehindCursor,le.dragOverEvents.dragularrelease,t),m.scope&&m.scope.$emit(m.eventNames.dragularrelease,le.item,le.source,e)}}function w(r,n){if(r){var o=le.sourceItem,i=le.currentSibling,a=oe(r,n);le.copy&&n===le.source&&re(r)&&g(m.copySortSource)&&r.parentNode.removeChild(le.sourceItem),le.sourceModel&&!C(n)?(le.targetCtx&&le.targetCtx.fm&&(a=le.targetCtx.m.indexOf(le.targetCtx.fm[a])),le.sourceFilteredModel&&(le.initialIndex=le.sourceModel.indexOf(le.sourceFilteredModel[le.initialIndex])),D.$applyAsync(function(){le.sourceModel&&(n===le.source?le.sourceModel.splice(a,0,le.sourceModel.splice(le.initialIndex,1)[0]):(le.dropElmModel=le.copy&&!m.dontCopyModel?angular.copy(le.sourceModel[le.initialIndex]):le.sourceModel[le.initialIndex],le.tempModel?le.targetModel=le.tempModel:le.targetModel=le.targetCtx&&le.targetCtx.m||le.sourceModel,r.parentNode.removeChild(r),le.copy||le.sourceModel.splice(le.initialIndex,1),le.targetModel&&le.targetModel.splice(a,0,le.dropElmModel)),re(r)&&r.parentNode.removeChild(r),e())})):e()}else $();function e(){if(I(m).forEach(function(e){z(e,"off","mousedown",c),z(e,"on","mousedown",c)}),m.compileItemOnDrop){var t=angular.element(n).scope?angular.element(n).scope():m.scope;t&&t.$applyAsync(function(){var e=F(le.copy?o.cloneNode(!0):o)(t);r.parentNode===n&&n.removeChild(r),n.insertBefore(e[0],i),$()})}function e(e){C(n)?e.$emit(m.eventNames.dragularcancel,r,le.source,le.sourceModel,le.initialIndex):e.$emit(m.eventNames.dragulardrop,r,n,le.source,le.sourceModel,le.initialIndex,le.targetModel,a)}m.scope&&e(m.scope),le.targetCtx&&le.targetCtx.o.scope&&le.targetCtx.o.scope!==m.scope&&e(le.targetCtx.o.scope),m.compileItemOnDrop||$()}}function B(){if(u.dragging){var e=re(le.item);e&&e.removeChild(le.item),le.sourceModel&&D.$applyAsync(function(){le.sourceModel.splice(le.initialIndex,1),$()}),m.scope&&m.scope.$emit(le.copy?m.eventNames.dragularcancel:m.eventNames.dragularremove,le.item,e,le.sourceModel,le.initialIndex),le.sourceModel||$()}}function $(){h(),le.mirror&&(ee(j.body,m.classes.unselectable),z(H,"off","mousemove",x),z(le.mirror,"off","wheel",A),re(le.mirror)&&le.mirror.parentNode.removeChild(le.mirror),le.mirror=null),le.item&&ee(le.item,m.classes.transit),!(u.dragging=!1)===g(m.removeOnSpill)&&M(),m.scope&&(le.lastDropTarget&&m.scope.$emit(m.eventNames.dragularout,le.item,le.lastDropTarget,le.source),m.scope.$emit(m.eventNames.dragulardragend,le.item)),le.source=le.item=le.sourceItem=le.initialSibling=le.currentSibling=le.sourceModel=null,le.initialIndex=le.currentIndex=le.lastDropTarget=le.tempModel=le.targetModel=null,le.dropElmModel=le.targetCtx=le.copy=le.moveX=le.moveY=null}function A(e){if(le.target){e.originalEvent&&(e=e.originalEvent);var t=le.target.scrollTop;le.target.scrollTop+=e.deltaY,t!==le.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}}function L(e,t,r){if(k(e))return e;if(P(e))return t?P(e[0])?e:[e]:e;if("string"==typeof e&&r){var n=r.$eval(e);return k(n)?n:function(){return r.$eval(e)}}return e?K(e):[]}function z(e,t,r,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[t]](r,n,{passive:!1}),e[c[t]](o[r],n,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[r]?l[t](i[r],n):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[r]?l[t](a[r],n):o[r]&&l[t](o[r],n),l[t](r,n)}function R(){return!1}function W(){return!0}function K(e,t){return P(e)?e:e.length?Array.prototype.slice.call(e,t):[e]}function U(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function q(e){e.originalEvent&&(e=e.originalEvent),le.grabbed&&e.preventDefault()}function o(e,t){return void 0!==window[t]?window[t]:H.clientHeight?H[e]:j.body[e]}function J(e){var t=e.getBoundingClientRect(),r=o("scrollTop","pageYOffset"),n=o("scrollLeft","pageXOffset");return{left:t.left+n,right:t.right+n,top:t.top+r,bottom:t.bottom+r}}function G(e){return e.width||e.right-e.left}function Q(e){return e.height||e.bottom-e.top}function V(){return[]}function Z(t){if(t)return t.nextElementSibling||function(){var e=t;for(;e=e.nextSibling,e&&1!==e.nodeType;);return e}()}function n(e){var t=le.classesCache[e];return t?t.lastIndex=0:le.classesCache[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}function _(e,t){var r=e.className;r.length?n(t).test(r)||(e.className+=" "+t):e.className=t}function ee(e,t){e.className=e.className.replace(n(t)," ").trim()}function te(e,t){var r,n=(r=t).targetTouches&&r.targetTouches.length?r.targetTouches[0]:r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,o={pageX:"clientX",pageY:"clientY"};return e in o&&!(e in n)&&o[e]in n&&(e=o[e]),!n.type||n.type.indexOf("touch")<0?n[e]:-1===n.type.indexOf("end")&&n.originalEvent.touches[0][e.replace("client","page")]}function re(e){return e.parentNode===document?null:e.parentNode}function ne(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(re(t))}(e)}function oe(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function ie(e,t,r){e&&(le.extra=r,e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t))}function ae(e,t,r){return k(e)?!!e.apply(r||this,t||le):!!e}};r.$inject=["$rootScope","$compile"],e.exports=r}])});
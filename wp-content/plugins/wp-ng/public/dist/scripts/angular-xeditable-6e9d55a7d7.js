angular.module("xeditable",[]).value("editableOptions",{theme:"default",icon_set:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus",isDisabled:!1,activationEvent:"click",submitButtonTitle:"Submit",submitButtonAriaLabel:"Submit",cancelButtonTitle:"Cancel",cancelButtonAriaLabel:"Cancel",clearButtonTitle:"Clear",clearButtonAriaLabel:"Clear",displayClearButton:!1}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory",function(t){return t({directiveName:"editableBsdate",inputTpl:"<div></div>",render:function(){this.parent.render.call(this);var t=angular.element('<input type="text" class="form-control" data-ng-model="$parent.$data"/>');if(t.attr("uib-datepicker-popup",this.attrs.eDatepickerPopupXEditable||"yyyy/MM/dd"),t.attr("is-open",this.attrs.eIsOpen),t.attr("date-disabled",this.attrs.eDateDisabled),t.attr("uib-datepicker-popup",this.attrs.eDatepickerPopup),t.attr("year-range",this.attrs.eYearRange||20),t.attr("show-button-bar",this.attrs.eShowButtonBar||!0),t.attr("current-text",this.attrs.eCurrentText||"Today"),t.attr("clear-text",this.attrs.eClearText||"Clear"),t.attr("close-text",this.attrs.eCloseText||"Done"),t.attr("close-on-date-selection",this.attrs.eCloseOnDateSelection||!0),t.attr("datepicker-append-to-body",this.attrs.eDatePickerAppendToBody||!1),t.attr("date-disabled",this.attrs.eDateDisabled),t.attr("name",this.attrs.eName),t.attr("on-open-focus",this.attrs.eOnOpenFocus||!0),t.attr("ng-readonly",this.attrs.eReadonly||!1),this.attrs.eNgChange&&(t.attr("ng-change",this.attrs.eNgChange),this.inputEl.removeAttr("ng-change")),this.attrs.eStyle&&(t.attr("style",this.attrs.eStyle),this.inputEl.removeAttr("style")),this.scope.dateOptions={formatDay:this.attrs.eFormatDay||"dd",formatMonth:this.attrs.eFormatMonth||"MMMM",formatYear:this.attrs.eFormatYear||"yyyy",formatDayHeader:this.attrs.eFormatDayHeader||"EEE",formatDayTitle:this.attrs.eFormatDayTitle||"MMMM yyyy",formatMonthTitle:this.attrs.eFormatMonthTitle||"yyyy",showWeeks:!this.attrs.eShowWeeks||"true"===this.attrs.eShowWeeks.toLowerCase(),startingDay:this.attrs.eStartingDay||0,minMode:this.attrs.eMinMode||"day",maxMode:this.attrs.eMaxMode||"year",initDate:this.scope.$eval(this.attrs.eInitDate)||new Date,datepickerMode:this.attrs.eDatepickerMode||"day",maxDate:this.scope.$eval(this.attrs.eMaxDate)||null,minDate:this.scope.$eval(this.attrs.eMinDate)||null},"true"===(angular.isDefined(this.attrs.eShowCalendarButton)?this.attrs.eShowCalendarButton:"true")){var e=angular.element('<button type="button" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button>'),a=angular.element('<span class="input-group-btn"></span>');e.attr("ng-click",this.attrs.eNgClick),a.append(e),this.inputEl.append(a)}else t.attr("ng-click",this.attrs.eNgClick);t.attr("datepicker-options","dateOptions"),this.inputEl.prepend(t),this.inputEl.removeAttr("class"),this.inputEl.removeAttr("ng-click"),this.inputEl.removeAttr("is-open"),this.inputEl.removeAttr("init-date"),this.inputEl.removeAttr("datepicker-popup"),this.inputEl.removeAttr("required"),this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("date-picker-append-to-body"),this.inputEl.removeAttr("name"),this.inputEl.attr("class","input-group")}})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(t){return t({directiveName:"editableBstime",inputTpl:"<uib-timepicker></uib-timepicker>",render:function(){this.parent.render.call(this);var t=angular.element('<div class="well well-small" style="display:inline-block;"></div>');t.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(t.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(t)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(t){return t({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.attrs.eTitle&&(this.inputEl.wrap("<label></label>"),this.inputEl.parent().append("<span>"+this.attrs.eTitle+"</span>"))},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(t,n){return t({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var t=n(this.attrs.eNgOptions),e="",a="";this.attrs.eNgChange&&(e=' ng-change="'+this.attrs.eNgChange+'"'),this.attrs.eChecklistComparator&&(a=' checklist-comparator="'+this.attrs.eChecklistComparator+'"');var i='<label ng-repeat="'+t.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$parent.$data" checklist-value="'+t.locals.valueFn+'"'+e+a+'><span ng-bind="'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.removeAttr("ng-change"),this.inputEl.removeAttr("checklist-comparator"),this.inputEl.html(i)}})}]),angular.module("xeditable").directive("editableCombodate",["editableDirectiveFactory","editableCombodate",function(t,n){return t({directiveName:"editableCombodate",inputTpl:'<input type="text">',render:function(){this.parent.render.call(this);var a={value:new Date(this.scope.$data)},i=this;angular.forEach(["format","template","minYear","maxYear","yearDescending","minuteStep","secondStep","firstItem","errorClass","customClass","roundTime","smartDays"],function(t){var e="e"+t.charAt(0).toUpperCase()+t.slice(1);e in i.attrs&&(a[t]=i.attrs[e])});var e=n.getInstance(this.inputEl,a);e.$widget.find("select").bind("change",function(t){i.scope.$data=new Date(e.getValue()).toISOString()})}})}]),function(){var t="text|password|email|tel|number|url|search|color|date|datetime|datetime-local|time|month|week|file".split("|");angular.forEach(t,function(e){var a=("editable-"+e).toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()});angular.module("xeditable").directive(a,["editableDirectiveFactory",function(t){return t({directiveName:a,inputTpl:'<input type="'+e+'">',render:function(){if(this.parent.render.call(this),this.attrs.eInputgroupleft||this.attrs.eInputgroupright){if(this.inputEl.wrap('<div class="input-group"></div>'),this.attrs.eInputgroupleft){var t=angular.element('<span class="input-group-addon">'+this.attrs.eInputgroupleft+"</span>");this.inputEl.parent().prepend(t)}if(this.attrs.eInputgroupright){var e=angular.element('<span class="input-group-addon">'+this.attrs.eInputgroupright+"</span>");this.inputEl.parent().append(e)}}if(this.attrs.eLabel){var a=angular.element("<label>"+this.attrs.eLabel+"</label>");this.attrs.eInputgroupleft||this.attrs.eInputgroupright?this.inputEl.parent().parent().prepend(a):this.inputEl.parent().prepend(a)}this.attrs.eFormclass&&this.editorEl.addClass(this.attrs.eFormclass)}})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory","$interpolate",function(t,e){return t({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>"+e.startSymbol()+"$data"+e.endSymbol()+"</output>")}})}])}(),angular.module("xeditable").directive("editableTagsInput",["editableDirectiveFactory","editableUtils",function(t,e){var a=t({directiveName:"editableTagsInput",inputTpl:"<tags-input></tags-input>",render:function(){this.parent.render.call(this),this.inputEl.append(e.rename("auto-complete",this.attrs.$autoCompleteElement)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$data")}}),r=a.link;return a.link=function(t,e,a,i){var n=e.find("editable-tags-input-auto-complete");return a.$autoCompleteElement=n.clone(),n.remove(),r(t,e,a,i)},a}]),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser","$interpolate",function(t,i,n){return t({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var t=i(this.attrs.eNgOptions),e="";this.attrs.eNgChange&&(e='ng-change="'+this.attrs.eNgChange+'"');var a='<label data-ng-repeat="'+t.ngRepeat+'"><input type="radio" data-ng-disabled="::'+this.attrs.eNgDisabled+'" data-ng-model="$parent.$parent.$data" data-ng-value="'+n.startSymbol()+"::"+t.locals.valueFn+n.endSymbol()+'"'+e+'><span data-ng-bind="::'+t.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.removeAttr("ng-change"),this.inputEl.html(a)},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){setTimeout(function(){t.scope.$apply(function(){t.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(t){return t({directiveName:"editableSelect",inputTpl:"<select></select>",render:function(){if(this.parent.render.call(this),this.attrs.ePlaceholder){var t=angular.element('<option value="">'+this.attrs.ePlaceholder+"</option>");this.inputEl.append(t)}},autosubmit:function(){var t=this;t.inputEl.bind("change",function(){t.scope.$apply(function(){t.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(t){return t({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var t=this;t.parent.addListeners.call(t),t.single&&"no"!==t.buttons&&t.autosubmit()},autosubmit:function(){var e=this;e.inputEl.bind("keydown",function(t){(t.ctrlKey||t.metaKey)&&13===t.keyCode&&e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableUiSelect",["editableDirectiveFactory","editableUtils",function(t,e){var a=t({directiveName:"editableUiSelect",inputTpl:"<ui-select></ui-select>",render:function(){this.parent.render.call(this),this.inputEl.append(e.rename("ui-select-match",this.attrs.$matchElement)),this.inputEl.append(e.rename("ui-select-choices",this.attrs.$choicesElement)),this.inputEl.removeAttr("ng-model"),this.inputEl.attr("ng-model","$parent.$parent.$data")}}),s=a.link;return a.link=function(t,e,a,i){var n=e.find("editable-ui-select-match"),r=e.find("editable-ui-select-choices");return a.$matchElement=n.clone(),a.$choicesElement=r.clone(),n.remove(),r.remove(),s(t,e,a,i)},a}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(t,m){function e(a,o,i,e,t,n,l,r,s,u){var c,d,p=this;p.scope=a,p.elem=i,p.attrs=o,p.inputEl=null,p.editorEl=null,p.single=!0,p.error="",p.theme=t[o.editableTheme]||t[l.theme]||t.default,p.parent={},p.icon_set="default"===l.icon_set?n.default[l.theme]:n.external[l.icon_set],p.inputTpl="",p.directiveName="",p.useCopy=!1,p.single=null,p.buttons="right",p.init=function(t){if(p.single=t,p.name=o.eName||o[p.directiveName],!o[p.directiveName])throw"You should provide value for `"+p.directiveName+"` in editable element!";c=e(o[p.directiveName]),p.single?p.buttons=p.attrs.buttons||l.buttons:p.buttons="no",o.eName&&p.scope.$watch("$data",function(t){p.scope.$form.$data[o.eName]=t}),o.onshow&&(p.onshow=function(){return p.catchError(e(o.onshow)(a))}),o.onhide&&(p.onhide=function(){return e(o.onhide)(a)}),o.oncancel&&(p.oncancel=function(){return e(o.oncancel)(a)}),o.onbeforesave&&(p.onbeforesave=function(){return p.catchError(e(o.onbeforesave)(a))}),o.onaftersave&&(p.onaftersave=function(){return p.catchError(e(o.onaftersave)(a))}),a.$parent.$watch(o[p.directiveName],function(t,e){p.setLocalValue(),p.handleEmpty()})},p.render=function(){var t=p.theme;for(var e in p.inputEl=angular.element(p.inputTpl),p.controlsEl=angular.element(t.controlsTpl),p.controlsEl.append(p.inputEl),"no"!==p.buttons&&(p.buttonsEl=angular.element(t.buttonsTpl),p.submitEl=angular.element(t.submitTpl),p.resetEl=angular.element(t.resetTpl),p.cancelEl=angular.element(t.cancelTpl),p.submitEl.attr("title",l.submitButtonTitle),p.submitEl.attr("aria-label",l.submitButtonAriaLabel),p.cancelEl.attr("title",l.cancelButtonTitle),p.cancelEl.attr("aria-label",l.cancelButtonAriaLabel),p.resetEl.attr("title",l.clearButtonTitle),p.resetEl.attr("aria-label",l.clearButtonAriaLabel),p.icon_set&&(p.submitEl.find("span").addClass(p.icon_set.ok),p.cancelEl.find("span").addClass(p.icon_set.cancel),p.resetEl.find("span").addClass(p.icon_set.clear)),p.buttonsEl.append(p.submitEl).append(p.cancelEl),l.displayClearButton&&p.buttonsEl.append(p.resetEl),p.controlsEl.append(p.buttonsEl),p.inputEl.addClass("editable-has-buttons")),p.errorEl=angular.element(t.errorTpl),p.controlsEl.append(p.errorEl),p.editorEl=angular.element(p.single?t.formTpl:t.noformTpl),p.editorEl.append(p.controlsEl),o.$attr)if(!(e.length<=1)){var a=!1,i=e.substring(1,2);if("e"===e.substring(0,1)&&i===i.toUpperCase()&&"Form"!==(a=e.substring(1))&&"NgSubmit"!==a){var n=a.substring(0,1),r=a.substring(1,2),s="value"!==(a=r===r.toUpperCase()&&n===n.toUpperCase()?n.toLowerCase()+"-"+m.camelToDash(a.substring(1)):n.toLowerCase()+m.camelToDash(a.substring(1)))&&""===o[e]?a:o[e];p.inputEl.attr(a,s)}}p.inputEl.addClass("editable-input"),p.inputEl.attr("ng-model","$parent.$data"),p.editorEl.addClass(m.camelToDash(p.directiveName)),p.single&&(p.editorEl.attr("editable-form","$form"),p.editorEl.attr("blur",p.attrs.blur||("no"===p.buttons?"cancel":l.blurElem))),angular.isFunction(t.postrender)&&t.postrender.call(p)},p.setLocalValue=function(){p.scope.$data=p.useCopy?angular.copy(c(a.$parent)):c(a.$parent)};var h=null;p.show=function(){return p.setLocalValue(),p.render(),i.after(p.editorEl),h=a.$new(),s(p.editorEl)(h),p.addListeners(),i.addClass("editable-hide"),p.onshow()},p.hide=function(){return h.$destroy(),p.controlsEl.remove(),p.editorEl.remove(),i.removeClass("editable-hide"),p.onhide()},p.cancel=function(){p.oncancel()},p.addListeners=function(){p.inputEl.bind("keyup",function(t){if(p.single)switch(t.keyCode){case 27:p.scope.$apply(function(){p.scope.$form.$cancel()})}}),p.single&&"no"===p.buttons&&p.autosubmit(),p.editorEl.bind("click",function(t){t.which&&1!==t.which||p.scope.$form.$visible&&(p.scope.$form._clicked=!0)})},p.setWaiting=function(t){t?(d=!p.inputEl.attr("disabled")&&!p.inputEl.attr("ng-disabled")&&!p.inputEl.attr("ng-enabled"))&&(p.inputEl.attr("disabled","disabled"),p.buttonsEl&&p.buttonsEl.find("button").attr("disabled","disabled")):d&&(p.inputEl.removeAttr("disabled"),p.buttonsEl&&p.buttonsEl.find("button").removeAttr("disabled"))},p.activate=function(e,a){setTimeout(function(){var t=p.inputEl[0];"focus"===l.activate&&t.focus?(e&&(a=a||e,t.onfocus=function(){var t=this;setTimeout(function(){t.setSelectionRange(e,a)})}),"editableRadiolist"==p.directiveName||"editableChecklist"==p.directiveName||"editableBsdate"==p.directiveName||"editableTagsInput"==p.directiveName?t.querySelector(".ng-pristine").focus():t.focus()):"select"===l.activate&&(t.select?t.select():t.focus&&t.focus())},0)},p.setError=function(t){angular.isObject(t)||(a.$error=t,p.error=t)},p.catchError=function(t,e){return angular.isObject(t)&&!0!==e?u.when(t).then(angular.bind(this,function(t){this.catchError(t,!0)}),angular.bind(this,function(t){this.catchError(t,!0)})):e&&angular.isObject(t)&&t.status&&200!==t.status&&t.data&&angular.isString(t.data)?(this.setError(t.data),t=t.data):angular.isString(t)&&this.setError(t),t},p.save=function(){c.assign(a.$parent,p.useCopy?angular.copy(p.scope.$data):p.scope.$data)},p.handleEmpty=function(){var t=c(a.$parent),e=null==t||""===t||angular.isArray(t)&&0===t.length;i.toggleClass("editable-empty",e)},p.autosubmit=angular.noop,p.onshow=angular.noop,p.onhide=angular.noop,p.oncancel=angular.noop,p.onbeforesave=angular.noop,p.onaftersave=angular.noop}return e.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableIcons","editableOptions","$rootScope","$compile","$q"],e}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController","editableOptions",function(c,t,e,d,p,a,h,m){return function(u){return{restrict:"A",scope:!0,require:[u.directiveName,"?^form"],controller:a,link:function(e,t,a,i){var n,r=i[0],s=!1;if(i[1])n=i[1],s=void 0===a.eSingle;else if(a.eForm){var o=c(a.eForm)(e);if(o)n=o,s=!0;else if(t&&"function"==typeof t.parents&&t.parents().last().find("form[name="+a.eForm+"]").length)s=!(n=null);else for(var l=0;l<p[0].forms.length;l++)if(p[0].forms[l].name===a.eForm){s=!(n=null);break}}angular.forEach(u,function(t,e){void 0!==r[e]&&(r.parent[e]=r[e])}),angular.extend(r,u);if(r.init(!s),e.$editable=r,t.addClass("editable"),s)if(n){if(e.$form=n,!e.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";e.$form.$addEditable(r)}else d.$$editableBuffer=d.$$editableBuffer||{},d.$$editableBuffer[a.eForm]=d.$$editableBuffer[a.eForm]||[],d.$$editableBuffer[a.eForm].push(r),e.$form=null;else e.$form=h(),e.$form.$addEditable(r),a.eForm&&(c(a.eForm).assign||angular.noop)(e.$parent,e.$form),a.eForm&&!a.eClickable||(t.addClass("editable-click"),t.bind(m.activationEvent,function(t){t.preventDefault(),t.editable=r,(angular.isDefined(a.editDisabled)?e.$eval(a.editDisabled):m.isDisabled)||e.$apply(function(){e.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(t,e,n,a,i){var r=[],s=function(t,e){var a=!0,i=t.$editables;return angular.forEach(i,function(t){(function(t,e){if(e==t)return!0;for(var a=e.parentNode;null!==a;){if(a==t)return!0;a=a.parentNode}return!1})(t.editorEl[0],e.target)&&(a=!1)}),a};e.bind("click",function(t){if(!t.which||1===t.which){for(var e=[],a=[],i=0;i<r.length;i++)r[i]._clicked?r[i]._clicked=!1:r[i].$waiting||("cancel"===r[i]._blur&&s(r[i],t)&&e.push(r[i]),"submit"===r[i]._blur&&s(r[i],t)&&a.push(r[i]));(e.length||a.length)&&n.$apply(function(){angular.forEach(e,function(t){t.$cancel()}),angular.forEach(a,function(t){t.$submit()})})}}),n.$on("closeEdit",function(){for(var t=0;t<r.length;t++)r[t].$hide()});var o={$addEditable:function(t){this.$editables.push(t),t.elem.bind("$destroy",angular.bind(this,this.$removeEditable,t)),t.scope.$form||(t.scope.$form=this),this.$visible&&t.catchError(t.show()),t.catchError(t.setWaiting(this.$waiting))},$removeEditable:function(t){for(var e=0;e<this.$editables.length;e++)if(this.$editables[e]===t)return void this.$editables.splice(e,1)},$show:function(){if(!this.$visible){this.$visible=!0;var e=a();e.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(t){e.when(t.show())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===i.indexOf(r,this)&&r.push(this)}),0)}},$activate:function(t){var e;if(this.$editables.length){if(angular.isString(t))for(e=0;e<this.$editables.length;e++)if(this.$editables[e].name===t)return void this.$editables[e].activate();for(e=0;e<this.$editables.length;e++)if(this.$editables[e].error)return void this.$editables[e].activate();this.$editables[0].activate(this.$editables[0].elem[0].selectionStart,this.$editables[0].elem[0].selectionEnd)}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(t){t.hide()}),i.arrayRemove(r,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(t){t.cancel()}),this.$hide())},$setWaiting:function(e){this.$waiting=!!e,angular.forEach(this.$editables,function(t){t.setWaiting(!!e)})},$setError:function(e,a){angular.forEach(this.$editables,function(t){e&&t.name!==e||t.setError(a)})},$submit:function(){if(!this.$waiting){this.$setError(null,"");var e=a();angular.forEach(this.$editables,function(t){e.when(t.onbeforesave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,t,!0),onFalse:angular.bind(this,t,!1),onString:angular.bind(this,this.$activate)})}function t(t){var e=a();e.when(this.$onbeforesave()),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:t?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(t){t.save()});var e=a();e.when(this.$onaftersave()),angular.forEach(this.$editables,function(t){e.when(t.onaftersave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},o)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(l,r,u,s){return{restrict:"A",require:["form"],compile:function(){return{pre:function(t,e,a,i){var n,r=i[0];a.editableForm?t[a.editableForm]&&t[a.editableForm].$show?(n=t[a.editableForm],angular.extend(r,n)):(n=u(),t[a.editableForm]=n,angular.extend(n,r)):(n=u(),angular.extend(r,n));var s=l.$$editableBuffer,o=r.$name;o&&s&&s[o]&&(angular.forEach(s[o],function(t){n.$addEditable(t)}),delete s[o])},post:function(e,t,a,i){var n;n=a.editableForm&&e[a.editableForm]&&e[a.editableForm].$show?e[a.editableForm]:i[0],a.onshow&&(n.$onshow=angular.bind(n,r(a.onshow),e)),a.onhide&&(n.$onhide=angular.bind(n,r(a.onhide),e)),a.oncancel&&(n.$oncancel=angular.bind(n,r(a.oncancel),e)),a.shown&&r(a.shown)(e)&&n.$show(),n._blur=a.blur||s.blurForm,a.ngSubmit||a.submit||(a.onbeforesave&&(n.$onbeforesave=function(){return r(a.onbeforesave)(e,{$data:n.$data})}),a.onaftersave&&(n.$onaftersave=function(){return r(a.onaftersave)(e,{$data:n.$data})}),t.bind("submit",function(t){t.preventDefault(),e.$apply(function(){n.$submit()})})),t.bind("click",function(t){t.which&&1!==t.which||n.$visible&&(n._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(o){return function(){return{promises:[],hasFalse:!1,hasString:!1,when:function(t,e){if(!1===t)this.hasFalse=!0;else if(!e&&angular.isObject(t))this.promises.push(o.when(t));else{if(!angular.isString(t))return;this.hasString=!0}},then:function(t){var e=(t=t||{}).onTrue||angular.noop,a=t.onFalse||angular.noop,i=t.onString||angular.noop,n=t.onWait||angular.noop,r=this;function s(){r.hasString||r.hasFalse?!r.hasString&&r.hasFalse?a():i():e()}this.promises.length?(n(!0),o.all(this.promises).then(function(t){n(!1),angular.forEach(t,function(t){r.when(t,!0)}),s()},function(t){n(!1),i()})):s()}}}}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var a=0;a<t.length;a++)if(e===t[a])return a;return-1},arrayRemove:function(t,e){var a=this.indexOf(t,e);return 0<=a&&t.splice(a,1),e},camelToDash:function(t){return t.replace(/[A-Z]/g,function(t,e){return(e?"-":"")+t.toLowerCase()})},dashToCamel:function(t){return t.replace(/([\:\-\_]+(.))/g,function(t,e,a,i){return i?a.toUpperCase():a}).replace(/^moz([A-Z])/,"Moz$1")},rename:function(t,e){if(e[0]&&e[0].attributes){var a=angular.element("<"+t+"/>");a.html(e.html());for(var i=e[0].attributes,n=0;n<i.length;++n)a.attr(i.item(n).nodeName,i.item(n).value);return a}}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){var c=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return function(t){var e;if(!(e=t.match(c)))throw"ng-options parse error";var a,i=e[2]||e[1],n=e[4]||e[6],r=e[5],s=(e[3],e[2]?e[1]:n),o=e[7],l=e[8],u=l?e[8]:null;return void 0===r?(a=n+" in "+o,void 0!==l&&(a+=" track by "+u)):a="("+r+", "+n+") in "+o,{ngRepeat:a,locals:{valueName:n,keyName:r,valueFn:s,displayFn:i}}}}]),angular.module("xeditable").factory("editableCombodate",[function(){function a(t,e){if(this.$element=angular.element(t),"INPUT"!=this.$element[0].nodeName)throw"Combodate should be applied to INPUT element";var a=(new Date).getFullYear();this.defaults={format:"YYYY-MM-DD HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:a,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,customClass:"",roundTime:!0,smartDays:!0},this.options=angular.extend({},this.defaults,e),this.init()}return a.prototype={constructor:a,init:function(){if(this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=angular.element('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.options.smartDays){var e=this;this.$widget.find("select").bind("change",function(t){(angular.element(t.target).hasClass("month")||angular.element(t.target).hasClass("year"))&&e.fillCombo("day")})}this.$widget.find("select").css("width","auto"),this.$element.css("display","none").after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var n=this.options.template,i=this.options.customClass;return angular.forEach(this.map,function(t,e){t=t[0];var a=new RegExp(t+"+"),i=1<t.length?t.substring(1,2):t;n=n.replace(a,"{"+i+"}")}),n=n.replace(/ /g,"&nbsp;"),angular.forEach(this.map,function(t,e){var a=1<(t=t[0]).length?t.substring(1,2):t;n=n.replace("{"+a+"}",'<select class="'+e+" "+i+'"></select>')}),n},initCombos:function(){for(var t in this.map){var e=this.$widget[0].querySelectorAll("."+t);this["$"+t]=e.length?angular.element(e):null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var a=this["fill"+t.charAt(0).toUpperCase()+t.slice(1)](),i=e.val();e.html("");for(var n=0;n<a.length;n++)e.append('<option value="'+a[n][0]+'">'+a[n][1]+"</option>");e.val(i)}},fillCommon:function(t){var e,a=[];if("name"===this.options.firstItem){var i="function"==typeof(e=moment.relativeTime||moment.langData()._relativeTime)[t]?e[t](1,!0,t,!1):e[t];i=i.split(" ").reverse()[0],a.push(["",i])}else"empty"===this.options.firstItem&&a.push(["",""]);return a},fillDay:function(){var t,e,a=this.fillCommon("d"),i=-1!==this.options.template.indexOf("DD"),n=31;if(this.options.smartDays&&this.$month&&this.$year){var r=parseInt(this.$month.val(),10),s=parseInt(this.$year.val(),10);isNaN(r)||isNaN(s)||(n=moment([s,r]).daysInMonth())}for(e=1;e<=n;e++)t=i?this.leadZero(e):e,a.push([e,t]);return a},fillMonth:function(){var t,e,a=this.fillCommon("M"),i=-1!==this.options.template.indexOf("MMMM"),n=-1!==this.options.template.indexOf("MMM"),r=-1!==this.options.template.indexOf("MM");for(e=0;e<=11;e++)t=i?moment().date(1).month(e).format("MMMM"):n?moment().date(1).month(e).format("MMM"):r?this.leadZero(e+1):e+1,a.push([e,t]);return a},fillYear:function(){var t,e,a=[],i=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=i?e:(e+"").substring(2),a[this.options.yearDescending?"push":"unshift"]([e,t]);return a=this.fillCommon("y").concat(a)},fillHour:function(){var t,e,a=this.fillCommon("h"),i=-1!==this.options.template.indexOf("h"),n=(this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),r=i?12:23;for(e=i?1:0;e<=r;e++)t=n?this.leadZero(e):e,a.push([e,t]);return a},fillMinute:function(){var t,e,a=this.fillCommon("m"),i=-1!==this.options.template.indexOf("mm");for(e=0;e<=59;e+=this.options.minuteStep)t=i?this.leadZero(e):e,a.push([e,t]);return a},fillSecond:function(){var t,e,a=this.fillCommon("s"),i=-1!==this.options.template.indexOf("ss");for(e=0;e<=59;e+=this.options.secondStep)t=i?this.leadZero(e):e,a.push([e,t]);return a},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a");this.options.template.indexOf("A");return[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]},getValue:function(t){var e,i={},n=this,r=!1;return angular.forEach(this.map,function(t,e){if("ampm"!==e){var a="day"===e?1:0;return i[e]=n["$"+e]?parseInt(n["$"+e].val(),10):a,isNaN(i[e])?!(r=!0):void 0}}),r?"":(this.$ampm&&(12===i.hour?i.hour="am"===this.$ampm.val()?0:12:i.hour="am"===this.$ampm.val()?i.hour:i.hour+12),e=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(e),null===(t=void 0===t?this.options.format:t)?e.isValid()?e:null:e.isValid()?e.format(t):"")},setValue:function(t){if(t){var a="string"==typeof t?moment(t,this.options.format,!0):moment(t),i=this,n={};a.isValid()&&(angular.forEach(this.map,function(t,e){"ampm"!==e&&(n[e]=a[t[1]]())}),this.$ampm&&(12<=n.hour?(n.ampm="pm",12<n.hour&&(n.hour-=12)):(n.ampm="am",0===n.hour&&(n.hour=12))),angular.forEach(n,function(t,e){i["$"+e]&&("minute"===e&&1<i.options.minuteStep&&i.options.roundTime&&(t=r(i["$"+e],t)),"second"===e&&1<i.options.secondStep&&i.options.roundTime&&(t=r(i["$"+e],t)),i["$"+e].val(t))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(a.format(this.options.format)).triggerHandler("change"))}function r(t,n){var r={};return angular.forEach(t.children("option"),function(t,e){var a=angular.element(t).attr("value");if(""!==a){var i=Math.abs(a-n);(void 0===r.distance||i<r.distance)&&(r={value:a,distance:i})}}),r.value}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return t<=9?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},{getInstance:function(t,e){return new a(t,e)}}}]),angular.module("xeditable").factory("editableIcons",function(){return{default:{bs2:{ok:"icon-ok icon-white",cancel:"icon-remove",clear:"icon-trash"},bs3:{ok:"glyphicon glyphicon-ok",cancel:"glyphicon glyphicon-remove",clear:"glyphicon glyphicon-trash"}},external:{"font-awesome":{ok:"fa fa-check",cancel:"fa fa-times",clear:"fa fa-trash"}}}}),angular.module("xeditable").factory("editableThemes",function(){return{default:{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" data-ng-if="$error" data-ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>',resetTpl:'<button type="reset">clear</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" data-ng-if="$error" data-ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span></span></button>',resetTpl:'<button type="reset" class="btn btn-danger">clear</button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" data-ng-if="$error" data-ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span></span></button>',resetTpl:'<button type="reset" class="btn btn-danger">clear</button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableBsdate":case"editableTime":case"editableMonth":case"editableWeek":case"editablePassword":case"editableDatetimeLocal":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}break;case"editableCheckbox":this.editorEl.addClass("checkbox")}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}},semantic:{formTpl:'<form class="editable-wrap ui form" ng-class="{\'error\': $error}" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls ui fluid input" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error ui error message" data-ng-if="$error" data-ng-bind="$error"></div>',buttonsTpl:'<span class="mini ui buttons"></span>',submitTpl:'<button type="submit" class="ui primary button"><i class="ui check icon"></i></button>',cancelTpl:'<button type="button" class="ui button" ng-click="$form.$cancel()"><i class="ui cancel icon"></i></button>',resetTpl:'<button type="reset" class="ui button">clear</button>'}}});
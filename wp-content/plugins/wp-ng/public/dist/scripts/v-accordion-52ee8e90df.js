!function(f){"use strict";function e(d){return{restrict:"E",transclude:!0,controller:n,scope:{control:"=?",expandCb:"&?onexpand",collapseCb:"&?oncollapse",id:"@?"},link:{pre:function(e,n,i){e.allowMultiple=f.isDefined(i.multiple)&&(""===i.multiple||"true"===i.multiple)},post:function(i,a,e,n,t){if(t(i.$parent.$new(),function(e,n){n.$accordion=i.internalControl,i.id&&(n.$accordion.id=i.id),a.append(e)}),e.$set("role","tablist"),i.allowMultiple&&e.$set("aria-multiselectable","true"),f.isDefined(i.control)){f.forEach(["toggle","expand","collapse","expandAll","collapseAll","hasExpandedPane"],function(e){if(i.control[e])throw new Error("The `"+e+"` method can not be overwritten")});var o=f.extend({},i.internalControl,i.control);i.control=i.internalControl=o}else i.control=i.internalControl;d(function(){var e=f.isDefined(n.getAccordionId())?n.getAccordionId()+":onReady":"vAccordion:onReady";i.$emit(e)},0)}}}}function n(a){var i=this,t=!1;a.panes=[],a.expandCb=f.isFunction(a.expandCb)?a.expandCb:f.noop,a.collapseCb=f.isFunction(a.collapseCb)?a.collapseCb:f.noop,i.hasExpandedPane=function(){for(var e=!1,n=0,i=a.panes.length;n<i;n++){if(a.panes[n].isExpanded){e=!0;break}}return e},i.getPaneByIndex=function(n){var i;return f.forEach(a.panes,function(e){e.$parent&&f.isDefined(e.$parent.$index)&&e.$parent.$index===n&&(i=e)}),i||a.panes[n]},i.getPaneIndex=function(n){var i;return f.forEach(a.panes,function(e){e.$parent&&f.isDefined(e.$parent.$index)&&e===n&&(i=e.$parent.$index)}),f.isDefined(i)?i:a.panes.indexOf(n)},i.getPaneById=function(n){var i;return f.forEach(a.panes,function(e){e.id&&e.id===n&&(i=e)}),i},i.getPaneId=function(e){return e.id},i.getAccordionId=function(){return a.id},i.disable=function(){t=!0},i.enable=function(){t=!1},i.addPane=function(e){if(!a.allowMultiple&&i.hasExpandedPane()&&e.isExpanded)throw new Error("The `multiple` attribute can't be found");a.panes.push(e),e.isExpanded&&a.expandCb({index:i.getPaneIndex(e),id:e.id,pane:e})},i.focusNext=function(){for(var e=a.panes.length,n=0;n<e;n++){if(a.panes[n].isFocused){var i=n+1;i>a.panes.length-1&&(i=0),a.panes[i].paneElement.find("v-pane-header")[0].focus();break}}},i.focusPrevious=function(){for(var e=a.panes.length,n=0;n<e;n++){if(a.panes[n].isFocused){var i=n-1;i<0&&(i=a.panes.length-1),a.panes[i].paneElement.find("v-pane-header")[0].focus();break}}},i.toggle=function(e){!t&&e&&(a.allowMultiple||i.collapseAll(e),e.isExpanded=!e.isExpanded,e.isExpanded?a.expandCb({index:i.getPaneIndex(e),id:e.id,pane:e}):a.collapseCb({index:i.getPaneIndex(e),id:e.id,pane:e}))},i.expand=function(e){!t&&e&&(a.allowMultiple||i.collapseAll(e),e.isExpanded||(e.isExpanded=!0,a.expandCb({index:i.getPaneIndex(e),id:e.id,pane:e})))},i.collapse=function(e){!t&&e&&e.isExpanded&&(e.isExpanded=!1,a.collapseCb({index:i.getPaneIndex(e),id:e.id,pane:e}))},i.expandAll=function(){if(!t){if(!a.allowMultiple)throw new Error("The `multiple` attribute can't be found");f.forEach(a.panes,function(e){i.expand(e)})}},i.collapseAll=function(n){t||f.forEach(a.panes,function(e){e!==n&&i.collapse(e)})},a.internalControl={toggle:function(e){f.isString(e)?i.toggle(i.getPaneById(e)):i.toggle(i.getPaneByIndex(e))},expand:function(e){f.isString(e)?i.expand(i.getPaneById(e)):i.expand(i.getPaneByIndex(e))},collapse:function(e){f.isString(e)?i.collapse(i.getPaneById(e)):i.collapse(i.getPaneByIndex(e))},expandAll:i.expandAll,collapseAll:i.collapseAll,hasExpandedPane:i.hasExpandedPane}}function i(e,p,u){return{restrict:"E",require:"^vAccordion",transclude:!0,controller:a,scope:{isExpanded:"=?expanded",isDisabled:"=?ngDisabled",id:"@?"},link:function(i,a,e,t,n){n(i.$parent.$new(),function(e,n){n.$pane=i.internalControl,i.id&&(n.$pane.id=i.id),a.append(e)}),f.isDefined(i.isExpanded)||(i.isExpanded=f.isDefined(e.expanded)&&""===e.expanded),f.isDefined(e.disabled)&&(i.isDisabled=!0);var o=u.states,d=a.find("v-pane-header"),r=a.find("v-pane-content"),c=r.find("div"),l=t.getAccordionId();if(!d[0])throw new Error("The `v-pane-header` directive can't be found");if(!r[0])throw new Error("The `v-pane-content` directive can't be found");function s(e){e=f.isDefined(l)?l+":"+e:"vAccordion:"+e,i.$emit(e)}i.paneElement=a,i.paneContentElement=r,i.paneInnerElement=c,(i.accordionCtrl=t).addPane(i),i.$evalAsync(function(){i.isExpanded?(a.addClass(o.expanded),r.css("max-height","none").attr("aria-hidden","false"),d.attr({"aria-selected":"true","aria-expanded":"true"})):(r.css("max-height","0px").attr("aria-hidden","true"),d.attr({"aria-selected":"false","aria-expanded":"false"}))}),i.$watch("isExpanded",function(e,n){if(e===n)return!0;e?(t.disable(),r.attr("aria-hidden","false"),d.attr({"aria-selected":"true","aria-expanded":"true"}),s("onExpand"),p.addClass(a,o.expanded).then(function(){t.enable(),s("onExpandAnimationEnd")})):(t.disable(),r.attr("aria-hidden","true"),d.attr({"aria-selected":"false","aria-expanded":"false"}),s("onCollapse"),p.removeClass(a,o.expanded).then(function(){t.enable(),s("onCollapseAnimationEnd")}))})}}}function a(e){var n=this;n.isExpanded=function(){return e.isExpanded},n.toggle=function(){e.isAnimating||e.isDisabled||e.accordionCtrl.toggle(e)},n.expand=function(){e.isAnimating||e.isDisabled||e.accordionCtrl.expand(e)},n.collapse=function(){e.isAnimating||e.isDisabled||e.accordionCtrl.collapse(e)},n.focusPane=function(){e.isFocused=!0},n.blurPane=function(){e.isFocused=!1},e.internalControl={toggle:n.toggle,expand:n.expand,collapse:n.collapse,isExpanded:n.isExpanded}}f.module("vAccordion.config",[]).constant("accordionConfig",{states:{expanded:"is-expanded"},expandAnimationDuration:.5}).animation(".is-expanded",["$animateCss","accordionConfig",function(o,d){return{addClass:function(e,n,i){var a=f.element(e[0].querySelector("v-pane-content")),t=f.element(a[0].querySelector("div"))[0].offsetHeight;return o(a,{easing:"ease",from:{maxHeight:"0px"},to:{maxHeight:t+"px"},duration:d.expandAnimationDuration}).start().done(function(){a.css("max-height","none"),i()}),function(e){e&&a.css("max-height","none")}},removeClass:function(e,n,i){var a=f.element(e[0].querySelector("v-pane-content")),t=f.element(a[0].querySelector("div"))[0].offsetHeight;return o(a,{easing:"ease",from:{maxHeight:t+"px"},to:{maxHeight:"0px"},duration:d.expandAnimationDuration}).start().done(i),function(e){e&&a.css("max-height","0px")}}}}]),f.module("vAccordion.directives",[]),f.module("vAccordion",["vAccordion.config","vAccordion.directives"]),f.module("vAccordion.directives").directive("vAccordion",e),e.$inject=["$timeout"],n.$inject=["$scope"],f.module("vAccordion.directives").directive("vPane",i),i.$inject=["$timeout","$animate","accordionConfig"],a.$inject=["$scope"],f.module("vAccordion.directives").directive("vPaneContent",function(){return{restrict:"E",require:"^vPane",transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(e,n,i){i.$set("role","tabpanel"),i.$set("aria-hidden","true")}}}),f.module("vAccordion.directives").directive("vPaneHeader",function(){return{restrict:"E",require:["^vPane","^vAccordion"],transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(n,e,i,a){i.$set("role","tab"),i.$set("tabindex","0");var t=a[0],o=a[1],d=f.isDefined(i.inactive);function r(){if(d)return!1;n.$apply(function(){t.toggle()})}function c(e){32===e.keyCode||13===e.keyCode?(n.$apply(function(){t.toggle()}),e.preventDefault()):39===e.keyCode||40===e.keyCode?(n.$apply(function(){o.focusNext()}),e.preventDefault()):37!==e.keyCode&&38!==e.keyCode||(n.$apply(function(){o.focusPrevious()}),e.preventDefault())}e[0].onfocus=function(){t.focusPane()},e[0].onblur=function(){t.blurPane()},e.bind("click",r),e.bind("keydown",c),n.$on("$destroy",function(){e.unbind("click",r),e.unbind("keydown",c),e[0].onfocus=null,e[0].onblur=null})}}})}(angular);
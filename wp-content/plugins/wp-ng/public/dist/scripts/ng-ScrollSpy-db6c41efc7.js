!function(l,f,p,t){"use strict";p.module("ngScrollSpy",[]).value("scrollSpyDefaultConfig",{offset:200,delay:100}).run(["PositionFactory",function(t){t.refreshPositions(),p.element(l).bind("scroll",function(){t.refreshPositions()})}]).factory("PositionFactory",["$rootScope",function(t){return{position:[],refreshPositions:function(){this.position.documentHeight=Math.max(f.body.scrollHeight,f.body.offsetHeight,f.documentElement.clientHeight,f.documentElement.scrollHeight,f.documentElement.offsetHeight),this.position.windowTop=void 0!==l.pageYOffset?l.pageYOffset:(f.documentElement||f.body.parentNode||f.body).scrollTop,this.position.windowBottom=this.position.windowTop+l.innerHeight}}}]).factory("SpyFactory",["$rootScope",function(t){return{spies:[],addSpy:function(t){-1==this.spies.map(function(t){return t}).indexOf(t)&&(this.spies.push(t),this.broadcast())},removeSpy:function(t){var e=this.spies.map(function(t){return t}).indexOf(t);-1!=e&&(this.spies.splice(e,1),this.broadcast())},broadcast:function(){t.$broadcast("spied")}}}]).directive("scrollspyBroadcast",["scrollSpyDefaultConfig","scrollspyConfig","SpyFactory","PositionFactory",function(i,s,c,r){return{restrict:"A",scope:!0,link:function(t,e,o){p.extend(i,s.config);var n=parseInt(o.scrollspyOffset||i.offset);t.checkActive=function(){t.elementTop=e[0].offsetTop,t.elementBottom=t.elementTop+Math.max(e[0].scrollHeight,e[0].offsetHeight),t.elementTop-n<r.position.documentHeight-l.innerHeight?t.elementTop<=r.position.windowTop+n?c.addSpy(o.id):c.removeSpy(o.id):r.position.windowBottom>t.elementBottom-n?c.addSpy(o.id):c.removeSpy(o.id)},i.throttle?p.element(l).bind("scroll",i.throttle(function(){t.checkActive()},i.delay)):p.element(l).bind("scroll",function(){t.checkActive()}),p.element(f).ready(function(){t.checkActive()}),p.element(l).bind("resize",function(){t.checkActive()})}}}]).directive("scrollspyListen",["$timeout","SpyFactory",function(t,n){return{restrict:"A",scope:{scrollspyListen:"@",enabled:"@"},replace:!0,transclude:!0,template:function(t){var e=t[0].nodeName;return"<"+e+' data-ng-transclude data-ng-class="{active: enabled}"></'+e+">"},link:function(o){o.$on("spied",function(){t(function(){for(var t=o.scrollspyListen.split("|"),e=0;e<t.length&&!(o.enabled=t[e]===n.spies[n.spies.length-1]);e++);})})}}}]).provider("scrollspyConfig",function(){var e=this;return this.config={},this.$get=function(){var t={};return t.config=e.config,t},this})}(window,document,angular);